<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Halcyon days</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://lhalcyon.com/"/>
  <updated>2018-02-13T10:12:09.924Z</updated>
  <id>http://lhalcyon.com/</id>
  
  <author>
    <name>L</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å®ç°apkä¸Šä¼ è’²å…¬è‹±åè‡ªåŠ¨å‘é€é’‰é’‰é€šçŸ¥</title>
    <link href="http://lhalcyon.com/webhook_dingding-pgyer/"/>
    <id>http://lhalcyon.com/webhook_dingding-pgyer/</id>
    <published>2018-02-05T02:41:30.000Z</published>
    <updated>2018-02-13T10:12:09.924Z</updated>
    
    <content type="html"><![CDATA[<div class="note info"><p>Webhookæ˜¯ä¸€ä¸ªAPIæ¦‚å¿µï¼Œå¹¶ä¸”å˜å¾—è¶Šæ¥è¶Šæµè¡Œã€‚æˆ‘ä»¬èƒ½ç”¨äº‹ä»¶æè¿°çš„äº‹ç‰©è¶Šå¤šï¼Œwebhookçš„ä½œç”¨èŒƒå›´ä¹Ÿå°±è¶Šå¤§ã€‚Webhookä½œä¸ºä¸€ä¸ªè½»é‡çš„äº‹ä»¶å¤„ç†åº”ç”¨ï¼Œæ­£å˜å¾—è¶Šæ¥è¶Šæœ‰ç”¨ã€‚</p><p>å‡†ç¡®çš„è¯´webhookæ˜¯ä¸€ç§webå›è°ƒæˆ–è€…httpçš„push APIï¼Œæ˜¯å‘APPæˆ–è€…å…¶ä»–åº”ç”¨æä¾›å®æ—¶ä¿¡æ¯çš„ä¸€ç§æ–¹å¼ã€‚Webhookåœ¨æ•°æ®äº§ç”Ÿæ—¶ç«‹å³å‘é€æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä½ èƒ½å®æ—¶æ”¶åˆ°æ•°æ®ã€‚è¿™ä¸€ç§ä¸åŒäºå…¸å‹çš„APIï¼Œéœ€è¦ç”¨äº†å®æ—¶æ€§éœ€è¦è¶³å¤Ÿå¿«çš„è½®è¯¢ã€‚è¿™æ— è®ºæ˜¯å¯¹ç”Ÿäº§è¿˜æ˜¯å¯¹æ¶ˆè´¹è€…éƒ½æ˜¯é«˜æ•ˆçš„ï¼Œå”¯ä¸€çš„ç¼ºç‚¹æ˜¯åˆå§‹å»ºç«‹å›°éš¾ã€‚</p><p>Webhookæœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºåå‘APIï¼Œå› ä¸ºä»–æä¾›äº†APIè§„åˆ™ï¼Œä½ éœ€è¦è®¾è®¡è¦ä½¿ç”¨çš„APIã€‚Webhookå°†å‘ä½ çš„åº”ç”¨å‘èµ·httpè¯·æ±‚ï¼Œå…¸å‹çš„æ˜¯postè¯·æ±‚ï¼Œåº”ç”¨ç¨‹åºç”±è¯·æ±‚é©±åŠ¨ã€‚</p></div><p>åœ¨Androidå¼€å‘ä¸­ä¼šç»å¸¸æäº¤apkç»™æµ‹è¯•äººå‘˜è¿›è¡Œæµ‹è¯•,é€šå¸¸çš„åšæ³•æ˜¯å°†æ„å»ºå®Œæˆçš„åŒ…ä¸Šä¼ è‡³<a href="https://www.pgyer.com/" target="_blank" rel="noopener">è’²å…¬è‹±</a>,æµ‹è¯•äººå‘˜ç›´æ¥æ‰«ç ä¸‹è½½å¹¶å®‰è£…apkåŒ…ä»è€Œè¿›è¡Œæµ‹è¯•.ä¸€èˆ¬æˆ‘ä»¬ä¼šå°†æ„å»ºåŠå‘å¸ƒè¿‡ç¨‹è‡ªåŠ¨åŒ–,å¯å‚è€ƒ:</p><ol><li><a href="http://lhalcyon.com/linux-jenkins-gradle_build_android1/">Linux+Jenkins+Gradleæ„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(ä¸€)</a></li><li><a href="http://lhalcyon.com/linux-jenkins-gradle_build_android2/">Linux+Jenkins+Gradleæ„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(äºŒ)</a></li></ol><p>æ–‡ç« ä¸­å®ç°äº†apkä¸Šä¼ è’²å…¬è‹±åé‚®ä»¶é€šçŸ¥,å¯æ˜¯å®é™…ä¸­,å¤§å®¶å¯¹é‚®ä»¶çš„å…³æ³¨è¿œè¿œæ²¡æœ‰å¯¹<code>IM</code>æ¶ˆæ¯çš„å…³æ³¨åº¦é«˜,æ‰€ä»¥æ¥ä¸‹æ¥æœ¬æ–‡å°†è¯´æ˜,å®ç°<strong>ä¸Šä¼ apkåè‡ªåŠ¨å‘é€é’‰é’‰æ¶ˆæ¯,å°†æ›´æ–°å†…å®¹,apkç‰ˆæœ¬å·ç­‰ä¿¡æ¯é€šçŸ¥åˆ°æµ‹è¯•äººå‘˜</strong></p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fo5p9j5pi0j30bs0ckjtu.jpg" alt=""></p><a id="more"></a><h4 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h4><p>é¦–å…ˆç¯å¢ƒæ­å»ºæ˜¯<code>IntelliJ+SpringMVC+Gradle</code>æ„å»ºçš„,å¦‚æœ‰ç–‘é—®çš„åŒå­¦å¯å‚è€ƒ<a href="http://lhalcyon.com/ssm_build/">IDEA+Gradleåˆ›å»ºMyBatis+SpringMVCé¡¹ç›®</a>,é¡¹ç›®ä¸­ä¸»è¦æ˜¯å¯¹æ¥å£æ•°æ®çš„è°ƒæ•´åŠè½¬å‘,å®é™…ä¸Šæœªç”¨åˆ°<code>MyBatis</code>,å¯è‡ªè¡Œè¿›è¡Œå»é™¤ğŸ™„.</p><h4 id="æ¨¡å‹å»ºç«‹"><a href="#æ¨¡å‹å»ºç«‹" class="headerlink" title="æ¨¡å‹å»ºç«‹"></a>æ¨¡å‹å»ºç«‹</h4><p>å¯¹ç…§<a href="https://www.pgyer.com/doc/view/webhook_introduction" target="_blank" rel="noopener">è’²å…¬è‹±doc</a>ã€<a href="https://open-doc.dingtalk.com/docs/doc.htm?treeId=257&amp;articleId=105735&amp;docType=1" target="_blank" rel="noopener">é’‰é’‰doc</a>åˆ†åˆ«å»ºç«‹Java Bean.</p><p><code>PgyerMessage</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"action"</span>: <span class="string">"åº”ç”¨æ›´æ–°"</span>,</span><br><span class="line">  <span class="attr">"title"</span>: <span class="string">"OooPlay"</span>,</span><br><span class="line">  <span class="attr">"link"</span>: <span class="string">"https://www.pgyer.com/oooplay_test"</span>,</span><br><span class="line">  <span class="attr">"message"</span>: <span class="string">"æ‚¨çš„åº”ç”¨OooPlayæœ‰äº†æ–°çš„ç‰ˆæœ¬(2.4)æ›´æ–°ã€‚"</span>,</span><br><span class="line">  <span class="attr">"type"</span>: <span class="string">"updateVersion"</span>,</span><br><span class="line">  <span class="attr">"os_version"</span>: <span class="string">"2.4"</span>,</span><br><span class="line">  <span class="attr">"build_version"</span>: <span class="string">"139"</span>,</span><br><span class="line">  <span class="attr">"created"</span>: <span class="string">"2015-10-09 11:25:16"</span>,</span><br><span class="line">  <span class="attr">"updated"</span>: <span class="string">"2015-10-09 11:25:16"</span>,</span><br><span class="line">  <span class="attr">"timestamp"</span>: <span class="number">1444361118</span>,</span><br><span class="line">  <span class="attr">"appsize"</span>: <span class="string">"2238036"</span>,</span><br><span class="line">  <span class="attr">"device_type"</span>: 'iOS',</span><br><span class="line">  <span class="attr">"notes"</span>: <span class="string">"ä¿®å¤äº†ä¸€äº›å°å¼±æ™ºçš„å°bug"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PgyerMessage</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String action;</span><br><span class="line">    <span class="keyword">public</span> String title;</span><br><span class="line">    <span class="keyword">public</span> String link;</span><br><span class="line">    <span class="keyword">public</span> String message;</span><br><span class="line">    <span class="keyword">public</span> String type;</span><br><span class="line">    <span class="keyword">public</span> String os_version;</span><br><span class="line">    <span class="keyword">public</span> String build_version;</span><br><span class="line">    <span class="keyword">public</span> String created;</span><br><span class="line">    <span class="keyword">public</span> String updated;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> timestamp;</span><br><span class="line">    <span class="keyword">public</span> String appsize;</span><br><span class="line">    <span class="keyword">public</span> String device_type;</span><br><span class="line">    <span class="keyword">public</span> String notes;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"PgyerMessage&#123;"</span> +</span><br><span class="line">                <span class="string">"action='"</span> + action + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", title='"</span> + title + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", link='"</span> + link + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", message='"</span> + message + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", type='"</span> + type + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", os_version='"</span> + os_version + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", build_version='"</span> + build_version + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", created='"</span> + created + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", updated='"</span> + updated + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", timestamp="</span> + timestamp +</span><br><span class="line">                <span class="string">", appsize='"</span> + appsize + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", device_type='"</span> + device_type + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", notes='"</span> + notes + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤å¤„æœ‰ä¸ªå°æŠ€å·§,<code>IDEA IntelliJ</code>æœ‰ä¸ªå¥½ç”¨çš„æ’ä»¶<code>GsonFormat</code>å¯ä¸€é”®å°†<code>Json</code>å­—ç¬¦ä¸²è½¬æ¢ä¸º<code>Java Model</code></p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fo5h69y1fmg30m20fnnbx.gif" alt=""></p><p>é’‰é’‰æ¶ˆæ¯åˆ™åˆ†ä¸ºå‡ ç§ç±»å‹,å…·ä½“ä¸¾ä¾‹å¯å‚è€ƒ<a href="https://open-doc.dingtalk.com/docs/doc.htm?treeId=257&amp;articleId=105735&amp;docType=1" target="_blank" rel="noopener">é’‰é’‰doc</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_LINK = <span class="string">"link"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_MARKDOWN = <span class="string">"markdown"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_TEXT = <span class="string">"text"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_ACTIONCARD = <span class="string">"actionCard"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_FEEDCARD = <span class="string">"feedCard"</span>;</span><br></pre></td></tr></table></figure><p>æ­¤å¤„æˆ‘ä»¬é€‰æ‹©<code>markdown</code>ç±»å‹.ä¸ºäº†ä¾¿äºæ‹“å±•,æ­¤å¤„å°†æ¶ˆæ¯æŠ½å–äº†ä¸ªåŸºç±»<code>BaseDingMessage</code>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseDingMessage</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_LINK = <span class="string">"link"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_MARKDOWN = <span class="string">"markdown"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_TEXT = <span class="string">"text"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_ACTIONCARD = <span class="string">"actionCard"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_FEEDCARD = <span class="string">"feedCard"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String msgtype;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> AtBean at;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">AtBean</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">boolean</span> isAtAll;</span><br><span class="line">        <span class="keyword">public</span> List&lt;String&gt; atMobiles;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MarkdownMessage</span>  <span class="keyword">extends</span> <span class="title">BaseDingMessage</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> MarkdownBean markdown;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MarkdownBean</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> String title;</span><br><span class="line">        <span class="keyword">public</span> String text;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h4><p>é¦–å…ˆåœ¨<code>build.gradle</code>ä¸­å¯¼å…¥ä¾èµ–</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">group:</span> <span class="string">'com.alibaba'</span>, <span class="string">name:</span> <span class="string">'fastjson'</span>, <span class="string">version:</span> <span class="string">'1.2.45'</span></span><br><span class="line">compile <span class="string">group:</span> <span class="string">'com.squareup.okhttp3'</span>, <span class="string">name:</span> <span class="string">'okhttp'</span>, <span class="string">version:</span> <span class="string">'3.9.0'</span></span><br></pre></td></tr></table></figure><p><code>fastjson</code>æ˜¯ç”¨åŠ›å•Šè½¬åŒ–<code>json</code>,<code>okhttp</code>ç”¨æ¥ç½‘ç»œè¯·æ±‚</p><p><code>spring-mvc.xml</code>åŠ å…¥jsoné…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«ææ§åˆ¶å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.lhalcyon.webhook.controller"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾æ¸²æŸ“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"internalResourceViewResolver"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/views/"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ§åˆ¶å™¨æ˜ å°„å™¨å’Œæ§åˆ¶å™¨é€‚é…å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"supportedMediaTypes"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">value</span>&gt;</span>text/html;charset=UTF-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">value</span>&gt;</span>application/json<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">value</span>&gt;</span>application/xml;charset=UTF-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é™æ€èµ„æºæ˜ å°„å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">"/statics/**"</span> <span class="attr">location</span>=<span class="string">"/WEB-INF/statics/"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¶ˆæ¯å‘é€æœåŠ¡<code>DingServiceImpl.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Service</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DingServiceImpl</span> <span class="keyword">implements</span> <span class="title">DingService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = Logger.getLogger(DingServiceImpl.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">(BaseDingMessage message,String url)</span> </span>&#123;</span><br><span class="line">        MediaType jsonType = MediaType.parse(<span class="string">"application/json; charset=utf-8"</span>);</span><br><span class="line">        okhttp3.RequestBody body = okhttp3.RequestBody.create(jsonType, JSON.toJSONString(message));</span><br><span class="line">        <span class="keyword">final</span> Request request = <span class="keyword">new</span> Request.Builder()</span><br><span class="line">                .url(url)</span><br><span class="line">                .post(body)</span><br><span class="line">                .build();</span><br><span class="line">        OkHttpClient client = OkhttpProvider.get();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            client.newCall(request).execute();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è’²å…¬è‹±è¯·æ±‚æ§åˆ¶å™¨<code>PgyerController.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/pgyer"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PgyerController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DingService dingService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = Logger.getLogger(PgyerController.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/update"</span>,method = RequestMethod.POST)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> BaseDingMessage <span class="title">apkUpdate</span><span class="params">(@RequestBody PgyerMessage pgyerMessage)</span></span>&#123;</span><br><span class="line">        BaseDingMessage dingMessage = WebhookConverter.pgyer2Ding(pgyerMessage);</span><br><span class="line">        dingService.send(dingMessage, Urls.DING_TEST);</span><br><span class="line">        logger.info(dingMessage);</span><br><span class="line">        <span class="keyword">return</span> dingMessage;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>Urls.DING_TEST</code>ä¸ºé’‰é’‰æœºå™¨äººçš„ä¼šè¯tokenåœ°å€,åé¢ä¼šè¯´æ˜å¦‚ä½•åˆ›å»º/è·å–</p><p>æ¶ˆæ¯è½¬æ¢å™¨<code>WebhookConverter.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebhookConverter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = Logger.getLogger(WebhookConverter.class);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MarkdownMessage <span class="title">pgyer2Ding</span><span class="params">(PgyerMessage pgyerMessage)</span></span>&#123;</span><br><span class="line">        MarkdownMessage message = <span class="keyword">new</span> MarkdownMessage();</span><br><span class="line">        message.msgtype = BaseDingMessage.TYPE_MARKDOWN;</span><br><span class="line">        message.markdown = <span class="keyword">new</span> MarkdownMessage.MarkdownBean();</span><br><span class="line">        message.markdown.title = pgyerMessage.device_type + <span class="string">"è’²å…¬è‹±æ›´æ–°"</span>;</span><br><span class="line">        StringBuilder builder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        builder.append(<span class="string">"#### "</span>).append(pgyerMessage.device_type).append(<span class="string">"æµ‹è¯•åŒ…å·²æ›´æ–°! \n\n"</span>)</span><br><span class="line">        .append(<span class="string">"###### version: "</span>).append(pgyerMessage.os_version).append(<span class="string">" | build "</span>).append(pgyerMessage.build_version).append(<span class="string">"\n\n"</span>)</span><br><span class="line">        .append(<span class="string">"æ›´æ–°å†…å®¹:\n"</span>).append(<span class="string">"&gt; "</span>).append(pgyerMessage.notes).append(<span class="string">"\n\n"</span>)</span><br><span class="line">        .append(<span class="string">"![qr_code_test](å›¾ç‰‡åœ°å€)\n\n"</span>)</span><br><span class="line">        .append(<span class="string">"[ä¸‹è½½åœ°å€](https://www.pgyer.com/ä½ çš„apkåœ°å€) å¯†ç :ä½ çš„å¯†ç \n"</span>).append(<span class="string">" @18810100000 @18810100001 @18818100002 "</span>);</span><br><span class="line"></span><br><span class="line">        message.markdown.text = builder.toString();</span><br><span class="line">        message.at = <span class="keyword">new</span> BaseDingMessage.AtBean();</span><br><span class="line">        message.at.isAtAll = <span class="keyword">false</span>;</span><br><span class="line">        message.at.atMobiles = Arrays.asList(<span class="string">"18818100000"</span>,<span class="string">"18818100001"</span>,<span class="string">"18818100002"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šéœ€è‡ªè¡Œä¿®æ”¹å†…å®¹.</p><p>ç„¶ååˆ›å»ºé’‰é’‰æœºå™¨äºº.åˆ›å»ºå››è¿</p><p><strong>1</strong></p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fo6gzkjikoj3090020wem.jpg" alt=""></p><p><strong>2</strong></p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fo6gzmv1ouj30ic02o3yo.jpg" alt=""></p><p><strong>3</strong></p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fo6gzpzdxtj30ib0ezq4b.jpg" alt=""></p><p><strong>4</strong></p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fo6hhbxrdvj30id0eyjs7.jpg" alt=""></p><p>ç‚¹æ­¤å¤åˆ¶é’‰é’‰æœºå™¨äººä¼šè¯token,å»ºç«‹<code>Urls.java</code>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Urls</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ææµ‹ç¾¤æœºå™¨äººtoken</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String DING_TEST = <span class="string">"é’‰é’‰token"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤å¤„çš„<code>Ding_Test</code>å³ä¸ºä¸Šé¢å¤åˆ¶çš„åœ°å€</p><p>è‡³æ­¤,ä»£ç ä¸»è¦å®ç°ç±»å·²ç»å®Œæˆ,æ¥ä¸‹æ¥éœ€è¦å»é…ç½®è’²å…¬è‹±<code>webhook</code></p><h4 id="é…ç½®webhook"><a href="#é…ç½®webhook" class="headerlink" title="é…ç½®webhook"></a>é…ç½®webhook</h4><p>æ‰“å¼€<a href="https://www.pgyer.com/" target="_blank" rel="noopener">è’²å…¬è‹±</a>åº”ç”¨è®¾ç½®</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fo6hs1ezmcj31220ifwgj.jpg" alt=""></p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fo6hylvq9ij30jw0dnq3q.jpg" alt=""></p><p>åˆ›å»ºwebhook,å†™å…¥<code>PgyerController</code>çš„æ›´æ–°è¯·æ±‚åœ°å€,å¦‚æœé…ç½®ä¸æœ¬æ–‡çš„ç›¸åŒ,åœ°å€åˆ™ä¸º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://ä½ çš„åœ°å€:ç«¯å£/webhook-1.0-SNAPSHOT/pgyer/update</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>webhook-1.0-SNAPSHOT</code>ä¸ºwaråŒ…åœ¨tomcatè§£å‹åçš„åç§°</p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fo6huk9u4yj30bo05rt9a.jpg" alt=""></p><p>done!  ä¹‹ååªè¦ä¸Šä¼ æˆåŠŸå,å³æœ‰é’‰é’‰æ¶ˆæ¯é€šçŸ¥å¹¶@æµ‹è¯•äººå‘˜äº†! </p><p>è®©æˆ‘ä»¬å†çœ‹ä¸‹æ‰“åŒ…åçš„æ¶ˆæ¯é€šçŸ¥!</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fo5p9j5pi0j30bs0ckjtu.jpg" alt=""></p><p>ç±»ä¼¼çš„,ä»£ç <code>push</code>,<code>merge</code>ä¹Ÿå¯ä»¥åšæˆwebhookæ¶ˆæ¯.</p><p><code>Github</code>ã€<code>Gitlab</code>æ—¢æœ‰æˆç†Ÿçš„å¯¹æ¥æœºå™¨äºº.è€Œç¬”è€…ä½¿ç”¨çš„<a href="https://coding.net/" target="_blank" rel="noopener">Coding</a>æ˜¯æ²¡æœ‰ä¸é’‰é’‰åšå¯¹æ¥çš„,æ­¤æ—¶å¯è‡ªå®šä¹‰æœºå™¨äººå®ç°,æœ‰å…´è¶£çš„åŒå­¦å¯å‚è€ƒä¸Šé¢çš„æ•™ç¨‹è‡ªè¡Œå®ç°.</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fo710z7ywvj309t070aa2.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note info&quot;&gt;&lt;p&gt;Webhookæ˜¯ä¸€ä¸ªAPIæ¦‚å¿µï¼Œå¹¶ä¸”å˜å¾—è¶Šæ¥è¶Šæµè¡Œã€‚æˆ‘ä»¬èƒ½ç”¨äº‹ä»¶æè¿°çš„äº‹ç‰©è¶Šå¤šï¼Œwebhookçš„ä½œç”¨èŒƒå›´ä¹Ÿå°±è¶Šå¤§ã€‚Webhookä½œä¸ºä¸€ä¸ªè½»é‡çš„äº‹ä»¶å¤„ç†åº”ç”¨ï¼Œæ­£å˜å¾—è¶Šæ¥è¶Šæœ‰ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å‡†ç¡®çš„è¯´webhookæ˜¯ä¸€ç§webå›è°ƒæˆ–è€…httpçš„push APIï¼Œæ˜¯å‘APPæˆ–è€…å…¶ä»–åº”ç”¨æä¾›å®æ—¶ä¿¡æ¯çš„ä¸€ç§æ–¹å¼ã€‚Webhookåœ¨æ•°æ®äº§ç”Ÿæ—¶ç«‹å³å‘é€æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä½ èƒ½å®æ—¶æ”¶åˆ°æ•°æ®ã€‚è¿™ä¸€ç§ä¸åŒäºå…¸å‹çš„APIï¼Œéœ€è¦ç”¨äº†å®æ—¶æ€§éœ€è¦è¶³å¤Ÿå¿«çš„è½®è¯¢ã€‚è¿™æ— è®ºæ˜¯å¯¹ç”Ÿäº§è¿˜æ˜¯å¯¹æ¶ˆè´¹è€…éƒ½æ˜¯é«˜æ•ˆçš„ï¼Œå”¯ä¸€çš„ç¼ºç‚¹æ˜¯åˆå§‹å»ºç«‹å›°éš¾ã€‚&lt;/p&gt;
&lt;p&gt;Webhookæœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºåå‘APIï¼Œå› ä¸ºä»–æä¾›äº†APIè§„åˆ™ï¼Œä½ éœ€è¦è®¾è®¡è¦ä½¿ç”¨çš„APIã€‚Webhookå°†å‘ä½ çš„åº”ç”¨å‘èµ·httpè¯·æ±‚ï¼Œå…¸å‹çš„æ˜¯postè¯·æ±‚ï¼Œåº”ç”¨ç¨‹åºç”±è¯·æ±‚é©±åŠ¨ã€‚&lt;/p&gt;&lt;/div&gt;
&lt;p&gt;åœ¨Androidå¼€å‘ä¸­ä¼šç»å¸¸æäº¤apkç»™æµ‹è¯•äººå‘˜è¿›è¡Œæµ‹è¯•,é€šå¸¸çš„åšæ³•æ˜¯å°†æ„å»ºå®Œæˆçš„åŒ…ä¸Šä¼ è‡³&lt;a href=&quot;https://www.pgyer.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;è’²å…¬è‹±&lt;/a&gt;,æµ‹è¯•äººå‘˜ç›´æ¥æ‰«ç ä¸‹è½½å¹¶å®‰è£…apkåŒ…ä»è€Œè¿›è¡Œæµ‹è¯•.ä¸€èˆ¬æˆ‘ä»¬ä¼šå°†æ„å»ºåŠå‘å¸ƒè¿‡ç¨‹è‡ªåŠ¨åŒ–,å¯å‚è€ƒ:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://lhalcyon.com/linux-jenkins-gradle_build_android1/&quot;&gt;Linux+Jenkins+Gradleæ„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(ä¸€)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://lhalcyon.com/linux-jenkins-gradle_build_android2/&quot;&gt;Linux+Jenkins+Gradleæ„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(äºŒ)&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ–‡ç« ä¸­å®ç°äº†apkä¸Šä¼ è’²å…¬è‹±åé‚®ä»¶é€šçŸ¥,å¯æ˜¯å®é™…ä¸­,å¤§å®¶å¯¹é‚®ä»¶çš„å…³æ³¨è¿œè¿œæ²¡æœ‰å¯¹&lt;code&gt;IM&lt;/code&gt;æ¶ˆæ¯çš„å…³æ³¨åº¦é«˜,æ‰€ä»¥æ¥ä¸‹æ¥æœ¬æ–‡å°†è¯´æ˜,å®ç°&lt;strong&gt;ä¸Šä¼ apkåè‡ªåŠ¨å‘é€é’‰é’‰æ¶ˆæ¯,å°†æ›´æ–°å†…å®¹,apkç‰ˆæœ¬å·ç­‰ä¿¡æ¯é€šçŸ¥åˆ°æµ‹è¯•äººå‘˜&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/006tNc79gy1fo5p9j5pi0j30bs0ckjtu.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Webhook" scheme="http://lhalcyon.com/categories/Webhook/"/>
    
    
      <category term="Dingding" scheme="http://lhalcyon.com/tags/Dingding/"/>
    
      <category term="Webhook" scheme="http://lhalcyon.com/tags/Webhook/"/>
    
      <category term="Pgyer" scheme="http://lhalcyon.com/tags/Pgyer/"/>
    
  </entry>
  
  <entry>
    <title>Linuxå‡çº§Glibc2.14ä¸­æ–‡ä¹±ç </title>
    <link href="http://lhalcyon.com/update_glibc_issue/"/>
    <id>http://lhalcyon.com/update_glibc_issue/</id>
    <published>2018-02-01T02:28:00.000Z</published>
    <updated>2018-02-04T08:03:16.352Z</updated>
    
    <content type="html"><![CDATA[<div class="note info"><p><code>CenterOS</code>ä¸Šé»˜è®¤çš„<code>Glibc</code>ç‰ˆæœ¬ä¸º<code>2.12.1</code>,ç”±äºæˆ‘ä»¬çš„Androidé¡¹ç›®ä½¿ç”¨åˆ°äº†<code>JNI</code>,å°†é¡¹ç›®æ„å»ºéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šæ—¶ä¼šé‡åˆ°é—®é¢˜<code>&#39;GLIBC_2.14&#39; not found</code>,é‚£ä¹ˆå°±éœ€è¦å‡çº§<code>Glibc</code>è‡³<code>2.14</code>.å‡çº§çš„æ•™ç¨‹ç½‘ä¸Šå¾ˆå¤š,å¯æ˜¯å´æ¼æ‰äº†ä¸€ä¸ªæ­¥éª¤,å¯¼è‡´åé¢ä¸­æ–‡ä¹±ç çš„é—®é¢˜.æœ¬ç¯‡ä¼šåšä¸€ä¸ªå…¨é¢çš„è§£è¯´</p></div><a id="more"></a><h4 id="1-Glibcä¸‹è½½"><a href="#1-Glibcä¸‹è½½" class="headerlink" title="1. Glibcä¸‹è½½"></a>1. Glibcä¸‹è½½</h4><p>é¦–å…ˆä»<a href="http://www.gnu.org/software/libc/" target="_blank" rel="noopener">Glibc Download</a>ä¸‹è½½åŒ…,è¿™é‡Œé€‰æ‹©æ˜¯<a href="http://ftp.gnu.org/gnu/glibc/glibc-2.14.tar.gz" target="_blank" rel="noopener">Glibc 2.14</a></p><h4 id="2-å®‰è£…"><a href="#2-å®‰è£…" class="headerlink" title="2. å®‰è£…"></a>2. å®‰è£…</h4><p>ä¸Šä¼ è‡³æœåŠ¡å™¨,è¿›å…¥ç›®å½•è§£å‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf glibc-2.14.tar.gz</span><br></pre></td></tr></table></figure><p>è¿›å…¥è§£å‹åçš„ç›®å½•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd glibc-2.14</span><br></pre></td></tr></table></figure><p>æ¥ç€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir /opt/build</span><br><span class="line">cd build</span><br><span class="line">../configure --prefix=/opt/glibc-2.14</span><br><span class="line">make -j4</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>è‹¥é¡ºåˆ©çš„è¯,è‡³æ­¤åˆ™å®‰è£…æˆåŠŸäº†.</p><h5 id="issue"><a href="#issue" class="headerlink" title="issue"></a>issue</h5><p><strong>1. åœ¨make installè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Can&apos;t open configuration file /opt/glibc-2.14/etc/ld.so.conf: No such file or directory</span><br></pre></td></tr></table></figure><p>ç¼ºå°‘äº†æŠ¥é”™çš„ç¼–è¯‘æ–‡ä»¶<code>ld.so.conf</code>.é€šè¿‡findå‘½ä»¤æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶é…ç½®</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1fo0wcs8mt3j30ap00vt8t.jpg" alt=""></p><p>ç„¶åæ‹·è´æ–‡ä»¶è‡³å¯¹åº”æ–‡ä»¶ç›®å½•,ç»§ç»­ç¼–è¯‘</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp /etc/ld.so.conf /opt/glibc-2.14/etc/ </span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘æˆåŠŸ,æ¥ç€å®šä¹‰ä¸‹ç¯å¢ƒå˜é‡å³å¯</p><h4 id="3-è¡¥å……"><a href="#3-è¡¥å……" class="headerlink" title="3. è¡¥å……"></a>3. è¡¥å……</h4><div class="note warning"><p>é€šå¸¸çš„æ•™ç¨‹è‡³æ­¤å°±ç»“æŸäº†.æœ€åˆç¬”è€…å‚è€ƒç½‘ä¸Šçš„æ•™ç¨‹ä¹Ÿæ˜¯åšåˆ°è¿™é‡Œ.å½“æ—¶è·‘ç¨‹åºä¹Ÿæ²¡é—®é¢˜,ç›´åˆ°å‰æ®µæ—¶é—´å¤§æ¥¼åœç”µ,æœåŠ¡å™¨é‡å¯å,é€šè¿‡æœåŠ¡å™¨ä¸Š<code>Jenkins</code>æ‰“åŒ…ä¸Šä¼ åˆ°è’²å…¬è‹±çš„ä¸­æ–‡ä¿¡æ¯å…¨æ˜¯ä¹±ç ! ç›¸å½“äºæœåŠ¡å™¨çš„ç¼–ç æ–‡ä»¶ä¸¢å¤±äº†,æ‰€æœ‰ä¸­æ–‡éƒ½ä¼šä¹±ç .</p><p>æ˜¯å› ä¸ºé—æ¼äº†<code>localedata</code>æœªç¼–è¯‘,åœ¨æœåŠ¡å™¨é‡å¯å,<code>Glibc2.14</code>æ‰¾ä¸åˆ°å¯¹åº”ç‰ˆæœ¬<code>2.14</code>çš„<code>glibc locale</code>æ–‡ä»¶.</p></div><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fo0rvnge0hj30es0363yp.jpg" alt=""></p><p>æ­£ç¡®æ“ä½œæ˜¯,åœ¨<code>make</code>&amp;<code>make install</code>å®Œæˆåç»§ç»­ç¼–è¯‘localåŒ…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make localedata/install-locales</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘éœ€è¦ä¸€äº›æ—¶é—´,å®Œæˆåé‡å¯æœåŠ¡å™¨å³å¯ç”Ÿæ•ˆ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutdown -r now</span><br></pre></td></tr></table></figure><hr><ol><li>å‚è€ƒ: <a href="http://blog.csdn.net/clirus/article/details/62425498" target="_blank" rel="noopener">http://blog.csdn.net/clirus/article/details/62425498</a></li><li>å‚è€ƒ: <a href="http://blog.csdn.net/fzuzhanghao1993/article/details/77650500" target="_blank" rel="noopener">http://blog.csdn.net/fzuzhanghao1993/article/details/77650500</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note info&quot;&gt;&lt;p&gt;&lt;code&gt;CenterOS&lt;/code&gt;ä¸Šé»˜è®¤çš„&lt;code&gt;Glibc&lt;/code&gt;ç‰ˆæœ¬ä¸º&lt;code&gt;2.12.1&lt;/code&gt;,ç”±äºæˆ‘ä»¬çš„Androidé¡¹ç›®ä½¿ç”¨åˆ°äº†&lt;code&gt;JNI&lt;/code&gt;,å°†é¡¹ç›®æ„å»ºéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šæ—¶ä¼šé‡åˆ°é—®é¢˜&lt;code&gt;&amp;#39;GLIBC_2.14&amp;#39; not found&lt;/code&gt;,é‚£ä¹ˆå°±éœ€è¦å‡çº§&lt;code&gt;Glibc&lt;/code&gt;è‡³&lt;code&gt;2.14&lt;/code&gt;.å‡çº§çš„æ•™ç¨‹ç½‘ä¸Šå¾ˆå¤š,å¯æ˜¯å´æ¼æ‰äº†ä¸€ä¸ªæ­¥éª¤,å¯¼è‡´åé¢ä¸­æ–‡ä¹±ç çš„é—®é¢˜.æœ¬ç¯‡ä¼šåšä¸€ä¸ªå…¨é¢çš„è§£è¯´&lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="Linux" scheme="http://lhalcyon.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://lhalcyon.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>IDEA+Gradleåˆ›å»ºMyBatis+SpringMVCé¡¹ç›®</title>
    <link href="http://lhalcyon.com/ssm_build/"/>
    <id>http://lhalcyon.com/ssm_build/</id>
    <published>2018-01-29T01:58:20.000Z</published>
    <updated>2018-02-04T08:03:00.288Z</updated>
    
    <content type="html"><![CDATA[<div class="note info"><p>Gradleæ˜¯ä¸€ä¸ªåŸºäºApache Antå’ŒApache Mavenæ¦‚å¿µçš„é¡¹ç›®è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·.å®ƒä½¿ç”¨ä¸€ç§åŸºäºGroovyçš„ç‰¹å®šé¢†åŸŸè¯­è¨€(DSL)æ¥å£°æ˜é¡¹ç›®è®¾ç½®,æŠ›å¼ƒäº†åŸºäºXMLçš„å„ç§ç¹çé…ç½®.</p><p>IDEA å…¨ç§°IntelliJ IDEA,æ˜¯javaè¯­è¨€å¼€å‘çš„é›†æˆç¯å¢ƒ,IntelliJåœ¨ä¸šç•Œè¢«å…¬è®¤ä¸ºæœ€å¥½çš„javaå¼€å‘å·¥å…·ä¹‹ä¸€,å°¤å…¶åœ¨æ™ºèƒ½ä»£ç åŠ©æ‰‹ã€ä»£ç è‡ªåŠ¨æç¤ºã€é‡æ„ã€J2EEæ”¯æŒã€Antã€JUnitã€CVSæ•´åˆã€ä»£ç å®¡æŸ¥ã€ åˆ›æ–°çš„GUIè®¾è®¡ç­‰æ–¹é¢çš„åŠŸèƒ½å¯ä»¥è¯´æ˜¯è¶…å¸¸çš„.</p></div><a id="more"></a><p>ä»¥ä¸Šä¸ºç™¾åº¦çš„ç®€ä»‹.ä»äº‹Androidçš„ç«¥é‹åº”è¯¥ä¸éš¾å‘ç°<code>Gradle</code>ä»¥åŠ<code>Android Studio</code>çš„å¼º(hen)å¤§(ka).ğŸ¤«è€Œ<code>AS</code>æ˜¯åŸºäº<code>IntelliJ IDEA</code>å¼€å‘çš„.ä¹ æƒ¯äº†<code>Gradle</code>çš„ä¾¿æ·,äºæ˜¯å¼€å§‹åŸºäº<code>Gradle</code>+<code>IDEA</code>æ„å»º<code>Java</code>é¡¹ç›®.</p><h4 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h4><h5 id="1-æ•°æ®åº“MySql"><a href="#1-æ•°æ®åº“MySql" class="headerlink" title="1. æ•°æ®åº“MySql"></a>1. æ•°æ®åº“MySql</h5><p>åœ¨<a href="https://www.mysql.com/downloads/" target="_blank" rel="noopener">MySql Downloads</a>ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬å¹¶å®‰è£…</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1fnyn5efs2vj306t05st8w.jpg" alt=""></p><div class="note warning"><p>æ­¤å¤„ç¬”è€…åœ¨<code>macOS</code>ä¸Šå®‰è£…<code>5.7.21</code>åæ‰“å¼€ç³»ç»Ÿåå¥½è®¾ç½®,é‡åˆ°<code>æ— æ³•åŠ è½½MySqlé¢æ¿</code>çš„é—®é¢˜.ä¸€ç•ªæœç´¢ğŸ”åå‘ç°æ˜¯macOSç‰ˆæœ¬ä¸MySqlä¸å…¼å®¹,é€‰æ‹©ä½ç‰ˆæœ¬çš„MySqlå¦‚<code>5.6.39</code>å³å¯.</p></div><p><img src="https://ws3.sinaimg.cn/large/006tNc79ly1fnyncy23rdj30r404ndg9.jpg" alt=""></p><h5 id="2-IntelliJ-IDEA"><a href="#2-IntelliJ-IDEA" class="headerlink" title="2. IntelliJ IDEA"></a>2. IntelliJ IDEA</h5><p>è¯·è‡ªè¡Œå®‰(po)è£…(jie).</p><h5 id="3-Tomcat"><a href="#3-Tomcat" class="headerlink" title="3. Tomcat"></a>3. Tomcat</h5><p>è¯·è‡ªè¡Œä¸‹è½½è§£å‹.å¦‚è‹¥æ˜¯<code>macOS</code>æˆ–æ˜¯<code>Linux</code>ä¸Šè§£å‹åéœ€è¿›å…¥<code>bin</code>ç›®å½•æ‰§è¡Œä¸‹å‘½ä»¤<code>chmod u+x *.sh</code>ä¿®æ”¹æƒé™</p><h4 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h4><p>ç‚¹å‡»  Create New Project</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fnynr052i2j30qc0kk75x.jpg" alt=""></p><p>é€‰æ‹©åŸºäºGradleçš„Java Webé¡¹ç›®</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fnyo6iusc6j30qc0kcjs5.jpg" alt=""></p><p>å¡«å†™GroupIdå’ŒArtifactId</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fnyo8vutcjj30qc0kcwfq.jpg" alt=""></p><p>é€‰æ‹©gradle.å¯ä½¿ç”¨é»˜è®¤çš„,å¯ä½¿ç”¨æœ¬åœ°çš„</p><p>æ¥ç€é€‰æ‹©é¡¹ç›®ç›®å½•,åŸºæœ¬é¡¹ç›®åˆ›å»ºå¥½äº†,æ¥ä¸‹æ¥è¿›å…¥æ–‡ä»¶é…ç½®</p><h4 id="æ–‡ä»¶é…ç½®"><a href="#æ–‡ä»¶é…ç½®" class="headerlink" title="æ–‡ä»¶é…ç½®"></a>æ–‡ä»¶é…ç½®</h4><p>é¦–å…ˆåˆ›å»º<code>java</code>å’Œ<code>resources</code>ç›®å½•,å¹¶ä¸”åˆ›å»ºåŒ…ä»¥åŠ<code>web.xml</code>.</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79ly1fnyqetghs0j309b0b4aai.jpg" alt=""></p><h5 id="log4j-properties"><a href="#log4j-properties" class="headerlink" title="log4j.properties"></a>log4j.properties</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#è®¾ç½®æ—¥å¿—çš„çº§åˆ«ï¼Œå®šä¹‰æ—¥å¿—ä¿¡æ¯çš„è¾“å‡ºç›®çš„</span><br><span class="line">log4j.rootLogger=DEBUG, A1 ,R</span><br><span class="line">#å®šä¹‰A1çš„è¾“å‡ºç›®çš„åœ°ä¸ºæ§åˆ¶å°</span><br><span class="line">log4j.appender.A1=org.apache.log4j.ConsoleAppender</span><br><span class="line">#å¸ƒå±€ä¸º PatternLayout å¯ä»¥çµæ´»åœ°æŒ‡å®šå¸ƒå±€æ¨¡å¼ã€‚</span><br><span class="line">log4j.appender.A1.layout=org.apache.log4j.PatternLayout</span><br><span class="line">#è®¾ç½®è¾“å‡ºæ ¼å¼</span><br><span class="line">log4j.appender.A1.layout.ConversionPattern=%-d&#123;yyyy-MM-dd HH\:mm\:ss&#125; [%c]-[%p] %m%n</span><br><span class="line">#å®šä¹‰Rçš„è¾“å‡ºç›®çš„åœ°ä¸ºæ–‡ä»¶ï¼Œå¹¶ä¸”æ–‡ä»¶å¤§å°åˆ°è¾¾æŒ‡å®šå°ºå¯¸çš„æ—¶å€™äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶</span><br><span class="line">log4j.appender.R=org.apache.log4j.RollingFileAppender</span><br><span class="line">#è®¾ç½®è¾“å‡ºçš„æ–‡ä»¶åœ°å€</span><br><span class="line">log4j.appender.R.File=/Users/xx/Documents/ServerLog</span><br><span class="line">#è®¾ç½®æ–‡ä»¶å¤§å°ä¼Ÿ100 kb æ–‡ä»¶åˆ°è¾¾100æ—¶ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œ</span><br><span class="line">#MaxBackupIndex æœ€å¤§è®°å½•çš„æ–‡ä»¶æ•°ä¸º1 æŸ¥è¿‡ä¸€ä¸ªæ–‡ä»¶åˆ é™¤æ–‡ä»¶è¾ƒæ—©çš„ã€‚</span><br><span class="line">log4j.appender.R.MaxFileSize=100KB </span><br><span class="line">log4j.appender.R.MaxBackupIndex=1</span><br><span class="line">#ä»¥ä¸‹å’Œä¸Šé¢ä¸€æ ·</span><br><span class="line">log4j.appender.R.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šè¾“å‡ºæ–‡ä»¶åœ°å€è‡ªè¡Œæ›´æ”¹</p><h5 id="generatorConfig-xml"><a href="#generatorConfig-xml" class="headerlink" title="generatorConfig.xml"></a>generatorConfig.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE generatorConfiguration</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">classPathEntry</span> <span class="attr">location</span>=<span class="string">"$&#123;jarDirection&#125;"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">"mysql"</span> <span class="attr">targetRuntime</span>=<span class="string">"MyBatis3"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">"$&#123;driverClass&#125;"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">connectionURL</span>=<span class="string">"$&#123;connectionURL&#125;"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">userId</span>=<span class="string">"$&#123;userId&#125;"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">password</span>=<span class="string">"$&#123;password&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"forceBigDecimals"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetPackage</span>=<span class="string">"$&#123;modelPackage&#125;"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetProject</span>=<span class="string">"$&#123;src_main_java&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"trimStrings"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetPackage</span>=<span class="string">"$&#123;sqlMapperPackage&#125;"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetProject</span>=<span class="string">"$&#123;src_main_java&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">"XMLMAPPER"</span></span></span><br><span class="line"><span class="tag">                             <span class="attr">targetPackage</span>=<span class="string">"$&#123;mapperPackage&#125;"</span></span></span><br><span class="line"><span class="tag">                             <span class="attr">targetProject</span>=<span class="string">"$&#123;src_main_java&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- æ¯ä¸€ä¸ªæ•°æ®åº“è¡¨éƒ½å¯¹åº”ä¸€ä¸ªå¯¹åº”çš„tableå±æ€§ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">"book"</span> <span class="attr">domainObjectName</span>=<span class="string">"Book"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="gradle-properties"><a href="#gradle-properties" class="headerlink" title="gradle.properties"></a>gradle.properties</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># ç”Ÿæˆçš„modelç±»æ‰€åœ¨åŒ…</span><br><span class="line">modelPackage=com.lhalcyon.webhook.domain</span><br><span class="line"># ç”Ÿæˆçš„mapperæ¥å£ç±»æ‰€åœ¨åŒ…</span><br><span class="line">mapperPackage=com.lhalcyon.webhook.mapper</span><br><span class="line"># ç”Ÿæˆçš„mapper xmlæ–‡ä»¶æ‰€åœ¨åŒ…</span><br><span class="line">sqlMapperPackage=com.lhalcyon.webhook.mapper</span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ–¹ä¾¿æ‰«æ,å°†mapper xmlä»¥åŠæ¥å£ç±»æ”¾åœ¨äº†åŒä¸€åŒ…ä¸‹äº† ğŸ˜•</p><h5 id="jdbc-mysql-properties"><a href="#jdbc-mysql-properties" class="headerlink" title="jdbc-mysql.properties"></a>jdbc-mysql.properties</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># å°†jdbc.jarDirectionåçš„å†…å®¹æ›´æ”¹ä¸ºgradleä¸‹è½½çš„</span><br><span class="line"># mysql-connector-java-5.1.x.jaræ‰€åœ¨çš„è·¯å¾„ï¼Œgradleè‡ªåŠ¨ä¸‹è½½çš„è·¯å¾„å¦‚ä¸‹æ‰€ç¤º</span><br><span class="line">jdbc.jarDirection=/Users/ceyx/.gradle/caches/modules-2/files-2.1/mysql</span><br><span class="line">/mysql-connector-java/5.1.38/dbbd7cd309ce167ec8367de4e41c63c2c8593cc5</span><br><span class="line">/mysql-connector-java-5.1.38.jar</span><br><span class="line"></span><br><span class="line">jdbc.driverClassName=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://localhost:3306/halcyon</span><br><span class="line">jdbc.user=root</span><br><span class="line">jdbc.pass=root</span><br></pre></td></tr></table></figure><p>è‡ªè¡Œå¡«å†™jdbc.jarDirectionè·¯å¾„</p><h5 id="build-gradle"><a href="#build-gradle" class="headerlink" title="build.gradle"></a>build.gradle</h5><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">group <span class="string">'com.lhalcyon'</span></span><br><span class="line">version <span class="string">'1.0-SNAPSHOT'</span></span><br><span class="line"></span><br><span class="line">apply <span class="string">plugin:</span> <span class="string">'java'</span></span><br><span class="line">apply <span class="string">plugin:</span> <span class="string">'war'</span></span><br><span class="line"></span><br><span class="line">sourceCompatibility = <span class="number">1.8</span></span><br><span class="line"></span><br><span class="line">repositories &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">configurations &#123;</span><br><span class="line">    mybatisGenerator</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯»å–configæ–‡ä»¶å¤¹ä¸­å¯¹åº”çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">ext&#123;</span><br><span class="line">    <span class="keyword">def</span> prop = <span class="keyword">new</span> Properties();</span><br><span class="line">    file(<span class="string">"src/main/resources/config/mybatis/jdbc-mysql.properties"</span>)</span><br><span class="line">            .withInputStream &#123;</span><br><span class="line">        prop.load(it)</span><br><span class="line">    &#125;</span><br><span class="line">    file(<span class="string">"src/main/resources/config/mybatis/gradle.properties"</span>)</span><br><span class="line">            .withInputStream &#123;</span><br><span class="line">        prop.load(it)</span><br><span class="line">    &#125;</span><br><span class="line">    prop.each &#123;</span><br><span class="line">        project.extensions.add(<span class="string">"$it.key"</span>,it.value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    testCompile <span class="string">group:</span> <span class="string">'junit'</span>, <span class="string">name:</span> <span class="string">'junit'</span>, <span class="string">version:</span> <span class="string">'4.12'</span></span><br><span class="line"></span><br><span class="line">    compile <span class="string">'org.codehaus.groovy:groovy-all:2.3.11'</span></span><br><span class="line">    compile <span class="string">'jstl:jstl:1.2'</span></span><br><span class="line">    compile <span class="string">'org.springframework:spring-aop:4.2.4.RELEASE'</span></span><br><span class="line">    compile <span class="string">'org.springframework:spring-context:4.2.4.RELEASE'</span></span><br><span class="line">    compile <span class="string">'org.springframework:spring-beans:4.2.4.RELEASE'</span></span><br><span class="line">    compile <span class="string">'org.springframework:spring-web:4.2.4.RELEASE'</span></span><br><span class="line">    compile <span class="string">'org.springframework:spring-webmvc:4.2.4.RELEASE'</span></span><br><span class="line">    compile <span class="string">'org.springframework:spring-tx:4.2.4.RELEASE'</span></span><br><span class="line">    compile <span class="string">'org.springframework:spring-jdbc:4.2.4.RELEASE'</span></span><br><span class="line">    compile <span class="string">'org.springframework:spring-test:4.2.4.RELEASE'</span></span><br><span class="line">    compile <span class="string">'mysql:mysql-connector-java:5.1.38'</span></span><br><span class="line">    compile <span class="string">'org.mybatis.generator:mybatis-generator-core:1.3.2'</span></span><br><span class="line">    compile <span class="string">'org.mybatis:mybatis-spring:1.2.3'</span></span><br><span class="line">    compile <span class="string">'org.mybatis:mybatis:3.3.0'</span></span><br><span class="line">    compile <span class="string">'junit:junit:4.12'</span></span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'commons-dbcp'</span>, <span class="string">name:</span> <span class="string">'commons-dbcp'</span>, <span class="string">version:</span> <span class="string">'1.4'</span></span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'org.aspectj'</span>, <span class="string">name:</span> <span class="string">'aspectjweaver'</span>, <span class="string">version:</span> <span class="string">'1.8.13'</span></span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'log4j'</span>, <span class="string">name:</span> <span class="string">'log4j'</span>, <span class="string">version:</span> <span class="string">'1.2.17'</span></span><br><span class="line">    </span><br><span class="line">    mybatisGenerator <span class="string">'org.mybatis.generator:mybatis-generator-core:1.3.2'</span></span><br><span class="line">    mybatisGenerator <span class="string">'mysql:mysql-connector-java:5.1.38'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ©ç”¨antåˆ›å»ºä¸€ä¸ªè‡ªåŠ¨ç”ŸæˆMyBatisç›®å½•æ–‡ä»¶çš„task</span></span><br><span class="line">task mybatisGenerate &lt;&lt; &#123;</span><br><span class="line">    ant.properties[<span class="string">'targetProject'</span>] = projectDir.path</span><br><span class="line">    ant.properties[<span class="string">'jarDirection'</span>] = project[<span class="string">'jdbc.jarDirection'</span>]</span><br><span class="line">    ant.properties[<span class="string">'driverClass'</span>] = project[<span class="string">'jdbc.driverClassName'</span>]</span><br><span class="line">    ant.properties[<span class="string">'connectionURL'</span>] = project[<span class="string">'jdbc.url'</span>]</span><br><span class="line">    ant.properties[<span class="string">'userId'</span>] = project[<span class="string">'jdbc.user'</span>]</span><br><span class="line">    ant.properties[<span class="string">'password'</span>] = project[<span class="string">'jdbc.pass'</span>]</span><br><span class="line">    ant.properties[<span class="string">'src_main_java'</span>] = sourceSets.main.java.srcDirs[<span class="number">0</span>].path</span><br><span class="line">    ant.properties[<span class="string">'src_main_resources'</span>] = sourceSets.main.resources.srcDirs[<span class="number">0</span>].path</span><br><span class="line">    ant.properties[<span class="string">'modelPackage'</span>] = project[<span class="string">'modelPackage'</span>]</span><br><span class="line">    ant.properties[<span class="string">'mapperPackage'</span>] = project[<span class="string">'mapperPackage'</span>]</span><br><span class="line">    ant.properties[<span class="string">'sqlMapperPackage'</span>] = project[<span class="string">'sqlMapperPackage'</span>]</span><br><span class="line"></span><br><span class="line">    ant.taskdef(</span><br><span class="line"><span class="symbol">            name:</span> <span class="string">'mbgenerator'</span>,</span><br><span class="line"><span class="symbol">            classname:</span> <span class="string">'org.mybatis.generator.ant.GeneratorAntTask'</span>,</span><br><span class="line"><span class="symbol">            classpath:</span> configurations.mybatisGenerator.asPath</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    ant.mbgenerator(<span class="string">overwrite:</span> <span class="literal">true</span>,</span><br><span class="line"><span class="symbol">            configfile:</span> <span class="string">'src/main/resources/config/mybatis/generatorConfig.xml'</span>,</span><br><span class="line"><span class="symbol">            verbose:</span> <span class="literal">true</span>) &#123;</span><br><span class="line">        propertyset &#123;</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'targetProject'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'jarDirection'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'userId'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'driverClass'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'connectionURL'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'password'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'src_main_java'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'src_main_resources'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'modelPackage'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'mapperPackage'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'sqlMapperPackage'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€<code>Sync</code>æˆ–è€…ç‚¹å‡»<code>Import Changes</code></p><p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1fnyqi90urpj30d00bpgm1.jpg" alt=""></p><p>IDEAå°±ä¼šä¸‹è½½ä¾èµ–åŒ…äº†.ä¾èµ–ç‰ˆæœ¬å·å‡æºäº<a href="http://mvnrepository.com/" target="_blank" rel="noopener">Maven Repository</a></p><h5 id="spring-mvc-xml"><a href="#spring-mvc-xml" class="headerlink" title="spring-mvc.xml"></a>spring-mvc.xml</h5><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1fnzjop49bzj30kr0fs76u.jpg" alt=""></p><p>å¯¼å…¥ä¾èµ–å,åˆ™å¯ç›´æ¥åˆ›å»ºspringç›¸å…³xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«ææ§åˆ¶å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.lhalcyon.webhook.controller"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾æ¸²æŸ“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"internalResourceViewResolver"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/views/"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ§åˆ¶å™¨æ˜ å°„å™¨å’Œæ§åˆ¶å™¨é€‚é…å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é™æ€èµ„æºæ˜ å°„å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">"/statics/**"</span> <span class="attr">location</span>=<span class="string">"/WEB-INF/statics/"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="applicationContext-dao-xml"><a href="#applicationContext-dao-xml" class="headerlink" title="applicationContext-dao.xml"></a>applicationContext-dao.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span> <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span> <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åŠ è½½é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:config/mybatis/jdbc-mysql.properties"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.apache.commons.dbcp.BasicDataSource"</span></span></span><br><span class="line"><span class="tag"><span class="attr">destroy-method</span>=<span class="string">"close"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driverClassName&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.user&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.pass&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxActive"</span> <span class="attr">value</span>=<span class="string">"10"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxIdle"</span> <span class="attr">value</span>=<span class="string">"5"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mapperé…ç½® --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è®©springç®¡ç†sqlsessionfactory ä½¿ç”¨mybatiså’Œspringæ•´åˆåŒ…ä¸­çš„ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è‡ªåŠ¨æ‰«æmapping.xmlæ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;property name="mapperLocations" value="classpath*:com/lhalcyon/mapper/*.xml"/&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®Mapperæ‰«æå™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.lhalcyon.webhook.mapper"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="applicationContext-service-xml"><a href="#applicationContext-service-xml" class="headerlink" title="applicationContext-service.xml"></a>applicationContext-service.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span> <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span> <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®åŒ…æ‰«æå™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.lhalcyon.webhook.service"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="applicationContext-trans-xml"><a href="#applicationContext-trans-xml" class="headerlink" title="applicationContext-trans.xml"></a>applicationContext-trans.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span> <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span> <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ•°æ®æº --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é€šçŸ¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä¼ æ’­è¡Œä¸º --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"insert*"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"delete*"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"update*"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"query*"</span> <span class="attr">propagation</span>=<span class="string">"SUPPORTS"</span> <span class="attr">read-only</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"get*"</span> <span class="attr">propagation</span>=<span class="string">"SUPPORTS"</span> <span class="attr">read-only</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- åˆ‡é¢ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span></span></span><br><span class="line"><span class="tag"><span class="attr">pointcut</span>=<span class="string">"execution(* com.lhalcyon.webhook.service.*.*(..))"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="web-xml"><a href="#web-xml" class="headerlink" title="web.xml"></a>web.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee</span></span></span><br><span class="line"><span class="tag"><span class="string">  http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"3.0"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åˆå§‹åŒ–spring å®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:config/spring/applicationContext-*.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®å‰ç«¯æ§åˆ¶å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>index-dispather<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath*:config/spring/spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>index-dispather<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è§£å†³postä¹±ç é—®é¢˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Tomcatéƒ¨ç½²"><a href="#Tomcatéƒ¨ç½²" class="headerlink" title="Tomcatéƒ¨ç½²"></a>Tomcatéƒ¨ç½²</h4><p>Run-&gt;Edit Configurations</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1fnzmln11yij30tg0k1adg.jpg" alt=""></p><p>æœ‰fixé¡¹ç‚¹å‡»é…ç½®å³å¯,ç„¶åè¿è¡Œ.</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1fnzn37f1aoj30pn0fwmxz.jpg" alt=""></p><h4 id="MyBatisé…ç½®"><a href="#MyBatisé…ç½®" class="headerlink" title="MyBatisé…ç½®"></a>MyBatisé…ç½®</h4><p>æ•°æ®åº“ç®¡ç†å·¥å…·ç¬”è€…ä½¿ç”¨çš„æ˜¯</p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1fnzowf9ux6j304e03nwej.jpg" alt=""></p><p>é¦–å…ˆåˆ›å»ºæ•°æ®åº“<code>halcyon</code>,æ¥ç€åˆ›å»º<code>book</code>è¡¨,ç”¨äºåé¢çš„mybatis generator</p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1fnzp5ws50uj30lc0ayabp.jpg" alt=""></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> book (</span><br><span class="line">book_id <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">book_name <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">author <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="string">'ä½šå'</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨gradleåˆ›å»ºmybatis generator task</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1fnzpb6bulwj30d50d5aap.jpg" alt=""></p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1fnzpcwz6psj30k1041mxk.jpg" alt=""></p><p>è¿è¡Œtask</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1fnzperdym0j30d40cfdgm.jpg" alt=""></p><p>è¿è¡ŒæˆåŠŸå,ä¼šç”Ÿæˆä¸æ•°æ®åº“è¡¨å¯¹åº”çš„<code>java bean</code>ä¸<code>dao</code>æ–‡ä»¶,å³é¡¹ç›®é‡Œçš„<code>Book.java</code>ã€<code>BookExample.java</code>ã€<code>BookMapper.xml</code>ã€<code>BookMapper.java</code></p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1fnzpgj444lj307a04vjrn.jpg" alt=""></p><p><code>generatorConfig.xml</code>é…ç½®å‚æ•°å¯è‡ªè¡Œæœç´¢è¡¥å……ä¿®æ”¹ğŸ¤”.æ‰‹åŠ¨è¦†å†™ä¸‹<code>Book</code>çš„<code>toString</code>æ–¹æ³•æ–¹ä¾¿æ—¥å¿—è¾“å‡º</p><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><p>ä¸ºäº†æ»¡è¶³åŒæ—¶æµ‹è¯•<code>Spring</code>ã€<code>SpringMVC</code>ã€<code>Mybatis</code>,ç¬”è€…å»ºç«‹ä¸€ä¸ª<code>Controller</code>é€šè¿‡<code>Get</code>è¯·æ±‚è¿›è¡Œ<code>CURD</code>æ“ä½œ.</p><h5 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title">BookService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookMapper bookMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertBook</span><span class="params">(Book book)</span> </span>&#123;</span><br><span class="line">        bookMapper.insert(book);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateBook</span><span class="params">(Book book)</span> </span>&#123;</span><br><span class="line">        bookMapper.updateByPrimaryKey(book);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Book&gt; <span class="title">getAllBooks</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        BookExample example = <span class="keyword">new</span> BookExample();</span><br><span class="line">        <span class="keyword">return</span> bookMapper.selectByExample(example);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteBookById</span><span class="params">(<span class="keyword">int</span> bookId)</span> </span>&#123;</span><br><span class="line">        BookExample example = <span class="keyword">new</span> BookExample();</span><br><span class="line">        example.createCriteria().andBookIdEqualTo(bookId);</span><br><span class="line">        bookMapper.deleteByExample(example);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span>  Logger logger = Logger.getLogger(BookController.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/insert"</span>,method = RequestMethod.GET)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">insert</span><span class="params">(String bookName,String author)</span></span>&#123;</span><br><span class="line">        Book book = <span class="keyword">new</span> Book();</span><br><span class="line">        book.setBookName(bookName);</span><br><span class="line">        book.setAuthor(author);</span><br><span class="line">        bookService.insertBook(book);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> queryStrings();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/update"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">updateAuthor</span><span class="params">(<span class="keyword">int</span> bookId,String bookName,String author)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        Book book = <span class="keyword">new</span> Book();</span><br><span class="line">        book.setBookId(bookId);</span><br><span class="line">        book.setBookName(bookName);</span><br><span class="line">        book.setAuthor(author);</span><br><span class="line">        bookService.updateBook(book);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> queryStrings();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/delete"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">deleteBook</span><span class="params">(<span class="keyword">int</span> bookId)</span></span>&#123;</span><br><span class="line">        bookService.deleteBookById(bookId);</span><br><span class="line">        <span class="keyword">return</span> queryStrings();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/find_all"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAllBooks</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Book&gt; books = bookService.getAllBooks();</span><br><span class="line">        logger.info(books);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> books.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">queryStrings</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Book&gt; allBooks = bookService.getAllBooks();</span><br><span class="line">        <span class="keyword">return</span> allBooks.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›´æ¥é€šè¿‡è¯·æ±‚åœ°å€,è·å¾—ç»“æœ</p><p>æ’å…¥:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/webhook/insert?bookName=java&amp;author=jack</span><br></pre></td></tr></table></figure><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1fnztpvs98uj30hs041mxn.jpg" alt=""></p><p>æ‰§è¡Œåç›´æ¥å°†æ•°æ®åº“ä¸­æ‰€æœ‰bookè®°å½•è¾“å‡º,æ–¹ä¾¿è§‚å¯Ÿ.</p><p>å…¶å®ƒæ“ä½œç±»ä¼¼</p><p>æ›´æ–°:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/webhook/update?bookId=3&amp;bookName=go&amp;author=joe</span><br></pre></td></tr></table></figure><p>åˆ é™¤:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/webhook/delete?bookId=4</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢(æ‰€æœ‰):</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/webhook/find_all</span><br></pre></td></tr></table></figure><div class="note warning"><p>å¦‚è‹¥å‘ç”Ÿ<code>500 Invalid bound statement (not found)</code>ç±»ä¼¼é”™è¯¯,ä¸€èˆ¬æ˜¯æ²¡æœ‰æ‰«æåˆ°Mapper.xml.å…¶ä¸­ä¸€ç§æƒ…å†µä¸‹æ˜¯xmlæ ¹æœ¬æ²¡è¢«æ‰“åŒ…è¿›war.éœ€è¦åœ¨<code>build.gradle</code>ä¸­è¿›è¡Œé…ç½®,å¹¶ä¸”é…ç½®å<code>Syncæˆ–Import Changes</code>,å†é‡æ–°ç”¨å‘½ä»¤<code>./gradlew build</code>æ‰å¯ç”Ÿæ•ˆ.</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//å°†srcæ–‡ä»¶å¤¹ä¸­çš„èµ„æºæ–‡ä»¶åŒæ—¶æ‰“åŒ…</span><br><span class="line">processResources &#123;</span><br><span class="line">    from(&apos;src/main/java&apos;) &#123;</span><br><span class="line">        include &apos;**/*.xml&apos;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤SpringMVC+MyBatis+Gradleé¡¹ç›®å·²ç»æ„å»ºæµ‹è¯•å®Œæ¯•.</p><p>ä»£ç å·²ä¸Šä¼ <a href="https://github.com/lhalcyon/ssm_basic/tree/master" target="_blank" rel="noopener">GayHub</a>,æ–‡ç« è‹¥å¯¹å„ä½å¤§ä½¬æœ‰å¸®åŠ©,éº»çƒ¦é¡ºæ‰‹ç‚¹ä¸ªstar~ â¤ï¸</p><p>å„ä½å¯èƒ½å‘ç°äº†,<code>SSM</code>é…ç½®èµ·æ¥æ¯”è¾ƒç¹ç,ç›¸æ¯”ä¹‹ä¸‹,<code>SpringBoot</code>å°±ç²¾ç®€äº†è®¸å¤š.åé¢æœ‰æœºä¼š,æˆ‘ä»¬å†æ¥ç»†è¯´ ğŸ¤’</p><hr><ol><li>å‚è€ƒ: <a href="https://www.cnblogs.com/bojuetech/p/5844413.html" target="_blank" rel="noopener">https://www.cnblogs.com/bojuetech/p/5844413.html</a></li><li>å‚è€ƒ: <a href="http://blog.csdn.net/kingboyworld/article/details/78251425" target="_blank" rel="noopener">http://blog.csdn.net/kingboyworld/article/details/78251425</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note info&quot;&gt;&lt;p&gt;Gradleæ˜¯ä¸€ä¸ªåŸºäºApache Antå’ŒApache Mavenæ¦‚å¿µçš„é¡¹ç›®è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·.å®ƒä½¿ç”¨ä¸€ç§åŸºäºGroovyçš„ç‰¹å®šé¢†åŸŸè¯­è¨€(DSL)æ¥å£°æ˜é¡¹ç›®è®¾ç½®,æŠ›å¼ƒäº†åŸºäºXMLçš„å„ç§ç¹çé…ç½®.&lt;/p&gt;
&lt;p&gt;IDEA å…¨ç§°IntelliJ IDEA,æ˜¯javaè¯­è¨€å¼€å‘çš„é›†æˆç¯å¢ƒ,IntelliJåœ¨ä¸šç•Œè¢«å…¬è®¤ä¸ºæœ€å¥½çš„javaå¼€å‘å·¥å…·ä¹‹ä¸€,å°¤å…¶åœ¨æ™ºèƒ½ä»£ç åŠ©æ‰‹ã€ä»£ç è‡ªåŠ¨æç¤ºã€é‡æ„ã€J2EEæ”¯æŒã€Antã€JUnitã€CVSæ•´åˆã€ä»£ç å®¡æŸ¥ã€ åˆ›æ–°çš„GUIè®¾è®¡ç­‰æ–¹é¢çš„åŠŸèƒ½å¯ä»¥è¯´æ˜¯è¶…å¸¸çš„.&lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="Java" scheme="http://lhalcyon.com/categories/Java/"/>
    
    
      <category term="IntelliJ" scheme="http://lhalcyon.com/tags/IntelliJ/"/>
    
      <category term="Spring" scheme="http://lhalcyon.com/tags/Spring/"/>
    
      <category term="SpringMVC" scheme="http://lhalcyon.com/tags/SpringMVC/"/>
    
      <category term="MyBatis" scheme="http://lhalcyon.com/tags/MyBatis/"/>
    
  </entry>
  
  <entry>
    <title>Android Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š</title>
    <link href="http://lhalcyon.com/as_warning/"/>
    <id>http://lhalcyon.com/as_warning/</id>
    <published>2017-09-25T02:10:12.000Z</published>
    <updated>2018-02-04T08:02:13.101Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Android-Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š"><a href="#Android-Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š" class="headerlink" title="Android Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š"></a>Android Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š</h2><div class="note info"><p>æœ€è¿‘åœ¨å¼€å‘ä¸­,ç»„å†…çš„å°ä¼™ä¼´åœ¨å¼€å‘ä¸­ä½¿ç”¨äº†é«˜ç‰ˆæœ¬SDK25çš„Api,ä½†æ˜¯æˆ‘ä»¬çš„é¡¹ç›®æœ€ä½å…¼å®¹14,å› æ­¤æµ‹è¯•åœ¨5.1ä¸Šçš„æ‰‹æœºç›´æ¥å°±å´©æºƒäº†,é—®å…¶åœ¨å¼€å‘ä¸­æ²¡æœ‰çœ‹åˆ°è­¦å‘Šå—,å›å¤è¯´ç¡®å®æ²¡çœ‹åˆ°.åæ¥æŸ¥ç©¶ä¸€ä¸‹,ä»–çš„å·¥å…·ä¸Šç¡®å®æ²¡æœ‰æ˜¾ç¤º.æœ¬æ–‡ç®€è¿°ä¸‹å¦‚ä½•æ‰‹åŠ¨å»è°ƒæ•´å…¼å®¹Apiçš„æç¤ºç­‰çº§,é¿å…åœ¨å¼€å‘ä¸­ç”¨åˆ°é«˜ç‰ˆæœ¬çš„Apiå´ä¸è‡ªå¯Ÿ.</p></div><p>é¦–å…ˆwinç”µè„‘æ˜¯æ‰“å¼€<code>Android Studio</code>çš„ <code>Setting</code>  ,macæ˜¯æ‰“å¼€<code>Android Studio</code>çš„ <code>Preferences</code></p><p>é€‰æ‹©<code>Editor</code>ä¸­çš„<code>Inspections</code> å¯¹<code>Calling new methods on older versions</code>è¿›è¡Œå‹¾é€‰å¹¶ä¸”é…ç½®ä¸º<code>Error</code>çº§åˆ«</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_170925/as_inspection_api_compatible.png" alt="api_compatible"></p><p>å¦‚æ­¤ç®€å•å³å¯æå®š.å¦‚é‡åˆ°å…¶ä»–è­¦å‘Š,é”™è¯¯ä»£ç æ²¡æç¤ºä¹Ÿå¯ç±»ä¼¼è¿›è¡Œæ“ä½œé…ç½®.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Android-Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š&quot;&gt;&lt;a href=&quot;#Android-Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š&quot; class=&quot;headerlink&quot; title=&quot;Android Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š&quot;&gt;&lt;/a&gt;Android Studioç‰ˆæœ¬å…¼
      
    
    </summary>
    
      <category term="Android" scheme="http://lhalcyon.com/categories/Android/"/>
    
    
      <category term="Android Studio" scheme="http://lhalcyon.com/tags/Android-Studio/"/>
    
  </entry>
  
  <entry>
    <title>Xcodeä»£ç æç¤ºé—®é¢˜å¤„ç†</title>
    <link href="http://lhalcyon.com/xcode-idiot/"/>
    <id>http://lhalcyon.com/xcode-idiot/</id>
    <published>2017-08-15T05:32:45.000Z</published>
    <updated>2018-02-04T08:02:27.836Z</updated>
    
    <content type="html"><![CDATA[<div class="note info"><p>æœ€è¿‘åœ¨å†™<code>Swift</code>.å¯¹äºç¬”è€…è¿™ç§è¢«<code>JetBrains</code>çš„å‡ å¤§IDEå·¥å…·ç»™æƒ¯åçš„å¼€å‘è€…,Xcodeçš„ä»£ç æç¤ºçœŸæ˜¯æ— åŠ›åæ§½,å…ˆä¸è®ºæ™ºèƒ½æç¤ºåº¦,å°±è¿åŸºæœ¬çš„æç¤ºä¹Ÿç»å¸¸å‡ºä¸æ¥.è¿™é‡Œå°±ç®€å•æ€»ç»“ä¸‹iOSåŒäº‹ä¼ æˆçš„å‡ æ‹›è§£å†³åŠæ³•</p></div><h3 id="1-Clean-Project"><a href="#1-Clean-Project" class="headerlink" title="1.Clean Project"></a>1.Clean Project</h3><p>æœ€ç›´æ¥çš„åŠæ³•å°±æ˜¯æ¸…ç©ºé¡¹ç›®.</p><p>å¯è§†åŒ–æŒ‰é’®å…¥å£å†å“ªè¯·è‡ªè¡ŒæŸ¥æ‰¾,ç¬”è€…ä¸€èˆ¬æ˜¯ç”¨<code>Command+Shift+K</code>è¿›è¡Œæ¸…ç©º,æ­¤æ–¹æ³•ä¸€èˆ¬æœ‰æ•ˆ,ç¼ºç‚¹æ˜¯ä¼šé‡æ–°ç¼–è¯‘é¡¹ç›®,æ¯”è¾ƒæ…¢</p><h3 id="2-æ¸…ç©ºXcodeç¼“å­˜"><a href="#2-æ¸…ç©ºXcodeç¼“å­˜" class="headerlink" title="2.æ¸…ç©ºXcodeç¼“å­˜"></a>2.æ¸…ç©ºXcodeç¼“å­˜</h3><p>å‰å¾€Xcodeçš„ç¼“å­˜ç›®å½•,æ¸…ç©ºé¡¹ç›®ç¼–è¯‘ç¼“å­˜.</p><p>å…·ä½“æ“ä½œä¸ºå³é”®Finder<code>å‰å¾€æ–‡ä»¶å¤¹</code>æ–‡ä»¶å¤¹è·¯å¾„ä¸º<code>/ç”¨æˆ·/ceyx/èµ„æºåº“/Developer/Xcode/DerivedData</code>  å…¶ä¸­<code>ceyx</code> æ›¿æ¢ä¸ºè‡ªå·±çš„ç”¨æˆ·å,åˆ é™¤ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶,ç„¶åé‡æ–°æ‰“å¼€Xcode,ç¼–è¯‘.</p><p><strong>æ­¤æ–¹æ³•æ¯”1æ›´æ…¢,å¾€å¾€ä¹Ÿæ›´æœ‰æ•ˆ</strong></p><h3 id="3-ç»ˆæå¤§æ‹›"><a href="#3-ç»ˆæå¤§æ‹›" class="headerlink" title="3.ç»ˆæå¤§æ‹›"></a>3.ç»ˆæå¤§æ‹›</h3><p>å¦‚è‹¥ä¸Šè¿°ä¸¤ç§æ–¹æ³•è¿˜æ— æ•ˆ,åªèƒ½ä½¿ç”¨ç»æ‹›äº†â€¦é‡å¯Xcode,è¿˜ä¸è¡Œå°±é‡å¯ç”µè„‘â€¦ ç¬”è€…é»”é©´æŠ€ç©·äº†,åªèƒ½å……å½“ä¸‹ç½‘å§è€æ¿ä¼ æˆä¸‹ç»ˆæå¤§æ‹›.ğŸ‘»</p><p>é¢˜å¤–è¯,å¯¹äºJetBrainså‡ºå“çš„appcodeè¿˜æœªå°è¯•è¿‡,ä¸çŸ¥å¯¹äºXcodeé¡¹ç›®å…¼å®¹åˆ°ä½•ç¨‹åº¦,æ˜¯å¦æ”¯æŒCocoapodç­‰,æœ‰æ—¶é—´ä¼šå»ä½“éªŒä¸‹,å¸Œæœ›è‡³å°‘åœ¨ä»£ç æç¤ºä¸Šèƒ½æ›´å‹å–„äº›ğŸ˜€</p><p>ç¬”è€…å»ä½“éªŒäº†ä¸‹Appcode,å…¶ä»£ç æç¤ºå’Œå¿«æ·é”®å¦‚Jetbrainså…¶ä»–äº§å“ä¸€æ ·éå¸¸æ™ºèƒ½,ä½†æ˜¯ä»£ç ä¸­å¶æœ‰é£˜çº¢,å´å¯ä»¥æˆåŠŸè¿è¡Œ,æ¯”è¾ƒå¹²æ‰°ç¼–ç .å°¤ä¸ºå°´å°¬çš„ä¸€ç‚¹æ˜¯,Appcodeä¸æ”¯æŒstoryboard,å³åœ¨é¡¹ç›®å†…ç‚¹å¼€storyboardæ–‡ä»¶å°±ç›´æ¥è·³è½¬xcodeäº†ğŸ˜¥. å¦‚çœŸçš„è¢«Xcodeé€¼ç–¯çš„ç«¥é‹å¯ä»¥è€ƒè™‘ä¸‹ç”¨AppCodeç¼–ç ,ç”¨Xcodeæ“ä½œstoryboard</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;note info&quot;&gt;&lt;p&gt;æœ€è¿‘åœ¨å†™&lt;code&gt;Swift&lt;/code&gt;.å¯¹äºç¬”è€…è¿™ç§è¢«&lt;code&gt;JetBrains&lt;/code&gt;çš„å‡ å¤§IDEå·¥å…·ç»™æƒ¯åçš„å¼€å‘è€…,Xcodeçš„ä»£ç æç¤ºçœŸæ˜¯æ— åŠ›åæ§½,å…ˆä¸è®ºæ™ºèƒ½æç¤ºåº¦,å°±è¿åŸºæœ¬çš„æç¤ºä¹Ÿç»å¸¸å‡ºä¸æ¥.è¿™é‡Œå°±ç®€å•æ€»
      
    
    </summary>
    
      <category term="iOS" scheme="http://lhalcyon.com/categories/iOS/"/>
    
    
      <category term="Xcode" scheme="http://lhalcyon.com/tags/Xcode/"/>
    
  </entry>
  
  <entry>
    <title>Linux+Jenkins+Gradleæ„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(äºŒ)</title>
    <link href="http://lhalcyon.com/linux-jenkins-gradle_build_android2/"/>
    <id>http://lhalcyon.com/linux-jenkins-gradle_build_android2/</id>
    <published>2017-07-20T13:45:30.000Z</published>
    <updated>2018-02-08T13:43:56.045Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨<a href="http://lhalcyon.com/linux-jenkins-gradle_build_android1/">å‰ä¸€ç¯‡æ–‡ç« </a>ä¸­,è¯´æ˜äº†åœ¨CenterOSä¸Šè¿›è¡Œä¸€ç³»åˆ—çš„ç¯å¢ƒæ­å»º,æœ¬æ–‡å¼€å§‹è¯´æ˜å…³äºé¡¹ç›®çš„ä¸€ç³»åˆ—é…ç½®</p><a id="more"></a><h3 id="Jenkinsé¡¹ç›®é…ç½®"><a href="#Jenkinsé¡¹ç›®é…ç½®" class="headerlink" title="Jenkinsé¡¹ç›®é…ç½®"></a>Jenkinsé¡¹ç›®é…ç½®</h3><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªé¡¹ç›®,å°†æ„å»ºä¿æŒçš„å¤©æ•°å’Œä¸ªæ•°è¿›è¡Œé™åˆ¶</p><blockquote><p>æ­¤å¤„æ„Ÿè°¢åå°åŒäº‹æç¤º,å› ä¸ºAndroid SDK NDK å°±ç‰¹åˆ«å ç©ºé—´äº†,å¦‚æœæ„å»ºç¼“å­˜ä¸è¿›è¡Œé™åˆ¶,åˆ™å¾ˆå¿«æœåŠ¡å™¨ç©ºé—´å°±ä¼šä¸è¶³ğŸ¤¥</p></blockquote><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/project_config_1.png" alt="jenkins_total"></p><h4 id="å‚æ•°æ„å»ºé…ç½®"><a href="#å‚æ•°æ„å»ºé…ç½®" class="headerlink" title="å‚æ•°æ„å»ºé…ç½®"></a>å‚æ•°æ„å»ºé…ç½®</h4><p><strong>æ‰“åŒ…ç¯å¢ƒ</strong></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/param_env.jpg" alt="jenkins_total"></p><p><strong>åˆ†æ”¯æŒ‡å®š</strong></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/param_branch.jpg" alt="jenkins_branch"></p><p><strong>emailè‡ªå®šä¹‰æ¥æ”¶è€…</strong></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/param_email.jpg" alt="jenkins_email"></p><p><strong>æ‰“åŒ…æ—¶é—´æˆ³</strong></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/param_jenkins_time.jpg" alt="jenkins_total"></p><p>å› ä¸ºç¬”è€…çš„å…¬å¸å¯¹æ‰“åŒ…çš„Apkåä»¥åŠæµ‹è¯•ç‰ˆæœ¬å·æ—¶é—´æˆ³æ˜¾ç¤ºçš„è¦æ±‚,å› æ­¤éœ€è¦ä½¿ç”¨åŠ¨æ€å‚æ•°</p><blockquote><p>è¿˜æœ‰å…¶ä»–å‚æ•°å‡ä¸ä»¥ä¸Šç±»ä¼¼,å¯è‡ªè¡Œé…ç½®</p></blockquote><p><strong>!!! è®°ä½å°¤ä¸ºé‡è¦çš„æ˜¯è¿™äº›å‚æ•°éƒ½æ˜¯Jenkinsä¸Šé…ç½®çš„Gradleå±æ€§,å¾—ä¼ é€’åˆ°Appçš„Gradleä¸­</strong></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/gradle_script2.png" alt="jenkins_email"></p><p>è¿™é‡Œå‹¾é€‰<code>Pass all job parameters as Project properties</code></p><h4 id="æºç ç®¡ç†"><a href="#æºç ç®¡ç†" class="headerlink" title="æºç ç®¡ç†"></a>æºç ç®¡ç†</h4><p>åœ¨<code>æºç ç®¡ç†å¤„é…ç½®Gitè´¦å·</code></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/git_account.jpg" alt="jenkins_total"></p><p>è¿™é‡Œçš„<code>*/${BRANCH}</code>å¯¹åº”å‚æ•°é…ç½®æ—¶çš„<code>BRANCH</code>.ä¸ºä»€ä¹ˆè¿™é‡Œåšæˆé€‰æ‹©å‹å‚æ•°å‘¢,æ˜¯å› ä¸ºåˆ†æ”¯åæ˜¯æœªçŸ¥çš„,åšæˆå¡«å†™çš„è¯,å¯èƒ½å‹æ ¹æ‹‰ä¸åˆ°æŒ‡å®šåˆ†æ”¯çš„ä»£ç ğŸ¤</p><h4 id="Gradleæ„å»ºè„šæœ¬"><a href="#Gradleæ„å»ºè„šæœ¬" class="headerlink" title="Gradleæ„å»ºè„šæœ¬"></a>Gradleæ„å»ºè„šæœ¬</h4><p>å¢åŠ æ„å»ºåŠ¨ä½œ</p><p>è¿™é‡Œ<code>${WORKSPACE}</code>æŒ‡çš„æ˜¯Gitæ‹‰ä¸‹çš„æ ¹ç›®å½•.é€”ä¸­é©¬èµ›å…‹ä½ç½®åˆ™ä¸ºé¡¹ç›®æ ¹ç›®å½•</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/gradle_script.jpg" alt="jenkins_total"></p><h4 id="è’²å…¬è‹±ä¸Šä¼ "><a href="#è’²å…¬è‹±ä¸Šä¼ " class="headerlink" title="è’²å…¬è‹±ä¸Šä¼ "></a>è’²å…¬è‹±ä¸Šä¼ </h4><p>å¢åŠ æ„å»ºåŠ¨ä½œ,å°†Apkä¸Šä¼ è’²å…¬è‹±</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/pgyer_upload.jpg" alt="jenkins_total"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -k -F &quot;file=@$&#123;WORKSPACE&#125;/source/é¡¹ç›®æ ¹ç›®å½•/app/apks/$&#123;BUILD_PREFIX&#125;_$&#123;JENKINS_TIME&#125;_$&#123;DAY_VERSION&#125;.apk&quot; -F &quot;uKey=ä½ çš„ukey&quot; -F &quot;_api_key=ä½ çš„apiKey&quot; -F &quot;installType=2&quot; -F &quot;password=ä¸‹è½½å¯†ç &quot; -F &quot;updateDescription=$&#123;DESCRIPTION&#125;&quot; https://www.pgyer.com/apiv1/app/upload</span><br></pre></td></tr></table></figure><blockquote><p> <code>${WORKSPACE}/source/é¡¹ç›®æ ¹ç›®å½•/app/apks/</code>ä¸ºç¬”è€…è‡ªè¡Œä¿®æ”¹çš„Apkè¾“å‡ºç›®å½•,æ­¤å¤„è¯·æ ¹æ®è‡ªå·±çš„é¡¹ç›®è¾“å…¥ç›®å½•è¿›è¡Œä¿®æ”¹</p><p> curlå‘½ä»¤å¦‚æœä½¿ç”¨ä¸äº†å¯è‡ªè¡Œç™¾åº¦è§£å†³</p></blockquote><p>ä»¥ä¸‹ä¸ºè’²å…¬è‹±çš„ä¸Šä¼ Api,å¯ä»¥è‡ªè¡Œè°ƒæ•´å‚æ•°</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/pgyer_api.png" alt="jenkins_total"></p><h4 id="é‚®ä»¶é€šçŸ¥"><a href="#é‚®ä»¶é€šçŸ¥" class="headerlink" title="é‚®ä»¶é€šçŸ¥"></a>é‚®ä»¶é€šçŸ¥</h4><p>é¦–å…ˆè¿˜æ˜¯è¿›å…¥Jenkins-&gt;ç³»ç»Ÿè®¾ç½®</p><p>åœ¨<code>Jenkins Location</code>ä¸­è¿›è¡Œé…ç½®</p><p>Jenkins URL:<code>http://10.50.0.16:8777/jenkins/</code></p><p>ç³»ç»Ÿç®¡ç†å‘˜é‚®ä»¶åœ°å€: <code>Androidå‚æ•°åŒ–æ„å»º&lt;aaa@163.com&gt;</code></p><blockquote><p>æ­¤å¤„<code>Androidå‚æ•°åŒ–æ„å»º</code>å°±ä¸ºé‚®ä»¶ä¸­çš„å‘é€äººåç§°</p></blockquote><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/mail_config1.jpg" alt="jenkins_total"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/mail_config2.png" alt="jenkins_total"></p><blockquote><p>ç³»ç»Ÿè®¾ç½®ä¸­çš„é»˜è®¤æ”¶ä»¶äººæœ€å¥½ä¸è¦é…ç½®ä¸ºè‡ªå·±,å› ä¸ºå¦‚æœé…ç½®å,è‡ªå·±å°±æ°¸è¿œåœ¨æ”¶ä»¶äººçš„å‰ç«¯,åé¢æƒ³å‘é€ç»™é¢†å¯¼æ—¶,ä¾¿ä¸å¤§å¥½. é‚®ä»¶çš„å†…å®¹å¯è‡ªå®šä¹‰htmlå†…å®¹,äºŒç»´ç ç›´æ¥çº¿ä¸‹ç”Ÿæˆè’²å…¬è‹±çš„åœ°å€ç„¶åè´´åœ¨é‚®ä»¶å†…å³å¯</p></blockquote><h3 id="Appæœ¬åœ°Gradleé…ç½®"><a href="#Appæœ¬åœ°Gradleé…ç½®" class="headerlink" title="Appæœ¬åœ°Gradleé…ç½®"></a>Appæœ¬åœ°Gradleé…ç½®</h3><p>é¦–å…ˆåœ¨<code>gradle.properties</code>æ–‡ä»¶ä¸­è¿›è¡Œå‚æ•°åŒ–æ„å»ºåœ¨éJenkinså†™å…¥æƒ…å†µæ—¶çš„ç¼ºçœå€¼é…ç½®</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/gradle_properties.png" alt="jenkins_total"></p><p>åœ¨æœªä½¿ç”¨Jenkinsæ„å»ºçš„æƒ…å†µä¸‹åº”ç”¨ä¼šè¯»æœ¬åœ°çš„è¿™äº›å˜é‡å€¼</p><p>ç„¶ååœ¨<code>app</code>moduleä¸‹çš„<code>build.gradle</code>ä¸­è¿›è¡Œé…ç½®å†™å…¥çš„å€¼é…ç½®</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/app_gradle.jpg" alt="jenkins_total"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">//ä¿®æ”¹ç”Ÿæˆçš„apkåå­—åŠè¾“å‡ºç›®å½•</span><br><span class="line">applicationVariants.all &#123; variant -&gt;</span><br><span class="line">    variant.outputs.each &#123; output -&gt;</span><br><span class="line">        def newName</span><br><span class="line">        def oldFile = output.outputFile</span><br><span class="line">        def outDirectory = oldFile.parent</span><br><span class="line">        def buildPrefix</span><br><span class="line">        def showVersion</span><br><span class="line">        if (variant.buildType.name == &apos;debug&apos;) &#123;</span><br><span class="line">            buildPrefix = BUILD_PREFIX</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            buildPrefix = BUILD_PREFIX_RELEASE</span><br><span class="line">        &#125;</span><br><span class="line">        def jenkinsTime = JENKINS_TIME</span><br><span class="line">        if (variant.buildType.name == &apos;debug&apos;) &#123;</span><br><span class="line">            showVersion = buildPrefix + &apos;_&apos; + jenkinsTime + &apos;_&apos; + DAY_VERSION</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            showVersion = APP_VERSION</span><br><span class="line">        &#125;</span><br><span class="line">        resValue(&quot;string&quot;, &apos;fund_app_version&apos;, showVersion)</span><br><span class="line">        def tempFile = file(&quot;build.gradle&quot;)</span><br><span class="line">        outDirectory = tempFile.parent + &apos;/apks&apos;</span><br><span class="line">        if (IS_JENKINS) &#123;</span><br><span class="line">            newName = buildPrefix + &apos;_&apos; + jenkinsTime + &apos;_&apos; + DAY_VERSION + &apos;.apk&apos;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line"></span><br><span class="line">            newName = &apos;android-v&apos; +</span><br><span class="line">                    APP_VERSION + &apos;-&apos; + variant.productFlavors[0].name + &apos;-&apos; + variant.buildType.name + &apos;.apk&apos;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        output.outputFile = new File(outDirectory, newName)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç³»ç»Ÿé»˜è®¤çš„è¾“å…¥è·¯å¾„æ˜¯åœ¨<code>build</code>æ–‡ä»¶å¤¹ä¸­,å±‚çº§æ¯”è¾ƒæ·±.æ­¤å¤„ç¬”è€…å°†apkçš„è¾“å‡ºè·¯å¾„è¿›è¡Œäº†ä¿®æ”¹å¹¶ä¸”å¯¹apkçš„è¾“å‡ºåç§°è¿›è¡Œäº†è°ƒæ•´</p><p>è‡³æ­¤,Jenkinså‚æ•°è‡ªåŠ¨åŒ–æ„å»ºå·²ç»å®Œæˆ!ğŸ˜€</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨&lt;a href=&quot;http://lhalcyon.com/linux-jenkins-gradle_build_android1/&quot;&gt;å‰ä¸€ç¯‡æ–‡ç« &lt;/a&gt;ä¸­,è¯´æ˜äº†åœ¨CenterOSä¸Šè¿›è¡Œä¸€ç³»åˆ—çš„ç¯å¢ƒæ­å»º,æœ¬æ–‡å¼€å§‹è¯´æ˜å…³äºé¡¹ç›®çš„ä¸€ç³»åˆ—é…ç½®&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="http://lhalcyon.com/categories/Android/"/>
    
    
      <category term="Jenkins" scheme="http://lhalcyon.com/tags/Jenkins/"/>
    
      <category term="Android" scheme="http://lhalcyon.com/tags/Android/"/>
    
      <category term="Linux" scheme="http://lhalcyon.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linux+Jenkins+Gradleæ„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(ä¸€)</title>
    <link href="http://lhalcyon.com/linux-jenkins-gradle_build_android1/"/>
    <id>http://lhalcyon.com/linux-jenkins-gradle_build_android1/</id>
    <published>2017-07-07T12:40:25.000Z</published>
    <updated>2018-02-06T12:50:41.115Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><div class="note info"><p>å…³äºJenkinséƒ¨ç½²å®‰å“è‡ªåŠ¨æ‰“åŒ…æœ‰å¾ˆå¤šå¥½å¤„,å¯ä»¥é…ç½®å‚æ•°è¿›è¡Œæ„å»º,é€‰æ‹©æ‰“åŒ…ç¯å¢ƒã€è®¾ç½®Appç‰ˆæœ¬ã€è®¾ç½®åŠ å¯†å¼€å…³ç­‰.èµ·åˆ,ç¬”è€…ä¹Ÿæ˜¯å‚è€ƒäº†ä¸€äº›ç½‘ä¸Šçš„æ•™ç¨‹,å°†è‡ªåŠ¨åŒ–æ‰“åŒ…æ„å»ºåœ¨äº†è‡ªå·±çš„windowså¼€å‘æœºå™¨ä¸Š,è€Œå°†Jenkinsè‡ªåŠ¨æ„å»ºAndroidéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šå’Œæœ¬æœºä¸Šåœ¨ç¯å¢ƒæ„å»ºæ–¹é¢ç•¥æœ‰ä¸åŒ,å‘ç•¥å¤š.</p><p>å‚æ•°åŒ–æ„å»ºçš„è¿‡ç¨‹å´æ˜¯å¾ˆä¾¿æ·,ä½†æ˜¯éƒ¨ç½²åœ¨æœ¬æœºä¸Šè‡ªåŠ¨åŒ–æ‰“åŒ…å…¶å®æ˜¯ä¸ªä¼šå¢åŠ æ‰“åŒ…æ—¶é•¿çš„å·¥ä½œ,å› ä¸ºè‡ªåŠ¨åŒ–æ‰“åŒ…ä¼šé¦–å…ˆå»ä»£ç ä»“åº“æ‹‰å–ä»£ç åˆ°æœ¬åœ°,ç„¶åå†å¼€å§‹æ‰“åŒ…,è¿™ä¸ªè¿‡ç¨‹ä¼šæ¯”ç›´æ¥ç”¨ASæ‰“åŒ…æ…¢å¾ˆå¤š.åæ¥æå‡ºéœ€æ±‚,è¦å°†è‡ªåŠ¨åŒ–æ‰“åŒ…é…ç½®åˆ°æœåŠ¡å™¨ä¸Š.è¿ç»´å°±æä¾›äº†ä¸€å°<code>Linux</code>æœåŠ¡å™¨,å¹¶ä¸”ä¸Šé¢å·²é…ç½®åå°çš„è‡ªåŠ¨åŒ–æ‰“åŒ…ç¯å¢ƒ,ç”¨çš„æ˜¯<code>Jdk1.7</code>å’Œæ¯”è¾ƒæ—§ç‰ˆæœ¬çš„<code>Jenkins</code>,äºæ˜¯æˆ‘ä»¬å¾—å¦è¡Œä½¿ç”¨ç‹¬ç«‹çš„å®‰è£…çš„ç¯å¢ƒ.</p></div><h3 id="æœ€ç»ˆç»“æœ"><a href="#æœ€ç»ˆç»“æœ" class="headerlink" title="æœ€ç»ˆç»“æœ"></a>æœ€ç»ˆç»“æœ</h3><p>æœ€ç»ˆæˆ‘ä»¬è¦å®ç°çš„æ˜¯å®ç°Jenkinsä¸Šé¢é…ç½®<strong>åº”ç”¨ç‰ˆæœ¬å·</strong>ã€<strong>Gitåˆ†æ”¯</strong>ã€<strong>åº”ç”¨æ¸ é“</strong>ã€<strong>è¯·æ±‚åŸºåœ°å€</strong>ã€<strong>åº”ç”¨ç¯å¢ƒ</strong>ç­‰å‚æ•°,è¿›è¡Œä¸€é”®å‚æ•°åŒ–æ„å»ºæ‰“åŒ…ä¸Šä¼ è‡³è’²å…¬è‹±å¹¶å‘é€é‚®ä»¶é€šçŸ¥ç»™<strong>è‡ªå®šä¹‰çš„æ¥æ”¶è€…</strong></p><p>æœ€ç»ˆå®ç°å‚æ•°åŒ–é…ç½®å¤§è‡´å¦‚ä¸‹æ‰€ç¤º:</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_total.png" alt="jenkins_total"></p><p>å‘é€é‚®ä»¶(é‚®ä»¶å†…å®¹è¾ƒé•¿,è¿›è¡Œäº†ç›¸åº”ç¼©å°)</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_result.jpg" alt="jenkins_total"></p><a id="more"></a><h3 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h3><p><strong>æ‰€éœ€ç¯å¢ƒ</strong></p><ul><li>æ–°ç‰ˆJenkins(éœ€èƒ½å®‰è£…å‚æ•°åŒ–æ„å»ºæ’ä»¶)</li><li>Tomcat</li><li>æ–°ç‰ˆJenkins</li><li>Android SDK</li><li>Android NDK</li><li>aapt</li><li>Git</li><li>Gradle</li><li>å…¶å®ƒ(è§†è‡ªèº«é¡¹ç›®æ‰€éœ€)</li></ul><p><strong>CenterOS64ä½å·²æœ‰ç¯å¢ƒ</strong></p><ul><li>Jdk1.7</li><li>Tomcat</li><li>æ—§ç‰ˆJenkins</li></ul><h4 id="1-Jdkå®‰è£…åŠé…ç½®"><a href="#1-Jdkå®‰è£…åŠé…ç½®" class="headerlink" title="1. Jdkå®‰è£…åŠé…ç½®"></a>1. Jdkå®‰è£…åŠé…ç½®</h4><p>ç”±äºAndroidå¼€å‘ä½¿ç”¨çš„ <code>Jdk1.8</code>,å› æ­¤ä¸èƒ½å¤ç”¨æœåŠ¡å™¨ä¸Šç°æœ‰çš„Jdk </p><p>é¦–å…ˆå»<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">Oracle Downloads</a>ä¸‹è½½ <strong>Jdk for Linux</strong>.ç¬”è€…ä¸‹è½½çš„æ˜¯<code>jdk-8u131-linux-x64.tar.gz</code></p><p>ä¸Šä¼ åˆ°æœåŠ¡å™¨,è¿›å…¥ç›¸å…³ç›®å½•è§£å‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf jdk-8u131-linux-x64.tar.gz</span><br></pre></td></tr></table></figure><p>å¯å°†ç›®å½•ç§»è‡³å…¶ä»–ç›®å½•.å…¶å®æœ€å¥½åœ¨è§£å‹å‰å°±å°†å‹ç¼©åŒ…ç§»è‡³ç›®æ ‡ç›®å½•</p><p><strong>Jdkç¯å¢ƒå˜é‡é…ç½®</strong>(å¯é€‰)</p><p>ç”±äºåå°ä½¿ç”¨äº†<code>JAVA_HOME</code>ã€<code>JENKINS_HOME</code>ç­‰ä¸€ç³»åˆ—ç¯å¢ƒå˜é‡å,æ‰€ä»¥æœåŠ¡å™¨ä¸Šé»˜è®¤è°ƒç”¨çš„ä¼šæ˜¯ä»–ä»¬çš„ç¯å¢ƒå˜é‡,æˆ‘ä»¬å¼€å‘çš„ä¸€å¥—åªèƒ½åœ¨è‡ªå·±çš„Tomcatã€Jenkinsä¸­è¿›è¡ŒæŒ‡å®š,å…·ä½“ä¸‹æ–‡ä¼šè¿›è¡Œè¯´æ˜</p><h4 id="2-Tomcatå®‰è£…åŠé…ç½®"><a href="#2-Tomcatå®‰è£…åŠé…ç½®" class="headerlink" title="2. Tomcatå®‰è£…åŠé…ç½®"></a>2. Tomcatå®‰è£…åŠé…ç½®</h4><p>é¦–å…ˆå»<a href="http://tomcat.apache.org/" target="_blank" rel="noopener">Tomcat Download</a>é€‰æ‹©ç‰ˆæœ¬è¿›è¡Œä¸‹è½½.è¿™é‡Œç¬”è€…é€‰æ‹©çš„æ˜¯<code>apache-tomcat-7.0.79.tar.gz</code></p><p>ä¸Šä¼ åˆ°æœåŠ¡å™¨,è¿›å…¥ç›¸å…³ç›®å½•è§£å‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxv -f apache-tomcat-7.0.79.tar.gz</span><br></pre></td></tr></table></figure><h5 id="a-ç«¯å£ä¿®æ”¹"><a href="#a-ç«¯å£ä¿®æ”¹" class="headerlink" title="a.ç«¯å£ä¿®æ”¹"></a>a.ç«¯å£ä¿®æ”¹</h5><p>ç”±äºå¸¸è§„tomcatç«¯å£è¢«å·²æœ‰tomcatå ç”¨,å› æ­¤æˆ‘ä»¬éœ€è¦ä¿®æ”¹ç«¯å£</p><p>è¿›å…¥<code>conf</code>ç›®å½•ä¸‹çš„<code>server.xml</code>ä¿®æ”¹,æ­¤å¤„ç¬”è€…æ˜¯ç”¨<strong>Vim</strong>ä¿®æ”¹.ä¸ä¼šç”¨çš„åŒå­¦è¯·å‡ºé—¨å·¦è½¬åº¦å¨˜ğŸ¤”</p><p>ä¸»è¦ä¿®æ”¹çš„æ˜¯,è®¾ç½®ä¸ºè‡ªå®šä¹‰ç«¯å£å·</p><ul><li><code>Tomcat admin port</code> å³æ–‡ä»¶æœ€ä¸Šé¢çš„ç«¯å£å·</li><li><code>Http/1.1 port</code> è¿æ¥è®¿é—®çš„ç«¯å£å·</li><li><code>AJP/1.3 port</code></li></ul><h5 id="b-ç¯å¢ƒé…ç½®"><a href="#b-ç¯å¢ƒé…ç½®" class="headerlink" title="b.ç¯å¢ƒé…ç½®"></a>b.ç¯å¢ƒé…ç½®</h5><p>æŒ‡å®šTomcatè¿è¡Œæ—¶ç¯å¢ƒ,åœ¨<code>bin</code>ç›®å½•ä¸‹ä¿®æ”¹<code>setclasspath.sh</code> ä»¥ä¸‹æ˜¯ç¬”è€…çš„ç¯å¢ƒ,è¯·è‡ªè¡Œæ›¿æ¢è·¯å¾„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/android/java/jdk1.8.0_131</span><br><span class="line">export JRE_HOME=/usr/android/java/jdk1.8.0_131/jre</span><br><span class="line">export JENKINS_HOME=/home/android/jenkins</span><br></pre></td></tr></table></figure><h4 id="3-Gradleå®‰è£…åŠé…ç½®"><a href="#3-Gradleå®‰è£…åŠé…ç½®" class="headerlink" title="3. Gradleå®‰è£…åŠé…ç½®"></a>3. Gradleå®‰è£…åŠé…ç½®</h4><p>é¦–å…ˆå»<a href="http://services.gradle.org/distributions/" target="_blank" rel="noopener">Gradle Download</a>ä¸‹è½½å¯¹åº”Gradleç‰ˆæœ¬,ç¬”è€…ä½¿ç”¨åˆ°çš„æ˜¯<code>gradle-3.3-all.zip</code></p><p>ä¸Šä¼ åˆ°æŒ‡å®šç›®å½•è§£å‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip gradle-3.3-all.zip</span><br></pre></td></tr></table></figure><p>ç„¶åæ·»åŠ ç¯å¢ƒå˜é‡<code>vim /etc/profile</code>,åœ¨ç¯å¢ƒå˜é‡é…ç½®å¤„å¢åŠ ä¸€å¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export GRADLE_HOME=/home/gradle-3.3/bin</span><br></pre></td></tr></table></figure><h4 id="4-Android-Sdk-For-Linux-å®‰è£…åŠæ›´æ–°"><a href="#4-Android-Sdk-For-Linux-å®‰è£…åŠæ›´æ–°" class="headerlink" title="4. Android Sdk For Linux å®‰è£…åŠæ›´æ–°"></a>4. Android Sdk For Linux å®‰è£…åŠæ›´æ–°</h4><p>è¿™é‡Œä¸‹è½½Sdkè§£å‹éƒ½ä¸æ˜¯éš¾ç‚¹.éš¾ç‚¹åœ¨äºå®‰è£…ä¹‹åæ›´æ–°çš„é—®é¢˜.</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/sdk_manager_accept_license.png" alt="sdk_manager_agree_license"></p><p>ç”¨ASæˆ–è€…Eclipseçš„åŒå­¦è‚¯å®šæ¥è§¦è¿‡<code>Sdk Manager</code>,æ­¤å¤„é€‰æ‹©æ›´æ–°åè¦æ‰‹åŠ¨ç‚¹<code>Accept License</code>æ‰èƒ½å¯åŠ¨æ›´æ–°.ä½†æ˜¯åœ¨Linuxä¸‹æ²¡æœ‰ç•Œé¢åŒ–çš„å‹¾é€‰å¯ç”¨.å› æ­¤éœ€è¦ç”¨è„šæœ¬æ¥æ›´æ–°.ç½‘ä¸Šæœ‰è¯´å¤åˆ¶<code>License</code>çš„æ–¹æ³•ç¬”è€…è¯•äº†æ— æ•ˆ,ä¹Ÿè®¸æ˜¯å§¿åŠ¿ä¸å¯¹å§,æ­¤å¤„ä¹Ÿæ˜¯è¸©äº†å¾ˆä¹…çš„å‘æ‰æœå‡ºæ¥çš„è§£å†³æ–¹æ³•:</p><p><a href="http://blog.csdn.net/yygydjkthh/article/details/48263973" target="_blank" rel="noopener">æ›´æ–°Sdkæ–¹æ³•ä¼ é€é—¨</a> è¿™é‡Œå…ˆæ„Ÿè°¢ä¸‹è¯¥ä½œè€…ğŸ‘</p><p>è¿™é‡Œä¹Ÿä¸ºä¸æ„¿è·³ä¼ é€é—¨çš„åŒå­¦è¯´æ˜ä¸€ä¸‹,å°±å‡ ä¸ªæ­¥éª¤.</p><p><strong>a.æŸ¥çœ‹å¯æ›´æ–°åˆ—è¡¨</strong></p><p>åœ¨Sdkçš„<code>tools</code>ç›®å½•ä½¿ç”¨<code>./android list sdk --all</code>æŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨æä¾›çš„SdkåŒ…çš„åºå·,è®°å½•æƒ³è¦æ›´æ–°çš„Sdkåºå·</p><p><strong>b.ç¼–è¾‘è„šæœ¬</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/expect</span><br><span class="line">set timeout -1</span><br><span class="line">spawn /usr/local/android-sdk-linux/tools/android update sdk -u -a -t 1,2,3,24,25,26,27,28,30,95,96,102,103,104,105,106,107</span><br><span class="line">expect &#123;</span><br><span class="line">    &quot;Do you accept the license&quot; &#123; exp_send &quot;y\r&quot; ; exp_continue &#125;</span><br><span class="line">    eof</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤å¤„<code>1,2,3,...</code>ä¸ºéœ€è¦ä¸‹è½½çš„Sdkåºå·</p><p><strong>c.è¿è¡Œè„šæœ¬</strong></p><p>å¾…è„šæœ¬è·‘å®Œ,sdkå°±æ›´æ–°å®Œæ¯•äº†</p><blockquote><p>æ³¨æ„æ­¤å¤„è„šæœ¬ç”¨åˆ°äº†<code>expect</code>,éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…,æ­¤å¤„æä¾›<a href="http://www.centoscn.com/image-text/install/2014/0310/2532.html" target="_blank" rel="noopener">expectå®‰è£…ä¼ é€é—¨</a></p></blockquote><h4 id="5-Ndk-for-Linuxå®‰è£…"><a href="#5-Ndk-for-Linuxå®‰è£…" class="headerlink" title="5. Ndk for Linuxå®‰è£…"></a>5. Ndk for Linuxå®‰è£…</h4><p>å®‰è£…è¾ƒç®€å•,åç»­éœ€é…ç½®Jenkinsç³»ç»Ÿå˜é‡,ä¸‹æ–‡ä¼šè¿›è¡Œè¯´æ˜</p><blockquote><p>é¡¹ç›®å› ç”¨åˆ°äº†Jni,éœ€è¦å®‰è£…Ndk,å¯æ˜¯åæœŸå‘ç°åœ¨é¡¹ç›®é‡Œæ¯æ¬¡å‡å»ç¼–è¯‘jniå¯¼è‡´é¡¹ç›®çš„compile sdkä¸èƒ½ä½¿ç”¨é«˜äº23çš„,è‡´ä½¿Instant Runç­‰åŠŸèƒ½ä½¿ç”¨,å¾ˆå½±å“å¼€å‘æ•ˆç‡.åæœŸæ”¹åœ¨é¡¹ç›®å¤–ç¼–è¯‘å¥½äº†é™æ€åº“ç„¶åæ”¾å…¥é¡¹ç›®ä¸­,è¿™æ ·ä¸ä¼šé™åˆ¶é¡¹ç›®è‡ªèº«çš„SDKç‰ˆæœ¬,å› æ­¤<strong>è‹¥æœªä½¿ç”¨JNIçš„é¡¹ç›®,åˆ™å¯è·³è¿‡æ­¤æ­¥éª¤</strong></p></blockquote><h4 id="6-Gitå®‰è£…åŠç¯å¢ƒå˜é‡é…ç½®"><a href="#6-Gitå®‰è£…åŠç¯å¢ƒå˜é‡é…ç½®" class="headerlink" title="6. Gitå®‰è£…åŠç¯å¢ƒå˜é‡é…ç½®"></a>6. Gitå®‰è£…åŠç¯å¢ƒå˜é‡é…ç½®</h4><p>ä¸‹è½½å®‰è£…å¹¶é…ç½®ç¯å¢ƒå˜é‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export GIT_HOME=/usr/android/git-2.12.2/bin</span><br></pre></td></tr></table></figure><h4 id="7-Jenkinså®‰è£…åŠé…ç½®"><a href="#7-Jenkinså®‰è£…åŠé…ç½®" class="headerlink" title="7. Jenkinså®‰è£…åŠé…ç½®"></a>7. Jenkinså®‰è£…åŠé…ç½®</h4><h5 id="a-ä¸‹è½½"><a href="#a-ä¸‹è½½" class="headerlink" title="a. ä¸‹è½½"></a>a. ä¸‹è½½</h5><p>ä¸‹è½½Jenkinså°†waråŒ…æ”¾å…¥Tomcatçš„<code>webapps</code>ç›®å½•ä¸‹,å¯åŠ¨tomcat</p><p>ç„¶ååœ¨åœ°å€æ è¾“å…¥è·¯å¾„<code>http://localhost:/8777</code> å…¶ä¸­<code>8777</code>ä¸ºç¬¬äºŒæ­¥ä¸­è‡ªå®šä¹‰çš„ç«¯å£å·</p><h5 id="b-æ’ä»¶å®‰è£…"><a href="#b-æ’ä»¶å®‰è£…" class="headerlink" title="b. æ’ä»¶å®‰è£…"></a>b. æ’ä»¶å®‰è£…</h5><p>ç„¶åå®‰è£…æ’ä»¶(åŸºæœ¬å‚è€ƒç½‘ä¸Šçš„)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">1.Branch API Plugin</span><br><span class="line">2.build timeout plugin</span><br><span class="line">3.build-name-setter</span><br><span class="line">4.Credentials Binding Plugin</span><br><span class="line">5.description setter plugin</span><br><span class="line">6.Dynamic Parameter Plug-in</span><br><span class="line">7.Environment Injector Plugin</span><br><span class="line">9.Git plugin</span><br><span class="line">10.GIT server Plugin</span><br><span class="line">11.Gradle Plugin</span><br><span class="line">12.Git Parameter Plug-In</span><br><span class="line">13.Pipeline: Basic Steps</span><br><span class="line">14.Pipeline: Build Step</span><br><span class="line">15.Pipeline: Input Step</span><br><span class="line">16.Pipeline: Nodes and Processes</span><br><span class="line">17.Pipeline: Stage Step</span><br><span class="line">18.Scriptler</span><br><span class="line">19.Workspace Cleanup Plugin</span><br><span class="line">20.Post-Build Script Plug-in</span><br><span class="line">21.Email Extension Plugin</span><br><span class="line">22.SSH Slaves plugin</span><br><span class="line">23.Timestamper</span><br><span class="line">(ä¸æ˜ä¸ºä»€ä¹ˆå°‘8)</span><br></pre></td></tr></table></figure><p>å› ä¸ºJenkinsç‰ˆæœ¬ä¸åŒ,å®é™…ä½¿ç”¨ä¸­å‘ç°ç¼ºå¤±ä¸å°‘</p><p>ä»¥ä¸‹é™„ä¸Šç¬”è€…æ‰€å®‰è£…çš„æ‰€æœ‰æ’ä»¶(è‹¥æ— é—®é¢˜çš„å¯è·³è¿‡)</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_plugin1.jpg" alt="jenkins_plugin_1"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_plugin2.jpg" alt="jenkins_plugin_2"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_plugin3.jpg" alt="jenkins_plugin_3"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_plugin4.jpg" alt="jenkins_plugin_4"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_plugin5.jpg" alt="jenkins_plugin_5"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_plugin6.jpg" alt="jenkins_plugin_6"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_plugin7.jpg" alt="jenkins_plugin_7"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_plugin8.jpg" alt="jenkins_plugin_8"></p><h5 id="c-ç¯å¢ƒå˜é‡é…ç½®"><a href="#c-ç¯å¢ƒå˜é‡é…ç½®" class="headerlink" title="c. ç¯å¢ƒå˜é‡é…ç½®"></a>c. ç¯å¢ƒå˜é‡é…ç½®</h5><p><strong>ç¯å¢ƒå˜é‡</strong></p><p>é¦–å…ˆç‚¹å‡»<code>ç³»ç»Ÿç®¡ç†</code>-&gt;<code>ç³»ç»Ÿè®¾ç½®</code>é…ç½®Jdkã€Android Sdkã€Gradleã€Android Ndkç¯å¢ƒå˜é‡(æ­¤å¤„ä¹Ÿå¯é…ç½®Gitç›®å½•,ç¬”è€…æ˜¯å°†Gitç›®å½•é…ç½®åœ¨Linuxç¯å¢ƒå˜é‡ä¸­äº†)</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_config.png" alt="jenkins_plugin_8"></p><p><em>å…¶å®ƒå¦‚é‚®ä»¶ç›¸å…³é…ç½®çš„åœ¨ä¸‹ç¯‡ä¼šè¯´æ˜</em></p><p>è‡³æ­¤ç¯å¢ƒå¤§ä½“ä¸Šé…ç½®å·²ç»å®Œæˆ,ä¸‹ç¯‡å³å¯è¿›å…¥é¡¹ç›®ç›¸å…³é…ç½®</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;div class=&quot;note info&quot;&gt;&lt;p&gt;å…³äºJenkinséƒ¨ç½²å®‰å“è‡ªåŠ¨æ‰“åŒ…æœ‰å¾ˆå¤šå¥½å¤„,å¯ä»¥é…ç½®å‚æ•°è¿›è¡Œæ„å»º,é€‰æ‹©æ‰“åŒ…ç¯å¢ƒã€è®¾ç½®Appç‰ˆæœ¬ã€è®¾ç½®åŠ å¯†å¼€å…³ç­‰.èµ·åˆ,ç¬”è€…ä¹Ÿæ˜¯å‚è€ƒäº†ä¸€äº›ç½‘ä¸Šçš„æ•™ç¨‹,å°†è‡ªåŠ¨åŒ–æ‰“åŒ…æ„å»ºåœ¨äº†è‡ªå·±çš„windowså¼€å‘æœºå™¨ä¸Š,è€Œå°†Jenkinsè‡ªåŠ¨æ„å»ºAndroidéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šå’Œæœ¬æœºä¸Šåœ¨ç¯å¢ƒæ„å»ºæ–¹é¢ç•¥æœ‰ä¸åŒ,å‘ç•¥å¤š.&lt;/p&gt;
&lt;p&gt;å‚æ•°åŒ–æ„å»ºçš„è¿‡ç¨‹å´æ˜¯å¾ˆä¾¿æ·,ä½†æ˜¯éƒ¨ç½²åœ¨æœ¬æœºä¸Šè‡ªåŠ¨åŒ–æ‰“åŒ…å…¶å®æ˜¯ä¸ªä¼šå¢åŠ æ‰“åŒ…æ—¶é•¿çš„å·¥ä½œ,å› ä¸ºè‡ªåŠ¨åŒ–æ‰“åŒ…ä¼šé¦–å…ˆå»ä»£ç ä»“åº“æ‹‰å–ä»£ç åˆ°æœ¬åœ°,ç„¶åå†å¼€å§‹æ‰“åŒ…,è¿™ä¸ªè¿‡ç¨‹ä¼šæ¯”ç›´æ¥ç”¨ASæ‰“åŒ…æ…¢å¾ˆå¤š.åæ¥æå‡ºéœ€æ±‚,è¦å°†è‡ªåŠ¨åŒ–æ‰“åŒ…é…ç½®åˆ°æœåŠ¡å™¨ä¸Š.è¿ç»´å°±æä¾›äº†ä¸€å°&lt;code&gt;Linux&lt;/code&gt;æœåŠ¡å™¨,å¹¶ä¸”ä¸Šé¢å·²é…ç½®åå°çš„è‡ªåŠ¨åŒ–æ‰“åŒ…ç¯å¢ƒ,ç”¨çš„æ˜¯&lt;code&gt;Jdk1.7&lt;/code&gt;å’Œæ¯”è¾ƒæ—§ç‰ˆæœ¬çš„&lt;code&gt;Jenkins&lt;/code&gt;,äºæ˜¯æˆ‘ä»¬å¾—å¦è¡Œä½¿ç”¨ç‹¬ç«‹çš„å®‰è£…çš„ç¯å¢ƒ.&lt;/p&gt;&lt;/div&gt;
&lt;h3 id=&quot;æœ€ç»ˆç»“æœ&quot;&gt;&lt;a href=&quot;#æœ€ç»ˆç»“æœ&quot; class=&quot;headerlink&quot; title=&quot;æœ€ç»ˆç»“æœ&quot;&gt;&lt;/a&gt;æœ€ç»ˆç»“æœ&lt;/h3&gt;&lt;p&gt;æœ€ç»ˆæˆ‘ä»¬è¦å®ç°çš„æ˜¯å®ç°Jenkinsä¸Šé¢é…ç½®&lt;strong&gt;åº”ç”¨ç‰ˆæœ¬å·&lt;/strong&gt;ã€&lt;strong&gt;Gitåˆ†æ”¯&lt;/strong&gt;ã€&lt;strong&gt;åº”ç”¨æ¸ é“&lt;/strong&gt;ã€&lt;strong&gt;è¯·æ±‚åŸºåœ°å€&lt;/strong&gt;ã€&lt;strong&gt;åº”ç”¨ç¯å¢ƒ&lt;/strong&gt;ç­‰å‚æ•°,è¿›è¡Œä¸€é”®å‚æ•°åŒ–æ„å»ºæ‰“åŒ…ä¸Šä¼ è‡³è’²å…¬è‹±å¹¶å‘é€é‚®ä»¶é€šçŸ¥ç»™&lt;strong&gt;è‡ªå®šä¹‰çš„æ¥æ”¶è€…&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆå®ç°å‚æ•°åŒ–é…ç½®å¤§è‡´å¦‚ä¸‹æ‰€ç¤º:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_total.png&quot; alt=&quot;jenkins_total&quot;&gt;&lt;/p&gt;
&lt;p&gt;å‘é€é‚®ä»¶(é‚®ä»¶å†…å®¹è¾ƒé•¿,è¿›è¡Œäº†ç›¸åº”ç¼©å°)&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_result.jpg&quot; alt=&quot;jenkins_total&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="http://lhalcyon.com/categories/Android/"/>
    
    
      <category term="Jenkins" scheme="http://lhalcyon.com/tags/Jenkins/"/>
    
      <category term="Android" scheme="http://lhalcyon.com/tags/Android/"/>
    
      <category term="Linux" scheme="http://lhalcyon.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>æ··ç¼–:Swiftè°ƒç”¨Objective-C</title>
    <link href="http://lhalcyon.com/hybrid-compile_swift2oc/"/>
    <id>http://lhalcyon.com/hybrid-compile_swift2oc/</id>
    <published>2017-06-20T08:02:11.000Z</published>
    <updated>2018-02-04T08:01:52.836Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><ul><li>Xcode 8.3.3</li><li>Swift3.+</li></ul><h3 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><h4 id="1-åˆ›å»ºæ··ç¼–æ¡¥æ¥å¤´æ–‡ä»¶"><a href="#1-åˆ›å»ºæ··ç¼–æ¡¥æ¥å¤´æ–‡ä»¶" class="headerlink" title="1.åˆ›å»ºæ··ç¼–æ¡¥æ¥å¤´æ–‡ä»¶"></a>1.åˆ›å»ºæ··ç¼–æ¡¥æ¥å¤´æ–‡ä»¶</h4><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_170620/hybrid-compile.png" alt="hybrid-compile"></p><p>åç§°éšä¾¿å–,æœ€å¥½èƒ½å’Œæ™®é€šheaderæ–‡ä»¶åšåŒºåˆ«</p><h4 id="2-é¡¹ç›®é…ç½®æ¡¥æ¥æ–‡ä»¶"><a href="#2-é¡¹ç›®é…ç½®æ¡¥æ¥æ–‡ä»¶" class="headerlink" title="2.é¡¹ç›®é…ç½®æ¡¥æ¥æ–‡ä»¶"></a>2.é¡¹ç›®é…ç½®æ¡¥æ¥æ–‡ä»¶</h4><ol><li>ç‚¹å‡»å·¥ç¨‹,é€‰ä¸­<code>Build Settings</code>,å­é€‰é¡¹å‹¾é€‰<code>All</code></li><li>åœ¨ä¸‹é¢é…ç½®ä¸­æ‰¾åˆ°(æˆ–è€…æœç´¢)<code>Swift Compile - General</code></li><li>é…ç½®æ··ç¼–æ¡¥æ¥å¤´æ–‡ä»¶</li></ol><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_170620/bridge-config.png" alt="bridge-config"></p><p>ç‚¹å¼€å›¾ä¸­çº¢åœˆåŒºåŸŸè¿›è¡Œé…ç½®,å¦‚æˆ‘æ‰€å»ºçš„æ–‡ä»¶åœ¨å·¥ç¨‹é‡Œè·¯å¾„ä¸º<code>MyProject/Hybrid-Compile.h</code></p><p>åˆ™é…ç½®ä¹Ÿåº”æ˜¯è¿™ä¸ªè·¯å¾„</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_170620/path-config.png" alt="path-config"></p><p>ä¿å­˜ååœ¨è¯¥å¤´æ–‡ä»¶ä¸­å¼•ç”¨ç›¸åº”OCç±»å¤´æ–‡ä»¶å³å¯åœ¨Swiftä¸­è°ƒç”¨</p><h3 id="å¼•ç”¨æ³¨æ„"><a href="#å¼•ç”¨æ³¨æ„" class="headerlink" title="å¼•ç”¨æ³¨æ„"></a>å¼•ç”¨æ³¨æ„</h3><p>å¦‚æœæ˜¯é¡¹ç›®å†…çš„OCæ–‡ä»¶ç›´æ¥å¼•ç”¨å³å¯</p><p>å¦‚æœæ˜¯<code>Pod</code>å¼•ç”¨çš„åº“ä¸­çš„OCæ–‡ä»¶åˆ™éœ€è¦å¸¦ä¸Šå…¶<code>Pod</code>ä¸­çš„è·¯å¾„</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_170620/reference.png" alt="reference"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_170620/reference1.png" alt="reference1"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;ç¯å¢ƒ&quot;&gt;&lt;a href=&quot;#ç¯å¢ƒ&quot; class=&quot;headerlink&quot; title=&quot;ç¯å¢ƒ&quot;&gt;&lt;/a&gt;ç¯å¢ƒ&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Xcode 8.3.3&lt;/li&gt;
&lt;li&gt;Swift3.+&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;æ­¥éª¤&quot;&gt;&lt;a href=&quot;#æ­¥
      
    
    </summary>
    
      <category term="iOS" scheme="http://lhalcyon.com/categories/iOS/"/>
    
    
      <category term="Swift" scheme="http://lhalcyon.com/tags/Swift/"/>
    
      <category term="Xcode" scheme="http://lhalcyon.com/tags/Xcode/"/>
    
  </entry>
  
</feed>
