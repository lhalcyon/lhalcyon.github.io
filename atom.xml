<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Halcyon days</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://lhalcyon.com/"/>
  <updated>2018-03-28T13:35:33.049Z</updated>
  <id>https://lhalcyon.com/</id>
  
  <author>
    <name>L</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>FlutteråŸºç¡€-(3)Widgetä¹‹æ–‡æœ¬Text</title>
    <link href="https://lhalcyon.com/flutter-widget-text/"/>
    <id>https://lhalcyon.com/flutter-widget-text/</id>
    <published>2018-03-26T16:00:00.000Z</published>
    <updated>2018-03-28T13:35:33.049Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ¥æ‰“ç®—ç¬¬ä¸‰ç¯‡æ–‡ç« æ¥è®²è§£ Flutter å•å­å¸ƒå±€widget , å¥ˆä½• <strong>18ç§å•å­å¸ƒå±€widget</strong> å†…å®¹é¢‡å¤š,åŠ ä¹‹å¹´åæœ‰äº†æ–°é¡¹ç›®è¦å¼€å‘ , ä½¿å¾—æ–‡ç« äº§å‡ºå‘¨æœŸè¢«æ‹‰é•¿ :(  .  è¿™é‡Œå…ˆæ¥ç¯‡ç®€å•çš„å…³äºTextçš„æ–‡ç«  , ä¸‹æ¬¡æ›´æ–°å°†ä¼šå‘å‡º Flutterç³»åˆ—çš„ç›®å½•åŠå¸ƒå±€widgetçš„æ–‡ç« .</p></blockquote><h4 id="Text"><a href="#Text" class="headerlink" title="Text"></a>Text</h4><p><a href="https://docs.flutter.io/flutter/widgets/Text-class.html" target="_blank" rel="noopener">Text</a>  æ–‡æœ¬æ˜¯appé‡Œå¸¸è§çš„æ§ä»¶ , ç”¨ä»¥æ˜¾ç¤ºä¸€ä¸²å•ä¸€æ ·å¼çš„æ–‡æœ¬ . è¯¥å­—ç¬¦ä¸²å¯è·¨è¶Šå¤šè¡Œ , æˆ–æ ¹æ®å¸ƒå±€çº¦æŸæ˜¾ç¤ºåœ¨åŒä¸€è¡Œä¸­</p><p>æœ€ç®€å•çš„å¯ä»¥ç›´æ¥ç”¨è¿™æ ·çš„ä»£ç æ¥å±•ç¤ºæ–‡æœ¬ , ç±»ä¼¼ Android é‡Œçš„ TextView , iOS é‡Œçš„ UILabel .</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Text(<span class="string">'ç®€å•çš„æ–‡æœ¬'</span>)</span><br></pre></td></tr></table></figure><p>ä»£ç æœªæŒ‡å®šæ ·å¼ , æ­¤æ—¶å°†ä½¿ç”¨æœ€è¿‘çš„ DefaultTextStyle æ ·å¼ . è‹¥ç»™å®šæ ·å¼ä¸­ TextStyle.inherit å±æ€§ä¸ºtrue , ç»™å®šæ ·å¼åˆ™å°†ä¸æœ€è¿‘çš„ DefaultTextStyle æ ·å¼åˆå¹¶ . </p><blockquote><p>ç±»ä¼¼ Android é‡Œ , style.xml ä¸»é¢˜æ ·å¼ AppTheme ä¸­å®šä¹‰äº†æ–‡æœ¬æ ·å¼ , å¹¶ä¸”å°†å…¶è®¾ç½®ä¸º Application çš„ä¸»é¢˜æ ·å¼ , é‚£ä¹ˆæ–°å»ºä¸€ä¸ª TextView å°±ä¼šé»˜è®¤ä½¿ç”¨ AppThemeä¸­å®šä¹‰çš„æ–‡æœ¬æ ·å¼ , è€Œå½“ç»™è¿™ä¸ª TextView è®¾ç½®æ ·å¼æ—¶,æ­¤æ ·å¼å°±ä¼šå’Œä¸»é¢˜æ ·å¼è¿›è¡Œåˆå¹¶ </p></blockquote><p>å½“ TextStyle.inherit å±æ€§è®¾ç½®ä¸º false æ—¶ , æ–‡æœ¬æ ·å¼ä¼šæ¢å¤åˆ°é»˜è®¤çŠ¶æ€: ç™½è‰², 10åƒç´  , sans-serif å­—ä½“</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> TextStyle _inheritBigFont = <span class="keyword">new</span> TextStyle(inherit: <span class="keyword">true</span>, fontSize: <span class="number">24.0</span>);</span><br><span class="line"><span class="keyword">final</span> TextStyle _notInheritBigFont = <span class="keyword">new</span> TextStyle(inherit: <span class="keyword">false</span>, fontSize: <span class="number">24.0</span>);</span><br><span class="line">...</span><br><span class="line"><span class="keyword">new</span> Text(<span class="string">'inherit true'</span>, style: widget._inheritBigFont)</span><br><span class="line"><span class="keyword">new</span> Text(<span class="string">'inherit false'</span>, style: widget._notInheritBigFont)</span><br></pre></td></tr></table></figure><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fpst9zllwxj306u0dfaaj.jpg" alt=""></p><p>æ–‡æœ¬æ ·å¼é¸Ÿç°</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fpstut8a0uj305k084mzc.jpg" alt=""></p><h4 id="RichText"><a href="#RichText" class="headerlink" title="RichText"></a>RichText</h4><p>è¦æ˜¾ç¤ºå¤šæ ·å¼çš„æ–‡æœ¬ , éœ€è¦ä½¿ç”¨å¯Œæ–‡æœ¬ <a href="https://docs.flutter.io/flutter/widgets/RichText-class.html" target="_blank" rel="noopener">RichText</a></p><p>åœ¨å¼€å‘ä¸­ , æœ‰ä¸€äº›å¸¸è§çš„åº”ç”¨åœºæ™¯éœ€è¦ç”¨åˆ°å¯Œæ–‡æœ¬ .  æ¯”å¦‚åœ¨å¾ˆå¤š app æ³¨å†Œ ,å¼€æˆ·ç•Œé¢ä¼šæœ‰ä¸€ä¸ªåŒæ„åè®®çš„æ¨¡å— , </p><p><em>æˆ‘å·²é˜…è¯»å¹¶åŒæ„ã€Šxxxåè®®ã€‹</em> , åè®®åç§°é€šå¸¸é«˜äº®æ˜¾ç¤ºå¹¶ä¸”å¯ä»¥ç‚¹å‡»æ‰“å¼€åè®®é¡µé¢ .</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/gestures.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoText</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> TextStyle _protocolFont = <span class="keyword">new</span> TextStyle(fontSize: <span class="number">16.0</span>);</span><br><span class="line">  <span class="keyword">final</span> TextStyle _inheritBigFont =</span><br><span class="line">      <span class="keyword">new</span> TextStyle(inherit: <span class="keyword">true</span>, fontSize: <span class="number">24.0</span>);</span><br><span class="line">  <span class="keyword">final</span> TextStyle _notInheritBigFont =</span><br><span class="line">      <span class="keyword">new</span> TextStyle(inherit: <span class="keyword">false</span>, fontSize: <span class="number">24.0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  DemoTextState createState() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> DemoTextState();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoTextState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">DemoText</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Scaffold(</span><br><span class="line">        appBar: <span class="keyword">new</span> AppBar(</span><br><span class="line">          title: <span class="keyword">const</span> Text(<span class="string">'Text Demo'</span>),</span><br><span class="line">        ),</span><br><span class="line">        body: <span class="keyword">new</span> Builder(builder: builderBody));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Widget builderBody(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">final</span> TapGestureRecognizer recognizer = <span class="keyword">new</span> TapGestureRecognizer();</span><br><span class="line">    recognizer.onTap = () &#123;</span><br><span class="line">      Scaffold.of(context).showSnackBar(<span class="keyword">new</span> SnackBar(</span><br><span class="line">            content: <span class="keyword">new</span> Text(<span class="string">'åè®®è¢«ç‚¹å‡»!'</span>),</span><br><span class="line">          ));</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> Divider divider = <span class="keyword">new</span> Divider(color: Colors.white, height: <span class="number">2.0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Container(</span><br><span class="line">        color: Colors.grey,</span><br><span class="line">        alignment: Alignment.center,</span><br><span class="line">        child: <span class="keyword">new</span> Column(</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            <span class="keyword">new</span> Text(<span class="string">'inherit true'</span>, style: widget._inheritBigFont),</span><br><span class="line">            <span class="keyword">new</span> Text(<span class="string">'inherit false'</span>, style: widget._notInheritBigFont),</span><br><span class="line">            divider,</span><br><span class="line">            <span class="keyword">new</span> Text(</span><br><span class="line">              <span class="string">'é¾™éª‘å£«å›§é›ªè¯ºJohnSnow'</span>,</span><br><span class="line">              style: <span class="keyword">new</span> TextStyle(</span><br><span class="line">                  color: Colors.blue,</span><br><span class="line">                  fontSize: <span class="number">24.0</span>,</span><br><span class="line">                  fontStyle: FontStyle.italic,</span><br><span class="line">                  letterSpacing: <span class="number">2.0</span>,</span><br><span class="line">                  decoration: TextDecoration.underline),</span><br><span class="line">            ),</span><br><span class="line">            divider,</span><br><span class="line">            <span class="keyword">new</span> RichText(</span><br><span class="line">              text: <span class="keyword">new</span> TextSpan(</span><br><span class="line">                text: <span class="string">'æˆ‘å·²é˜…è¯»'</span>,</span><br><span class="line">                style: widget._protocolFont,</span><br><span class="line">                children: &lt;TextSpan&gt;[</span><br><span class="line">                  <span class="keyword">new</span> TextSpan(</span><br><span class="line">                      text: <span class="string">'ã€Šä»flutterå…¥é—¨åˆ°æ”¾å¼ƒã€‹'</span>,</span><br><span class="line">                      style: <span class="keyword">new</span> TextStyle(color: Colors.redAccent),</span><br><span class="line">                      recognizer: recognizer),</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fpsu9h19ckj306u0dft9h.jpg" alt=""></p><p>TapGestureRecognizer æ˜¯æ‰‹åŠ¿è¯†åˆ«è€… , åé¢è®²åˆ°æ‰‹åŠ¿æ—¶å†å…·ä½“è¯´æ˜ . è¿™é‡Œæˆ‘ä»¬å…ˆçŸ¥é“å®ƒå¯ä»¥ç”¨æ¥ç»™å¯Œæ–‡æœ¬æŸä¸€æ®µæ·»åŠ ç‚¹å‡»äº‹ä»¶ .  è¿™é‡Œæˆ‘ä»¬ç‚¹å‡»åè®®å , ä¼šå¼¹å‡ºä¸€ä¸ªSnackBaræç¤ºåè®®è¢«ç‚¹å‡»äº† . </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;æœ¬æ¥æ‰“ç®—ç¬¬ä¸‰ç¯‡æ–‡ç« æ¥è®²è§£ Flutter å•å­å¸ƒå±€widget , å¥ˆä½• &lt;strong&gt;18ç§å•å­å¸ƒå±€widget&lt;/strong&gt; å†…å®¹é¢‡å¤š,åŠ ä¹‹å¹´åæœ‰äº†æ–°é¡¹ç›®è¦å¼€å‘ , ä½¿å¾—æ–‡ç« äº§å‡ºå‘¨æœŸè¢«æ‹‰é•¿ :(  .  è¿™é‡Œå…ˆæ¥ç¯‡ç®€å•çš„å…³äºTextçš„æ–‡ç« 
      
    
    </summary>
    
      <category term="Flutter" scheme="https://lhalcyon.com/categories/Flutter/"/>
    
    
      <category term="Flutter" scheme="https://lhalcyon.com/tags/Flutter/"/>
    
  </entry>
  
  <entry>
    <title>FlutteråŸºç¡€-(2)åŸºæœ¬æ¦‚å¿µåŠé¦–ä¸ªåº”ç”¨</title>
    <link href="https://lhalcyon.com/flutter-basic-concept/"/>
    <id>https://lhalcyon.com/flutter-basic-concept/</id>
    <published>2018-03-07T16:00:00.000Z</published>
    <updated>2018-03-21T13:26:34.411Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ <a href="https://lhalcyon.com/flutter-basic-env">ä¸Šä¸€ç¯‡æ–‡ç« </a> ä¸­,æˆ‘ä»¬è®²è§£äº† Flutter å¼€å‘ç¯å¢ƒæ­å»º , ä»¥åŠè¿è¡Œäº†å®˜æ–¹demoç®€å•ä½“éªŒäº†ä¸‹ Flutter app .</p><p>æ­¤ç¯‡æˆ‘ä»¬å°†å¼€å§‹å¯¹ä¸€äº› Flutter app ä¸­çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µè¿›è¡Œè®²è§£ , ä¸€äº›åŸºæœ¬çš„æ“ä½œåšä¸€äº›ç¤ºä¾‹ , ä¸»è¦æ˜¯å‚è€ƒå®˜ç½‘çš„æ•™ç¨‹ <a href="https://flutter.io/get-started/codelab/" target="_blank" rel="noopener">Write Your First Flutter App</a> </p><div class="note info"><p>è‹¥ä½ å¯¹é¢å‘å¯¹è±¡ç¼–ç¨‹ç†Ÿæ‚‰,ä»¥åŠå¯¹åŸºæœ¬ç¼–ç¨‹æ¦‚å¿µå¦‚å˜é‡ã€å¾ªç¯ã€æ¡ä»¶äº†è§£ , åˆ™é€‚åˆé˜…è¯»æœ¬ç¯‡æ–‡ç«  . ä¸å¿…éœ€è¦æ‹¥æœ‰ Dart æˆ–ç§»åŠ¨ç¼–ç¨‹ç»éªŒ.</p><p>ä¸ºäº†æ›´å¥½çš„é˜…è¯»ä½“éªŒ , è¯·ç‚¹å‡» <a href="https://lhalcyon.com/flutter-basic-concept/">é˜…è¯»åŸæ–‡</a>   :)</p></div><a id="more"></a><ul><li>æ­¥éª¤ 1 : <a href="#step1">åˆ›å»ºåŠå¯åŠ¨ Flutter app</a></li><li>æ­¥éª¤ 2 : <a href="#step2">ä½¿ç”¨ä¸€ä¸ªå¤–éƒ¨çš„ç¨‹åºåŒ…</a></li><li>æ­¥éª¤ 3 : <a href="#step3">å¢åŠ ä¸€ä¸ª Stateful Widget</a></li><li>æ­¥éª¤ 4 : <a href="#step4">åˆ›å»ºä¸€ä¸ªæ— é™æ»šåŠ¨çš„ ListView</a></li><li>æ­¥éª¤ 5 : <a href="#step5">å¢åŠ äº¤äº’</a></li><li>æ­¥éª¤ 6 : <a href="#step6">è·³è½¬åˆ°æ–°é¡µé¢</a></li><li>æ­¥éª¤ 7 : <a href="#step7">é€šè¿‡ä¸»é¢˜æ”¹å˜UI</a></li><li><a href="#done">å®Œæˆ!</a></li></ul><h3 id="æˆ‘ä»¬å°†åˆ›å»ºä»€ä¹ˆ"><a href="#æˆ‘ä»¬å°†åˆ›å»ºä»€ä¹ˆ" class="headerlink" title="æˆ‘ä»¬å°†åˆ›å»ºä»€ä¹ˆ"></a>æˆ‘ä»¬å°†åˆ›å»ºä»€ä¹ˆ</h3><p>æˆ‘ä»¬å°†å®ç°ä¸€ä¸ªç®€å•çš„ç§»åŠ¨åº”ç”¨ , å®ƒä¼šç”Ÿæˆåˆ›ä¸šå…¬å¸çš„åç§° . ç”¨æˆ·å¯ä»¥é€‰æ‹©å’Œåé€‰åç§° , ä¿å­˜å–œå¥½çš„é‚£äº› . ä»£ç ä¸€æ¬¡ç”Ÿæˆ 10 ä¸ªåç§° . å½“ç”¨æˆ·æ»‘åŠ¨æ—¶ , æ–°ä¸€æ‰¹çš„åç§°å°±ä¼šç”Ÿæˆ . ç”¨æˆ·å¯ä»¥ç‚¹å‡»å¯¼èˆªæ å³ä¸Šçš„æŒ‰é’®è¿›å…¥ä¸€ä¸ªåªå±•ç¤ºå–œå¥½çš„åç§°çš„åˆ—è¡¨æ–°é¡µé¢.</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fp6eb8abo5g306e0dw1kx.gif" alt=""></p><div class="note default"><p><strong>æˆ‘ä»¬å°†å­¦åˆ°:</strong></p><ul><li>Flutter app çš„åŸºæœ¬ç»“æ„</li><li>ä½¿ç”¨é¢å¤–çš„åŒ…å»æ‹“å±•åŠŸèƒ½</li><li>ä½¿ç”¨çƒ­éƒ¨ç½²æ¥å¿«é€Ÿå¼€å‘</li><li>å¦‚ä½•å»å®ç°ä¸€ä¸ªstateful å°éƒ¨ä»¶</li><li>å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ— çº¿æ»‘åŠ¨,æ‡’åŠ è½½çš„åˆ—è¡¨</li><li>å¦‚ä½•è·³è½¬å»ä¸‹ä¸€ä¸ªç•Œé¢</li><li>å¦‚æœé€šè¿‡ä¸»é¢˜å»ä¿®æ”¹appå¤–è§‚</li></ul></div><p><span id="step1"></span></p><h3 id="æ­¥éª¤-1-åˆ›å»ºåŠå¯åŠ¨-Flutter-app"><a href="#æ­¥éª¤-1-åˆ›å»ºåŠå¯åŠ¨-Flutter-app" class="headerlink" title="æ­¥éª¤ 1 : åˆ›å»ºåŠå¯åŠ¨ Flutter app"></a>æ­¥éª¤ 1 : åˆ›å»ºåŠå¯åŠ¨ Flutter app</h3><p>è¿™é‡Œåˆ›å»ºä¸€ä¸ªç®€å•çš„ flutter app</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flutter create flutter_first_app</span><br><span class="line"><span class="built_in">cd</span> flutter_first_app</span><br><span class="line">flutter run</span><br></pre></td></tr></table></figure><p>å¦‚æœ‰ç–‘é—® , å¯å‚è€ƒ <a href="https://lhalcyon.com/flutter-basic-env/">å‰ä¸€ç¯‡æ–‡ç« </a> æŒ‡å¼•</p><p>ç®€å•åœ° , æˆ‘ä»¬å…ˆå°† <code>lib/main.dart</code>ä¸­çš„ä»£ç å…¨éƒ¨åˆ é™¤ , æ›¿æ¢ä¸ºä»¥ä¸‹ä»£ç  , å…¶ä¸»è¦å°±æ˜¯åœ¨å±å¹•ä¸­é—´å±•ç¤º â€˜Hello Worldâ€™ .  </p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(<span class="keyword">new</span> MyApp());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'Welcome to Flutter'</span>,</span><br><span class="line">      home: <span class="keyword">new</span> Scaffold(</span><br><span class="line">        appBar: <span class="keyword">new</span> AppBar(</span><br><span class="line">          title: <span class="keyword">new</span> Text(<span class="string">'Welcome to Flutter'</span>),</span><br><span class="line">        ),</span><br><span class="line">        body: <span class="keyword">new</span> Center(</span><br><span class="line">          child: <span class="keyword">new</span> Text(<span class="string">'Hello World'</span>),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡æ–°è¿è¡Œå¾—åˆ°ç»“æœ</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fp6is372okj309q0j5wf4.jpg" alt=""></p><h4 id="å‘ç°"><a href="#å‘ç°" class="headerlink" title="å‘ç°"></a>å‘ç°</h4><ul><li>è¿™ä¸ªä¾‹å­åˆ›å»ºäº†ä¸€ä¸ª Material Design é£æ ¼çš„app . <a href="https://material.io/guidelines/" target="_blank" rel="noopener">Material</a> æ˜¯ä¸€ç§åœ¨ç§»åŠ¨ç«¯åŠwebä¸Šæ ‡å‡†çš„è§†è§‰è®¾è®¡è¯­è¨€ . Flutter æä¾›äº†ä¸°å¯Œçš„ Material é£æ ¼å°éƒ¨ä»¶</li><li>main æ–¹æ³•ä½¿ç”¨äº†ä¸€ä¸ªå¤§ç®­å¤´<code>=&gt;</code>å†™æ³• , å®ƒæ˜¯ä¸€è¡Œä»£ç åŠŸèƒ½æˆ–æ–¹æ³•çš„ç¼©å†™ . åŒè®¸å¤šè¯­è¨€å¼€å‘ä¸€æ ·, <code>main()</code> æ–¹æ³•ä¸ºç¨‹åºå…¥å£ .</li><li>app ç»§æ‰¿ StatefulWidget ä½¿å¾—å…¶è‡ªèº«ä¹Ÿæ˜¯ä¸ªwidget . åœ¨ Flutter é‡Œ , <strong>å¤§å¤šæ•°å…ƒç´ éƒ½æ˜¯ widget</strong> , åŒ…æ‹¬å¯¹é½æ–¹å¼(alignment)ã€ å†…è¾¹è·(padding)ã€å¸ƒå±€(layout) .</li><li>Material åº“ ä¸­çš„è„šæ‰‹æ¶å°éƒ¨ä»¶ (Scaffold widget) , æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„å¯¼èˆªæ ã€ æ ‡é¢˜ã€ å†…å®¹å±æ€§åœ¨å±å¹•ä¸­ç»´æŒäº†éƒ¨ä»¶æ ‘ğŸŒ².éƒ¨ä»¶å­æ ‘å¯ä»¥å¾ˆå¤æ‚.</li><li>ä¸€ä¸ªå°éƒ¨ä»¶çš„ä¸»è¦å·¥ä½œå°±æ˜¯æä¾› <code>build()</code>æ–¹æ³• , å®ƒæ˜¯ç”¨æ¥è¡¨æ˜å¦‚ä½•å±•ç¤ºå…¶ä»–ä½å±‚çº§çš„widget.</li><li>è¿™ä¸ªç¤ºä¾‹çš„éƒ¨ä»¶æ ‘ç”± åŒ…å«ä¸€ä¸ª Text å­éƒ¨ä»¶ çš„Center Widget ç»„æˆ  . è¿™ä¸ª Center Widget å°†å…¶å­éƒ¨ä»¶æ ‘æ’åˆ—åœ¨å±å¹•ä¸­é—´ . </li></ul><p><span id="step2"></span></p><h3 id="æ­¥éª¤-2-ä½¿ç”¨ä¸€ä¸ªå¤–éƒ¨çš„ç¨‹åºåŒ…"><a href="#æ­¥éª¤-2-ä½¿ç”¨ä¸€ä¸ªå¤–éƒ¨çš„ç¨‹åºåŒ…" class="headerlink" title="æ­¥éª¤ 2 : ä½¿ç”¨ä¸€ä¸ªå¤–éƒ¨çš„ç¨‹åºåŒ…"></a>æ­¥éª¤ 2 : ä½¿ç”¨ä¸€ä¸ªå¤–éƒ¨çš„ç¨‹åºåŒ…</h3><p>åœ¨è¿™ä¸ªæ­¥éª¤é‡Œ , æˆ‘ä»¬å°†å¼€å§‹ä½¿ç”¨ä¸€ä¸ªå¼€æºç¨‹åºåŒ… <strong>english_words</strong> , å®ƒåŒ…å«äº†è¾ƒå¤šçš„å¸¸ç”¨çš„è‹±æ–‡å•è¯è¿˜æœ‰ä¸€äº›å·¥å…·æ–¹æ³• .</p><p>æˆ‘ä»¬å¯ä»¥åœ¨ <a href="https://pub.dartlang.org/flutter/" target="_blank" rel="noopener">pub.dartlang.org</a> æ‰¾åˆ° <a href="https://pub.dartlang.org/packages/english_words" target="_blank" rel="noopener">english_words</a> åŠ å…¶ä»–å¼€æºç¨‹åºåŒ…</p><p><strong>1.</strong> pubspec æ–‡ä»¶è´Ÿè´£ç®¡ç† Flutter åº”ç”¨çš„èµ„æº. åœ¨ <strong>pubspec.yaml</strong> æ–‡ä»¶ä¸­,æ·»åŠ  <strong>english_words</strong>(3.1.0æˆ–æ›´é«˜ç‰ˆæœ¬)åˆ°ä¾èµ–é‡Œ.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  flutter:</span></span><br><span class="line"><span class="attr">    sdk:</span> <span class="string">flutter</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  cupertino_icons:</span> <span class="string">^0.1.0</span></span><br><span class="line"><span class="attr">  english_words:</span> <span class="string">^3.1.0</span></span><br></pre></td></tr></table></figure><p><strong>2. </strong>å½“æˆ‘ä»¬åœ¨IDEA è§†å›¾ä¸­ , ä¿®æ”¹yamlæ–‡ä»¶å , å¯ç‚¹å‡»å³ä¸Šæ–¹çš„ <strong>Packages get</strong> ä½¿ä¹‹ç”Ÿæ•ˆ.å®ƒä¼šæ‹‰å–æˆ‘ä»¬æ‰æ·»åŠ çš„ä¾èµ–åŒ…, æ§åˆ¶å°ä¸­æ‰“å°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flutter packages get</span><br><span class="line">Running <span class="string">"flutter packages get"</span> <span class="keyword">in</span> flutter_first_app...</span><br><span class="line">Process finished with <span class="built_in">exit</span> code 0</span><br></pre></td></tr></table></figure><p><strong>3. </strong> åœ¨ <strong>lib/main.dart</strong>æ–‡ä»¶ä¸­,æ·»åŠ  import è¯­å¥ , å¯¼å…¥ä¾èµ–ç›¸å…³ç±»</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:english_words/english_words.dart'</span>;</span><br></pre></td></tr></table></figure><p><strong>4. </strong> ç”¨å¼€æºåº“ç”Ÿæˆæ–‡æœ¬ä»£æ›¿åŸæ¥çš„ â€˜Hello Worldâ€™</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:english_words/english_words.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(<span class="keyword">new</span> MyApp());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">final</span> wordPair = <span class="keyword">new</span> WordPair.random();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'Welcome to Flutter'</span>,</span><br><span class="line">      home: <span class="keyword">new</span> Scaffold(</span><br><span class="line">        appBar: <span class="keyword">new</span> AppBar(</span><br><span class="line">          title: <span class="keyword">new</span> Text(<span class="string">'Welcome to Flutter'</span>),</span><br><span class="line">        ),</span><br><span class="line">        body: <span class="keyword">new</span> Center(</span><br><span class="line">          <span class="comment">//child: new Text('Hello World'), // Replace the highlighted text...</span></span><br><span class="line">          child: <span class="keyword">new</span> Text(wordPair.asPascalCase),  <span class="comment">// With this highlighted text.</span></span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>5. </strong>è‹¥appæ­£åœ¨è¿è¡Œ, å¯ä»¥é€šè¿‡ç‚¹å‡»âš¡ï¸æŒ‰é’®è¿›è¡Œçƒ­éƒ¨ç½². æ¯æ¬¡ç‚¹å‡»æˆ–è€…ä¿å­˜æ—¶ , ä¼šç”Ÿæˆæ–°çš„ä¸€ä¸ªéšæœºå•è¯. è¿™æ˜¯å› ä¸ºå•è¯æ˜¯åœ¨ <code>build(...)</code> æ–¹æ³•ä¸­ç”Ÿæˆ, å®ƒä¼šåœ¨æ¯æ¬¡ MaterialApp éœ€è¦æ¸²æŸ“æˆ–è§¦å‘å¹³å°æ£€è§†æ—¶æ‰§è¡Œ.</p><p><span id="step3"></span></p><h3 id="æ­¥éª¤-3-å¢åŠ ä¸€ä¸ª-Stateful-Widget"><a href="#æ­¥éª¤-3-å¢åŠ ä¸€ä¸ª-Stateful-Widget" class="headerlink" title="æ­¥éª¤ 3 : å¢åŠ ä¸€ä¸ª Stateful Widget"></a>æ­¥éª¤ 3 : å¢åŠ ä¸€ä¸ª Stateful Widget</h3><p>Stateless widgets æ˜¯ä¸å¯å˜çš„ , æ„å‘³ç€å…¶å±æ€§æ˜¯ä¸å¯æ”¹å˜çš„ - æ‰€æœ‰å€¼å‡ä¸ºfinal .</p><p>Stateful widgets ç»´æŒç€ç”Ÿå‘½å‘¨æœŸä¸­å¯å˜çš„çŠ¶æ€ . å®ç°ä¸€ä¸ª stateful widget éœ€è¦è‡³å°‘ä¸¤ä¸ªç±»: ä¸€ä¸ª State ç±» å’Œ ä¸€ä¸ªåˆ›å»ºStateç¤ºä¾‹çš„ StatefulWidget .  StatefulWidgetæœ¬èº«æ˜¯ä¸å¯å˜çš„ , ä½†æ˜¯ State ç±»åœ¨widgetç”Ÿæˆå‘¨æœŸä¸­ä¸€ç›´å­˜ç•™ . </p><p>åœ¨è¿™ä¸ªæ­¥éª¤é‡Œ , æˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ª stateful widget - RandomWords , å®ƒåˆ›å»ºè‡ªå·±çš„ State ç±» - RandomWordsState . state ç±»å°†ä¸ºwidgetæœ€ç»ˆç»´æŒå»ºè®®çš„å’Œå–œå¥½çš„å•è¯.</p><p><strong>1. </strong> æ·»åŠ  stateful RandomWords åˆ° main.dart </p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RandomWords</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  createState() =&gt; <span class="keyword">new</span> RandomWordsState();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2. </strong> æ·»åŠ  RandomWordsState . å¤§éƒ¨åˆ†appçš„ä»£ç ä¼šåœ¨è¿™ä¸ªç±»ä¸­ , å°†ç»´æŒç€ RandomWords éƒ¨ä»¶çš„çŠ¶æ€ . è¿™ä¸ªç±»å°†ä¼šä¿å­˜ç”Ÿæˆçš„è¯å¯¹ , å®ƒä»¬éšç€ç”¨æˆ·æ»‘åŠ¨é¡µé¢æ— çº¿å¢åŠ  . ç„¶åå–œå¥½çš„è¯å¯¹ , ç”¨æˆ·é€šè¿‡ç‚¹å‡»åˆ—è¡¨çš„å¿ƒå½¢æŒ‰é’®è¿›è¡Œæ·»åŠ æˆ–ç§»é™¤ .</p><p>æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥åˆ›å»ºè¿™ä¸ªç±»</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RandomWordsState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">RandomWords</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3. </strong> åœ¨æ·»åŠ  state ç±»å , IDEä¼šæç¤ºé”™è¯¯, éœ€è¦æˆ‘ä»¬å–å®ç°æœªå®ç°çš„æ–¹æ³• . </p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RandomWordsState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">RandomWords</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">final</span> wordPair = <span class="keyword">new</span> WordPair.random();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Text(wordPair.asPascalCase);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>4. </strong> ç§»é™¤å•è¯ç”Ÿæˆä»£ç  , </p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'Welcome to Flutter'</span>,</span><br><span class="line">      home: <span class="keyword">new</span> Scaffold(</span><br><span class="line">        appBar: <span class="keyword">new</span> AppBar(</span><br><span class="line">          title: <span class="keyword">new</span> Text(<span class="string">'Welcome to Flutter'</span>),</span><br><span class="line">        ),</span><br><span class="line">        body: <span class="keyword">new</span> Center(</span><br><span class="line">          child: <span class="keyword">new</span> RandomWords(),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><span id="step4"></span></p><h3 id="æ­¥éª¤-4-åˆ›å»ºä¸€ä¸ªæ— é™æ»šåŠ¨çš„-ListView"><a href="#æ­¥éª¤-4-åˆ›å»ºä¸€ä¸ªæ— é™æ»šåŠ¨çš„-ListView" class="headerlink" title="æ­¥éª¤ 4 : åˆ›å»ºä¸€ä¸ªæ— é™æ»šåŠ¨çš„ ListView"></a>æ­¥éª¤ 4 : åˆ›å»ºä¸€ä¸ªæ— é™æ»šåŠ¨çš„ ListView</h3><p>è¿™ä¸ªæ­¥éª¤é‡Œ, æˆ‘ä»¬å°†æ‰©å…… RandomWordsState ç±» æ¥ç”Ÿæˆå’Œå±•ç¤ºå•è¯å¯¹çš„åˆ—è¡¨. å½“ç”¨æˆ·æ»‘åŠ¨é¡µé¢, ListView widget å±•ç¤ºçš„åˆ—è¡¨å°†ä¼šæ— é™å¢åŠ . ListView çš„ <code>builder</code> å·¥å‚æ„é€ å™¨å…è®¸æˆ‘ä»¬è§†éœ€æ‡’åŠ è½½åˆ›å»ºåˆ—è¡¨è§†å›¾</p><p> <strong>1. </strong>åœ¨ RandomWordsState ç±»ä¸­æ·»åŠ æˆå‘˜å˜é‡ <code>_suggestions</code> åˆ—è¡¨ç”¨æ¥ä¿å­˜æ¨èçš„å•è¯å¯¹.åœ¨ Dart è¯­è¨€ä¸­ , ä»¥ <code>_</code>ä¸‹åˆ’çº¿å¼€å¤´çš„å˜é‡/æ–¹æ³•ä¸ºç§æœ‰è®¿é—®æƒé™.</p><p>åŒæ ·çš„ , æ·»åŠ  <code>biggerFont</code> å˜é‡ç”¨æ¥ä½¿å­—ä½“å¤§å°æ›´å¤§</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RandomWordsState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">RandomWords</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> _suggestions = &lt;WordPair&gt;[];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> _biggerFont = <span class="keyword">const</span> TextStyle(fontSize: <span class="number">18.0</span>);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2 ~ 3. </strong>æ·»åŠ  <code>_buildSuggestions()</code>æ–¹æ³•åˆ° RandomWordsState ç±»ä¸­. æ­¤æ–¹æ³•è´Ÿè´£æ„å»ºåˆ—è¡¨ ListView å’Œå±•ç¤ºå»ºè®®çš„å•è¯å¯¹. </p><p>ListView ç±»æä¾›äº†ä¸€ä¸ª builder å±æ€§ , <code>itemBuilder</code> ä¸€ä¸ªå·¥å‚æ„å»ºè€…å’ŒæŒ‡å®šåŒ¿åå‡½æ•°çš„å›è°ƒåŠŸèƒ½.ä¸¤ä¸ªå‚æ•°è¢«ä¼ é€’ç»™å‡½æ•°- <code>BuildContext</code> è¿˜æœ‰è¡Œè¿­ä»£å™¨ <code>i</code> . è¿­ä»£å™¨ä» <code>0</code> å¼€å§‹ä¸”æ¯æ¬¡æ–¹æ³•è°ƒç”¨é€’å¢.</p><p>æ·»åŠ  <code>_buildRow</code> æ–¹æ³•</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Widget _buildSuggestions() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ListView.builder(</span><br><span class="line">        <span class="comment">// padding 16</span></span><br><span class="line">        padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">16.0</span>),</span><br><span class="line">        <span class="comment">// æ¯ä¸€å¯¹å•è¯å¯¹è°ƒç”¨ä¸€æ¬¡itemBuilder å›è°ƒ ,ç„¶åæ”¾ç½®ä¸€ä¸ªæ¨èçš„å•è¯å¯¹åœ¨è¡Œå†…</span></span><br><span class="line">        <span class="comment">// å¶æ•°è¡Œ , å‡½æ•°å¢åŠ ä¸ªå†…å®¹è¡Œæ˜¾ç¤ºå•è¯å¯¹,</span></span><br><span class="line">        <span class="comment">// å¥‡æ•°è¡Œ , å‡½æ•°æ·»åŠ ä¸€æ¡åˆ†å‰²çº¿å°éƒ¨ä»¶ (Divider Widget)å»æ˜¾ç¤ºåˆ†å‰²æ¡ç›®</span></span><br><span class="line"></span><br><span class="line">        itemBuilder: (context, i) &#123;</span><br><span class="line">          <span class="keyword">if</span> (i.isOdd) <span class="keyword">return</span> <span class="keyword">new</span> Divider();</span><br><span class="line"></span><br><span class="line">          <span class="comment">// index ä¸º i/2 çš„ä½™æ•´æ•°</span></span><br><span class="line">          <span class="keyword">final</span> index = i ~/ <span class="number">2</span>;</span><br><span class="line">          <span class="keyword">if</span> (index &gt;= _suggestions.length) &#123;</span><br><span class="line">            <span class="comment">// ...ç”Ÿæˆ10ä¸ªè¯å¯¹,æ·»åŠ åˆ°list</span></span><br><span class="line">            _suggestions.addAll(generateWordPairs().take(<span class="number">10</span>));</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> _buildRow(_suggestions[index]);</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p><strong>4. </strong>æ›´æ–° RandomWordsState çš„ build æ–¹æ³• , ä½¿ç”¨ <code>_buildSuggestions</code> ,ä¸å†ç›´æ¥ä½¿ç”¨è°ƒç”¨å•è¯ç”Ÿäº§åº“.</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RandomWordsState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">RandomWords</span>&gt; </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Scaffold (</span><br><span class="line">      appBar: <span class="keyword">new</span> AppBar(</span><br><span class="line">        title: <span class="keyword">new</span> Text(<span class="string">'Startup Name Generator'</span>),</span><br><span class="line">      ),</span><br><span class="line">    body: _buildSuggestions(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>5. </strong>æ›´æ–° MyApp çš„ build æ–¹æ³• . ä» MyApp ä¸­ç§»é™¤ Scaffold å’Œ AppBar å®ä¾‹. è¿™äº›å°†ä¼šè¢« RandomWordsState ç®¡ç† ,è¿™æ ·å°†æ›´å®¹æ˜“åœ°åœ¨ä¸‹ä¸ªæ­¥éª¤é¡µé¢è·³è½¬æ—¶å»æ”¹å˜å¯¼èˆªæ ä¸Šçš„åç§°.</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'Startup Name Generator'</span>,</span><br><span class="line">      home: <span class="keyword">new</span> RandomWords(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fp6udcnhf3j309q0j4q44.jpg" alt=""></p><p><span id="step5"></span></p><h3 id="æ­¥éª¤-5-å¢åŠ äº¤äº’"><a href="#æ­¥éª¤-5-å¢åŠ äº¤äº’" class="headerlink" title="æ­¥éª¤ 5 : å¢åŠ äº¤äº’"></a>æ­¥éª¤ 5 : å¢åŠ äº¤äº’</h3><p>è¿™ä¸ªæ­¥éª¤ä¸­ , æˆ‘ä»¬å°†å¢åŠ å¯ç‚¹å‡»çš„å¿ƒå½¢å›¾æ ‡åˆ°æ¯ä¸€è¡Œ . å½“ç”¨æˆ·ç‚¹å‡»åˆ—è¡¨æ¡ç›®æ—¶ , è§¦å‘å…¶ â€œfavoriteâ€ çŠ¶æ€ ,çŠ¶æ€æ”¹å˜ä¼šå°†å¯¹åº”å•è¯å¯¹æ·»åŠ åˆ°ä¿å­˜çš„é›†åˆæˆ–ä»ä¸­ç§»é™¤</p><p><strong>1. </strong> æ·»åŠ  <code>_saved</code> é›†åˆåˆ° RandomWordsState é‡Œ . é›†åˆå­˜å‚¨ç”¨æˆ·å–œå¥½çš„å•è¯å¯¹ , æ›´å€¾å‘äºç”¨ Set æ˜¯å› ä¸º Set ä¸­ä¸å…è®¸æœ‰é‡å¤çš„æ¡ç›®</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RandomWordsState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">RandomWords</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> _suggestions = &lt;WordPair&gt;[];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> _saved = <span class="keyword">new</span> <span class="built_in">Set</span>&lt;WordPair&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> _biggerFont = <span class="keyword">const</span> TextStyle(fontSize: <span class="number">18.0</span>);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2. </strong>åœ¨ <code>_buildRow</code> å‡½æ•°é‡Œ , æ·»åŠ  <code>alreadySaved</code> å˜é‡æ¥æ£€æŸ¥ç¡®ä¿å•è¯å¯¹è¿˜æœªè¢«æ·»åŠ åˆ°å–œå¥½çš„é›†åˆä¸­.</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Widget _buildRow(WordPair pair) &#123;</span><br><span class="line">  <span class="keyword">final</span> alreadySaved = _saved.contains(pair);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3 ~ 4. </strong>è¿˜æ˜¯åœ¨<code>_buildRow</code> é‡Œ , æ·»åŠ å¿ƒå½¢å›¾æ ‡ . é‡å¯åº”ç”¨ , æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¿ƒå½¢å·²è¢«æ·»åŠ  , åªæ˜¯æš‚æ—¶æ²¡æœ‰äº¤äº’äº‹ä»¶</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Widget _buildRow(WordPair pair) &#123;</span><br><span class="line">  <span class="keyword">final</span> alreadySaved = _saved.contains(pair);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> ListTile(</span><br><span class="line">    title: <span class="keyword">new</span> Text(</span><br><span class="line">      pair.asPascalCase,</span><br><span class="line">      style: _biggerFont,</span><br><span class="line">    ),</span><br><span class="line">    trailing: <span class="keyword">new</span> Icon(</span><br><span class="line">      alreadySaved ? Icons.favorite : Icons.favorite_border,</span><br><span class="line">      color: alreadySaved ? Colors.red : <span class="keyword">null</span>,</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>5. </strong>åœ¨<code>_buildRow</code> ä¸­è®¾ç½®å¿ƒå½¢å¯ç‚¹å‡». å¦‚æœä¸€ä¸ªå•è¯æ¡ç›®è¢«æ·»åŠ åˆ°å–œæ¬¢çš„é›†åˆæ—¶, å†æ¬¡å•å‡»å®ƒå°±èƒ½ä»å–œæ¬¢çš„é›†åˆä¸­ç§»é™¤ . å½“å¿ƒå½¢è¢«ç‚¹å‡» , å‡½æ•°ä¼šè°ƒç”¨ <code>setState()</code>å»é€šçŸ¥æ¡†æ¶çŠ¶æ€è¢«æ”¹å˜äº†.</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Widget _buildRow(WordPair pair) &#123;</span><br><span class="line">  <span class="keyword">final</span> alreadySaved = _saved.contains(pair);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> ListTile(</span><br><span class="line">    title: <span class="keyword">new</span> Text(</span><br><span class="line">      pair.asPascalCase,</span><br><span class="line">      style: _biggerFont,</span><br><span class="line">    ),</span><br><span class="line">    trailing: <span class="keyword">new</span> Icon(</span><br><span class="line">      alreadySaved ? Icons.favorite : Icons.favorite_border,</span><br><span class="line">      color: alreadySaved ? Colors.red : <span class="keyword">null</span>,</span><br><span class="line">    ),</span><br><span class="line">    onTap: () &#123;</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        <span class="keyword">if</span> (alreadySaved) &#123;</span><br><span class="line">          _saved.remove(pair);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          _saved.add(pair);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note info"><p>åœ¨ Flutter reactå¼çš„æ¡†æ¶ä¸­ , è°ƒç”¨ setState() ä¼šä¸º State å¯¹è±¡è§¦å‘ build() æ–¹æ³• , æœ€åæ›´æ–°åˆ°UIä¸Š.</p></div><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fp82yfuodij309q0j40u5.jpg" alt=""></p><p><span id="step6"></span></p><h3 id="æ­¥éª¤-6-è·³è½¬åˆ°æ–°é¡µé¢"><a href="#æ­¥éª¤-6-è·³è½¬åˆ°æ–°é¡µé¢" class="headerlink" title="æ­¥éª¤ 6 : è·³è½¬åˆ°æ–°é¡µé¢"></a>æ­¥éª¤ 6 : è·³è½¬åˆ°æ–°é¡µé¢</h3><p>åœ¨è¿™ä¸ªæ­¥éª¤é‡Œ , æˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªé¡µé¢ (åœ¨Flutteré‡Œå« route ) å±•ç¤ºå–œå¥½çš„æ¨èè¯å¯¹ . æˆ‘ä»¬å°†å­¦åˆ°å¦‚ä½•ä»ä¸»é¡µé¢å¯¼èˆªåˆ°æ–°é¡µé¢ .</p><p>åœ¨ Flutter ä¸­ , Navigator ç®¡ç†ç€ä¸€ä¸ªåŒ…å«appé¡µé¢çš„æ ˆ . æ¨é€ä¸€ä¸ªé¡µé¢è¿›å…¥ Navigator çš„æ ˆä¸­, åˆ™ä¼šæ›´æ–°æ˜¾ç¤ºè¿™ä¸ªé¡µé¢ .  ä» Navigatoræ ˆä¸­æ¨å‡ºä¸€ä¸ªé¡µé¢ , åˆ™ä¼šæ˜¾ç¤ºä¸Šä¸€ä¸ªé¡µé¢ .</p><p><strong>1 ~ 3. </strong> åœ¨ RandomWordsState çš„ build æ–¹æ³•ä¸­ç»™ AppBar æ·»åŠ ä¸€ä¸ªåˆ—è¡¨å›¾æ ‡ . å½“ç”¨æˆ·ç‚¹å‡»å›¾æ ‡ , ä¸€ä¸ªåŒ…å«å–œå¥½åˆ—è¡¨çš„é¡µé¢ä¼šè¢«æ¨é€å‘ˆç° .</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RandomWordsState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">RandomWords</span>&gt; </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Scaffold(</span><br><span class="line">      appBar: <span class="keyword">new</span> AppBar(</span><br><span class="line">        title: <span class="keyword">new</span> Text(<span class="string">'Startup Name Generator'</span>),</span><br><span class="line">        actions: &lt;Widget&gt;[</span><br><span class="line">          <span class="keyword">new</span> IconButton(icon: <span class="keyword">new</span> Icon(Icons.list), onPressed: _pushSaved),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">      body: _buildSuggestions(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ RandomWordsState ä¸­æ·»åŠ  <code>_pushSaved</code>æ–¹æ³•</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RandomWordsState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">RandomWords</span>&gt; </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">void</span> _pushSaved() &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>4 ~ 6. </strong> æ·»åŠ  MaterialPageRoute åŠå®ƒçš„ builder . æ·»åŠ ä»£ç ç”Ÿæˆ ListTile è¡Œ . ListTile çš„<code>divideTiles()</code> æ–¹æ³•åœ¨æ¯ä¸€æ¡æ¡ç›®é—´å¢åŠ æ°´å¹³è·ç¦» . <code>divided</code> å˜é‡ä¿å­˜ç€æœ€ç»ˆçš„è¡Œ , é€šè¿‡å‡½æ•° <code>toList()</code> è½¬æ¢ä¸ºåˆ—è¡¨</p><p>builder å±æ€§è¿”å›ä¸€ä¸ª Scaffold , åŒ…å«äº†æ–°é¡µé¢çš„å¯¼èˆªæ  ,åä¸º â€œSaved Suggestionâ€ .æ–°é¡µé¢çš„å†…å®¹éƒ¨åˆ†ç”± ListViewåŒ…å« ListTiles è¡Œç»„æˆ , æ¯ä¸€è¡Œç”±ä¸€ä¸ª divider åˆ†éš” .</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> _pushSaved() &#123;</span><br><span class="line">  Navigator.of(context).push(</span><br><span class="line">    <span class="keyword">new</span> MaterialPageRoute(</span><br><span class="line">      builder: (context) &#123;</span><br><span class="line">        <span class="keyword">final</span> tiles = _saved.map(</span><br><span class="line">          (pair) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ListTile(</span><br><span class="line">              title: <span class="keyword">new</span> Text(</span><br><span class="line">                pair.asPascalCase,</span><br><span class="line">                style: _biggerFont,</span><br><span class="line">              ),</span><br><span class="line">            );</span><br><span class="line">          &#125;,</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">final</span> divided = ListTile</span><br><span class="line">          .divideTiles(</span><br><span class="line">            context: context,</span><br><span class="line">            tiles: tiles,</span><br><span class="line">          )</span><br><span class="line">          .toList();</span><br><span class="line">      &#125;,</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fp98s3h46ij30va0uqaeo.jpg" alt=""></p><p><span id="step7"></span></p><h3 id="æ­¥éª¤-7-é€šè¿‡ä¸»é¢˜æ”¹å˜UI"><a href="#æ­¥éª¤-7-é€šè¿‡ä¸»é¢˜æ”¹å˜UI" class="headerlink" title="æ­¥éª¤ 7 : é€šè¿‡ä¸»é¢˜æ”¹å˜UI"></a>æ­¥éª¤ 7 : é€šè¿‡ä¸»é¢˜æ”¹å˜UI</h3><p>åœ¨è¿™ä¸ªæœ€ç»ˆæ­¥éª¤ä¸­, æˆ‘ä»¬å°†æ”¹å˜appçš„ä¸»é¢˜ . </p><p><strong>1. </strong>æˆ‘ä»¬å¯ä»¥ç®€å•åœ°é€šè¿‡é…ç½® ThemeData ç±» æ”¹å˜appçš„ä¸»é¢˜ . å½“å‰appæ˜¯é»˜è®¤ä¸»é¢˜, æˆ‘ä»¬å°†æ”¹å˜ä¸»è‰²ä¸ºç´«è‰²</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'Startup Name Generator'</span>,</span><br><span class="line">      home: <span class="keyword">new</span> RandomWords(),</span><br><span class="line">      theme: <span class="keyword">new</span> ThemeData(</span><br><span class="line">        primaryColor: Colors.purple</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åè´´ä¸€ä¸‹ <code>main.dart</code> å®Œæ•´ä»£ç  , æ–¹ä¾¿å°å‹ä»¬æŸ¥çœ‹</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:english_words/english_words.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(<span class="keyword">new</span> MyApp());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'Startup Name Generator'</span>,</span><br><span class="line">      home: <span class="keyword">new</span> RandomWords(),</span><br><span class="line">      theme: <span class="keyword">new</span> ThemeData(primaryColor: Colors.purple),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RandomWords</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  createState() =&gt; <span class="keyword">new</span> RandomWordsState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RandomWordsState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">RandomWords</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> _suggestions = &lt;WordPair&gt;[];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> _saved = <span class="keyword">new</span> <span class="built_in">Set</span>&lt;WordPair&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> _biggerFont = <span class="keyword">const</span> TextStyle(fontSize: <span class="number">18.0</span>);</span><br><span class="line"></span><br><span class="line">  Widget _buildSuggestions() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ListView.builder(</span><br><span class="line">        <span class="comment">// padding 16</span></span><br><span class="line">        padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">16.0</span>),</span><br><span class="line">        <span class="comment">// æ¯ä¸€å¯¹å•è¯å¯¹è°ƒç”¨ä¸€æ¬¡itemBuilder å›è°ƒ ,ç„¶åæ”¾ç½®ä¸€ä¸ªæ¨èçš„å•è¯å¯¹åœ¨è¡Œå†…</span></span><br><span class="line">        <span class="comment">// å¶æ•°è¡Œ , å‡½æ•°å¢åŠ ä¸ªå†…å®¹è¡Œæ˜¾ç¤ºå•è¯å¯¹,</span></span><br><span class="line">        <span class="comment">// å¥‡æ•°è¡Œ , å‡½æ•°æ·»åŠ ä¸€æ¡åˆ†å‰²çº¿å°éƒ¨ä»¶ (Divider Widget)å»æ˜¾ç¤ºåˆ†å‰²æ¡ç›®</span></span><br><span class="line"></span><br><span class="line">        itemBuilder: (context, i) &#123;</span><br><span class="line">          <span class="keyword">if</span> (i.isOdd) <span class="keyword">return</span> <span class="keyword">new</span> Divider();</span><br><span class="line"></span><br><span class="line">          <span class="comment">// index ä¸º i/2 çš„ä½™æ•´æ•°</span></span><br><span class="line">          <span class="keyword">final</span> index = i ~/ <span class="number">2</span>;</span><br><span class="line">          <span class="keyword">if</span> (index &gt;= _suggestions.length) &#123;</span><br><span class="line">            <span class="comment">// ...ç”Ÿæˆ10ä¸ªè¯å¯¹,æ·»åŠ åˆ°list</span></span><br><span class="line">            _suggestions.addAll(generateWordPairs().take(<span class="number">10</span>));</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> _buildRow(_suggestions[index]);</span><br><span class="line">        &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Widget _buildRow(WordPair pair) &#123;</span><br><span class="line">    <span class="keyword">final</span> alreadySaved = _saved.contains(pair);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ListTile(</span><br><span class="line">      title: <span class="keyword">new</span> Text(</span><br><span class="line">        pair.asPascalCase,</span><br><span class="line">        style: _biggerFont,</span><br><span class="line">      ),</span><br><span class="line">      trailing: <span class="keyword">new</span> Icon(</span><br><span class="line">        alreadySaved ? Icons.favorite : Icons.favorite_border,</span><br><span class="line">        color: alreadySaved ? Colors.red : <span class="keyword">null</span>,</span><br><span class="line">      ),</span><br><span class="line">      onTap: () &#123;</span><br><span class="line">        setState(() &#123;</span><br><span class="line">          <span class="keyword">if</span> (alreadySaved) &#123;</span><br><span class="line">            _saved.remove(pair);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            _saved.add(pair);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Scaffold(</span><br><span class="line">      appBar: <span class="keyword">new</span> AppBar(</span><br><span class="line">        title: <span class="keyword">new</span> Text(<span class="string">'Startup Name Generator'</span>),</span><br><span class="line">        actions: &lt;Widget&gt;[</span><br><span class="line"><span class="comment">//          new IconButton(icon: new Icon(Icons.colorize),onPressed: _changeTheme),</span></span><br><span class="line">          <span class="keyword">new</span> IconButton(icon: <span class="keyword">new</span> Icon(Icons.list), onPressed: _pushSaved)</span><br><span class="line"></span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">      body: _buildSuggestions(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _changeTheme()&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _pushSaved() &#123;</span><br><span class="line">    Navigator.of(context).push(</span><br><span class="line">      <span class="keyword">new</span> MaterialPageRoute(</span><br><span class="line">        builder: (context) &#123;</span><br><span class="line">          <span class="keyword">final</span> tiles = _saved.map(</span><br><span class="line">            (pair) &#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="keyword">new</span> ListTile(</span><br><span class="line">                title: <span class="keyword">new</span> Text(</span><br><span class="line">                  pair.asPascalCase,</span><br><span class="line">                  style: _biggerFont,</span><br><span class="line">                ),</span><br><span class="line">              );</span><br><span class="line">            &#125;,</span><br><span class="line">          );</span><br><span class="line">          <span class="keyword">final</span> divided = ListTile</span><br><span class="line">              .divideTiles(</span><br><span class="line">                context: context,</span><br><span class="line">                tiles: tiles,</span><br><span class="line">              )</span><br><span class="line">              .toList();</span><br><span class="line"></span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> Scaffold(</span><br><span class="line">            appBar: <span class="keyword">new</span> AppBar(</span><br><span class="line">              title: <span class="keyword">new</span> Text(<span class="string">'Saved Suggestions'</span>),</span><br><span class="line">            ),</span><br><span class="line">            body: <span class="keyword">new</span> ListView(children: divided),</span><br><span class="line">          );</span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><span id="done"></span></p><h3 id="å®Œæˆ"><a href="#å®Œæˆ" class="headerlink" title="å®Œæˆ!"></a>å®Œæˆ!</h3><p>è‡³æ­¤ , æˆ‘ä»¬ç¬¬ä¸€ä¸ª app å·²ç»å®Œæˆ . <a href="https://github.com/lhalcyon/flutter_first_app" target="_blank" rel="noopener">GitHub åœ°å€</a>  </p><p>åŠŸèƒ½ç›¸å¯¹æ¥è¯´è¾ƒç®€å• , ä½†æ˜¯å¤§ä½“ä¸Šè®©æˆ‘ä»¬å¯¹å¼€å‘ Flutter app æœ‰äº†ä¸€å®šäº†è§£. ä¹‹åæˆ‘ä»¬å°†å»¶ç»­é˜…è¯»å®˜ç½‘çš„æ•™ç¨‹ , å¼€å§‹è¾ƒå…¨é¢åœ°äº†è§£æ„å»ºUIç›¸å…³çš„éƒ¨åˆ†.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨ &lt;a href=&quot;https://lhalcyon.com/flutter-basic-env&quot;&gt;ä¸Šä¸€ç¯‡æ–‡ç« &lt;/a&gt; ä¸­,æˆ‘ä»¬è®²è§£äº† Flutter å¼€å‘ç¯å¢ƒæ­å»º , ä»¥åŠè¿è¡Œäº†å®˜æ–¹demoç®€å•ä½“éªŒäº†ä¸‹ Flutter app .&lt;/p&gt;
&lt;p&gt;æ­¤ç¯‡æˆ‘ä»¬å°†å¼€å§‹å¯¹ä¸€äº› Flutter app ä¸­çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µè¿›è¡Œè®²è§£ , ä¸€äº›åŸºæœ¬çš„æ“ä½œåšä¸€äº›ç¤ºä¾‹ , ä¸»è¦æ˜¯å‚è€ƒå®˜ç½‘çš„æ•™ç¨‹ &lt;a href=&quot;https://flutter.io/get-started/codelab/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Write Your First Flutter App&lt;/a&gt; &lt;/p&gt;
&lt;div class=&quot;note info&quot;&gt;&lt;p&gt;è‹¥ä½ å¯¹é¢å‘å¯¹è±¡ç¼–ç¨‹ç†Ÿæ‚‰,ä»¥åŠå¯¹åŸºæœ¬ç¼–ç¨‹æ¦‚å¿µå¦‚å˜é‡ã€å¾ªç¯ã€æ¡ä»¶äº†è§£ , åˆ™é€‚åˆé˜…è¯»æœ¬ç¯‡æ–‡ç«  . ä¸å¿…éœ€è¦æ‹¥æœ‰ Dart æˆ–ç§»åŠ¨ç¼–ç¨‹ç»éªŒ.&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´å¥½çš„é˜…è¯»ä½“éªŒ , è¯·ç‚¹å‡» &lt;a href=&quot;https://lhalcyon.com/flutter-basic-concept/&quot;&gt;é˜…è¯»åŸæ–‡&lt;/a&gt;   :)&lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="Flutter" scheme="https://lhalcyon.com/categories/Flutter/"/>
    
    
      <category term="Flutter" scheme="https://lhalcyon.com/tags/Flutter/"/>
    
  </entry>
  
  <entry>
    <title>FlutteråŸºç¡€-(1)ç¯å¢ƒæ­å»ºåŠdemoè¿è¡Œ</title>
    <link href="https://lhalcyon.com/flutter-basic-env/"/>
    <id>https://lhalcyon.com/flutter-basic-env/</id>
    <published>2018-03-05T16:00:00.000Z</published>
    <updated>2018-03-21T13:09:54.952Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://flutter.io/" target="_blank" rel="noopener">Flutter</a> æ˜¯ä¸€æ¬¾è°·æ­Œç”¨ä»¥åŒæ—¶åœ¨ iOS å’Œ Android ä¸Šåˆ¶ä½œé«˜è´¨é‡åŸç”Ÿç•Œé¢çš„ç§»åŠ¨åº”ç”¨UIæ¡†æ¶.ç›®å‰è°·æ­Œæ˜¯å·²å‘å¸ƒäº† Flutter Beta ç‰ˆ,åŒæ—¶ä¹Ÿæä¾›äº†å¤šä¸ª Sample Project ä¾›å­¦ä¹ . Flutter ä¸»è¦æœ‰ç€<strong>å¿«é€Ÿå¼€å‘</strong>ã€<strong>æœ‰è¡¨ç°åŠ›åŠçµæ´»çš„UI</strong>ã€<strong>åŸç”Ÿè¡¨ç°</strong>ç­‰ç‰¹ç‚¹.</p><p><strong>å¿«é€Ÿå¼€å‘</strong></p><p>æé€Ÿçƒ­éƒ¨ç½²å°±èƒ½ä½¿appæ„å»ºç”Ÿæ•ˆ,ä½¿ç”¨å¤§é‡å¯æ·±åº¦è‡ªå®šä¹‰åŒ–çš„å°éƒ¨ä»¶ (Widgets) ä¾›å¿«é€Ÿå¼€å‘åŸç”Ÿç•Œé¢.</p><p><strong>æœ‰è¡¨ç°åŠ›åŠçµæ´»çš„UI</strong></p><p>å¿«é€Ÿåœ°å°†ç‰¹æ€§é›†ä¸­åœ¨å®¢æˆ·ç«¯ç”¨æˆ·ä½“éªŒä¸Š.åˆ†å±‚ä½“ç³»ç»“æ„å…è®¸æ·±åº¦å®šåˆ¶,æœ€ç»ˆå‘ˆç°å¿«é€Ÿæ¸²æŸ“ä»¥åŠæœ‰è¡¨ç°åŠ›å’Œçµæ´»çš„è®¾è®¡</p><p><strong>åŸç”Ÿè¡¨ç°</strong></p><p>Flutterçš„å°éƒ¨ä»¶åŒ…å«äº†æ‰€æœ‰å…³é”®çš„å¹³å°å·®å¼‚,å¦‚æ»šåŠ¨ã€å¯¼èˆªã€å›¾æ ‡å’Œå­—ä½“,ä»¥åœ¨iOSå’ŒAndroidä¸Šæä¾›å®Œæ•´çš„åŸç”Ÿè¡¨ç°</p><div class="note info"><p>ç±»ä¼¼äº Fackbook çš„ React Native , æˆ‘ä»¬å¯ç”¨ Flutter å¼€å‘ä¸€å¥—ä»£ç ,åº”ç”¨äº Android ä»¥åŠ iOS å¹³å°ä¸Š.ä¸ä»…å¦‚æ­¤, Flutter è¿˜å¯åº”ç”¨äºè°·æ­Œå°†æ¨å‡ºçš„æ–°ç³»ç»Ÿ <a href="https://baike.baidu.com/item/Fuchsia/19900570?fr=aladdin" target="_blank" rel="noopener">Fuchsia</a> . å¯ä»¥çœ‹å‡º , Flutter ç¡®æœ‰ç»Ÿä¸€ç§»åŠ¨ç«¯çš„èƒ½åŠ› , èº«ä¸ºç§»åŠ¨å¼€å‘è€… , å½“ç„¶è¦æœ‰æ‰€äº†è§£. so , æ¥ä¸‹æ¥æˆ‘ä»¬å°†å¼€å§‹ <strong>æ­å»ºå¼€å‘ç¯å¢ƒ , å¹¶ä¸”è¿è¡Œå®˜æ–¹çš„ demo </strong></p><p>ä¸ºäº†æ›´å¥½çš„é˜…è¯»ä½“éªŒ, è¯·ç‚¹å‡»<a href="https://lhalcyon.com/flutter-basic-env">é˜…è¯»åŸæ–‡</a> :)</p></div><a id="more"></a><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>é¦–å…ˆè¿›å…¥ <a href="https://flutter.io/get-started/install/" target="_blank" rel="noopener">Flutter Install</a> é€‰æ‹©ç›¸åº”æ“ä½œç³»ç»Ÿä¸‹çš„å®‰è£…åŒ…è¿›è¡Œå®‰è£… <img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fp33tj8o6uj30h7091t9j.jpg" alt=""></p><p>é¦–å…ˆæ­¤å¤„æœ‰ä¸ªæ¸©é¦¨å°ç‚¹ , è°·æ­Œä¸ºä¸­å›½å¼€å‘è€…å‡†å¤‡äº†å›½å†…é•œåƒ,ä¸ºå›¾ä¸­çš„é“¾æ¥ <a href="https://github.com/flutter/flutter/wiki/Using-Flutter-in-China" target="_blank" rel="noopener">this wiki article</a> . ä¸»è¦æ˜¯é…ç½®ä¸¤ä¸ªç¯å¢ƒå˜é‡ <code>PUB_HOSTED_URL</code> å’Œ <code>FLUTTER_STORAGE_BASE_URL</code> , å®‰è£…æ—¶å½“æ£€æµ‹åˆ°æœ‰è¿™ä¿©ç¯å¢ƒå˜é‡,å°±ä¼šä¼˜å…ˆè¯»å–å˜é‡å­˜å‚¨çš„åœ°å€å»å®‰è£….</p><p>åˆ›å»ºæˆ–è€…æ‰“å¼€ <code>$HOME/.bash_profile</code> , åœ¨ä¸‹æ–¹æ·»åŠ ä¸¤è¡Œå˜é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PUB_HOSTED_URL=https://pub.flutter-io.cn</span><br><span class="line"><span class="built_in">export</span> FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn</span><br></pre></td></tr></table></figure><p>ç„¶å <code>source $HOME/.bash_profile</code> ä½¿ä¹‹åœ¨å½“å‰ terminal ç”Ÿæ•ˆ.</p><p>æœ€åå¯ç”¨ <code>echo $PUB_HOSTED_URL</code> å’Œ <code>echo $FLUTTER_STORAGE_BASE_URL</code>  æ£€æµ‹æ˜¯å¦æ·»åŠ æˆåŠŸ</p><div class="note warning"><p>æœ€å¥½é…ç½®ä¸‹è¿™ä¸ªåœ°å€.ç¬”è€…å°è¯•æ•°æ¬¡,ç§‘å­¦ä¸Šç½‘æœŸé—´ä½†æ²¡é…ç½®è¿™å€†åœ°å€æ—¶,ä¸‹è½½ç»„ä»¶æ—¶æ€»ä¼šå´©æºƒä¸­æ–­ ğŸ˜§. </p></div><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fp3807eycaj30fa0840uo.jpg" alt=""></p><p>æ­¤å¤„æˆ‘ä»¬é€‰æ‹© macOS ,å…¶ä»–ç³»ç»Ÿä¸‹çš„å®‰è£…å¯è‡ªè¡Œå‚è€ƒè°·æ­Œæ–‡æ¡£.</p><h4 id="ç³»ç»Ÿè¦æ±‚"><a href="#ç³»ç»Ÿè¦æ±‚" class="headerlink" title="ç³»ç»Ÿè¦æ±‚"></a>ç³»ç»Ÿè¦æ±‚</h4><p>æƒ³è¦å®‰è£…å¹¶è¿è¡Œ Flutter , å¼€å‘ç¯å¢ƒå¿…é¡»æ»¡è¶³æœ€ä½è¦æ±‚:</p><ul><li><strong>æ“ä½œç³»ç»Ÿ</strong> : macOS (64ä½)</li><li><strong>ç£ç›˜ç©ºé—´</strong> : 700 MB (ä¸åŒ…å« Xcode æˆ– Android Studioçš„ç©ºé—´)</li><li><strong>å·¥å…·</strong> : Flutter ä¾èµ–äºè¿™äº›ç³»ç»Ÿç¯å¢ƒé‡Œçš„å‘½ä»¤è¡Œå·¥å…·<ul><li><code>bash</code> , <code>mkdir</code> , <code>rm</code> , <code>git</code> , <code>curl</code> , <code>unzip</code> , <code>which</code></li></ul></li></ul><h4 id="è·å–-Flutter-SDK"><a href="#è·å–-Flutter-SDK" class="headerlink" title="è·å– Flutter SDK"></a>è·å– Flutter SDK</h4><p>ä½¿ç”¨ <code>git</code> å‘½ä»¤å…‹éš†åº“å¹¶ä¸”æ·»åŠ  <code>flutter</code> å·¥å…·åˆ°ç¯å¢ƒå˜é‡ä¸­. è¿è¡Œ <code>flutter doctor</code>  ä¼šæ˜¾ç¤ºå‰©ä½™éœ€è¦å»å®‰è£…çš„ä¾èµ–.</p><h5 id="å…‹éš†ä»“åº“"><a href="#å…‹éš†ä»“åº“" class="headerlink" title="å…‹éš†ä»“åº“"></a>å…‹éš†ä»“åº“</h5><p>å½“å‰æˆ‘ä»¬éœ€è¦å…‹éš†ä»“åº“<code>beta</code>åˆ†æ”¯ , ç„¶åæ·»åŠ ç¯å¢ƒå˜é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b beta https://github.com/flutter/flutter.git</span><br><span class="line"><span class="built_in">export</span> PATH=`<span class="built_in">pwd</span>`/flutter/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå‘½ä»¤åªæ˜¯è®¾ç½®ä¸´æ—¶å˜é‡,å»ºè®®å°†å…¶æ°¸ä¹…æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­.</p><ol><li>åˆ›å»ºæˆ–æ‰“å¼€ <code>$HOME/.bash_profile</code> æ–‡ä»¶.</li><li>æ·»åŠ ä»¥ä¸‹è¡Œ,å¹¶ä¸”æ›¿æ¢ <code>[PATH_TO_FLUTTER_GIT_DIRECTORY]</code> ä¸ºä½ çš„ Flutter gitç›®å½•</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=[PATH_TO_FLUTTER_GIT_DIRECTORY]/flutter/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p>ç„¶åè¿è¡Œ <code>source $HOME/.bash_profile</code> ä½¿ä¹‹åœ¨å½“å‰ terminal ç”Ÿæ•ˆ.</p><p>å¯ç”¨ <code>echo $PATH</code>  æ£€æµ‹æ˜¯å¦æ·»åŠ æˆåŠŸ</p><h5 id="æ£€æµ‹ä¾èµ–"><a href="#æ£€æµ‹ä¾èµ–" class="headerlink" title="æ£€æµ‹ä¾èµ–"></a>æ£€æµ‹ä¾èµ–</h5><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æµ‹å¿…è¦ä¾èµ–æ˜¯å¦å·²ç»å®Œæˆå®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter doctor</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤æ£€æµ‹ç¯å¢ƒç„¶åå°†ç»“æœæ˜¾ç¤ºåœ¨å‘½ä»¤è¡Œçª—å£. Dart SDK ä¸ Flutter ç»‘å®šåœ¨ä¸€èµ· , æ²¡å¿…è¦å•ç‹¬å®‰è£… Dart. ä»”ç»†æ£€æŸ¥ç»“æœ,å¯èƒ½éœ€è¦å®‰è£…ä¾èµ–æˆ–è€…æ‰§è¡Œä»»åŠ¡ (ç²—ä½“æ˜¾ç¤º)</p><p>eg.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[-] Android toolchain - develop for Android devices</span><br><span class="line">    â€¢ Android SDK at /Users/obiwan/Library/Android/sdk</span><br><span class="line">    âœ— Android SDK is missing command line tools; download from https://goo.gl/XxQghQ</span><br><span class="line">    â€¢ Try re-installing or updating your Android SDK,</span><br><span class="line">      visit https://flutter.io/setup/#android-setup for detailed instructions.</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€æ¬¡è¿è¡Œ flutter å‘½ä»¤ å¦‚( <code>flutter doctor</code> ), ä¼šè‡ªè¡Œå¼€å§‹ä¸‹è½½ä¾èµ–åº“å¹¶ç¼–è¯‘. åç»­çš„è¿è¡Œå°±ä¼šå˜çš„å¿«çš„å¤š. </p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fp3dbpgjtfj30vo0kcwh2.jpg" alt=""></p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fp3dgtv63fj30vo0zwalj.jpg" alt=""></p><p>Flutter ä½¿ç”¨ Google Analytics æ¥åŒ¿åæŠ¥å‘ŠåŠŸèƒ½ä½¿ç”¨ç»Ÿè®¡ä»¥åŠå´©æºƒæ—¥å¿—, å¯é€šè¿‡ <code>flutter config --no-analytics</code> æ¥ç¦ç”¨æŠ¥å‘Š.</p><blockquote><p>è¿™é‡Œè¯´å¥é¢˜å¤–è¯ , å‡ å¹´å‰è°£ä¼ è°·æ­Œè¦é‡‡ç”¨æ–°çš„ Android å¼€å‘è¯­è¨€ Sky ä»£æ›¿ Java . åé¢æ²‰æººäº†ä¸€æ®µæ—¶é—´ , æœ€ç»ˆå®ƒè¿˜æ˜¯è¢«è°·æ­Œå‘å¸ƒå‡ºæ¥äº†,åªä¸è¿‡ç°åœ¨å« Flutter . ä½†ä¸éš¾å‘ç° , Flutterä¸­å¤šå°‘è¿˜æ˜¯æœ‰æ˜“å®¹å‰çš„çš„å½±å­,æ¯”å¦‚ä¸Šå›¾ä¸­ç¬¬äºŒä¸ªåŠ è½½çš„åŒ…å°±å« sky_engine ..</p></blockquote><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fp4bn6wijvj306j087aav.jpg" alt=""></p><h4 id="ç¼–è¾‘å™¨è®¾ç½®"><a href="#ç¼–è¾‘å™¨è®¾ç½®" class="headerlink" title="ç¼–è¾‘å™¨è®¾ç½®"></a>ç¼–è¾‘å™¨è®¾ç½®</h4><p>ç¯å¢ƒæ­å»ºå¥½äº† , å¼€å§‹é€‰æ‹©ç¼–è¾‘å™¨äº†.</p><p>å»ºè®®çš„ç¼–è¾‘å™¨æœ‰ Android Studio , IntelliJ IDEA , VS Codeç­‰.</p><ul><li>Android Studio éœ€è¦ 3.0 æˆ–ä»¥ä¸Šçš„ç‰ˆæœ¬</li><li>IntelliJ IDEA  éœ€è¦ 2017.1 æˆ–ä¹‹åçš„ç‰ˆæœ¬</li><li>VS Code éœ€è¦ 1.20 æˆ–ä»¥ä¸Šçš„ç‰ˆæœ¬</li></ul><p>è¿™é‡Œæˆ‘ä»¬é€‰æ‹© IntelliJ IDEA æ¥ä½œä¸ºç¼–è¾‘å™¨å¹¶ä¸”å®‰è£… <code>Flutter</code> , <code>Dart</code> ä¸¤æ¬¾æ’ä»¶ , å®‰è£…æ­¥éª¤ä¸»è¦ä¸º</p><ol><li>å¼€å¯ IntelliJ IDEA</li><li>æ‰“å¼€æ’ä»¶åå¥½è®¾ç½® (macOSä¸Šä¸º<strong>Preferences&gt;Plugins</strong> ,  WindowsåŠLinuxä¸Šä¸º<strong>File&gt;Settings&gt;Plugins</strong>)</li><li>é€‰æ‹© <strong>Browse repositoriesâ€¦</strong> , è¾“å…¥ Flutter ç„¶åç‚¹å‡» install å®‰è£…</li><li>ç‚¹å‡» <code>Yes</code> å½“æç¤ºå»å®‰è£… Dart Plugin</li><li>å®‰è£…å®Œæˆåé‡å¯ IDEA</li></ol><p>Android Studio å®‰è£…æ’ä»¶ä¸ IntelliJ IDEAä¸€è‡´ , VS Code çš„è¯·å‚è€ƒ<a href="https://flutter.io/get-started/editor/" target="_blank" rel="noopener">å®˜ç½‘ Editor</a></p><h4 id="å¹³å°è®¾ç½®"><a href="#å¹³å°è®¾ç½®" class="headerlink" title="å¹³å°è®¾ç½®"></a>å¹³å°è®¾ç½®</h4><p>macOS æ”¯æŒå¼€å‘ Android åŠ iOS  Flutter apps .å®Œæˆå…¶ä¸­ä¸€ä¸ªå¹³å°çš„è®¾ç½®å³å¯ç¼–è¯‘å’Œè¿è¡Œ Flutter app .</p><h5 id="iOS-è®¾ç½®"><a href="#iOS-è®¾ç½®" class="headerlink" title="iOS è®¾ç½®"></a>iOS è®¾ç½®</h5><h6 id="å®‰è£…-Xcode"><a href="#å®‰è£…-Xcode" class="headerlink" title="å®‰è£… Xcode"></a>å®‰è£… Xcode</h6><p>æˆ‘ä»¬éœ€è¦å®‰è£… Xcode 7.2 æˆ–ä»¥ä¸Šç‰ˆæœ¬ , æ•´ä½“æ­¥éª¤ä¸º:</p><ol><li>å®‰è£… Xcode 7.2 æˆ–ä»¥ä¸Šçš„ç‰ˆæœ¬ (é€šè¿‡ <a href="https://developer.apple.com/xcode/" target="_blank" rel="noopener">web</a> æˆ–è€… <a href="https://itunes.apple.com/us/app/xcode/id497799835" target="_blank" rel="noopener">Mac AppStore</a>) </li><li>å‘½ä»¤è¡Œè¿è¡Œ <code>sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer</code> é…ç½® Xcodeå‘½ä»¤è¡Œå·¥å…·ä»¥ä½¿ç”¨æ–°å®‰è£…çš„ Xcode ç‰ˆæœ¬</li><li>ç¡®è®¤ Xcode license åè®®è¢«ç­¾ç½²è¿‡. å¯é€šè¿‡æ‰“å¼€ä¸€æ¬¡ Xcode æˆ–å‘½ä»¤è¡Œè¿è¡Œ <code>sudo xcodebuild -license</code></li></ol><p>ä½¿ç”¨ Xcode æˆ‘ä»¬å°±èƒ½åœ¨ iOS è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œ Flutter apps</p><h6 id="è®¾ç½®iOSæ¨¡æ‹Ÿå™¨"><a href="#è®¾ç½®iOSæ¨¡æ‹Ÿå™¨" class="headerlink" title="è®¾ç½®iOSæ¨¡æ‹Ÿå™¨"></a>è®¾ç½®iOSæ¨¡æ‹Ÿå™¨</h6><ol><li>é¦–å…ˆæ‰“å¼€æ¨¡æ‹Ÿå™¨ é€šè¿‡å‘½ä»¤ <code>open -a Simulator</code> æˆ–è€… Spotlight</li><li>é€šè¿‡æ£€æŸ¥æ¨¡æ‹Ÿå™¨çš„ <strong>Hardware &gt; Device </strong>èœå•ä¸­å¾—è®¾ç½® , ä»¥ç¡®ä¿æ¨¡æ‹Ÿå™¨æ­£åœ¨ä½¿ç”¨64ä½è®¾å¤‡ (iPhone 5sæˆ–æ›´é«˜ç‰ˆæœ¬)</li><li>å–å†³äºå¼€å‘è®¾å¤‡å±å¹•å°ºå¯¸ , é«˜å±å¹•å¯†åº¦çš„iOSæ¨¡æ‹Ÿè®¾å¤‡å¯èƒ½ä¼šåœ¨å±å¹•ä¸Šæº¢å‡º , åœ¨æ¨¡æ‹Ÿå™¨çš„<strong>Window &gt; Scale</strong>èœå•ä¸‹è®¾ç½®è®¾å¤‡æ¯”ä¾‹</li><li>é€šè¿‡è¿è¡Œ <code>flutter run</code> æ¥å¯åŠ¨åº”ç”¨</li></ol><h6 id="éƒ¨ç½²åˆ°iOSè®¾å¤‡"><a href="#éƒ¨ç½²åˆ°iOSè®¾å¤‡" class="headerlink" title="éƒ¨ç½²åˆ°iOSè®¾å¤‡"></a>éƒ¨ç½²åˆ°iOSè®¾å¤‡</h6><p>è¦éƒ¨ç½² Flutter app åˆ° iOSè®¾å¤‡ , æˆ‘ä»¬éœ€è¦ä¸€äº›é¢å¤–çš„å·¥å…·å’Œ Apple è´¦å· . è¿˜éœ€è¦åœ¨è®¾å¤‡ä¸Šè¿›è¡Œè®¾ç½®</p><ol><li>å®‰è£… <a href="https://brew.sh/" target="_blank" rel="noopener">homebrew</a></li><li>æ‰“å¼€å‘½ä»¤ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å®‰è£…å·¥å…·</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">brew update</span><br><span class="line">brew install --HEAD libimobiledevice</span><br><span class="line">brew install ideviceinstaller ios-deploy cocoapods</span><br><span class="line">pod setup</span><br></pre></td></tr></table></figure><p>å¦‚è‹¥è¿™äº›å‘½ä»¤å‡ºç°å¼‚å¸¸å¤±è´¥äº†, è¿è¡Œ <code>brew doctor</code> æŒ‰ç…§è¯´æ˜è§£å†³é—®é¢˜</p><p>ç„¶åä¾ç…§ Xcode ç­¾åæµç¨‹æ¥é…ç½®é¡¹ç›®</p><ol><li>ä»Flutteré¡¹ç›®ç›®å½•ä¸­çš„ç»ˆç«¯çª—å£ä¸­è¿è¡Œ<code>ios/Runner.xcworkspace</code>æ¥æ‰“å¼€Xcodeå·¥ä½œç©ºé—´ , ä¹Ÿå¯ç›´æ¥åŒå‡»æ–‡ä»¶æ‰“å¼€</li><li>åœ¨Xcodeä¸­,ä»å·¦ä¾§å¯¼èˆªé¢æ¿ä¸­é€‰æ‹© <code>Runner</code> é¡¹ç›®</li><li><code>Runner</code> targetè®¾ç½®é¡µé¢ , ç¡®ä¿åœ¨<strong>General &gt; Signing &gt; Team</strong>ä¸‹çš„å¼€å‘å›¢é˜Ÿæ˜¯è¢«é€‰ä¸­çš„. å½“é€‰æ‹©ä¸€ä¸ªå›¢é˜Ÿ , Xcodeä¼šåˆ›å»ºå¹¶ä¸‹è½½å¼€å‘è¯ä¹¦ , å¹¶è´¦å·ä¸­æ³¨å†Œæ­¤è®¾å¤‡ , ç„¶ååˆ›å»ºå¹¶ä¸‹è½½ä¸€ä¸ªæè¿°æ–‡ä»¶.</li></ol><p>å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªiOSå¼€å‘é¡¹ç›®,åˆ™å¯èƒ½éœ€è¦ä½¿ç”¨åˆ° Apple ID ç™»å½•Xcode</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fp571kdt53j30k00ao769.jpg" alt=""></p><p>å½“ç¬¬ä¸€æ¬¡ä½¿ç”¨è®¾å¤‡è¿›è¡ŒiOSå¼€å‘æ—¶, éœ€è¦åœ¨è®¾å¤‡ä¸Šä¿¡ä»»Macå’Œå¼€å‘è¯ä¹¦.é¦–æ¬¡å°†iOSè®¾å¤‡è¿æ¥åˆ°Macæ—¶,ä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†,åœ¨å¯¹è¯æ¡†ä¸­ç‚¹å‡»ä¿¡ä»»å³å¯.</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fp573bim2hj309h06y0v1.jpg" alt=""></p><p>ç„¶åå» iOS è®¾å¤‡ä¸Šè®¾ç½®åº”ç”¨ç¨‹åº , <strong>General &gt; Device Management</strong>ä¸‹é€‰æ‹©ä¿¡ä»»ä½ çš„è¯ä¹¦</p><p>è‹¥ Xcodeä¸­çš„è‡ªåŠ¨ç­¾åå¤±è´¥ , è¯·éªŒè¯é¡¹ç›®ä¸­çš„<strong>General&gt; Identity&gt; Bundle Identifier</strong>ä¸‹çš„å€¼æ˜¯å¦å”¯ä¸€</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fp5756auutj30k00cwmzy.jpg" alt=""></p><p>ç„¶åå¯é€šè¿‡ <code>flutter run</code> è¿è¡Œapp</p><h5 id="Android-è®¾ç½®"><a href="#Android-è®¾ç½®" class="headerlink" title="Android è®¾ç½®"></a>Android è®¾ç½®</h5><h6 id="å®‰è£…-Android-Studio"><a href="#å®‰è£…-Android-Studio" class="headerlink" title="å®‰è£… Android Studio"></a>å®‰è£… Android Studio</h6><p>æˆ‘ä»¬éœ€è¦å®‰è£…å¹¶é…ç½® Android Studio , æ•´ä½“æ­¥éª¤ä¸º:</p><ol><li>ä¸‹è½½å¹¶å®‰è£… <a href="https://developer.android.com/studio/index.html" target="_blank" rel="noopener">Android Studio</a></li><li>æ‰“å¼€ Android Studio , èµ°å®Œ â€˜Android Studio å®‰è£…æŒ‡å—â€™ . è¿™å°†å®‰è£…æœ€æ–°çš„ Android SDK, Android SDK Platform-Tools, and Android SDK Build-Tools , è¿™æ˜¯ Flutter å¼€å‘ Android å¿…è¦çš„.</li></ol><h6 id="è®¾ç½®Androidæ¨¡æ‹Ÿå™¨"><a href="#è®¾ç½®Androidæ¨¡æ‹Ÿå™¨" class="headerlink" title="è®¾ç½®Androidæ¨¡æ‹Ÿå™¨"></a>è®¾ç½®Androidæ¨¡æ‹Ÿå™¨</h6><p><em>è¿è¡Œæ¨¡æ‹Ÿå™¨æ¯”è¾ƒåƒèµ„æº , è¿™é‡Œå»ºè®®è¿˜æ˜¯ä½¿ç”¨AndroidçœŸæœº</em>.   å¦‚è‹¥éœ€è¦é…ç½®æ¨¡æ‹Ÿå™¨è¯·å‚è€ƒ<a href="https://flutter.io/setup-macos/" target="_blank" rel="noopener">å®˜ç½‘</a></p><h6 id="è®¾ç½®Androidè®¾å¤‡"><a href="#è®¾ç½®Androidè®¾å¤‡" class="headerlink" title="è®¾ç½®Androidè®¾å¤‡"></a>è®¾ç½®Androidè®¾å¤‡</h6><p>è¦è¿è¡Œå¹¶ä¸”æµ‹è¯•æˆ‘ä»¬çš„åº”ç”¨åœ¨ Android è®¾å¤‡ä¸Š , æˆ‘ä»¬éœ€è¦ç³»ç»Ÿç‰ˆæœ¬ä¸º Android 4.1 åŠä»¥ä¸Šçš„ Android è®¾å¤‡</p><ol><li>æ‰“å¼€ <strong>å¼€å‘è€…é€‰é¡¹</strong> è¿˜æœ‰ <strong>USBè°ƒè¯•</strong> .</li><li>ä½¿ç”¨USBå°†æ‰‹æœºè¿æ¥ç”µè„‘ . è‹¥æ‰‹æœºå‡ºç°æç¤º,æˆæƒç”µè„‘è®¿é—®æ‰‹æœº</li><li>åœ¨å‘½ä»¤æ‰§è¡Œ <code>flutter devices</code> ç¡®è®¤è¿æ¥ç”µè„‘çš„è®¾å¤‡</li><li>ç„¶åå¯é€šè¿‡æ‰§è¡Œ <code>flutter run</code> è¿è¡Œæˆ‘ä»¬çš„app</li></ol><p>è¿™é‡Œçš„ <code>flutter devices</code> å‘½ä»¤ç±»ä¼¼ <code>adb</code> çš„ <code>adb devices</code> . å¦‚è‹¥æç¤ºä¸å¯ç”¨ , è¯·å°† adb æ‰€åœ¨ç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ .</p><h3 id="è¿è¡Œapp"><a href="#è¿è¡Œapp" class="headerlink" title="è¿è¡Œapp"></a>è¿è¡Œapp</h3><h4 id="å‘½ä»¤ç»ˆç«¯"><a href="#å‘½ä»¤ç»ˆç«¯" class="headerlink" title="å‘½ä»¤ç»ˆç«¯"></a>å‘½ä»¤ç»ˆç«¯</h4><p>é¦–å…ˆç”¨ <code>flutter create</code> å‘½ä»¤åˆ›å»ºæ–°é¡¹ç›®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flutter create myapp</span><br><span class="line"><span class="built_in">cd</span> myapp</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ª åä¸º <code>myapp</code> çš„ Flutter é¡¹ç›® , å…¶ä¸ºä¸€ä¸ªåŒ…å« <a href="https://material.io/guidelines/" target="_blank" rel="noopener">Material Components</a> çš„ç®€å•demo . é¡¹ç›®ç›®å½•é‡Œ , appçš„ä»£ç åœ¨ <code>lib/main.dart</code> ä¸­.</p><p>ç„¶åè¿è¡Œapp</p><ul><li>ç¡®ä¿æœ‰è®¾å¤‡å·²ç»è¿æ¥ , è‹¥æ— è®¾å¤‡è¿æ¥,è¯·å‚è€ƒæ–‡ä¸­ <strong>å¹³å°è®¾ç½®</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter devices</span><br></pre></td></tr></table></figure><ul><li>é€šè¿‡ <code>flutter run</code> å‘½ä»¤è¿è¡Œapp</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter run</span><br></pre></td></tr></table></figure><p>è‹¥ä¸å‡ºæ„å¤–,åˆ™è¿è¡ŒæˆåŠŸ</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fp4ndxd52gj304t09ggm4.jpg" alt=""></p><p>å°è¯•çƒ­éƒ¨ç½² . Flutter æä¾›äº†çƒ­éƒ¨ç½²ä»¥ä¾›å¿«é€Ÿå¼€å‘.</p><ol><li>æ‰“å¼€ <code>lib/main.dart</code></li><li>ä¿®æ”¹ç•Œé¢æ–‡æ¡ˆ,ä¿å­˜</li><li>åœ¨å‘½ä»¤ç»ˆç«¯æŒ‰ä¸‹ â€˜râ€™ </li></ol><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fp4pjenq1zj30va054js3.jpg" alt=""></p><p>ç•Œé¢æ–‡æ¡ˆå³åˆ»æ›´æ–°ç”Ÿæ•ˆ</p><h4 id="Android-Studio"><a href="#Android-Studio" class="headerlink" title="Android Studio"></a>Android Studio</h4><p>IntelliJ IDEA å’Œ Android Studio å¯¹çƒ­æ›´æ–°æ“ä½œæ›´ä¾¿æ·.</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fp4nyuuafqj30dl022jro.jpg" alt=""></p><p>åŒæ ·æ˜¯åœ¨è¿è¡Œå,ä¿®æ”¹æ–‡æ¡ˆä¿å­˜,ç„¶åç‚¹å‡»é—ªç”µâš¡ï¸Reloadå³å¯</p><blockquote><p>è¿™é‡Œåæ§½ä¸‹, é¦–æ¬¡è¿è¡Œ iOS æ¯” Android è¦å¿«ä¸è¦å¤ªå¤š. ä¸»è¦æ˜¯ Gradleæ„å»ºçš„é—®é¢˜ . </p></blockquote><p>on Android :</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fp4pp9lqhij30dm03baaw.jpg" alt=""></p><p>on iOS :</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fp4pp7t2pjj30br03cjrz.jpg" alt=""></p><h3 id="è¿è¡Œå®˜æ–¹Demo"><a href="#è¿è¡Œå®˜æ–¹Demo" class="headerlink" title="è¿è¡Œå®˜æ–¹Demo"></a>è¿è¡Œå®˜æ–¹Demo</h3><p>åˆ›å»ºçš„é»˜è®¤é¡¹ç›®åŠŸèƒ½è¾ƒç®€å•,ä¸èƒ½å¤Ÿç»™æˆ‘ä»¬å¸¦æ¥è¾ƒæ·±åˆ»çš„ä½“éªŒ. æˆ‘ä»¬å¯ä»¥å‚è€ƒ <a href="https://github.com/flutter/flutter/tree/master/examples" target="_blank" rel="noopener">Flutter Demo</a> .</p><p>è¿™é‡Œæˆ‘ä»¬æ‹¿å…¶ä¸­è¾ƒä¸é”™çš„ <code>flutter_gallery</code> æ¥è¿è¡Œ.</p><p>é¦–å…ˆä¸‹è½½ä¸‹æ¥,è¿›å…¥å…¶ç›®å½•.</p><div class="note info"><p>è¿™é‡Œå› ä¸ºdemoè¿è¡Œéœ€è¦å®‰è£…é¢å¤–ä¾èµ–,æ‰€ä»¥éœ€è¦å¯¹ç»ˆç«¯/IDEA è¿›è¡Œç§‘å­¦ä¸Šç½‘é…ç½®.ä¸æ¸…æ¥šçš„è¯·æ ¹æ®è‡ªèº«ç§‘å­¦ä¸Šç½‘å§¿åŠ¿é…ç½® :)</p></div><p>ç„¶åè¿è¡Œ <code>flutter doctor</code> ,å¦‚æœæ˜¯IDEAæ‰“å¼€åˆ™ç›´æ¥è‡ªåŠ¨è¿è¡Œ , å¯èƒ½å¾—åˆ°è¿™ç»“æœ.</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fp4o6l07ezj30dj02t0tf.jpg" alt=""></p><p>æ­¤æ—¶æ‰“å¼€é¡¹ç›®ç›®å½•ä¸­çš„ <code>pubspec.yaml</code> æ‰¾åˆ° <code>test: 0.12.30+4</code> æ”¹ä¸º <code>test: 0.12.30+3</code> å³å¯</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fp4pfhaed4j306f0cmq3p.jpg" alt=""></p><blockquote><p>Flutteræ˜¯ä¸€ä¸ªåˆæœŸçš„å¼€æºé¡¹ç›®ï¼Œå®ƒå¸®åŠ©å¼€å‘è€…ä»ä¸€ä¸ªä»£ç åº“æ„å»ºå‡ºé«˜æ€§èƒ½ã€é«˜ä¿çœŸåº¦çš„ç§»åŠ¨åº”ç”¨ . è¿™ä¸ªGalleryæ˜¯Flutterçš„è®¸å¤šå°éƒ¨ä»¶ã€è¡Œä¸ºã€åŠ¨ç”»ã€å¸ƒå±€ç­‰çš„é¢„è§ˆ .</p></blockquote><p>æ­£å¦‚ Flutter Gallery å®˜æ–¹ä»‹ç»æ‰€è¯´ , å®ƒä¸»è¦å‘ˆç°çš„æ˜¯ä¸€äº›å°éƒ¨ä»¶çš„é¢„è§ˆ , ä¸»é¢˜çš®è‚¤åˆ‡æ¢ , æ§ä»¶é£æ ¼åˆ‡æ¢ç­‰ç¤ºä¾‹ . åæœŸçš„å­¦ä¹ ä¸­å¯å‚è€ƒå…¶è¿›è¡Œ.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://flutter.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Flutter&lt;/a&gt; æ˜¯ä¸€æ¬¾è°·æ­Œç”¨ä»¥åŒæ—¶åœ¨ iOS å’Œ Android ä¸Šåˆ¶ä½œé«˜è´¨é‡åŸç”Ÿç•Œé¢çš„ç§»åŠ¨åº”ç”¨UIæ¡†æ¶.ç›®å‰è°·æ­Œæ˜¯å·²å‘å¸ƒäº† Flutter Beta ç‰ˆ,åŒæ—¶ä¹Ÿæä¾›äº†å¤šä¸ª Sample Project ä¾›å­¦ä¹ . Flutter ä¸»è¦æœ‰ç€&lt;strong&gt;å¿«é€Ÿå¼€å‘&lt;/strong&gt;ã€&lt;strong&gt;æœ‰è¡¨ç°åŠ›åŠçµæ´»çš„UI&lt;/strong&gt;ã€&lt;strong&gt;åŸç”Ÿè¡¨ç°&lt;/strong&gt;ç­‰ç‰¹ç‚¹.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¿«é€Ÿå¼€å‘&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æé€Ÿçƒ­éƒ¨ç½²å°±èƒ½ä½¿appæ„å»ºç”Ÿæ•ˆ,ä½¿ç”¨å¤§é‡å¯æ·±åº¦è‡ªå®šä¹‰åŒ–çš„å°éƒ¨ä»¶ (Widgets) ä¾›å¿«é€Ÿå¼€å‘åŸç”Ÿç•Œé¢.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æœ‰è¡¨ç°åŠ›åŠçµæ´»çš„UI&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¿«é€Ÿåœ°å°†ç‰¹æ€§é›†ä¸­åœ¨å®¢æˆ·ç«¯ç”¨æˆ·ä½“éªŒä¸Š.åˆ†å±‚ä½“ç³»ç»“æ„å…è®¸æ·±åº¦å®šåˆ¶,æœ€ç»ˆå‘ˆç°å¿«é€Ÿæ¸²æŸ“ä»¥åŠæœ‰è¡¨ç°åŠ›å’Œçµæ´»çš„è®¾è®¡&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åŸç”Ÿè¡¨ç°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Flutterçš„å°éƒ¨ä»¶åŒ…å«äº†æ‰€æœ‰å…³é”®çš„å¹³å°å·®å¼‚,å¦‚æ»šåŠ¨ã€å¯¼èˆªã€å›¾æ ‡å’Œå­—ä½“,ä»¥åœ¨iOSå’ŒAndroidä¸Šæä¾›å®Œæ•´çš„åŸç”Ÿè¡¨ç°&lt;/p&gt;
&lt;div class=&quot;note info&quot;&gt;&lt;p&gt;ç±»ä¼¼äº Fackbook çš„ React Native , æˆ‘ä»¬å¯ç”¨ Flutter å¼€å‘ä¸€å¥—ä»£ç ,åº”ç”¨äº Android ä»¥åŠ iOS å¹³å°ä¸Š.ä¸ä»…å¦‚æ­¤, Flutter è¿˜å¯åº”ç”¨äºè°·æ­Œå°†æ¨å‡ºçš„æ–°ç³»ç»Ÿ &lt;a href=&quot;https://baike.baidu.com/item/Fuchsia/19900570?fr=aladdin&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Fuchsia&lt;/a&gt; . å¯ä»¥çœ‹å‡º , Flutter ç¡®æœ‰ç»Ÿä¸€ç§»åŠ¨ç«¯çš„èƒ½åŠ› , èº«ä¸ºç§»åŠ¨å¼€å‘è€… , å½“ç„¶è¦æœ‰æ‰€äº†è§£. so , æ¥ä¸‹æ¥æˆ‘ä»¬å°†å¼€å§‹ &lt;strong&gt;æ­å»ºå¼€å‘ç¯å¢ƒ , å¹¶ä¸”è¿è¡Œå®˜æ–¹çš„ demo &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´å¥½çš„é˜…è¯»ä½“éªŒ, è¯·ç‚¹å‡»&lt;a href=&quot;https://lhalcyon.com/flutter-basic-env&quot;&gt;é˜…è¯»åŸæ–‡&lt;/a&gt; :)&lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="Flutter" scheme="https://lhalcyon.com/categories/Flutter/"/>
    
    
      <category term="Flutter" scheme="https://lhalcyon.com/tags/Flutter/"/>
    
  </entry>
  
  <entry>
    <title>IntelliJ+Gradleè‡ªå®šä¹‰waråŒ…åç§°</title>
    <link href="https://lhalcyon.com/idea-gradle_war/"/>
    <id>https://lhalcyon.com/idea-gradle_war/</id>
    <published>2018-02-21T16:00:00.000Z</published>
    <updated>2018-02-23T14:51:22.258Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å¸®æœ‹å‹å¼€å‘å°ç¨‹åºçš„ Java åç«¯,é¡¹ç›®é‡‡ç”¨ Gradle æ„å»º,ä½¿ç”¨IntelliJå¼€å‘. å¼€å‘ä¸­ç»å¸¸éœ€è¦å‘åŒ…åˆ°å¤–ç½‘ä¸Š,æ–¹ä¾¿å‰ç«¯è”è°ƒ,è€ŒIntelliJé»˜è®¤æ„å»ºçš„ war åŒ…åç§°ä¸º<code>é¡¹ç›®å-ç‰ˆæœ¬å·</code>,ä½¿å¾—æ¯æ¬¡ä¸Šä¼ waråŒ…è‡³æœåŠ¡å™¨tomcatæ—¶è¿˜å¾—æ‰‹åŠ¨é‡å‘½å,å‘å¸ƒæ¬¡æ•°å¤šäº†,å°±æ˜¾å¾—å¾ˆç¹ç.è¿™é‡Œå°±æ°´ä¸€ç¯‡,ç®€çŸ­è¯´æ˜ä¸‹ <strong>IntelliJä¸­Gradleæ„å»ºå¦‚ä½•è‡ªå®šä¹‰waråŒ…åç§°</strong>.</p><p>é¦–å…ˆæ‰“å¼€ Project Settings</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fopikcl9olj30mc01o3ys.jpg" alt=""></p><p>é€‰æ‹© Artifacts</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fopiml70qkj31kw190qa2.jpg" alt=""></p><p>å‰ä¸¤ä¸ª <code>Gradle:xxx</code>  æ˜¯åˆ›å»ºGradleé¡¹ç›®å¹¶æ·»åŠ tomcatå,è‡ªåŠ¨ç”Ÿæˆçš„.æˆ‘ä»¬è¿™é‡Œç‚¹å‡» + æ–°å¢</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fopiqgxj6ej31bg0hy0z2.jpg" alt=""></p><p>é€‰æ‹© <code>Web Application: Archive</code>    -&gt;    <code>Empty</code></p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fopj7lkx3cj31bu0e0tbt.jpg" alt=""></p><p>ä¿®æ”¹waråŒ…åç§°åŠè¾“å‡ºè·¯å¾„</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fopjt8ggu0j31c00midjh.jpg" alt=""></p><p>æ·»åŠ waråŒ…å†…å®¹,åŒæ ·é€‰æ‹© Artifact</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fopk3yib95j30qg0qoabp.jpg" alt=""></p><p>é€‰æ‹© Gradle: xxx (exploded) </p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fopk8hw84uj30h40aygmy.jpg" alt=""></p><p>ä¹‹åæ‰“åŒ…åªèƒ½é€‰æ‹© Build -&gt; Build Artifacts ç„¶åé€‰æ‹©è‡ªå®šä¹‰çš„build, ç„¶ååœ¨è¾“å‡ºç›®å½•ä¸‹å³å¯æ‰¾åˆ°waråŒ…</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æœ€è¿‘åœ¨å¸®æœ‹å‹å¼€å‘å°ç¨‹åºçš„ Java åç«¯,é¡¹ç›®é‡‡ç”¨ Gradle æ„å»º,ä½¿ç”¨IntelliJå¼€å‘. å¼€å‘ä¸­ç»å¸¸éœ€è¦å‘åŒ…åˆ°å¤–ç½‘ä¸Š,æ–¹ä¾¿å‰ç«¯è”è°ƒ,è€ŒIntelliJé»˜è®¤æ„å»ºçš„ war åŒ…åç§°ä¸º&lt;code&gt;é¡¹ç›®å-ç‰ˆæœ¬å·&lt;/code&gt;,ä½¿å¾—æ¯æ¬¡ä¸Šä¼ waråŒ…è‡³æœåŠ¡å™¨tomcatæ—¶è¿˜
      
    
    </summary>
    
      <category term="Java" scheme="https://lhalcyon.com/categories/Java/"/>
    
    
      <category term="IntelliJ" scheme="https://lhalcyon.com/tags/IntelliJ/"/>
    
      <category term="war" scheme="https://lhalcyon.com/tags/war/"/>
    
      <category term="Gradle" scheme="https://lhalcyon.com/tags/Gradle/"/>
    
  </entry>
  
  <entry>
    <title>Hexoç»‘å®šè‡ªå®šä¹‰HttpsåŸŸå</title>
    <link href="https://lhalcyon.com/hexo_ssl_netlify/"/>
    <id>https://lhalcyon.com/hexo_ssl_netlify/</id>
    <published>2018-02-17T16:00:00.000Z</published>
    <updated>2018-02-18T13:08:10.308Z</updated>
    
    <content type="html"><![CDATA[<p>é€šå¸¸æˆ‘ä»¬å°†<code>Hexo</code>åšå®¢éƒ¨ç½²åˆ°<a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a>ä¸Š,ç„¶åç»‘å®šè‡ªå®šä¹‰åŸŸå.ä¾‹å¦‚ä½œè€…çš„ GitHub Page <code>lhalcyon.github.io</code>ç»‘å®šåˆ°äº†<code>lhalcyon.com</code>ä¸Š.ä½†æ˜¯ GitHub Pages æ— æ³•ç»™è‡ªå®šä¹‰åŸŸåé…ç½®SSL</p><p><code>GitHub Pages</code>é»˜è®¤æ˜¯æ”¯æŒhttpsçš„,å³æˆ‘ä»¬å¯é€šå¸¸<code>https://lhalcyon.github.io</code>æ¥è®¿é—®åšå®¢,ä½†æ˜¯ç»‘å®šè‡ªå®šä¹‰åŸŸåå,åªèƒ½é€šè¿‡<code>http://lhalcyon.com</code>æ­£å¸¸è®¿é—®,å¦‚ç›´æ¥è®¿é—®<code>https://lhalcyon.com</code>å°±ä¼šçˆ†çº¢</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fohklh3z27j30uw0360v3.jpg" alt=""></p><blockquote><p>ç”±äºåšå®¢å·²æ”¹é€ å®Œæˆ,å°±åº¦å¨˜äº†å¼ ç¤ºä¾‹å›¾</p></blockquote><p>ä¸ºäº†å®ç°è‡ªå®šä¹‰åŸŸåSSLè®¤è¯,é€šå¸¸çš„åšæ³•æ˜¯åœ¨<a href="https://www.cloudflare.com/" target="_blank" rel="noopener">Cloudflare</a>é…ç½®ä¸€ä¸ªåå‘ä»£ç†åˆ°<code>GitHub Pages</code>,ä½†æ˜¯å…¶è®¿é—®é€Ÿåº¦åŠç¨³å®šæ€§ä¸å¤ªå¥½,å†å°±æ˜¯åšå®¢æ›´æ–°åç”Ÿæ•ˆä¹Ÿä¼šæœ‰å»¶è¿Ÿ,äºæ˜¯æˆ‘ä»¬å¾—å¯»ç´¢ä¸€ä¸ªè§£å†³åŠæ³•.</p><a id="more"></a><p>ä¸ºäº†æ›´å¥½çš„é˜…è¯»ä½“éªŒ,è¯·ç‚¹å‡»<a href="http://lhalcyon.com/hexo_ssl_netlify">é˜…è¯»åŸæ–‡</a>ğŸ˜‰.</p><p>èµ·åˆæ˜¯è€ƒè™‘å°†Hexoè¿ç§»åˆ°<a href="https://coding.net/help/doc/pages" target="_blank" rel="noopener">Coding Pages</a>ä¸Š,åæ¥å‘ç°å…¶å…è´¹æ‰˜ç®¡ä¸‹å¿…é¡»åœ¨é¦–é¡µå¯¹å…¶åšä¸€ä¸ªå¹¿å‘Š,å¦åˆ™è®¿é—®ä¼šå…ˆè·³è½¬åˆ°ä¸€ä¸ªä¸­è½¬å¹¿å‘Šé¡µå†è¿›è¡Œè·³è½¬ ,æƒ³å…å¹¿å‘Šåªèƒ½å‡çº§é»„é‡‘ä¼šå‘˜åŠä»¥ä¸Š,è¿™ç‚¹å¤ªä¸å‹å¥½. <a href="https://www.v2ex.com/t/360701?p=1" target="_blank" rel="noopener">é—®é¢˜ä¼ é€é—¨</a></p><p>è·³è½¬é¡µ:</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fohqh0aj8bj30hq0e4q3t.jpg" alt=""></p><p>or ä¸»åŠ¨æ·»åŠ å¹¿å‘Šé“¾æ¥,å®¡æ ¸è¿‡åä¼šå…å»è·³è½¬é¡µ</p><p>æŸåšå®¢é¡µè„šæ·»åŠ çš„å¹¿å‘Š:</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fohlfgorftj30se02qgm2.jpg" alt=""></p><p>æ— ç–‘è¿™æ ·å¤§å¤§å½±å“æˆ‘ä»¬çš„åšå®¢ç¾è§‚,ä¸èƒ½æ¥å—,ä½†åˆä¸æƒ³è¿å›<code>GitHub Pages</code>,æ€ä¹ˆåŠ?ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸€äº›<strong>å…è´¹åŠå¥½ç”¨çš„é™æ€ç½‘ç«™æ‰˜ç®¡å¹³å°</strong></p><h4 id="å…è´¹é™æ€ç½‘ç«™æ‰˜ç®¡å¹³å°"><a href="#å…è´¹é™æ€ç½‘ç«™æ‰˜ç®¡å¹³å°" class="headerlink" title="å…è´¹é™æ€ç½‘ç«™æ‰˜ç®¡å¹³å°"></a>å…è´¹é™æ€ç½‘ç«™æ‰˜ç®¡å¹³å°</h4><h5 id="GitHub-Pages"><a href="#GitHub-Pages" class="headerlink" title="GitHub Pages"></a><a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a></h5><p><strong>ä¼˜ç‚¹</strong></p><ul><li>è‡ªå¸¦åŸŸåå¯httpsè®¿é—®</li><li>å¯é…ç½®è‡ªå®šä¹‰åŸŸå</li></ul><p><strong>ç¼ºç‚¹</strong></p><ul><li>æ— æ³•ç»™è‡ªå®šä¹‰åŸŸåé…ç½®SSL</li></ul><h5 id="Bitbucket-Cloud"><a href="#Bitbucket-Cloud" class="headerlink" title="Bitbucket Cloud"></a><a href="https://confluence.atlassian.com/bitbucket/publishing-a-website-on-bitbucket-cloud-221449776.html" target="_blank" rel="noopener">Bitbucket Cloud</a></h5><p>è·Ÿ GitHub Pages åŠŸèƒ½ä¸€æ ·,ä½†æ˜¯:</p><ul><li>æ— æ³•è‡ªå®šä¹‰åŸŸå</li><li>èƒ½ä¸”åªèƒ½é€šè¿‡ https åè®®è®¿é—®ï¼ˆhttp åè®®ä¼šè¢«è·³è½¬åˆ° https åè®®)</li><li>æ‰€æœ‰é¡¹ç›®çš„é™æ€ç½‘ç«™ä»£ç éƒ½åªèƒ½æ”¾åœ¨ä¸“é—¨çš„ç«™ç‚¹ä»“åº“é‡Œï¼ˆaccountName.bitbucket.io) ,ä¸èƒ½åƒ GitHub é‚£æ ·å¯ä»¥åœ¨æ¯ä¸ªé¡¹ç›®é‡Œç”¨ gh-pages åˆ†æ”¯ä¿å­˜æ–‡ä»¶</li></ul><h5 id="aerobatic"><a href="#aerobatic" class="headerlink" title="aerobatic"></a><a href="https://www.aerobatic.com/" target="_blank" rel="noopener">aerobatic</a></h5><p>Bitbucket æ——ä¸‹çš„é™æ€ç½‘ç«™æ‰˜ç®¡æœåŠ¡.</p><ul><li>å¯ä»¥ä½¿ç”¨ CLI ä¸Šä¼ ä»£ç </li><li>æ”¯æŒè‡ªåŠ¨æ„å»º (Continuous Deployment)</li><li>å¯ä»¥è‡ªå®šä¹‰åŸŸåä½†æ˜¯æ”¶è´¹åŠŸèƒ½,è‡ªå®šä¹‰åŸŸåæ”¯æŒ https ä¸”ä¸éœ€è¦æä¾›è¯ä¹¦,å®ƒä¼šå¸®ä½ ç”Ÿæˆä¸€ä¸ª</li></ul><h5 id="GitLab-Pages"><a href="#GitLab-Pages" class="headerlink" title="GitLab Pages"></a><a href="https://docs.gitlab.com/ee/user/project/pages/index.html" target="_blank" rel="noopener">GitLab Pages</a></h5><p>åŒæ ·å’Œ GitHub Pages çš„åŠŸèƒ½ä¸€æ ·,ä½†æ˜¯:</p><ul><li>è‡ªå®šä¹‰åŸŸåå¯é…ç½®https,ä¸è¿‡éœ€è¦ä¸Šä¼ è¯ä¹¦</li></ul><h5 id="surge-sh"><a href="#surge-sh" class="headerlink" title="surge.sh"></a><a href="https://surge.sh/" target="_blank" rel="noopener">surge.sh</a></h5><ul><li>åªèƒ½ä½¿ç”¨ CLI ä¸Šä¼ ä»£ç </li><li>æ”¯æŒè‡ªå®šä¹‰åŸŸå,ä½†å¼€å¯ SSL æ˜¯æ”¶è´¹åŠŸèƒ½ä¸”éœ€è¦è‡ªè¡Œä¸Šä¼ è¯ä¹¦</li><li>æ”¯æŒ200.html â€”â€” é€‚ç”¨äºä½¿ç”¨ History API çš„ SPA</li></ul><h5 id="Firebase-Hosting"><a href="#Firebase-Hosting" class="headerlink" title="Firebase Hosting"></a><a href="https://firebase.google.com/docs/hosting/" target="_blank" rel="noopener">Firebase Hosting</a></h5><ul><li>åªèƒ½ä½¿ç”¨ CLI ä¸Šä¼ ä»£ç </li><li>æ”¯æŒè‡ªå®šä¹‰åŸŸåå¹¶æ”¯æŒä¸€é”®å¼€å¯ https</li><li>æ”¯æŒé‡å®šå‘ï¼ˆRedirectsï¼‰å’Œé‡å†™ï¼ˆRewritesï¼‰åŠŸèƒ½ï¼ˆå½“ç½‘ç«™ä½¿ç”¨ History API æ—¶ç‰¹åˆ«æœ‰ç”¨)</li><li>but æœ‰è¢«å¢™çš„é£é™©â€¦â€¦</li></ul><h5 id="Netlify-æ¨è"><a href="#Netlify-æ¨è" class="headerlink" title="Netlify (æ¨è)"></a><a href="https://www.netlify.com/" target="_blank" rel="noopener">Netlify</a> (æ¨è)</h5><ul><li>å¯ä»¥ä½¿ç”¨ CLI ä¸Šä¼ ä»£ç </li><li>æ”¯æŒè‡ªå®šä¹‰åŸŸåä¸”è‡ªå®šä¹‰åŸŸåæ”¯æŒä¸€é”®å¼€å¯ httpsï¼ˆè¯ä¹¦æ¥è‡ª Letâ€™s Encrypeï¼‰</li><li>æ”¯æŒå¼ºåˆ¶è®©ç”¨æˆ·é€šè¿‡ https è®¿é—®ç½‘ç«™ï¼ˆå¼€å¯åæ­¤åŠŸèƒ½åï¼Œhttp çš„è®¿é—®ä¸€å¾‹ä¼š <strong>301</strong> è·³è½¬åˆ° https</li><li>æ”¯æŒè‡ªåŠ¨æ„å»º</li><li>æ”¯æŒé‡å®šå‘ï¼ˆRedirectsï¼‰å’Œé‡å†™ï¼ˆRewritesï¼‰åŠŸèƒ½</li><li>æ•°æ®é€šè¿‡ HTTP2 åè®®ä¼ è¾“</li><li>æä¾› webhooks ä¸ API</li></ul><h5 id="now"><a href="#now" class="headerlink" title="now"></a><a href="https://zeit.co/now" target="_blank" rel="noopener">now</a></h5><ul><li>å¯ä»¥ä½¿ç”¨ CLI ä¸Šä¼ ä»£ç ï¼Œæˆ–è€…é“¾æ¥ä¸€ä¸ª Git ä»“åº“</li><li>ä¸ä»…æä¾›é™æ€ç½‘ç«™æ‰˜ç®¡ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒæ‰˜ç®¡ Node.js æœåŠ¡</li><li>æ”¯æŒè‡ªå®šä¹‰åŸŸåä¸”è‡ªå®šä¹‰åŸŸåæ”¯æŒä¸€é”®å¼€å¯ httpsï¼ˆè¯ä¹¦æ¥è‡ª Letâ€™s Encrypeï¼‰</li><li>æ•°æ®é€šè¿‡ HTTP2 åè®®ä¼ è¾“</li><li>æä¾› API</li></ul><h5 id="Coding-Pages"><a href="#Coding-Pages" class="headerlink" title="Coding Pages"></a><a href="https://coding.net/help/doc/pages" target="_blank" rel="noopener">Coding Pages</a></h5><p>ä¸Šé¢æˆ‘ä»¬è¯´è¿‡,æ”¶è´¹æœºåˆ¶ç”šä¸å‹å¥½ </p><div class="note primary"><p>é‰´äºå„å¹³å°ç‰¹ç‚¹,æˆ‘ä»¬é€‰æ‹©<a href="https://www.netlify.com/" target="_blank" rel="noopener">Netlify</a> </p></div><h4 id="Netlify"><a href="#Netlify" class="headerlink" title="Netlify"></a>Netlify</h4><h5 id="éƒ¨ç½²ç½‘ç«™"><a href="#éƒ¨ç½²ç½‘ç«™" class="headerlink" title="éƒ¨ç½²ç½‘ç«™"></a>éƒ¨ç½²ç½‘ç«™</h5><p>é¦–å…ˆå» <a href="https://www.netlify.com/" target="_blank" rel="noopener">Netlify</a> æ³¨å†Œè´¦å·ç™»å½•</p><p>æ¥ç€ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„ New site from Git </p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fohp095rn7j31320ouadv.jpg" alt=""></p><p>è¿™é‡Œé€‰æ‹©çš„ GitHub ,åˆ«å¿˜è®°å‹¾é€‰è®¿é—®å…¬å…±ä»“åº“é€‰é¡¹.ä¹‹åæˆæƒç»™ Netlify æŒ‡å®šRepository,ç„¶å Deploy</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fohp7k4kfgj312i0ui41t.jpg" alt=""></p><h5 id="è®¾ç½®è‡ªå®šä¹‰åŸŸå"><a href="#è®¾ç½®è‡ªå®šä¹‰åŸŸå" class="headerlink" title="è®¾ç½®è‡ªå®šä¹‰åŸŸå"></a>è®¾ç½®è‡ªå®šä¹‰åŸŸå</h5><p>ç‚¹å‡» Domain settings ç„¶åç‚¹å‡» Add custom domain.</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fohpl7hvpzj30wu0d6aay.jpg" alt=""></p><p>ç„¶ååˆ°åŸŸåè§£æå¤„,ä¿®æ”¹åŸŸåCNAMEè®°å½•,è®°å½•å€¼å°±æ˜¯è®¾ç½®å®ŒåŸŸåé¡µé¢æ˜¾ç¤ºçš„é…ç½®å€¼</p><h5 id="æ·»åŠ SSLè¯ä¹¦"><a href="#æ·»åŠ SSLè¯ä¹¦" class="headerlink" title="æ·»åŠ SSLè¯ä¹¦"></a>æ·»åŠ SSLè¯ä¹¦</h5><p>è®¾ç½®å®ŒæˆåŸŸåç»‘å®šå,è®¾ç½®ä¸­å¿ƒé€‰é¡¹æœ‰æ‰€å˜åŒ–,å¢åŠ äº†ä¸€ä¸ª Enable HTTPSçš„é€‰é¡¹ , ç‚¹å‡»</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fohpvgiqssj30eq08c74t.jpg" alt=""></p><p>ç‚¹å‡» Letâ€™s Encrypt Certificate, ç³»ç»Ÿä¼šè‡ªåŠ¨ç­¾å‘è¯ä¹¦ç»™ç«™ç‚¹,è‹¥åŸŸåè§£ææ²¡é—®é¢˜å°±èƒ½ç­¾å‘æˆåŠŸ</p><p>è‹¥æƒ³ä¸€ç›´ä½¿ç”¨Httpsè®¿é—®çš„è¯,å°±å‹¾é€‰ Force TLS  connections å¼ºåˆ¶æ‰€æœ‰è®¿é—®è½¬æ¢ä¸ºHttps</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fohpzyq694j30xg0s6ad2.jpg" alt=""></p><p>è‡³æ­¤,é…ç½®å…¨éƒ¨å®Œæˆ</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fohq3f3rylj30bc01mglp.jpg" alt=""></p><h4 id="åç»­"><a href="#åç»­" class="headerlink" title="åç»­"></a>åç»­</h4><p>Netlify è¿˜æœ‰å¾ˆå¤šæŠ€å·§,æ¯”å¦‚å¯ä»¥è®¾ç½®å˜é‡åŠå‘½ä»¤.å…è´¹ç”¨æˆ·å¯ä»¥ä¸ºç½‘ç«™è®¾ç½®å˜é‡ã€webhookç­‰.ä»˜è´¹ç”¨æˆ·åˆ™å¯ä»¥ä¸ºç½‘ç«™è®¾ç½®æ›´åŠ è¯¦ç»†çš„SEOä¼˜åŒ–.å„ä½å¯ä»¥è‡ªè¡Œå»æŒ–æ˜~ ğŸ§</p><hr><ol><li>å‚è€ƒ: <a href="https://github.com/lmk123/blog/issues/55" target="_blank" rel="noopener">https://github.com/lmk123/blog/issues/55</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é€šå¸¸æˆ‘ä»¬å°†&lt;code&gt;Hexo&lt;/code&gt;åšå®¢éƒ¨ç½²åˆ°&lt;a href=&quot;https://pages.github.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GitHub Pages&lt;/a&gt;ä¸Š,ç„¶åç»‘å®šè‡ªå®šä¹‰åŸŸå.ä¾‹å¦‚ä½œè€…çš„ GitHub Page &lt;code&gt;lhalcyon.github.io&lt;/code&gt;ç»‘å®šåˆ°äº†&lt;code&gt;lhalcyon.com&lt;/code&gt;ä¸Š.ä½†æ˜¯ GitHub Pages æ— æ³•ç»™è‡ªå®šä¹‰åŸŸåé…ç½®SSL&lt;/p&gt;
&lt;p&gt;&lt;code&gt;GitHub Pages&lt;/code&gt;é»˜è®¤æ˜¯æ”¯æŒhttpsçš„,å³æˆ‘ä»¬å¯é€šå¸¸&lt;code&gt;https://lhalcyon.github.io&lt;/code&gt;æ¥è®¿é—®åšå®¢,ä½†æ˜¯ç»‘å®šè‡ªå®šä¹‰åŸŸåå,åªèƒ½é€šè¿‡&lt;code&gt;http://lhalcyon.com&lt;/code&gt;æ­£å¸¸è®¿é—®,å¦‚ç›´æ¥è®¿é—®&lt;code&gt;https://lhalcyon.com&lt;/code&gt;å°±ä¼šçˆ†çº¢&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws2.sinaimg.cn/large/006tNc79gy1fohklh3z27j30uw0360v3.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç”±äºåšå®¢å·²æ”¹é€ å®Œæˆ,å°±åº¦å¨˜äº†å¼ ç¤ºä¾‹å›¾&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸ºäº†å®ç°è‡ªå®šä¹‰åŸŸåSSLè®¤è¯,é€šå¸¸çš„åšæ³•æ˜¯åœ¨&lt;a href=&quot;https://www.cloudflare.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Cloudflare&lt;/a&gt;é…ç½®ä¸€ä¸ªåå‘ä»£ç†åˆ°&lt;code&gt;GitHub Pages&lt;/code&gt;,ä½†æ˜¯å…¶è®¿é—®é€Ÿåº¦åŠç¨³å®šæ€§ä¸å¤ªå¥½,å†å°±æ˜¯åšå®¢æ›´æ–°åç”Ÿæ•ˆä¹Ÿä¼šæœ‰å»¶è¿Ÿ,äºæ˜¯æˆ‘ä»¬å¾—å¯»ç´¢ä¸€ä¸ªè§£å†³åŠæ³•.&lt;/p&gt;
    
    </summary>
    
      <category term="Hexo" scheme="https://lhalcyon.com/categories/Hexo/"/>
    
    
      <category term="Hexo" scheme="https://lhalcyon.com/tags/Hexo/"/>
    
      <category term="SSL" scheme="https://lhalcyon.com/tags/SSL/"/>
    
      <category term="GitHub Pages" scheme="https://lhalcyon.com/tags/GitHub-Pages/"/>
    
  </entry>
  
  <entry>
    <title>SpringMVC+WebSocket+Gradleå®ç°æ¶ˆæ¯å®æ—¶æ¨é€</title>
    <link href="https://lhalcyon.com/springmvc-websocket_im/"/>
    <id>https://lhalcyon.com/springmvc-websocket_im/</id>
    <published>2018-02-14T16:00:00.000Z</published>
    <updated>2018-02-15T09:06:03.428Z</updated>
    
    <content type="html"><![CDATA[<div class="note info"><p>WebSocketæ˜¯HTML5å¼€å§‹æä¾›çš„ä¸€ç§æµè§ˆå™¨ä¸æœåŠ¡å™¨é—´è¿›è¡Œå…¨åŒå·¥é€šè®¯çš„ç½‘ç»œæŠ€æœ¯ã€‚ WebSocketé€šä¿¡åè®®äº2011å¹´è¢«IETFå®šä¸ºæ ‡å‡†RFC 6455ï¼ŒWebSocketAPIè¢«W3Cå®šä¸ºæ ‡å‡†ã€‚ åœ¨WebSocket APIä¸­ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦è¦åšä¸€ä¸ªæ¡æ‰‹çš„åŠ¨ä½œï¼Œç„¶åï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´å°±å½¢æˆäº†ä¸€æ¡å¿«é€Ÿé€šé“ã€‚ä¸¤è€…ä¹‹é—´å°±ç›´æ¥å¯ä»¥æ•°æ®äº’ç›¸ä¼ é€ã€‚</p></div><a id="more"></a><p>ä»¥ä¸Šæ‘˜è‡ª<a href="https://zh.wikipedia.org/wiki/WebSocket" target="_blank" rel="noopener">Wikipedia</a>.</p><p>æœ¬æ–‡å°†è¯´æ˜åœ¨<code>Intellij IDEA</code>ä¸‹ä½¿ç”¨<code>Gradle</code>æ„å»º<code>SpringMVC</code>+<code>WebSocket</code>å®ç°æ¶ˆæ¯æ¨é€.ä¸ºäº†æ›´å¥½çš„é˜…è¯»ä½“éªŒ,è¯·ç‚¹å‡»<a href="http://lhalcyon.com/springmvc-websocket_im">é˜…è¯»åŸæ–‡</a>ğŸ˜‰.</p><h4 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h4><p>åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­æœ‰è¯¦ç»†çš„è¯´æ˜,æ­¤ç¯‡ä¸åšèµ˜è¿°.å¯å‚è€ƒ<a href="http://lhalcyon.com/ssm_build/">IDEA+Gradleåˆ›å»ºMyBatis+SpringMVCé¡¹ç›®</a></p><h4 id="å¯¼å…¥ä¾èµ–"><a href="#å¯¼å…¥ä¾èµ–" class="headerlink" title="å¯¼å…¥ä¾èµ–"></a>å¯¼å…¥ä¾èµ–</h4><p>åœ¨<code>build.gradle</code>ä¸­å¯¼å…¥denpendies</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ------------------------   Spring SpringMVC  start -------------------------</span></span><br><span class="line">compile <span class="string">group:</span> <span class="string">'org.springframework'</span>, <span class="string">name:</span> <span class="string">'spring-webmvc'</span>, <span class="string">version:</span> <span class="string">'4.2.4.RELEASE'</span></span><br><span class="line">compile <span class="string">group:</span> <span class="string">'org.springframework'</span>, <span class="string">name:</span> <span class="string">'spring-context-support'</span>, <span class="string">version:</span> <span class="string">'4.2.4.RELEASE'</span></span><br><span class="line"><span class="comment">// ------------------------   Spring SpringMVC  end -------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ------------------------   WebSocket  start -------------------------</span></span><br><span class="line">compile <span class="string">group:</span> <span class="string">'org.springframework'</span>, <span class="string">name:</span> <span class="string">'spring-websocket'</span>, <span class="string">version:</span> <span class="string">'4.2.4.RELEASE'</span></span><br><span class="line">compile <span class="string">group:</span> <span class="string">'org.springframework'</span>, <span class="string">name:</span> <span class="string">'spring-messaging'</span>, <span class="string">version:</span> <span class="string">'4.2.4.RELEASE'</span></span><br><span class="line">compile <span class="string">group:</span> <span class="string">'javax.servlet'</span>, <span class="string">name:</span> <span class="string">'javax.servlet-api'</span>, <span class="string">version:</span> <span class="string">'3.1.0'</span></span><br><span class="line"><span class="comment">// ------------------------   WebSocket  end -------------------------</span></span><br><span class="line"></span><br><span class="line">compile <span class="string">group:</span> <span class="string">'log4j'</span>, <span class="string">name:</span> <span class="string">'log4j'</span>, <span class="string">version:</span> <span class="string">'1.2.17'</span></span><br><span class="line">compile <span class="string">group:</span> <span class="string">'com.google.code.gson'</span>, <span class="string">name:</span> <span class="string">'gson'</span>, <span class="string">version:</span> <span class="string">'2.8.2'</span></span><br></pre></td></tr></table></figure><div class="note warning"><p>æ­¤å¤„éœ€è¦æ³¨æ„çš„æ˜¯<code>Spring</code>ä»<code>4.0+</code>ç‰ˆæœ¬å¼€å§‹æ”¯æŒWebSocket,è€Œ<code>servlet-api</code>éœ€è¦ä¸º<code>3.0+</code>ç‰ˆæœ¬</p></div><h4 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h4><p><code>web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee</span></span></span><br><span class="line"><span class="tag"><span class="string">  http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"3.0"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åˆå§‹åŒ–spring å®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:config/spring/applicationContext-*.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®å‰ç«¯æ§åˆ¶å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>index-dispather<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath*:config/spring/spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">async-supported</span>&gt;</span>true<span class="tag">&lt;/<span class="name">async-supported</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>index-dispather<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è§£å†³postä¹±ç é—®é¢˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ­¤å¤„éœ€è¦ç»™<code>servlet</code>åŠ<code>filter</code>æ·»åŠ å¼‚æ­¥<code>&lt;async-supported&gt;true&lt;/async-supported&gt;</code>.</p><p><code>spring-mvc.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«ææ§åˆ¶å™¨,webSocket --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.lhalcyon.king.controller,com.lhalcyon.king.socket"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾æ¸²æŸ“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"internalResourceViewResolver"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/views/"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ§åˆ¶å™¨æ˜ å°„å™¨å’Œæ§åˆ¶å™¨é€‚é…å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é™æ€èµ„æºæ˜ å°„å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">"/statics/**"</span> <span class="attr">location</span>=<span class="string">"/WEB-INF/statics/"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ­¤å¤„éœ€é…ç½®æ‰«æcontrollerå’Œwebsocketæ‰€åœ¨åŒ…</p><p>è¿˜æœ‰ä¸€ä¸ª<code>applicationContext-websocket.xml</code>é…ç½®æ–‡ä»¶æˆ‘ä»¬åœ¨ä»£ç å®ç°ä¸­è¯´æ˜</p><h4 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h4><h5 id="æ¡æ‰‹æ‹¦æˆªå™¨"><a href="#æ¡æ‰‹æ‹¦æˆªå™¨" class="headerlink" title="æ¡æ‰‹æ‹¦æˆªå™¨"></a>æ¡æ‰‹æ‹¦æˆªå™¨</h5><p><strong>HandshakeInterceptor</strong></p><p>æ‹¦æˆªå™¨è¯´æ˜</p><blockquote><p>An interceptor to copy information from the HTTP session to the â€œhandshake<br>attributesâ€ map to made available via <code>WebSocketSession.getAttributes()</code><br>Copies a subset or all HTTP session attributes and/or the HTTP session id</p></blockquote><p>æ‹¦æˆªå™¨ä¸»è¦ç”¨äºç”¨æˆ·ç™»å½•æ ‡è¯†çš„è®°å½•,ä¾¿äºåé¢è·å–æŒ‡å®šç”¨æˆ·çš„ä¼šè¯æ ‡è¯†å¹¶å‘æŒ‡å®šç”¨æˆ·å‘é€æ¶ˆæ¯,</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1foggpirw1cj30wi064myw.jpg" alt=""></p><p>è¿™é‡Œæˆ‘ä»¬ç»§æ‰¿<code>HttpSessionHandshakeInterceptor</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HandshakeInterceptor</span> <span class="keyword">extends</span> <span class="title">HttpSessionHandshakeInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Logger logger = Logger.getLogger(HandshakeInterceptor.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¡æ‰‹å‰</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">beforeHandshake</span><span class="params">(ServerHttpRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                                   ServerHttpResponse response, WebSocketHandler wsHandler,</span></span></span><br><span class="line"><span class="function"><span class="params">                                   Map&lt;String, Object&gt; attributes)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">"++ HandshakeInterceptor: beforeHandshake ++"</span>+attributes);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.beforeHandshake(request, response, wsHandler, attributes);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¡æ‰‹å</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterHandshake</span><span class="params">(ServerHttpRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                               ServerHttpResponse response, WebSocketHandler wsHandler,</span></span></span><br><span class="line"><span class="function"><span class="params">                               Exception ex)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">"++ HandshakeInterceptor: afterHandshake ++"</span>);</span><br><span class="line">        <span class="keyword">super</span>.afterHandshake(request, response, wsHandler, ex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>beforeHandshake(..)</code></p><blockquote><p>Invoked before the handshake is processed.</p></blockquote><p><code>afterHandshake(..)</code></p><blockquote><p>Invoked after the handshake is done. The response status and headers indicate the results of the handshake, i.e. whether it was successful or not.</p></blockquote><p>ä¸¤ä¸ªæ–¹æ³•è°ƒç”¨æ—¶æœºå‡ä¸ºå­—é¢æ‰€è¿°,æ¡æ‰‹å‰ååˆ†åˆ«è°ƒç”¨.ä¸»è¦æ˜¯åœ¨æ¡æ‰‹å‰åå»åšä¸€äº›äº‹,æ¯”å¦‚å°†éœ€è¦çš„æ•°æ®è®¾ç½®åˆ°<code>attributes</code>é‡Œ,ä¹‹ååœ¨<code>WebSocketHandler</code>çš„sessionä¸­è·å–è¿™äº›æ•°æ®.</p><h5 id="å¤„ç†ç±»"><a href="#å¤„ç†ç±»" class="headerlink" title="å¤„ç†ç±»"></a>å¤„ç†ç±»</h5><p><strong>WebSocketHandler</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyWebSocketHandler</span> <span class="keyword">implements</span> <span class="title">WebSocketHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger log = Logger.getLogger(MyWebSocketHandler.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¿å­˜æ‰€æœ‰çš„ç”¨æˆ·session</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ArrayList&lt;WebSocketSession&gt; users = <span class="keyword">new</span> ArrayList&lt;WebSocketSession&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterConnectionEstablished</span><span class="params">(WebSocketSession session)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        log.info(<span class="string">"connect websocket success......."</span>);</span><br><span class="line"></span><br><span class="line">        users.add(session);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(WebSocketSession session, WebSocketMessage&lt;?&gt; message)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Gson gson = <span class="keyword">new</span> Gson();</span><br><span class="line">        <span class="comment">// å°†æ¶ˆæ¯JSONæ ¼å¼é€šè¿‡Gsonè½¬æ¢æˆMap</span></span><br><span class="line">        <span class="comment">// message.getPayload().toString() è·å–æ¶ˆæ¯å…·ä½“å†…å®¹</span></span><br><span class="line">        Map&lt;String, Object&gt; msg = gson.fromJson(message.getPayload().toString(),</span><br><span class="line">                <span class="keyword">new</span> TypeToken&lt;Map&lt;String, Object&gt;&gt;() &#123;&#125;.getType());</span><br><span class="line">        log.info(<span class="string">"handleMessage......."</span>+message.getPayload()+<span class="string">"..........."</span>+msg);</span><br><span class="line">        String content = message.getPayload().toString();</span><br><span class="line">        <span class="comment">// å¤„ç†æ¶ˆæ¯ msgContentæ¶ˆæ¯å†…å®¹</span></span><br><span class="line">        TextMessage textMessage = <span class="keyword">new</span> TextMessage(content, <span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// è°ƒç”¨æ–¹æ³•ï¼ˆå‘é€æ¶ˆæ¯ç»™æ‰€æœ‰äººï¼‰</span></span><br><span class="line">        sendMsgToAllUsers(textMessage);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleTransportError</span><span class="params">(WebSocketSession session, Throwable exception)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        log.warn(<span class="string">"handleTransportError"</span>);</span><br><span class="line">        users.remove(session);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterConnectionClosed</span><span class="params">(WebSocketSession session, CloseStatus closeStatus)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        log.info(<span class="string">"connect websocket closed......."</span>);</span><br><span class="line">        users.remove(session);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»™æ‰€æœ‰ç”¨æˆ·å‘é€ ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMsgToAllUsers</span><span class="params">(WebSocketMessage&lt;?&gt; message)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (WebSocketSession user : users) &#123;</span><br><span class="line">            user.sendMessage(message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">supportsPartialMessages</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹å¯¹ä¸»è¦æ–¹æ³•è¿›è¡Œè¯´æ˜:</p><p><code>afterConnectionEstablished(..)</code></p><p>è¿æ¥å»ºç«‹åè°ƒç”¨,å¸¸ç”¨äºè®°å½•ç”¨æˆ·çš„è¿æ¥æ ‡è¯†,ä¾¿äºåé¢ä¿¡æ¯å‘é€.</p><p><code>handleTextMessage(..)</code></p><p>å¯¹æ¶ˆæ¯è¿›è¡Œå¤„ç†.</p><p><code>handleTransportError(..)</code></p><p>è¿æ¥å¼‚å¸¸å¤„ç†.éœ€è¦å…³é—­å‡ºé”™ä¼šè¯è¿æ¥</p><p><code>afterConnectionClosed(..)</code></p><p>è¿æ¥å…³é—­å¤„ç†</p><div class="note info"><p>æ­¤å¤„æˆ‘ä»¬å¯¹æ¶ˆæ¯çš„å¤„ç†å¾ˆç®€å•,å³åœ¨æ¥å—æ¶ˆæ¯åå‘é€ç»™æ‰€æœ‰è¿æ¥çš„ç”¨æˆ·,ç±»ä¼¼ä¸€ä¸ªåŒ¿åç¾¤èŠå®¤.</p></div><h5 id="æ³¨å†Œ"><a href="#æ³¨å†Œ" class="headerlink" title="æ³¨å†Œ"></a>æ³¨å†Œ</h5><p>å®Œæˆäº†WebSocketå¤„ç†ç±»,è¿˜éœ€è¦å¯¹å…¶è¿›è¡Œæ³¨å†Œç”Ÿæ•ˆ.è¿™é‡Œæœ‰ä¸¤ç§æ–¹å¼,æ‹©å…¶ä¸€å³å¯.</p><h6 id="åˆ›å»ºé…ç½®ç±»-å¹¶é€šè¿‡æ³¨è§£æ³¨å†Œ"><a href="#åˆ›å»ºé…ç½®ç±»-å¹¶é€šè¿‡æ³¨è§£æ³¨å†Œ" class="headerlink" title="åˆ›å»ºé…ç½®ç±»,å¹¶é€šè¿‡æ³¨è§£æ³¨å†Œ"></a>åˆ›å»ºé…ç½®ç±»,å¹¶é€šè¿‡æ³¨è§£æ³¨å†Œ</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="meta">@EnableWebSocket</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyWebSocketConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> <span class="keyword">implements</span> <span class="title">WebSocketConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerWebSocketHandlers</span><span class="params">(WebSocketHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//å‰å° å¯ä»¥ä½¿ç”¨websocketç¯å¢ƒ</span></span><br><span class="line">        registry.addHandler(myWebSocketHandler(),<span class="string">"/websocket"</span>).addInterceptors(<span class="keyword">new</span> HandshakeInterceptor()).setAllowedOrigins(<span class="string">"*"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‰å° ä¸å¯ä»¥ä½¿ç”¨websocketç¯å¢ƒï¼Œåˆ™ä½¿ç”¨sockjsè¿›è¡Œæ¨¡æ‹Ÿè¿æ¥</span></span><br><span class="line">        registry.addHandler(myWebSocketHandler(), <span class="string">"/sockjs/websocket"</span>).addInterceptors(<span class="keyword">new</span> HandshakeInterceptor())</span><br><span class="line">                .withSockJS();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// websocket å¤„ç†ç±»</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WebSocketHandler <span class="title">myWebSocketHandler</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyWebSocketHandler();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note warning"><p>åŒæ—¶è¿˜éœ€è¦é…ç½®ä¸Šæ–‡æåˆ°è¿‡çš„Springæ‰«æé…ç½®ç±».</p></div><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è‡ªåŠ¨æ‰«ææ§åˆ¶å™¨,webSocket --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.lhalcyon.king.controller,com.lhalcyon.king.socket"</span>/&gt;</span></span><br></pre></td></tr></table></figure><h6 id="é€šè¿‡xmlé…ç½®æ³¨å†Œ"><a href="#é€šè¿‡xmlé…ç½®æ³¨å†Œ" class="headerlink" title="é€šè¿‡xmlé…ç½®æ³¨å†Œ"></a>é€šè¿‡xmlé…ç½®æ³¨å†Œ</h6><p><code>applicationContext-websocket.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:websocket</span>=<span class="string">"http://www.springframework.org/schema/websocket"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/websocket</span></span></span><br><span class="line"><span class="tag"><span class="string">            http://www.springframework.org/schema/websocket/spring-websocket-4.0.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- websocketå¤„ç†ç±» --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"myHandler"</span> <span class="attr">class</span>=<span class="string">"com.lhalcyon.king.socket.MyWebSocketHandler"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ¡æ‰‹æ¥å£/æ‹¦æˆªå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"myInterceptor"</span> <span class="attr">class</span>=<span class="string">"com.lhalcyon.king.socket.HandshakeInterceptor"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">websocket:handlers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">websocket:mapping</span> <span class="attr">path</span>=<span class="string">"/websocket"</span> <span class="attr">handler</span>=<span class="string">"myHandler"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">websocket:handshake-interceptors</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"myInterceptor"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">websocket:handshake-interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">websocket:handlers</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--  æ³¨å†Œ sockJS --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">websocket:handlers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">websocket:mapping</span> <span class="attr">path</span>=<span class="string">"/websocket"</span> <span class="attr">handler</span>=<span class="string">"myHandler"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">websocket:handshake-interceptors</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"myInterceptor"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">websocket:handshake-interceptors</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">websocket:sockjs</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">websocket:handlers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸ŠæœåŠ¡ç«¯ä»£ç å®ç°åŸºæœ¬å®Œæˆ,æ¥ä¸‹æ¥å¯¹å®¢æˆ·ç«¯æµ‹è¯•é¡µé¢åšä¸€ä¸ªç®€å•çš„å®ç°.</p><h4 id="å®¢æˆ·ç«¯é¡µé¢"><a href="#å®¢æˆ·ç«¯é¡µé¢" class="headerlink" title="å®¢æˆ·ç«¯é¡µé¢"></a>å®¢æˆ·ç«¯é¡µé¢</h4><p><code>index.jsp</code></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;é¦–é¡µ&lt;/title&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">"renderer"</span> content=<span class="string">"webkit"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- å¼•å…¥ JQuery  --&gt;</span><br><span class="line">    &lt;script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- å¼•å…¥ sockJS  --&gt;</span><br><span class="line">    &lt;script type="text/javascript" src="https://cdn.bootcss.com/sockjs-client/1.1.4/sockjs.min.js" &gt;&lt;/script&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">        $(function() &#123;</span><br><span class="line">            var websocket;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// é¦–å…ˆåˆ¤æ–­æ˜¯å¦ æ”¯æŒ WebSocket</span></span><br><span class="line"></span><br><span class="line">            var url = <span class="string">'ws://'</span> + window.location.host + <span class="string">'/word-king/websocket'</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(<span class="string">'WebSocket'</span> in window) &#123;</span><br><span class="line">                websocket = <span class="keyword">new</span> WebSocket(url);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">'MozWebSocket'</span> in window) &#123;</span><br><span class="line">                websocket = <span class="keyword">new</span> MozWebSocket(url);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                url = <span class="string">"http://"</span>+ window.location.host +<span class="string">"/word-king/sockjs/websocket"</span>;</span><br><span class="line">                websocket = <span class="keyword">new</span> SockJS(url);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// æ‰“å¼€æ—¶</span></span><br><span class="line">            websocket.onopen = function(evnt) &#123;</span><br><span class="line">                console.log(<span class="string">"  websocket.onopen  "</span>);</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">// å¤„ç†æ¶ˆæ¯æ—¶</span></span><br><span class="line">            websocket.onmessage = function(evnt) &#123;</span><br><span class="line">                $(<span class="string">"#msg"</span>).append(<span class="string">"&lt;p&gt;(&lt;font color='red'&gt;"</span> + evnt.data + <span class="string">"&lt;/font&gt;)&lt;/p&gt;"</span>);</span><br><span class="line">                console.log(<span class="string">"  websocket.onmessage   "</span>);</span><br><span class="line">            &#125;;</span><br><span class="line">            websocket.onerror = function(evnt) &#123;</span><br><span class="line">                alert(<span class="string">"onerror"</span>);</span><br><span class="line">                console.log(<span class="string">"  websocket.onerror  "</span>);</span><br><span class="line">            &#125;;</span><br><span class="line">            websocket.onclose = function(evnt) &#123;</span><br><span class="line">                console.log(<span class="string">"  websocket.onclose  "</span>);</span><br><span class="line">                alert(<span class="string">"onclose"</span>);</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">// ç‚¹å‡»äº†å‘é€æ¶ˆæ¯æŒ‰é’®çš„å“åº”äº‹ä»¶</span></span><br><span class="line">            $(<span class="string">"#TXBTN"</span>).click(function()&#123;</span><br><span class="line">                <span class="comment">// è·å–æ¶ˆæ¯å†…å®¹</span></span><br><span class="line">                var text = $(<span class="string">"#tx"</span>).val();</span><br><span class="line">                <span class="comment">// åˆ¤æ–­</span></span><br><span class="line">                <span class="keyword">if</span>(text == <span class="keyword">null</span> || text == <span class="string">""</span>)&#123;</span><br><span class="line">                    alert(<span class="string">" content  can not empty!!"</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                var msg = &#123;</span><br><span class="line">                    msgContent: text,</span><br><span class="line">                    postsId: <span class="number">1</span></span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="comment">// å‘é€æ¶ˆæ¯</span></span><br><span class="line">                websocket.send(JSON.stringify(msg));</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!-- æœ€å¤–è¾¹æ¡† --&gt;</span><br><span class="line">&lt;div style=<span class="string">"margin: 20px auto; border: 1px solid blue; width: 300px; height: 500px;"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æ¶ˆæ¯å±•ç¤ºæ¡† --&gt;</span><br><span class="line">    &lt;div id="msg" style="width: 100%; height: 70%; border: 1px solid yellow;overflow: auto;"&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æ¶ˆæ¯ç¼–è¾‘æ¡† --&gt;</span><br><span class="line">    &lt;textarea id="tx" style="width: 100%; height: 20%;"&gt;&lt;/textarea&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æ¶ˆæ¯å‘é€æŒ‰é’® --&gt;</span><br><span class="line">    &lt;button id="TXBTN" style="width: 100%; height: 8%;"&gt;å‘é€æ•°æ®&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯æ­¤å¤„å¼•å…¥<code>JQuery</code>æ—¶,å¦‚æœæ˜¯æœ¬åœ°çš„æ–‡ä»¶,å¯èƒ½å­˜åœ¨æ— æ•ˆçš„æƒ…å†µ,éœ€è¦å»è®¾ç½®é™æ€èµ„æºæ˜ å°„è·¯å¾„,å¯è‡ªè¡ŒğŸ”è§£å†³.</p><p>æœ¬æ–‡é‡‡ç”¨çš„æ˜¯å¼•å…¥åœ¨çº¿åœ°å€</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥ JQuery  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.5/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ°å€å†™å…¥åéœ€Downloadä¸‹æ¥</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1foh8b3cqscj318y056jsy.jpg" alt=""></p><p>ä»£ç ä¸é«˜äº®è­¦å‘Šåå³èƒ½ç”Ÿæ•ˆ.</p><p>æœ€åæˆ‘ä»¬æ¥çœ‹çœ‹æ•ˆæœ</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1foh8i8249tg30m30i0tf2.gif" alt=""></p><hr><ol><li>å‚è€ƒ: <a href="http://blog.csdn.net/mybook201314/article/details/70173674" target="_blank" rel="noopener">http://blog.csdn.net/mybook201314/article/details/70173674</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note info&quot;&gt;&lt;p&gt;WebSocketæ˜¯HTML5å¼€å§‹æä¾›çš„ä¸€ç§æµè§ˆå™¨ä¸æœåŠ¡å™¨é—´è¿›è¡Œå…¨åŒå·¥é€šè®¯çš„ç½‘ç»œæŠ€æœ¯ã€‚ WebSocketé€šä¿¡åè®®äº2011å¹´è¢«IETFå®šä¸ºæ ‡å‡†RFC 6455ï¼ŒWebSocketAPIè¢«W3Cå®šä¸ºæ ‡å‡†ã€‚ åœ¨WebSocket APIä¸­ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦è¦åšä¸€ä¸ªæ¡æ‰‹çš„åŠ¨ä½œï¼Œç„¶åï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´å°±å½¢æˆäº†ä¸€æ¡å¿«é€Ÿé€šé“ã€‚ä¸¤è€…ä¹‹é—´å°±ç›´æ¥å¯ä»¥æ•°æ®äº’ç›¸ä¼ é€ã€‚&lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="Java" scheme="https://lhalcyon.com/categories/Java/"/>
    
    
      <category term="SpringMVC" scheme="https://lhalcyon.com/tags/SpringMVC/"/>
    
      <category term="WebSocket" scheme="https://lhalcyon.com/tags/WebSocket/"/>
    
      <category term="IM" scheme="https://lhalcyon.com/tags/IM/"/>
    
  </entry>
  
  <entry>
    <title>å®ç°apkä¸Šä¼ è’²å…¬è‹±åè‡ªåŠ¨å‘é€é’‰é’‰é€šçŸ¥</title>
    <link href="https://lhalcyon.com/webhook_dingding-pgyer/"/>
    <id>https://lhalcyon.com/webhook_dingding-pgyer/</id>
    <published>2018-02-05T02:41:30.000Z</published>
    <updated>2018-02-13T10:12:09.924Z</updated>
    
    <content type="html"><![CDATA[<div class="note info"><p>Webhookæ˜¯ä¸€ä¸ªAPIæ¦‚å¿µï¼Œå¹¶ä¸”å˜å¾—è¶Šæ¥è¶Šæµè¡Œã€‚æˆ‘ä»¬èƒ½ç”¨äº‹ä»¶æè¿°çš„äº‹ç‰©è¶Šå¤šï¼Œwebhookçš„ä½œç”¨èŒƒå›´ä¹Ÿå°±è¶Šå¤§ã€‚Webhookä½œä¸ºä¸€ä¸ªè½»é‡çš„äº‹ä»¶å¤„ç†åº”ç”¨ï¼Œæ­£å˜å¾—è¶Šæ¥è¶Šæœ‰ç”¨ã€‚</p><p>å‡†ç¡®çš„è¯´webhookæ˜¯ä¸€ç§webå›è°ƒæˆ–è€…httpçš„push APIï¼Œæ˜¯å‘APPæˆ–è€…å…¶ä»–åº”ç”¨æä¾›å®æ—¶ä¿¡æ¯çš„ä¸€ç§æ–¹å¼ã€‚Webhookåœ¨æ•°æ®äº§ç”Ÿæ—¶ç«‹å³å‘é€æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä½ èƒ½å®æ—¶æ”¶åˆ°æ•°æ®ã€‚è¿™ä¸€ç§ä¸åŒäºå…¸å‹çš„APIï¼Œéœ€è¦ç”¨äº†å®æ—¶æ€§éœ€è¦è¶³å¤Ÿå¿«çš„è½®è¯¢ã€‚è¿™æ— è®ºæ˜¯å¯¹ç”Ÿäº§è¿˜æ˜¯å¯¹æ¶ˆè´¹è€…éƒ½æ˜¯é«˜æ•ˆçš„ï¼Œå”¯ä¸€çš„ç¼ºç‚¹æ˜¯åˆå§‹å»ºç«‹å›°éš¾ã€‚</p><p>Webhookæœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºåå‘APIï¼Œå› ä¸ºä»–æä¾›äº†APIè§„åˆ™ï¼Œä½ éœ€è¦è®¾è®¡è¦ä½¿ç”¨çš„APIã€‚Webhookå°†å‘ä½ çš„åº”ç”¨å‘èµ·httpè¯·æ±‚ï¼Œå…¸å‹çš„æ˜¯postè¯·æ±‚ï¼Œåº”ç”¨ç¨‹åºç”±è¯·æ±‚é©±åŠ¨ã€‚</p></div><p>åœ¨Androidå¼€å‘ä¸­ä¼šç»å¸¸æäº¤apkç»™æµ‹è¯•äººå‘˜è¿›è¡Œæµ‹è¯•,é€šå¸¸çš„åšæ³•æ˜¯å°†æ„å»ºå®Œæˆçš„åŒ…ä¸Šä¼ è‡³<a href="https://www.pgyer.com/" target="_blank" rel="noopener">è’²å…¬è‹±</a>,æµ‹è¯•äººå‘˜ç›´æ¥æ‰«ç ä¸‹è½½å¹¶å®‰è£…apkåŒ…ä»è€Œè¿›è¡Œæµ‹è¯•.ä¸€èˆ¬æˆ‘ä»¬ä¼šå°†æ„å»ºåŠå‘å¸ƒè¿‡ç¨‹è‡ªåŠ¨åŒ–,å¯å‚è€ƒ:</p><ol><li><a href="http://lhalcyon.com/linux-jenkins-gradle_build_android1/">Linux+Jenkins+Gradleæ„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(ä¸€)</a></li><li><a href="http://lhalcyon.com/linux-jenkins-gradle_build_android2/">Linux+Jenkins+Gradleæ„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(äºŒ)</a></li></ol><p>æ–‡ç« ä¸­å®ç°äº†apkä¸Šä¼ è’²å…¬è‹±åé‚®ä»¶é€šçŸ¥,å¯æ˜¯å®é™…ä¸­,å¤§å®¶å¯¹é‚®ä»¶çš„å…³æ³¨è¿œè¿œæ²¡æœ‰å¯¹<code>IM</code>æ¶ˆæ¯çš„å…³æ³¨åº¦é«˜,æ‰€ä»¥æ¥ä¸‹æ¥æœ¬æ–‡å°†è¯´æ˜,å®ç°<strong>ä¸Šä¼ apkåè‡ªåŠ¨å‘é€é’‰é’‰æ¶ˆæ¯,å°†æ›´æ–°å†…å®¹,apkç‰ˆæœ¬å·ç­‰ä¿¡æ¯é€šçŸ¥åˆ°æµ‹è¯•äººå‘˜</strong></p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fo5p9j5pi0j30bs0ckjtu.jpg" alt=""></p><a id="more"></a><h4 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h4><p>é¦–å…ˆç¯å¢ƒæ­å»ºæ˜¯<code>IntelliJ+SpringMVC+Gradle</code>æ„å»ºçš„,å¦‚æœ‰ç–‘é—®çš„åŒå­¦å¯å‚è€ƒ<a href="http://lhalcyon.com/ssm_build/">IDEA+Gradleåˆ›å»ºMyBatis+SpringMVCé¡¹ç›®</a>,é¡¹ç›®ä¸­ä¸»è¦æ˜¯å¯¹æ¥å£æ•°æ®çš„è°ƒæ•´åŠè½¬å‘,å®é™…ä¸Šæœªç”¨åˆ°<code>MyBatis</code>,å¯è‡ªè¡Œè¿›è¡Œå»é™¤ğŸ™„.</p><h4 id="æ¨¡å‹å»ºç«‹"><a href="#æ¨¡å‹å»ºç«‹" class="headerlink" title="æ¨¡å‹å»ºç«‹"></a>æ¨¡å‹å»ºç«‹</h4><p>å¯¹ç…§<a href="https://www.pgyer.com/doc/view/webhook_introduction" target="_blank" rel="noopener">è’²å…¬è‹±doc</a>ã€<a href="https://open-doc.dingtalk.com/docs/doc.htm?treeId=257&amp;articleId=105735&amp;docType=1" target="_blank" rel="noopener">é’‰é’‰doc</a>åˆ†åˆ«å»ºç«‹Java Bean.</p><p><code>PgyerMessage</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"action"</span>: <span class="string">"åº”ç”¨æ›´æ–°"</span>,</span><br><span class="line">  <span class="attr">"title"</span>: <span class="string">"OooPlay"</span>,</span><br><span class="line">  <span class="attr">"link"</span>: <span class="string">"https://www.pgyer.com/oooplay_test"</span>,</span><br><span class="line">  <span class="attr">"message"</span>: <span class="string">"æ‚¨çš„åº”ç”¨OooPlayæœ‰äº†æ–°çš„ç‰ˆæœ¬(2.4)æ›´æ–°ã€‚"</span>,</span><br><span class="line">  <span class="attr">"type"</span>: <span class="string">"updateVersion"</span>,</span><br><span class="line">  <span class="attr">"os_version"</span>: <span class="string">"2.4"</span>,</span><br><span class="line">  <span class="attr">"build_version"</span>: <span class="string">"139"</span>,</span><br><span class="line">  <span class="attr">"created"</span>: <span class="string">"2015-10-09 11:25:16"</span>,</span><br><span class="line">  <span class="attr">"updated"</span>: <span class="string">"2015-10-09 11:25:16"</span>,</span><br><span class="line">  <span class="attr">"timestamp"</span>: <span class="number">1444361118</span>,</span><br><span class="line">  <span class="attr">"appsize"</span>: <span class="string">"2238036"</span>,</span><br><span class="line">  <span class="attr">"device_type"</span>: 'iOS',</span><br><span class="line">  <span class="attr">"notes"</span>: <span class="string">"ä¿®å¤äº†ä¸€äº›å°å¼±æ™ºçš„å°bug"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PgyerMessage</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String action;</span><br><span class="line">    <span class="keyword">public</span> String title;</span><br><span class="line">    <span class="keyword">public</span> String link;</span><br><span class="line">    <span class="keyword">public</span> String message;</span><br><span class="line">    <span class="keyword">public</span> String type;</span><br><span class="line">    <span class="keyword">public</span> String os_version;</span><br><span class="line">    <span class="keyword">public</span> String build_version;</span><br><span class="line">    <span class="keyword">public</span> String created;</span><br><span class="line">    <span class="keyword">public</span> String updated;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> timestamp;</span><br><span class="line">    <span class="keyword">public</span> String appsize;</span><br><span class="line">    <span class="keyword">public</span> String device_type;</span><br><span class="line">    <span class="keyword">public</span> String notes;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"PgyerMessage&#123;"</span> +</span><br><span class="line">                <span class="string">"action='"</span> + action + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", title='"</span> + title + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", link='"</span> + link + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", message='"</span> + message + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", type='"</span> + type + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", os_version='"</span> + os_version + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", build_version='"</span> + build_version + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", created='"</span> + created + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", updated='"</span> + updated + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", timestamp="</span> + timestamp +</span><br><span class="line">                <span class="string">", appsize='"</span> + appsize + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", device_type='"</span> + device_type + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", notes='"</span> + notes + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤å¤„æœ‰ä¸ªå°æŠ€å·§,<code>IDEA IntelliJ</code>æœ‰ä¸ªå¥½ç”¨çš„æ’ä»¶<code>GsonFormat</code>å¯ä¸€é”®å°†<code>Json</code>å­—ç¬¦ä¸²è½¬æ¢ä¸º<code>Java Model</code></p><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fo5h69y1fmg30m20fnnbx.gif" alt=""></p><p>é’‰é’‰æ¶ˆæ¯åˆ™åˆ†ä¸ºå‡ ç§ç±»å‹,å…·ä½“ä¸¾ä¾‹å¯å‚è€ƒ<a href="https://open-doc.dingtalk.com/docs/doc.htm?treeId=257&amp;articleId=105735&amp;docType=1" target="_blank" rel="noopener">é’‰é’‰doc</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_LINK = <span class="string">"link"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_MARKDOWN = <span class="string">"markdown"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_TEXT = <span class="string">"text"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_ACTIONCARD = <span class="string">"actionCard"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_FEEDCARD = <span class="string">"feedCard"</span>;</span><br></pre></td></tr></table></figure><p>æ­¤å¤„æˆ‘ä»¬é€‰æ‹©<code>markdown</code>ç±»å‹.ä¸ºäº†ä¾¿äºæ‹“å±•,æ­¤å¤„å°†æ¶ˆæ¯æŠ½å–äº†ä¸ªåŸºç±»<code>BaseDingMessage</code>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseDingMessage</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_LINK = <span class="string">"link"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_MARKDOWN = <span class="string">"markdown"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_TEXT = <span class="string">"text"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_ACTIONCARD = <span class="string">"actionCard"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TYPE_FEEDCARD = <span class="string">"feedCard"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String msgtype;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> AtBean at;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">AtBean</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">boolean</span> isAtAll;</span><br><span class="line">        <span class="keyword">public</span> List&lt;String&gt; atMobiles;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MarkdownMessage</span>  <span class="keyword">extends</span> <span class="title">BaseDingMessage</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> MarkdownBean markdown;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MarkdownBean</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> String title;</span><br><span class="line">        <span class="keyword">public</span> String text;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h4><p>é¦–å…ˆåœ¨<code>build.gradle</code>ä¸­å¯¼å…¥ä¾èµ–</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">group:</span> <span class="string">'com.alibaba'</span>, <span class="string">name:</span> <span class="string">'fastjson'</span>, <span class="string">version:</span> <span class="string">'1.2.45'</span></span><br><span class="line">compile <span class="string">group:</span> <span class="string">'com.squareup.okhttp3'</span>, <span class="string">name:</span> <span class="string">'okhttp'</span>, <span class="string">version:</span> <span class="string">'3.9.0'</span></span><br></pre></td></tr></table></figure><p><code>fastjson</code>æ˜¯ç”¨åŠ›å•Šè½¬åŒ–<code>json</code>,<code>okhttp</code>ç”¨æ¥ç½‘ç»œè¯·æ±‚</p><p><code>spring-mvc.xml</code>åŠ å…¥jsoné…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«ææ§åˆ¶å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.lhalcyon.webhook.controller"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾æ¸²æŸ“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"internalResourceViewResolver"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/views/"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ§åˆ¶å™¨æ˜ å°„å™¨å’Œæ§åˆ¶å™¨é€‚é…å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"supportedMediaTypes"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">value</span>&gt;</span>text/html;charset=UTF-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">value</span>&gt;</span>application/json<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">value</span>&gt;</span>application/xml;charset=UTF-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é™æ€èµ„æºæ˜ å°„å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">"/statics/**"</span> <span class="attr">location</span>=<span class="string">"/WEB-INF/statics/"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¶ˆæ¯å‘é€æœåŠ¡<code>DingServiceImpl.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Service</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DingServiceImpl</span> <span class="keyword">implements</span> <span class="title">DingService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = Logger.getLogger(DingServiceImpl.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">(BaseDingMessage message,String url)</span> </span>&#123;</span><br><span class="line">        MediaType jsonType = MediaType.parse(<span class="string">"application/json; charset=utf-8"</span>);</span><br><span class="line">        okhttp3.RequestBody body = okhttp3.RequestBody.create(jsonType, JSON.toJSONString(message));</span><br><span class="line">        <span class="keyword">final</span> Request request = <span class="keyword">new</span> Request.Builder()</span><br><span class="line">                .url(url)</span><br><span class="line">                .post(body)</span><br><span class="line">                .build();</span><br><span class="line">        OkHttpClient client = OkhttpProvider.get();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            client.newCall(request).execute();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è’²å…¬è‹±è¯·æ±‚æ§åˆ¶å™¨<code>PgyerController.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/pgyer"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PgyerController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DingService dingService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = Logger.getLogger(PgyerController.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/update"</span>,method = RequestMethod.POST)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> BaseDingMessage <span class="title">apkUpdate</span><span class="params">(@RequestBody PgyerMessage pgyerMessage)</span></span>&#123;</span><br><span class="line">        BaseDingMessage dingMessage = WebhookConverter.pgyer2Ding(pgyerMessage);</span><br><span class="line">        dingService.send(dingMessage, Urls.DING_TEST);</span><br><span class="line">        logger.info(dingMessage);</span><br><span class="line">        <span class="keyword">return</span> dingMessage;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>Urls.DING_TEST</code>ä¸ºé’‰é’‰æœºå™¨äººçš„ä¼šè¯tokenåœ°å€,åé¢ä¼šè¯´æ˜å¦‚ä½•åˆ›å»º/è·å–</p><p>æ¶ˆæ¯è½¬æ¢å™¨<code>WebhookConverter.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebhookConverter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = Logger.getLogger(WebhookConverter.class);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MarkdownMessage <span class="title">pgyer2Ding</span><span class="params">(PgyerMessage pgyerMessage)</span></span>&#123;</span><br><span class="line">        MarkdownMessage message = <span class="keyword">new</span> MarkdownMessage();</span><br><span class="line">        message.msgtype = BaseDingMessage.TYPE_MARKDOWN;</span><br><span class="line">        message.markdown = <span class="keyword">new</span> MarkdownMessage.MarkdownBean();</span><br><span class="line">        message.markdown.title = pgyerMessage.device_type + <span class="string">"è’²å…¬è‹±æ›´æ–°"</span>;</span><br><span class="line">        StringBuilder builder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        builder.append(<span class="string">"#### "</span>).append(pgyerMessage.device_type).append(<span class="string">"æµ‹è¯•åŒ…å·²æ›´æ–°! \n\n"</span>)</span><br><span class="line">        .append(<span class="string">"###### version: "</span>).append(pgyerMessage.os_version).append(<span class="string">" | build "</span>).append(pgyerMessage.build_version).append(<span class="string">"\n\n"</span>)</span><br><span class="line">        .append(<span class="string">"æ›´æ–°å†…å®¹:\n"</span>).append(<span class="string">"&gt; "</span>).append(pgyerMessage.notes).append(<span class="string">"\n\n"</span>)</span><br><span class="line">        .append(<span class="string">"![qr_code_test](å›¾ç‰‡åœ°å€)\n\n"</span>)</span><br><span class="line">        .append(<span class="string">"[ä¸‹è½½åœ°å€](https://www.pgyer.com/ä½ çš„apkåœ°å€) å¯†ç :ä½ çš„å¯†ç \n"</span>).append(<span class="string">" @18810100000 @18810100001 @18818100002 "</span>);</span><br><span class="line"></span><br><span class="line">        message.markdown.text = builder.toString();</span><br><span class="line">        message.at = <span class="keyword">new</span> BaseDingMessage.AtBean();</span><br><span class="line">        message.at.isAtAll = <span class="keyword">false</span>;</span><br><span class="line">        message.at.atMobiles = Arrays.asList(<span class="string">"18818100000"</span>,<span class="string">"18818100001"</span>,<span class="string">"18818100002"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šéœ€è‡ªè¡Œä¿®æ”¹å†…å®¹.</p><p>ç„¶ååˆ›å»ºé’‰é’‰æœºå™¨äºº.åˆ›å»ºå››è¿</p><p><strong>1</strong></p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fo6gzkjikoj3090020wem.jpg" alt=""></p><p><strong>2</strong></p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fo6gzmv1ouj30ic02o3yo.jpg" alt=""></p><p><strong>3</strong></p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fo6gzpzdxtj30ib0ezq4b.jpg" alt=""></p><p><strong>4</strong></p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fo6hhbxrdvj30id0eyjs7.jpg" alt=""></p><p>ç‚¹æ­¤å¤åˆ¶é’‰é’‰æœºå™¨äººä¼šè¯token,å»ºç«‹<code>Urls.java</code>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Urls</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ææµ‹ç¾¤æœºå™¨äººtoken</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String DING_TEST = <span class="string">"é’‰é’‰token"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤å¤„çš„<code>Ding_Test</code>å³ä¸ºä¸Šé¢å¤åˆ¶çš„åœ°å€</p><p>è‡³æ­¤,ä»£ç ä¸»è¦å®ç°ç±»å·²ç»å®Œæˆ,æ¥ä¸‹æ¥éœ€è¦å»é…ç½®è’²å…¬è‹±<code>webhook</code></p><h4 id="é…ç½®webhook"><a href="#é…ç½®webhook" class="headerlink" title="é…ç½®webhook"></a>é…ç½®webhook</h4><p>æ‰“å¼€<a href="https://www.pgyer.com/" target="_blank" rel="noopener">è’²å…¬è‹±</a>åº”ç”¨è®¾ç½®</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fo6hs1ezmcj31220ifwgj.jpg" alt=""></p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fo6hylvq9ij30jw0dnq3q.jpg" alt=""></p><p>åˆ›å»ºwebhook,å†™å…¥<code>PgyerController</code>çš„æ›´æ–°è¯·æ±‚åœ°å€,å¦‚æœé…ç½®ä¸æœ¬æ–‡çš„ç›¸åŒ,åœ°å€åˆ™ä¸º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://ä½ çš„åœ°å€:ç«¯å£/webhook-1.0-SNAPSHOT/pgyer/update</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>webhook-1.0-SNAPSHOT</code>ä¸ºwaråŒ…åœ¨tomcatè§£å‹åçš„åç§°</p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fo6huk9u4yj30bo05rt9a.jpg" alt=""></p><p>done!  ä¹‹ååªè¦ä¸Šä¼ æˆåŠŸå,å³æœ‰é’‰é’‰æ¶ˆæ¯é€šçŸ¥å¹¶@æµ‹è¯•äººå‘˜äº†! </p><p>è®©æˆ‘ä»¬å†çœ‹ä¸‹æ‰“åŒ…åçš„æ¶ˆæ¯é€šçŸ¥!</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fo5p9j5pi0j30bs0ckjtu.jpg" alt=""></p><p>ç±»ä¼¼çš„,ä»£ç <code>push</code>,<code>merge</code>ä¹Ÿå¯ä»¥åšæˆwebhookæ¶ˆæ¯.</p><p><code>Github</code>ã€<code>Gitlab</code>æ—¢æœ‰æˆç†Ÿçš„å¯¹æ¥æœºå™¨äºº.è€Œç¬”è€…ä½¿ç”¨çš„<a href="https://coding.net/" target="_blank" rel="noopener">Coding</a>æ˜¯æ²¡æœ‰ä¸é’‰é’‰åšå¯¹æ¥çš„,æ­¤æ—¶å¯è‡ªå®šä¹‰æœºå™¨äººå®ç°,æœ‰å…´è¶£çš„åŒå­¦å¯å‚è€ƒä¸Šé¢çš„æ•™ç¨‹è‡ªè¡Œå®ç°.</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fo710z7ywvj309t070aa2.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note info&quot;&gt;&lt;p&gt;Webhookæ˜¯ä¸€ä¸ªAPIæ¦‚å¿µï¼Œå¹¶ä¸”å˜å¾—è¶Šæ¥è¶Šæµè¡Œã€‚æˆ‘ä»¬èƒ½ç”¨äº‹ä»¶æè¿°çš„äº‹ç‰©è¶Šå¤šï¼Œwebhookçš„ä½œç”¨èŒƒå›´ä¹Ÿå°±è¶Šå¤§ã€‚Webhookä½œä¸ºä¸€ä¸ªè½»é‡çš„äº‹ä»¶å¤„ç†åº”ç”¨ï¼Œæ­£å˜å¾—è¶Šæ¥è¶Šæœ‰ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å‡†ç¡®çš„è¯´webhookæ˜¯ä¸€ç§webå›è°ƒæˆ–è€…httpçš„push APIï¼Œæ˜¯å‘APPæˆ–è€…å…¶ä»–åº”ç”¨æä¾›å®æ—¶ä¿¡æ¯çš„ä¸€ç§æ–¹å¼ã€‚Webhookåœ¨æ•°æ®äº§ç”Ÿæ—¶ç«‹å³å‘é€æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä½ èƒ½å®æ—¶æ”¶åˆ°æ•°æ®ã€‚è¿™ä¸€ç§ä¸åŒäºå…¸å‹çš„APIï¼Œéœ€è¦ç”¨äº†å®æ—¶æ€§éœ€è¦è¶³å¤Ÿå¿«çš„è½®è¯¢ã€‚è¿™æ— è®ºæ˜¯å¯¹ç”Ÿäº§è¿˜æ˜¯å¯¹æ¶ˆè´¹è€…éƒ½æ˜¯é«˜æ•ˆçš„ï¼Œå”¯ä¸€çš„ç¼ºç‚¹æ˜¯åˆå§‹å»ºç«‹å›°éš¾ã€‚&lt;/p&gt;
&lt;p&gt;Webhookæœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºåå‘APIï¼Œå› ä¸ºä»–æä¾›äº†APIè§„åˆ™ï¼Œä½ éœ€è¦è®¾è®¡è¦ä½¿ç”¨çš„APIã€‚Webhookå°†å‘ä½ çš„åº”ç”¨å‘èµ·httpè¯·æ±‚ï¼Œå…¸å‹çš„æ˜¯postè¯·æ±‚ï¼Œåº”ç”¨ç¨‹åºç”±è¯·æ±‚é©±åŠ¨ã€‚&lt;/p&gt;&lt;/div&gt;
&lt;p&gt;åœ¨Androidå¼€å‘ä¸­ä¼šç»å¸¸æäº¤apkç»™æµ‹è¯•äººå‘˜è¿›è¡Œæµ‹è¯•,é€šå¸¸çš„åšæ³•æ˜¯å°†æ„å»ºå®Œæˆçš„åŒ…ä¸Šä¼ è‡³&lt;a href=&quot;https://www.pgyer.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;è’²å…¬è‹±&lt;/a&gt;,æµ‹è¯•äººå‘˜ç›´æ¥æ‰«ç ä¸‹è½½å¹¶å®‰è£…apkåŒ…ä»è€Œè¿›è¡Œæµ‹è¯•.ä¸€èˆ¬æˆ‘ä»¬ä¼šå°†æ„å»ºåŠå‘å¸ƒè¿‡ç¨‹è‡ªåŠ¨åŒ–,å¯å‚è€ƒ:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://lhalcyon.com/linux-jenkins-gradle_build_android1/&quot;&gt;Linux+Jenkins+Gradleæ„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(ä¸€)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://lhalcyon.com/linux-jenkins-gradle_build_android2/&quot;&gt;Linux+Jenkins+Gradleæ„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(äºŒ)&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ–‡ç« ä¸­å®ç°äº†apkä¸Šä¼ è’²å…¬è‹±åé‚®ä»¶é€šçŸ¥,å¯æ˜¯å®é™…ä¸­,å¤§å®¶å¯¹é‚®ä»¶çš„å…³æ³¨è¿œè¿œæ²¡æœ‰å¯¹&lt;code&gt;IM&lt;/code&gt;æ¶ˆæ¯çš„å…³æ³¨åº¦é«˜,æ‰€ä»¥æ¥ä¸‹æ¥æœ¬æ–‡å°†è¯´æ˜,å®ç°&lt;strong&gt;ä¸Šä¼ apkåè‡ªåŠ¨å‘é€é’‰é’‰æ¶ˆæ¯,å°†æ›´æ–°å†…å®¹,apkç‰ˆæœ¬å·ç­‰ä¿¡æ¯é€šçŸ¥åˆ°æµ‹è¯•äººå‘˜&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/006tNc79gy1fo5p9j5pi0j30bs0ckjtu.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Webhook" scheme="https://lhalcyon.com/categories/Webhook/"/>
    
    
      <category term="Dingding" scheme="https://lhalcyon.com/tags/Dingding/"/>
    
      <category term="Webhook" scheme="https://lhalcyon.com/tags/Webhook/"/>
    
      <category term="Pgyer" scheme="https://lhalcyon.com/tags/Pgyer/"/>
    
  </entry>
  
  <entry>
    <title>Linuxå‡çº§Glibc2.14ä¸­æ–‡ä¹±ç </title>
    <link href="https://lhalcyon.com/update_glibc_issue/"/>
    <id>https://lhalcyon.com/update_glibc_issue/</id>
    <published>2018-02-01T02:28:00.000Z</published>
    <updated>2018-02-04T08:03:16.352Z</updated>
    
    <content type="html"><![CDATA[<div class="note info"><p><code>CenterOS</code>ä¸Šé»˜è®¤çš„<code>Glibc</code>ç‰ˆæœ¬ä¸º<code>2.12.1</code>,ç”±äºæˆ‘ä»¬çš„Androidé¡¹ç›®ä½¿ç”¨åˆ°äº†<code>JNI</code>,å°†é¡¹ç›®æ„å»ºéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šæ—¶ä¼šé‡åˆ°é—®é¢˜<code>&#39;GLIBC_2.14&#39; not found</code>,é‚£ä¹ˆå°±éœ€è¦å‡çº§<code>Glibc</code>è‡³<code>2.14</code>.å‡çº§çš„æ•™ç¨‹ç½‘ä¸Šå¾ˆå¤š,å¯æ˜¯å´æ¼æ‰äº†ä¸€ä¸ªæ­¥éª¤,å¯¼è‡´åé¢ä¸­æ–‡ä¹±ç çš„é—®é¢˜.æœ¬ç¯‡ä¼šåšä¸€ä¸ªå…¨é¢çš„è§£è¯´</p></div><a id="more"></a><h4 id="1-Glibcä¸‹è½½"><a href="#1-Glibcä¸‹è½½" class="headerlink" title="1. Glibcä¸‹è½½"></a>1. Glibcä¸‹è½½</h4><p>é¦–å…ˆä»<a href="http://www.gnu.org/software/libc/" target="_blank" rel="noopener">Glibc Download</a>ä¸‹è½½åŒ…,è¿™é‡Œé€‰æ‹©æ˜¯<a href="http://ftp.gnu.org/gnu/glibc/glibc-2.14.tar.gz" target="_blank" rel="noopener">Glibc 2.14</a></p><h4 id="2-å®‰è£…"><a href="#2-å®‰è£…" class="headerlink" title="2. å®‰è£…"></a>2. å®‰è£…</h4><p>ä¸Šä¼ è‡³æœåŠ¡å™¨,è¿›å…¥ç›®å½•è§£å‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf glibc-2.14.tar.gz</span><br></pre></td></tr></table></figure><p>è¿›å…¥è§£å‹åçš„ç›®å½•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd glibc-2.14</span><br></pre></td></tr></table></figure><p>æ¥ç€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir /opt/build</span><br><span class="line">cd build</span><br><span class="line">../configure --prefix=/opt/glibc-2.14</span><br><span class="line">make -j4</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>è‹¥é¡ºåˆ©çš„è¯,è‡³æ­¤åˆ™å®‰è£…æˆåŠŸäº†.</p><h5 id="issue"><a href="#issue" class="headerlink" title="issue"></a>issue</h5><p><strong>1. åœ¨make installè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Can&apos;t open configuration file /opt/glibc-2.14/etc/ld.so.conf: No such file or directory</span><br></pre></td></tr></table></figure><p>ç¼ºå°‘äº†æŠ¥é”™çš„ç¼–è¯‘æ–‡ä»¶<code>ld.so.conf</code>.é€šè¿‡findå‘½ä»¤æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶é…ç½®</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1fo0wcs8mt3j30ap00vt8t.jpg" alt=""></p><p>ç„¶åæ‹·è´æ–‡ä»¶è‡³å¯¹åº”æ–‡ä»¶ç›®å½•,ç»§ç»­ç¼–è¯‘</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp /etc/ld.so.conf /opt/glibc-2.14/etc/ </span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘æˆåŠŸ,æ¥ç€å®šä¹‰ä¸‹ç¯å¢ƒå˜é‡å³å¯</p><h4 id="3-è¡¥å……"><a href="#3-è¡¥å……" class="headerlink" title="3. è¡¥å……"></a>3. è¡¥å……</h4><div class="note warning"><p>é€šå¸¸çš„æ•™ç¨‹è‡³æ­¤å°±ç»“æŸäº†.æœ€åˆç¬”è€…å‚è€ƒç½‘ä¸Šçš„æ•™ç¨‹ä¹Ÿæ˜¯åšåˆ°è¿™é‡Œ.å½“æ—¶è·‘ç¨‹åºä¹Ÿæ²¡é—®é¢˜,ç›´åˆ°å‰æ®µæ—¶é—´å¤§æ¥¼åœç”µ,æœåŠ¡å™¨é‡å¯å,é€šè¿‡æœåŠ¡å™¨ä¸Š<code>Jenkins</code>æ‰“åŒ…ä¸Šä¼ åˆ°è’²å…¬è‹±çš„ä¸­æ–‡ä¿¡æ¯å…¨æ˜¯ä¹±ç ! ç›¸å½“äºæœåŠ¡å™¨çš„ç¼–ç æ–‡ä»¶ä¸¢å¤±äº†,æ‰€æœ‰ä¸­æ–‡éƒ½ä¼šä¹±ç .</p><p>æ˜¯å› ä¸ºé—æ¼äº†<code>localedata</code>æœªç¼–è¯‘,åœ¨æœåŠ¡å™¨é‡å¯å,<code>Glibc2.14</code>æ‰¾ä¸åˆ°å¯¹åº”ç‰ˆæœ¬<code>2.14</code>çš„<code>glibc locale</code>æ–‡ä»¶.</p></div><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fo0rvnge0hj30es0363yp.jpg" alt=""></p><p>æ­£ç¡®æ“ä½œæ˜¯,åœ¨<code>make</code>&amp;<code>make install</code>å®Œæˆåç»§ç»­ç¼–è¯‘localåŒ…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make localedata/install-locales</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘éœ€è¦ä¸€äº›æ—¶é—´,å®Œæˆåé‡å¯æœåŠ¡å™¨å³å¯ç”Ÿæ•ˆ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutdown -r now</span><br></pre></td></tr></table></figure><hr><ol><li>å‚è€ƒ: <a href="http://blog.csdn.net/clirus/article/details/62425498" target="_blank" rel="noopener">http://blog.csdn.net/clirus/article/details/62425498</a></li><li>å‚è€ƒ: <a href="http://blog.csdn.net/fzuzhanghao1993/article/details/77650500" target="_blank" rel="noopener">http://blog.csdn.net/fzuzhanghao1993/article/details/77650500</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note info&quot;&gt;&lt;p&gt;&lt;code&gt;CenterOS&lt;/code&gt;ä¸Šé»˜è®¤çš„&lt;code&gt;Glibc&lt;/code&gt;ç‰ˆæœ¬ä¸º&lt;code&gt;2.12.1&lt;/code&gt;,ç”±äºæˆ‘ä»¬çš„Androidé¡¹ç›®ä½¿ç”¨åˆ°äº†&lt;code&gt;JNI&lt;/code&gt;,å°†é¡¹ç›®æ„å»ºéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šæ—¶ä¼šé‡åˆ°é—®é¢˜&lt;code&gt;&amp;#39;GLIBC_2.14&amp;#39; not found&lt;/code&gt;,é‚£ä¹ˆå°±éœ€è¦å‡çº§&lt;code&gt;Glibc&lt;/code&gt;è‡³&lt;code&gt;2.14&lt;/code&gt;.å‡çº§çš„æ•™ç¨‹ç½‘ä¸Šå¾ˆå¤š,å¯æ˜¯å´æ¼æ‰äº†ä¸€ä¸ªæ­¥éª¤,å¯¼è‡´åé¢ä¸­æ–‡ä¹±ç çš„é—®é¢˜.æœ¬ç¯‡ä¼šåšä¸€ä¸ªå…¨é¢çš„è§£è¯´&lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://lhalcyon.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://lhalcyon.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>IDEA+Gradleåˆ›å»ºMyBatis+SpringMVCé¡¹ç›®</title>
    <link href="https://lhalcyon.com/ssm_build/"/>
    <id>https://lhalcyon.com/ssm_build/</id>
    <published>2018-01-29T01:58:20.000Z</published>
    <updated>2018-02-04T08:03:00.288Z</updated>
    
    <content type="html"><![CDATA[<div class="note info"><p>Gradleæ˜¯ä¸€ä¸ªåŸºäºApache Antå’ŒApache Mavenæ¦‚å¿µçš„é¡¹ç›®è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·.å®ƒä½¿ç”¨ä¸€ç§åŸºäºGroovyçš„ç‰¹å®šé¢†åŸŸè¯­è¨€(DSL)æ¥å£°æ˜é¡¹ç›®è®¾ç½®,æŠ›å¼ƒäº†åŸºäºXMLçš„å„ç§ç¹çé…ç½®.</p><p>IDEA å…¨ç§°IntelliJ IDEA,æ˜¯javaè¯­è¨€å¼€å‘çš„é›†æˆç¯å¢ƒ,IntelliJåœ¨ä¸šç•Œè¢«å…¬è®¤ä¸ºæœ€å¥½çš„javaå¼€å‘å·¥å…·ä¹‹ä¸€,å°¤å…¶åœ¨æ™ºèƒ½ä»£ç åŠ©æ‰‹ã€ä»£ç è‡ªåŠ¨æç¤ºã€é‡æ„ã€J2EEæ”¯æŒã€Antã€JUnitã€CVSæ•´åˆã€ä»£ç å®¡æŸ¥ã€ åˆ›æ–°çš„GUIè®¾è®¡ç­‰æ–¹é¢çš„åŠŸèƒ½å¯ä»¥è¯´æ˜¯è¶…å¸¸çš„.</p></div><a id="more"></a><p>ä»¥ä¸Šä¸ºç™¾åº¦çš„ç®€ä»‹.ä»äº‹Androidçš„ç«¥é‹åº”è¯¥ä¸éš¾å‘ç°<code>Gradle</code>ä»¥åŠ<code>Android Studio</code>çš„å¼º(hen)å¤§(ka).ğŸ¤«è€Œ<code>AS</code>æ˜¯åŸºäº<code>IntelliJ IDEA</code>å¼€å‘çš„.ä¹ æƒ¯äº†<code>Gradle</code>çš„ä¾¿æ·,äºæ˜¯å¼€å§‹åŸºäº<code>Gradle</code>+<code>IDEA</code>æ„å»º<code>Java</code>é¡¹ç›®.</p><h4 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h4><h5 id="1-æ•°æ®åº“MySql"><a href="#1-æ•°æ®åº“MySql" class="headerlink" title="1. æ•°æ®åº“MySql"></a>1. æ•°æ®åº“MySql</h5><p>åœ¨<a href="https://www.mysql.com/downloads/" target="_blank" rel="noopener">MySql Downloads</a>ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬å¹¶å®‰è£…</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1fnyn5efs2vj306t05st8w.jpg" alt=""></p><div class="note warning"><p>æ­¤å¤„ç¬”è€…åœ¨<code>macOS</code>ä¸Šå®‰è£…<code>5.7.21</code>åæ‰“å¼€ç³»ç»Ÿåå¥½è®¾ç½®,é‡åˆ°<code>æ— æ³•åŠ è½½MySqlé¢æ¿</code>çš„é—®é¢˜.ä¸€ç•ªæœç´¢ğŸ”åå‘ç°æ˜¯macOSç‰ˆæœ¬ä¸MySqlä¸å…¼å®¹,é€‰æ‹©ä½ç‰ˆæœ¬çš„MySqlå¦‚<code>5.6.39</code>å³å¯.</p></div><p><img src="https://ws3.sinaimg.cn/large/006tNc79ly1fnyncy23rdj30r404ndg9.jpg" alt=""></p><h5 id="2-IntelliJ-IDEA"><a href="#2-IntelliJ-IDEA" class="headerlink" title="2. IntelliJ IDEA"></a>2. IntelliJ IDEA</h5><p>è¯·è‡ªè¡Œå®‰(po)è£…(jie).</p><h5 id="3-Tomcat"><a href="#3-Tomcat" class="headerlink" title="3. Tomcat"></a>3. Tomcat</h5><p>è¯·è‡ªè¡Œä¸‹è½½è§£å‹.å¦‚è‹¥æ˜¯<code>macOS</code>æˆ–æ˜¯<code>Linux</code>ä¸Šè§£å‹åéœ€è¿›å…¥<code>bin</code>ç›®å½•æ‰§è¡Œä¸‹å‘½ä»¤<code>chmod u+x *.sh</code>ä¿®æ”¹æƒé™</p><h4 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h4><p>ç‚¹å‡»  Create New Project</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fnynr052i2j30qc0kk75x.jpg" alt=""></p><p>é€‰æ‹©åŸºäºGradleçš„Java Webé¡¹ç›®</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fnyo6iusc6j30qc0kcjs5.jpg" alt=""></p><p>å¡«å†™GroupIdå’ŒArtifactId</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fnyo8vutcjj30qc0kcwfq.jpg" alt=""></p><p>é€‰æ‹©gradle.å¯ä½¿ç”¨é»˜è®¤çš„,å¯ä½¿ç”¨æœ¬åœ°çš„</p><p>æ¥ç€é€‰æ‹©é¡¹ç›®ç›®å½•,åŸºæœ¬é¡¹ç›®åˆ›å»ºå¥½äº†,æ¥ä¸‹æ¥è¿›å…¥æ–‡ä»¶é…ç½®</p><h4 id="æ–‡ä»¶é…ç½®"><a href="#æ–‡ä»¶é…ç½®" class="headerlink" title="æ–‡ä»¶é…ç½®"></a>æ–‡ä»¶é…ç½®</h4><p>é¦–å…ˆåˆ›å»º<code>java</code>å’Œ<code>resources</code>ç›®å½•,å¹¶ä¸”åˆ›å»ºåŒ…ä»¥åŠ<code>web.xml</code>.</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79ly1fnyqetghs0j309b0b4aai.jpg" alt=""></p><h5 id="log4j-properties"><a href="#log4j-properties" class="headerlink" title="log4j.properties"></a>log4j.properties</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#è®¾ç½®æ—¥å¿—çš„çº§åˆ«ï¼Œå®šä¹‰æ—¥å¿—ä¿¡æ¯çš„è¾“å‡ºç›®çš„</span><br><span class="line">log4j.rootLogger=DEBUG, A1 ,R</span><br><span class="line">#å®šä¹‰A1çš„è¾“å‡ºç›®çš„åœ°ä¸ºæ§åˆ¶å°</span><br><span class="line">log4j.appender.A1=org.apache.log4j.ConsoleAppender</span><br><span class="line">#å¸ƒå±€ä¸º PatternLayout å¯ä»¥çµæ´»åœ°æŒ‡å®šå¸ƒå±€æ¨¡å¼ã€‚</span><br><span class="line">log4j.appender.A1.layout=org.apache.log4j.PatternLayout</span><br><span class="line">#è®¾ç½®è¾“å‡ºæ ¼å¼</span><br><span class="line">log4j.appender.A1.layout.ConversionPattern=%-d&#123;yyyy-MM-dd HH\:mm\:ss&#125; [%c]-[%p] %m%n</span><br><span class="line">#å®šä¹‰Rçš„è¾“å‡ºç›®çš„åœ°ä¸ºæ–‡ä»¶ï¼Œå¹¶ä¸”æ–‡ä»¶å¤§å°åˆ°è¾¾æŒ‡å®šå°ºå¯¸çš„æ—¶å€™äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶</span><br><span class="line">log4j.appender.R=org.apache.log4j.RollingFileAppender</span><br><span class="line">#è®¾ç½®è¾“å‡ºçš„æ–‡ä»¶åœ°å€</span><br><span class="line">log4j.appender.R.File=/Users/xx/Documents/ServerLog</span><br><span class="line">#è®¾ç½®æ–‡ä»¶å¤§å°ä¼Ÿ100 kb æ–‡ä»¶åˆ°è¾¾100æ—¶ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œ</span><br><span class="line">#MaxBackupIndex æœ€å¤§è®°å½•çš„æ–‡ä»¶æ•°ä¸º1 æŸ¥è¿‡ä¸€ä¸ªæ–‡ä»¶åˆ é™¤æ–‡ä»¶è¾ƒæ—©çš„ã€‚</span><br><span class="line">log4j.appender.R.MaxFileSize=100KB </span><br><span class="line">log4j.appender.R.MaxBackupIndex=1</span><br><span class="line">#ä»¥ä¸‹å’Œä¸Šé¢ä¸€æ ·</span><br><span class="line">log4j.appender.R.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šè¾“å‡ºæ–‡ä»¶åœ°å€è‡ªè¡Œæ›´æ”¹</p><h5 id="generatorConfig-xml"><a href="#generatorConfig-xml" class="headerlink" title="generatorConfig.xml"></a>generatorConfig.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE generatorConfiguration</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">classPathEntry</span> <span class="attr">location</span>=<span class="string">"$&#123;jarDirection&#125;"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">"mysql"</span> <span class="attr">targetRuntime</span>=<span class="string">"MyBatis3"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">"$&#123;driverClass&#125;"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">connectionURL</span>=<span class="string">"$&#123;connectionURL&#125;"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">userId</span>=<span class="string">"$&#123;userId&#125;"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">password</span>=<span class="string">"$&#123;password&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"forceBigDecimals"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetPackage</span>=<span class="string">"$&#123;modelPackage&#125;"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetProject</span>=<span class="string">"$&#123;src_main_java&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"trimStrings"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetPackage</span>=<span class="string">"$&#123;sqlMapperPackage&#125;"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetProject</span>=<span class="string">"$&#123;src_main_java&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">"XMLMAPPER"</span></span></span><br><span class="line"><span class="tag">                             <span class="attr">targetPackage</span>=<span class="string">"$&#123;mapperPackage&#125;"</span></span></span><br><span class="line"><span class="tag">                             <span class="attr">targetProject</span>=<span class="string">"$&#123;src_main_java&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- æ¯ä¸€ä¸ªæ•°æ®åº“è¡¨éƒ½å¯¹åº”ä¸€ä¸ªå¯¹åº”çš„tableå±æ€§ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">"book"</span> <span class="attr">domainObjectName</span>=<span class="string">"Book"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="gradle-properties"><a href="#gradle-properties" class="headerlink" title="gradle.properties"></a>gradle.properties</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># ç”Ÿæˆçš„modelç±»æ‰€åœ¨åŒ…</span><br><span class="line">modelPackage=com.lhalcyon.webhook.domain</span><br><span class="line"># ç”Ÿæˆçš„mapperæ¥å£ç±»æ‰€åœ¨åŒ…</span><br><span class="line">mapperPackage=com.lhalcyon.webhook.mapper</span><br><span class="line"># ç”Ÿæˆçš„mapper xmlæ–‡ä»¶æ‰€åœ¨åŒ…</span><br><span class="line">sqlMapperPackage=com.lhalcyon.webhook.mapper</span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ–¹ä¾¿æ‰«æ,å°†mapper xmlä»¥åŠæ¥å£ç±»æ”¾åœ¨äº†åŒä¸€åŒ…ä¸‹äº† ğŸ˜•</p><h5 id="jdbc-mysql-properties"><a href="#jdbc-mysql-properties" class="headerlink" title="jdbc-mysql.properties"></a>jdbc-mysql.properties</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># å°†jdbc.jarDirectionåçš„å†…å®¹æ›´æ”¹ä¸ºgradleä¸‹è½½çš„</span><br><span class="line"># mysql-connector-java-5.1.x.jaræ‰€åœ¨çš„è·¯å¾„ï¼Œgradleè‡ªåŠ¨ä¸‹è½½çš„è·¯å¾„å¦‚ä¸‹æ‰€ç¤º</span><br><span class="line">jdbc.jarDirection=/Users/ceyx/.gradle/caches/modules-2/files-2.1/mysql</span><br><span class="line">/mysql-connector-java/5.1.38/dbbd7cd309ce167ec8367de4e41c63c2c8593cc5</span><br><span class="line">/mysql-connector-java-5.1.38.jar</span><br><span class="line"></span><br><span class="line">jdbc.driverClassName=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://localhost:3306/halcyon</span><br><span class="line">jdbc.user=root</span><br><span class="line">jdbc.pass=root</span><br></pre></td></tr></table></figure><p>è‡ªè¡Œå¡«å†™jdbc.jarDirectionè·¯å¾„</p><h5 id="build-gradle"><a href="#build-gradle" class="headerlink" title="build.gradle"></a>build.gradle</h5><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">group <span class="string">'com.lhalcyon'</span></span><br><span class="line">version <span class="string">'1.0-SNAPSHOT'</span></span><br><span class="line"></span><br><span class="line">apply <span class="string">plugin:</span> <span class="string">'java'</span></span><br><span class="line">apply <span class="string">plugin:</span> <span class="string">'war'</span></span><br><span class="line"></span><br><span class="line">sourceCompatibility = <span class="number">1.8</span></span><br><span class="line"></span><br><span class="line">repositories &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">configurations &#123;</span><br><span class="line">    mybatisGenerator</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯»å–configæ–‡ä»¶å¤¹ä¸­å¯¹åº”çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">ext&#123;</span><br><span class="line">    <span class="keyword">def</span> prop = <span class="keyword">new</span> Properties();</span><br><span class="line">    file(<span class="string">"src/main/resources/config/mybatis/jdbc-mysql.properties"</span>)</span><br><span class="line">            .withInputStream &#123;</span><br><span class="line">        prop.load(it)</span><br><span class="line">    &#125;</span><br><span class="line">    file(<span class="string">"src/main/resources/config/mybatis/gradle.properties"</span>)</span><br><span class="line">            .withInputStream &#123;</span><br><span class="line">        prop.load(it)</span><br><span class="line">    &#125;</span><br><span class="line">    prop.each &#123;</span><br><span class="line">        project.extensions.add(<span class="string">"$it.key"</span>,it.value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    testCompile <span class="string">group:</span> <span class="string">'junit'</span>, <span class="string">name:</span> <span class="string">'junit'</span>, <span class="string">version:</span> <span class="string">'4.12'</span></span><br><span class="line"></span><br><span class="line">    compile <span class="string">'org.codehaus.groovy:groovy-all:2.3.11'</span></span><br><span class="line">    compile <span class="string">'jstl:jstl:1.2'</span></span><br><span class="line">    compile <span class="string">'org.springframework:spring-aop:4.2.4.RELEASE'</span></span><br><span class="line">    compile <span class="string">'org.springframework:spring-context:4.2.4.RELEASE'</span></span><br><span class="line">    compile <span class="string">'org.springframework:spring-beans:4.2.4.RELEASE'</span></span><br><span class="line">    compile <span class="string">'org.springframework:spring-web:4.2.4.RELEASE'</span></span><br><span class="line">    compile <span class="string">'org.springframework:spring-webmvc:4.2.4.RELEASE'</span></span><br><span class="line">    compile <span class="string">'org.springframework:spring-tx:4.2.4.RELEASE'</span></span><br><span class="line">    compile <span class="string">'org.springframework:spring-jdbc:4.2.4.RELEASE'</span></span><br><span class="line">    compile <span class="string">'org.springframework:spring-test:4.2.4.RELEASE'</span></span><br><span class="line">    compile <span class="string">'mysql:mysql-connector-java:5.1.38'</span></span><br><span class="line">    compile <span class="string">'org.mybatis.generator:mybatis-generator-core:1.3.2'</span></span><br><span class="line">    compile <span class="string">'org.mybatis:mybatis-spring:1.2.3'</span></span><br><span class="line">    compile <span class="string">'org.mybatis:mybatis:3.3.0'</span></span><br><span class="line">    compile <span class="string">'junit:junit:4.12'</span></span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'commons-dbcp'</span>, <span class="string">name:</span> <span class="string">'commons-dbcp'</span>, <span class="string">version:</span> <span class="string">'1.4'</span></span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'org.aspectj'</span>, <span class="string">name:</span> <span class="string">'aspectjweaver'</span>, <span class="string">version:</span> <span class="string">'1.8.13'</span></span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'log4j'</span>, <span class="string">name:</span> <span class="string">'log4j'</span>, <span class="string">version:</span> <span class="string">'1.2.17'</span></span><br><span class="line">    </span><br><span class="line">    mybatisGenerator <span class="string">'org.mybatis.generator:mybatis-generator-core:1.3.2'</span></span><br><span class="line">    mybatisGenerator <span class="string">'mysql:mysql-connector-java:5.1.38'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ©ç”¨antåˆ›å»ºä¸€ä¸ªè‡ªåŠ¨ç”ŸæˆMyBatisç›®å½•æ–‡ä»¶çš„task</span></span><br><span class="line">task mybatisGenerate &lt;&lt; &#123;</span><br><span class="line">    ant.properties[<span class="string">'targetProject'</span>] = projectDir.path</span><br><span class="line">    ant.properties[<span class="string">'jarDirection'</span>] = project[<span class="string">'jdbc.jarDirection'</span>]</span><br><span class="line">    ant.properties[<span class="string">'driverClass'</span>] = project[<span class="string">'jdbc.driverClassName'</span>]</span><br><span class="line">    ant.properties[<span class="string">'connectionURL'</span>] = project[<span class="string">'jdbc.url'</span>]</span><br><span class="line">    ant.properties[<span class="string">'userId'</span>] = project[<span class="string">'jdbc.user'</span>]</span><br><span class="line">    ant.properties[<span class="string">'password'</span>] = project[<span class="string">'jdbc.pass'</span>]</span><br><span class="line">    ant.properties[<span class="string">'src_main_java'</span>] = sourceSets.main.java.srcDirs[<span class="number">0</span>].path</span><br><span class="line">    ant.properties[<span class="string">'src_main_resources'</span>] = sourceSets.main.resources.srcDirs[<span class="number">0</span>].path</span><br><span class="line">    ant.properties[<span class="string">'modelPackage'</span>] = project[<span class="string">'modelPackage'</span>]</span><br><span class="line">    ant.properties[<span class="string">'mapperPackage'</span>] = project[<span class="string">'mapperPackage'</span>]</span><br><span class="line">    ant.properties[<span class="string">'sqlMapperPackage'</span>] = project[<span class="string">'sqlMapperPackage'</span>]</span><br><span class="line"></span><br><span class="line">    ant.taskdef(</span><br><span class="line"><span class="symbol">            name:</span> <span class="string">'mbgenerator'</span>,</span><br><span class="line"><span class="symbol">            classname:</span> <span class="string">'org.mybatis.generator.ant.GeneratorAntTask'</span>,</span><br><span class="line"><span class="symbol">            classpath:</span> configurations.mybatisGenerator.asPath</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    ant.mbgenerator(<span class="string">overwrite:</span> <span class="literal">true</span>,</span><br><span class="line"><span class="symbol">            configfile:</span> <span class="string">'src/main/resources/config/mybatis/generatorConfig.xml'</span>,</span><br><span class="line"><span class="symbol">            verbose:</span> <span class="literal">true</span>) &#123;</span><br><span class="line">        propertyset &#123;</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'targetProject'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'jarDirection'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'userId'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'driverClass'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'connectionURL'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'password'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'src_main_java'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'src_main_resources'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'modelPackage'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'mapperPackage'</span>)</span><br><span class="line">            propertyref(<span class="string">name:</span> <span class="string">'sqlMapperPackage'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€<code>Sync</code>æˆ–è€…ç‚¹å‡»<code>Import Changes</code></p><p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1fnyqi90urpj30d00bpgm1.jpg" alt=""></p><p>IDEAå°±ä¼šä¸‹è½½ä¾èµ–åŒ…äº†.ä¾èµ–ç‰ˆæœ¬å·å‡æºäº<a href="http://mvnrepository.com/" target="_blank" rel="noopener">Maven Repository</a></p><h5 id="spring-mvc-xml"><a href="#spring-mvc-xml" class="headerlink" title="spring-mvc.xml"></a>spring-mvc.xml</h5><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1fnzjop49bzj30kr0fs76u.jpg" alt=""></p><p>å¯¼å…¥ä¾èµ–å,åˆ™å¯ç›´æ¥åˆ›å»ºspringç›¸å…³xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«ææ§åˆ¶å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.lhalcyon.webhook.controller"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾æ¸²æŸ“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"internalResourceViewResolver"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/views/"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ§åˆ¶å™¨æ˜ å°„å™¨å’Œæ§åˆ¶å™¨é€‚é…å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é™æ€èµ„æºæ˜ å°„å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">"/statics/**"</span> <span class="attr">location</span>=<span class="string">"/WEB-INF/statics/"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="applicationContext-dao-xml"><a href="#applicationContext-dao-xml" class="headerlink" title="applicationContext-dao.xml"></a>applicationContext-dao.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span> <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span> <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åŠ è½½é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:config/mybatis/jdbc-mysql.properties"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.apache.commons.dbcp.BasicDataSource"</span></span></span><br><span class="line"><span class="tag"><span class="attr">destroy-method</span>=<span class="string">"close"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driverClassName&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.user&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.pass&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxActive"</span> <span class="attr">value</span>=<span class="string">"10"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxIdle"</span> <span class="attr">value</span>=<span class="string">"5"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mapperé…ç½® --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è®©springç®¡ç†sqlsessionfactory ä½¿ç”¨mybatiså’Œspringæ•´åˆåŒ…ä¸­çš„ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è‡ªåŠ¨æ‰«æmapping.xmlæ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;property name="mapperLocations" value="classpath*:com/lhalcyon/mapper/*.xml"/&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®Mapperæ‰«æå™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.lhalcyon.webhook.mapper"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="applicationContext-service-xml"><a href="#applicationContext-service-xml" class="headerlink" title="applicationContext-service.xml"></a>applicationContext-service.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span> <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span> <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®åŒ…æ‰«æå™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.lhalcyon.webhook.service"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="applicationContext-trans-xml"><a href="#applicationContext-trans-xml" class="headerlink" title="applicationContext-trans.xml"></a>applicationContext-trans.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span> <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span> <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ•°æ®æº --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é€šçŸ¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä¼ æ’­è¡Œä¸º --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"insert*"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"delete*"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"update*"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"query*"</span> <span class="attr">propagation</span>=<span class="string">"SUPPORTS"</span> <span class="attr">read-only</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"get*"</span> <span class="attr">propagation</span>=<span class="string">"SUPPORTS"</span> <span class="attr">read-only</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- åˆ‡é¢ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span></span></span><br><span class="line"><span class="tag"><span class="attr">pointcut</span>=<span class="string">"execution(* com.lhalcyon.webhook.service.*.*(..))"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="web-xml"><a href="#web-xml" class="headerlink" title="web.xml"></a>web.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee</span></span></span><br><span class="line"><span class="tag"><span class="string">  http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"3.0"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åˆå§‹åŒ–spring å®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:config/spring/applicationContext-*.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®å‰ç«¯æ§åˆ¶å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>index-dispather<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath*:config/spring/spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>index-dispather<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è§£å†³postä¹±ç é—®é¢˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Tomcatéƒ¨ç½²"><a href="#Tomcatéƒ¨ç½²" class="headerlink" title="Tomcatéƒ¨ç½²"></a>Tomcatéƒ¨ç½²</h4><p>Run-&gt;Edit Configurations</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1fnzmln11yij30tg0k1adg.jpg" alt=""></p><p>æœ‰fixé¡¹ç‚¹å‡»é…ç½®å³å¯,ç„¶åè¿è¡Œ.</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1fnzn37f1aoj30pn0fwmxz.jpg" alt=""></p><h4 id="MyBatisé…ç½®"><a href="#MyBatisé…ç½®" class="headerlink" title="MyBatisé…ç½®"></a>MyBatisé…ç½®</h4><p>æ•°æ®åº“ç®¡ç†å·¥å…·ç¬”è€…ä½¿ç”¨çš„æ˜¯</p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1fnzowf9ux6j304e03nwej.jpg" alt=""></p><p>é¦–å…ˆåˆ›å»ºæ•°æ®åº“<code>halcyon</code>,æ¥ç€åˆ›å»º<code>book</code>è¡¨,ç”¨äºåé¢çš„mybatis generator</p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1fnzp5ws50uj30lc0ayabp.jpg" alt=""></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> book (</span><br><span class="line">book_id <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">book_name <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">author <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="string">'ä½šå'</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨gradleåˆ›å»ºmybatis generator task</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1fnzpb6bulwj30d50d5aap.jpg" alt=""></p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1fnzpcwz6psj30k1041mxk.jpg" alt=""></p><p>è¿è¡Œtask</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1fnzperdym0j30d40cfdgm.jpg" alt=""></p><p>è¿è¡ŒæˆåŠŸå,ä¼šç”Ÿæˆä¸æ•°æ®åº“è¡¨å¯¹åº”çš„<code>java bean</code>ä¸<code>dao</code>æ–‡ä»¶,å³é¡¹ç›®é‡Œçš„<code>Book.java</code>ã€<code>BookExample.java</code>ã€<code>BookMapper.xml</code>ã€<code>BookMapper.java</code></p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1fnzpgj444lj307a04vjrn.jpg" alt=""></p><p><code>generatorConfig.xml</code>é…ç½®å‚æ•°å¯è‡ªè¡Œæœç´¢è¡¥å……ä¿®æ”¹ğŸ¤”.æ‰‹åŠ¨è¦†å†™ä¸‹<code>Book</code>çš„<code>toString</code>æ–¹æ³•æ–¹ä¾¿æ—¥å¿—è¾“å‡º</p><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><p>ä¸ºäº†æ»¡è¶³åŒæ—¶æµ‹è¯•<code>Spring</code>ã€<code>SpringMVC</code>ã€<code>Mybatis</code>,ç¬”è€…å»ºç«‹ä¸€ä¸ª<code>Controller</code>é€šè¿‡<code>Get</code>è¯·æ±‚è¿›è¡Œ<code>CURD</code>æ“ä½œ.</p><h5 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title">BookService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookMapper bookMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertBook</span><span class="params">(Book book)</span> </span>&#123;</span><br><span class="line">        bookMapper.insert(book);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateBook</span><span class="params">(Book book)</span> </span>&#123;</span><br><span class="line">        bookMapper.updateByPrimaryKey(book);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Book&gt; <span class="title">getAllBooks</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        BookExample example = <span class="keyword">new</span> BookExample();</span><br><span class="line">        <span class="keyword">return</span> bookMapper.selectByExample(example);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteBookById</span><span class="params">(<span class="keyword">int</span> bookId)</span> </span>&#123;</span><br><span class="line">        BookExample example = <span class="keyword">new</span> BookExample();</span><br><span class="line">        example.createCriteria().andBookIdEqualTo(bookId);</span><br><span class="line">        bookMapper.deleteByExample(example);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span>  Logger logger = Logger.getLogger(BookController.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/insert"</span>,method = RequestMethod.GET)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">insert</span><span class="params">(String bookName,String author)</span></span>&#123;</span><br><span class="line">        Book book = <span class="keyword">new</span> Book();</span><br><span class="line">        book.setBookName(bookName);</span><br><span class="line">        book.setAuthor(author);</span><br><span class="line">        bookService.insertBook(book);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> queryStrings();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/update"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">updateAuthor</span><span class="params">(<span class="keyword">int</span> bookId,String bookName,String author)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        Book book = <span class="keyword">new</span> Book();</span><br><span class="line">        book.setBookId(bookId);</span><br><span class="line">        book.setBookName(bookName);</span><br><span class="line">        book.setAuthor(author);</span><br><span class="line">        bookService.updateBook(book);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> queryStrings();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/delete"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">deleteBook</span><span class="params">(<span class="keyword">int</span> bookId)</span></span>&#123;</span><br><span class="line">        bookService.deleteBookById(bookId);</span><br><span class="line">        <span class="keyword">return</span> queryStrings();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/find_all"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAllBooks</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Book&gt; books = bookService.getAllBooks();</span><br><span class="line">        logger.info(books);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> books.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">queryStrings</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Book&gt; allBooks = bookService.getAllBooks();</span><br><span class="line">        <span class="keyword">return</span> allBooks.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›´æ¥é€šè¿‡è¯·æ±‚åœ°å€,è·å¾—ç»“æœ</p><p>æ’å…¥:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/webhook/insert?bookName=java&amp;author=jack</span><br></pre></td></tr></table></figure><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1fnztpvs98uj30hs041mxn.jpg" alt=""></p><p>æ‰§è¡Œåç›´æ¥å°†æ•°æ®åº“ä¸­æ‰€æœ‰bookè®°å½•è¾“å‡º,æ–¹ä¾¿è§‚å¯Ÿ.</p><p>å…¶å®ƒæ“ä½œç±»ä¼¼</p><p>æ›´æ–°:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/webhook/update?bookId=3&amp;bookName=go&amp;author=joe</span><br></pre></td></tr></table></figure><p>åˆ é™¤:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/webhook/delete?bookId=4</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢(æ‰€æœ‰):</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/webhook/find_all</span><br></pre></td></tr></table></figure><div class="note warning"><p>å¦‚è‹¥å‘ç”Ÿ<code>500 Invalid bound statement (not found)</code>ç±»ä¼¼é”™è¯¯,ä¸€èˆ¬æ˜¯æ²¡æœ‰æ‰«æåˆ°Mapper.xml.å…¶ä¸­ä¸€ç§æƒ…å†µä¸‹æ˜¯xmlæ ¹æœ¬æ²¡è¢«æ‰“åŒ…è¿›war.éœ€è¦åœ¨<code>build.gradle</code>ä¸­è¿›è¡Œé…ç½®,å¹¶ä¸”é…ç½®å<code>Syncæˆ–Import Changes</code>,å†é‡æ–°ç”¨å‘½ä»¤<code>./gradlew build</code>æ‰å¯ç”Ÿæ•ˆ.</p></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//å°†srcæ–‡ä»¶å¤¹ä¸­çš„èµ„æºæ–‡ä»¶åŒæ—¶æ‰“åŒ…</span><br><span class="line">processResources &#123;</span><br><span class="line">    from(&apos;src/main/java&apos;) &#123;</span><br><span class="line">        include &apos;**/*.xml&apos;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤SpringMVC+MyBatis+Gradleé¡¹ç›®å·²ç»æ„å»ºæµ‹è¯•å®Œæ¯•.</p><p>ä»£ç å·²ä¸Šä¼ <a href="https://github.com/lhalcyon/ssm_basic/tree/master" target="_blank" rel="noopener">GayHub</a>,æ–‡ç« è‹¥å¯¹å„ä½å¤§ä½¬æœ‰å¸®åŠ©,éº»çƒ¦é¡ºæ‰‹ç‚¹ä¸ªstar~ â¤ï¸</p><p>å„ä½å¯èƒ½å‘ç°äº†,<code>SSM</code>é…ç½®èµ·æ¥æ¯”è¾ƒç¹ç,ç›¸æ¯”ä¹‹ä¸‹,<code>SpringBoot</code>å°±ç²¾ç®€äº†è®¸å¤š.åé¢æœ‰æœºä¼š,æˆ‘ä»¬å†æ¥ç»†è¯´ ğŸ¤’</p><hr><ol><li>å‚è€ƒ: <a href="https://www.cnblogs.com/bojuetech/p/5844413.html" target="_blank" rel="noopener">https://www.cnblogs.com/bojuetech/p/5844413.html</a></li><li>å‚è€ƒ: <a href="http://blog.csdn.net/kingboyworld/article/details/78251425" target="_blank" rel="noopener">http://blog.csdn.net/kingboyworld/article/details/78251425</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note info&quot;&gt;&lt;p&gt;Gradleæ˜¯ä¸€ä¸ªåŸºäºApache Antå’ŒApache Mavenæ¦‚å¿µçš„é¡¹ç›®è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·.å®ƒä½¿ç”¨ä¸€ç§åŸºäºGroovyçš„ç‰¹å®šé¢†åŸŸè¯­è¨€(DSL)æ¥å£°æ˜é¡¹ç›®è®¾ç½®,æŠ›å¼ƒäº†åŸºäºXMLçš„å„ç§ç¹çé…ç½®.&lt;/p&gt;
&lt;p&gt;IDEA å…¨ç§°IntelliJ IDEA,æ˜¯javaè¯­è¨€å¼€å‘çš„é›†æˆç¯å¢ƒ,IntelliJåœ¨ä¸šç•Œè¢«å…¬è®¤ä¸ºæœ€å¥½çš„javaå¼€å‘å·¥å…·ä¹‹ä¸€,å°¤å…¶åœ¨æ™ºèƒ½ä»£ç åŠ©æ‰‹ã€ä»£ç è‡ªåŠ¨æç¤ºã€é‡æ„ã€J2EEæ”¯æŒã€Antã€JUnitã€CVSæ•´åˆã€ä»£ç å®¡æŸ¥ã€ åˆ›æ–°çš„GUIè®¾è®¡ç­‰æ–¹é¢çš„åŠŸèƒ½å¯ä»¥è¯´æ˜¯è¶…å¸¸çš„.&lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="Java" scheme="https://lhalcyon.com/categories/Java/"/>
    
    
      <category term="IntelliJ" scheme="https://lhalcyon.com/tags/IntelliJ/"/>
    
      <category term="Spring" scheme="https://lhalcyon.com/tags/Spring/"/>
    
      <category term="SpringMVC" scheme="https://lhalcyon.com/tags/SpringMVC/"/>
    
      <category term="MyBatis" scheme="https://lhalcyon.com/tags/MyBatis/"/>
    
  </entry>
  
  <entry>
    <title>Android Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š</title>
    <link href="https://lhalcyon.com/as_warning/"/>
    <id>https://lhalcyon.com/as_warning/</id>
    <published>2017-09-25T02:10:12.000Z</published>
    <updated>2018-02-04T08:02:13.101Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Android-Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š"><a href="#Android-Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š" class="headerlink" title="Android Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š"></a>Android Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š</h2><div class="note info"><p>æœ€è¿‘åœ¨å¼€å‘ä¸­,ç»„å†…çš„å°ä¼™ä¼´åœ¨å¼€å‘ä¸­ä½¿ç”¨äº†é«˜ç‰ˆæœ¬SDK25çš„Api,ä½†æ˜¯æˆ‘ä»¬çš„é¡¹ç›®æœ€ä½å…¼å®¹14,å› æ­¤æµ‹è¯•åœ¨5.1ä¸Šçš„æ‰‹æœºç›´æ¥å°±å´©æºƒäº†,é—®å…¶åœ¨å¼€å‘ä¸­æ²¡æœ‰çœ‹åˆ°è­¦å‘Šå—,å›å¤è¯´ç¡®å®æ²¡çœ‹åˆ°.åæ¥æŸ¥ç©¶ä¸€ä¸‹,ä»–çš„å·¥å…·ä¸Šç¡®å®æ²¡æœ‰æ˜¾ç¤º.æœ¬æ–‡ç®€è¿°ä¸‹å¦‚ä½•æ‰‹åŠ¨å»è°ƒæ•´å…¼å®¹Apiçš„æç¤ºç­‰çº§,é¿å…åœ¨å¼€å‘ä¸­ç”¨åˆ°é«˜ç‰ˆæœ¬çš„Apiå´ä¸è‡ªå¯Ÿ.</p></div><p>é¦–å…ˆwinç”µè„‘æ˜¯æ‰“å¼€<code>Android Studio</code>çš„ <code>Setting</code>  ,macæ˜¯æ‰“å¼€<code>Android Studio</code>çš„ <code>Preferences</code></p><p>é€‰æ‹©<code>Editor</code>ä¸­çš„<code>Inspections</code> å¯¹<code>Calling new methods on older versions</code>è¿›è¡Œå‹¾é€‰å¹¶ä¸”é…ç½®ä¸º<code>Error</code>çº§åˆ«</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_170925/as_inspection_api_compatible.png" alt="api_compatible"></p><p>å¦‚æ­¤ç®€å•å³å¯æå®š.å¦‚é‡åˆ°å…¶ä»–è­¦å‘Š,é”™è¯¯ä»£ç æ²¡æç¤ºä¹Ÿå¯ç±»ä¼¼è¿›è¡Œæ“ä½œé…ç½®.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Android-Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š&quot;&gt;&lt;a href=&quot;#Android-Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š&quot; class=&quot;headerlink&quot; title=&quot;Android Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š&quot;&gt;&lt;/a&gt;Android Studioç‰ˆæœ¬å…¼
      
    
    </summary>
    
      <category term="Android" scheme="https://lhalcyon.com/categories/Android/"/>
    
    
      <category term="Android Studio" scheme="https://lhalcyon.com/tags/Android-Studio/"/>
    
  </entry>
  
  <entry>
    <title>Xcodeä»£ç æç¤ºé—®é¢˜å¤„ç†</title>
    <link href="https://lhalcyon.com/xcode-idiot/"/>
    <id>https://lhalcyon.com/xcode-idiot/</id>
    <published>2017-08-15T05:32:45.000Z</published>
    <updated>2018-02-04T08:02:27.836Z</updated>
    
    <content type="html"><![CDATA[<div class="note info"><p>æœ€è¿‘åœ¨å†™<code>Swift</code>.å¯¹äºç¬”è€…è¿™ç§è¢«<code>JetBrains</code>çš„å‡ å¤§IDEå·¥å…·ç»™æƒ¯åçš„å¼€å‘è€…,Xcodeçš„ä»£ç æç¤ºçœŸæ˜¯æ— åŠ›åæ§½,å…ˆä¸è®ºæ™ºèƒ½æç¤ºåº¦,å°±è¿åŸºæœ¬çš„æç¤ºä¹Ÿç»å¸¸å‡ºä¸æ¥.è¿™é‡Œå°±ç®€å•æ€»ç»“ä¸‹iOSåŒäº‹ä¼ æˆçš„å‡ æ‹›è§£å†³åŠæ³•</p></div><h3 id="1-Clean-Project"><a href="#1-Clean-Project" class="headerlink" title="1.Clean Project"></a>1.Clean Project</h3><p>æœ€ç›´æ¥çš„åŠæ³•å°±æ˜¯æ¸…ç©ºé¡¹ç›®.</p><p>å¯è§†åŒ–æŒ‰é’®å…¥å£å†å“ªè¯·è‡ªè¡ŒæŸ¥æ‰¾,ç¬”è€…ä¸€èˆ¬æ˜¯ç”¨<code>Command+Shift+K</code>è¿›è¡Œæ¸…ç©º,æ­¤æ–¹æ³•ä¸€èˆ¬æœ‰æ•ˆ,ç¼ºç‚¹æ˜¯ä¼šé‡æ–°ç¼–è¯‘é¡¹ç›®,æ¯”è¾ƒæ…¢</p><h3 id="2-æ¸…ç©ºXcodeç¼“å­˜"><a href="#2-æ¸…ç©ºXcodeç¼“å­˜" class="headerlink" title="2.æ¸…ç©ºXcodeç¼“å­˜"></a>2.æ¸…ç©ºXcodeç¼“å­˜</h3><p>å‰å¾€Xcodeçš„ç¼“å­˜ç›®å½•,æ¸…ç©ºé¡¹ç›®ç¼–è¯‘ç¼“å­˜.</p><p>å…·ä½“æ“ä½œä¸ºå³é”®Finder<code>å‰å¾€æ–‡ä»¶å¤¹</code>æ–‡ä»¶å¤¹è·¯å¾„ä¸º<code>/ç”¨æˆ·/ceyx/èµ„æºåº“/Developer/Xcode/DerivedData</code>  å…¶ä¸­<code>ceyx</code> æ›¿æ¢ä¸ºè‡ªå·±çš„ç”¨æˆ·å,åˆ é™¤ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶,ç„¶åé‡æ–°æ‰“å¼€Xcode,ç¼–è¯‘.</p><p><strong>æ­¤æ–¹æ³•æ¯”1æ›´æ…¢,å¾€å¾€ä¹Ÿæ›´æœ‰æ•ˆ</strong></p><h3 id="3-ç»ˆæå¤§æ‹›"><a href="#3-ç»ˆæå¤§æ‹›" class="headerlink" title="3.ç»ˆæå¤§æ‹›"></a>3.ç»ˆæå¤§æ‹›</h3><p>å¦‚è‹¥ä¸Šè¿°ä¸¤ç§æ–¹æ³•è¿˜æ— æ•ˆ,åªèƒ½ä½¿ç”¨ç»æ‹›äº†â€¦é‡å¯Xcode,è¿˜ä¸è¡Œå°±é‡å¯ç”µè„‘â€¦ ç¬”è€…é»”é©´æŠ€ç©·äº†,åªèƒ½å……å½“ä¸‹ç½‘å§è€æ¿ä¼ æˆä¸‹ç»ˆæå¤§æ‹›.ğŸ‘»</p><p>é¢˜å¤–è¯,å¯¹äºJetBrainså‡ºå“çš„appcodeè¿˜æœªå°è¯•è¿‡,ä¸çŸ¥å¯¹äºXcodeé¡¹ç›®å…¼å®¹åˆ°ä½•ç¨‹åº¦,æ˜¯å¦æ”¯æŒCocoapodç­‰,æœ‰æ—¶é—´ä¼šå»ä½“éªŒä¸‹,å¸Œæœ›è‡³å°‘åœ¨ä»£ç æç¤ºä¸Šèƒ½æ›´å‹å–„äº›ğŸ˜€</p><p>ç¬”è€…å»ä½“éªŒäº†ä¸‹Appcode,å…¶ä»£ç æç¤ºå’Œå¿«æ·é”®å¦‚Jetbrainså…¶ä»–äº§å“ä¸€æ ·éå¸¸æ™ºèƒ½,ä½†æ˜¯ä»£ç ä¸­å¶æœ‰é£˜çº¢,å´å¯ä»¥æˆåŠŸè¿è¡Œ,æ¯”è¾ƒå¹²æ‰°ç¼–ç .å°¤ä¸ºå°´å°¬çš„ä¸€ç‚¹æ˜¯,Appcodeä¸æ”¯æŒstoryboard,å³åœ¨é¡¹ç›®å†…ç‚¹å¼€storyboardæ–‡ä»¶å°±ç›´æ¥è·³è½¬xcodeäº†ğŸ˜¥. å¦‚çœŸçš„è¢«Xcodeé€¼ç–¯çš„ç«¥é‹å¯ä»¥è€ƒè™‘ä¸‹ç”¨AppCodeç¼–ç ,ç”¨Xcodeæ“ä½œstoryboard</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;note info&quot;&gt;&lt;p&gt;æœ€è¿‘åœ¨å†™&lt;code&gt;Swift&lt;/code&gt;.å¯¹äºç¬”è€…è¿™ç§è¢«&lt;code&gt;JetBrains&lt;/code&gt;çš„å‡ å¤§IDEå·¥å…·ç»™æƒ¯åçš„å¼€å‘è€…,Xcodeçš„ä»£ç æç¤ºçœŸæ˜¯æ— åŠ›åæ§½,å…ˆä¸è®ºæ™ºèƒ½æç¤ºåº¦,å°±è¿åŸºæœ¬çš„æç¤ºä¹Ÿç»å¸¸å‡ºä¸æ¥.è¿™é‡Œå°±ç®€å•æ€»
      
    
    </summary>
    
      <category term="iOS" scheme="https://lhalcyon.com/categories/iOS/"/>
    
    
      <category term="Xcode" scheme="https://lhalcyon.com/tags/Xcode/"/>
    
  </entry>
  
  <entry>
    <title>Linux+Jenkins+Gradleæ„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(äºŒ)</title>
    <link href="https://lhalcyon.com/linux-jenkins-gradle_build_android2/"/>
    <id>https://lhalcyon.com/linux-jenkins-gradle_build_android2/</id>
    <published>2017-07-20T13:45:30.000Z</published>
    <updated>2018-02-08T13:43:56.045Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨<a href="http://lhalcyon.com/linux-jenkins-gradle_build_android1/">å‰ä¸€ç¯‡æ–‡ç« </a>ä¸­,è¯´æ˜äº†åœ¨CenterOSä¸Šè¿›è¡Œä¸€ç³»åˆ—çš„ç¯å¢ƒæ­å»º,æœ¬æ–‡å¼€å§‹è¯´æ˜å…³äºé¡¹ç›®çš„ä¸€ç³»åˆ—é…ç½®</p><a id="more"></a><h3 id="Jenkinsé¡¹ç›®é…ç½®"><a href="#Jenkinsé¡¹ç›®é…ç½®" class="headerlink" title="Jenkinsé¡¹ç›®é…ç½®"></a>Jenkinsé¡¹ç›®é…ç½®</h3><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªé¡¹ç›®,å°†æ„å»ºä¿æŒçš„å¤©æ•°å’Œä¸ªæ•°è¿›è¡Œé™åˆ¶</p><blockquote><p>æ­¤å¤„æ„Ÿè°¢åå°åŒäº‹æç¤º,å› ä¸ºAndroid SDK NDK å°±ç‰¹åˆ«å ç©ºé—´äº†,å¦‚æœæ„å»ºç¼“å­˜ä¸è¿›è¡Œé™åˆ¶,åˆ™å¾ˆå¿«æœåŠ¡å™¨ç©ºé—´å°±ä¼šä¸è¶³ğŸ¤¥</p></blockquote><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/project_config_1.png" alt="jenkins_total"></p><h4 id="å‚æ•°æ„å»ºé…ç½®"><a href="#å‚æ•°æ„å»ºé…ç½®" class="headerlink" title="å‚æ•°æ„å»ºé…ç½®"></a>å‚æ•°æ„å»ºé…ç½®</h4><p><strong>æ‰“åŒ…ç¯å¢ƒ</strong></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/param_env.jpg" alt="jenkins_total"></p><p><strong>åˆ†æ”¯æŒ‡å®š</strong></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/param_branch.jpg" alt="jenkins_branch"></p><p><strong>emailè‡ªå®šä¹‰æ¥æ”¶è€…</strong></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/param_email.jpg" alt="jenkins_email"></p><p><strong>æ‰“åŒ…æ—¶é—´æˆ³</strong></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/param_jenkins_time.jpg" alt="jenkins_total"></p><p>å› ä¸ºç¬”è€…çš„å…¬å¸å¯¹æ‰“åŒ…çš„Apkåä»¥åŠæµ‹è¯•ç‰ˆæœ¬å·æ—¶é—´æˆ³æ˜¾ç¤ºçš„è¦æ±‚,å› æ­¤éœ€è¦ä½¿ç”¨åŠ¨æ€å‚æ•°</p><blockquote><p>è¿˜æœ‰å…¶ä»–å‚æ•°å‡ä¸ä»¥ä¸Šç±»ä¼¼,å¯è‡ªè¡Œé…ç½®</p></blockquote><p><strong>!!! è®°ä½å°¤ä¸ºé‡è¦çš„æ˜¯è¿™äº›å‚æ•°éƒ½æ˜¯Jenkinsä¸Šé…ç½®çš„Gradleå±æ€§,å¾—ä¼ é€’åˆ°Appçš„Gradleä¸­</strong></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/gradle_script2.png" alt="jenkins_email"></p><p>è¿™é‡Œå‹¾é€‰<code>Pass all job parameters as Project properties</code></p><h4 id="æºç ç®¡ç†"><a href="#æºç ç®¡ç†" class="headerlink" title="æºç ç®¡ç†"></a>æºç ç®¡ç†</h4><p>åœ¨<code>æºç ç®¡ç†å¤„é…ç½®Gitè´¦å·</code></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/git_account.jpg" alt="jenkins_total"></p><p>è¿™é‡Œçš„<code>*/${BRANCH}</code>å¯¹åº”å‚æ•°é…ç½®æ—¶çš„<code>BRANCH</code>.ä¸ºä»€ä¹ˆè¿™é‡Œåšæˆé€‰æ‹©å‹å‚æ•°å‘¢,æ˜¯å› ä¸ºåˆ†æ”¯åæ˜¯æœªçŸ¥çš„,åšæˆå¡«å†™çš„è¯,å¯èƒ½å‹æ ¹æ‹‰ä¸åˆ°æŒ‡å®šåˆ†æ”¯çš„ä»£ç ğŸ¤</p><h4 id="Gradleæ„å»ºè„šæœ¬"><a href="#Gradleæ„å»ºè„šæœ¬" class="headerlink" title="Gradleæ„å»ºè„šæœ¬"></a>Gradleæ„å»ºè„šæœ¬</h4><p>å¢åŠ æ„å»ºåŠ¨ä½œ</p><p>è¿™é‡Œ<code>${WORKSPACE}</code>æŒ‡çš„æ˜¯Gitæ‹‰ä¸‹çš„æ ¹ç›®å½•.é€”ä¸­é©¬èµ›å…‹ä½ç½®åˆ™ä¸ºé¡¹ç›®æ ¹ç›®å½•</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/gradle_script.jpg" alt="jenkins_total"></p><h4 id="è’²å…¬è‹±ä¸Šä¼ "><a href="#è’²å…¬è‹±ä¸Šä¼ " class="headerlink" title="è’²å…¬è‹±ä¸Šä¼ "></a>è’²å…¬è‹±ä¸Šä¼ </h4><p>å¢åŠ æ„å»ºåŠ¨ä½œ,å°†Apkä¸Šä¼ è’²å…¬è‹±</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/pgyer_upload.jpg" alt="jenkins_total"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -k -F &quot;file=@$&#123;WORKSPACE&#125;/source/é¡¹ç›®æ ¹ç›®å½•/app/apks/$&#123;BUILD_PREFIX&#125;_$&#123;JENKINS_TIME&#125;_$&#123;DAY_VERSION&#125;.apk&quot; -F &quot;uKey=ä½ çš„ukey&quot; -F &quot;_api_key=ä½ çš„apiKey&quot; -F &quot;installType=2&quot; -F &quot;password=ä¸‹è½½å¯†ç &quot; -F &quot;updateDescription=$&#123;DESCRIPTION&#125;&quot; https://www.pgyer.com/apiv1/app/upload</span><br></pre></td></tr></table></figure><blockquote><p> <code>${WORKSPACE}/source/é¡¹ç›®æ ¹ç›®å½•/app/apks/</code>ä¸ºç¬”è€…è‡ªè¡Œä¿®æ”¹çš„Apkè¾“å‡ºç›®å½•,æ­¤å¤„è¯·æ ¹æ®è‡ªå·±çš„é¡¹ç›®è¾“å…¥ç›®å½•è¿›è¡Œä¿®æ”¹</p><p> curlå‘½ä»¤å¦‚æœä½¿ç”¨ä¸äº†å¯è‡ªè¡Œç™¾åº¦è§£å†³</p></blockquote><p>ä»¥ä¸‹ä¸ºè’²å…¬è‹±çš„ä¸Šä¼ Api,å¯ä»¥è‡ªè¡Œè°ƒæ•´å‚æ•°</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/pgyer_api.png" alt="jenkins_total"></p><h4 id="é‚®ä»¶é€šçŸ¥"><a href="#é‚®ä»¶é€šçŸ¥" class="headerlink" title="é‚®ä»¶é€šçŸ¥"></a>é‚®ä»¶é€šçŸ¥</h4><p>é¦–å…ˆè¿˜æ˜¯è¿›å…¥Jenkins-&gt;ç³»ç»Ÿè®¾ç½®</p><p>åœ¨<code>Jenkins Location</code>ä¸­è¿›è¡Œé…ç½®</p><p>Jenkins URL:<code>http://10.50.0.16:8777/jenkins/</code></p><p>ç³»ç»Ÿç®¡ç†å‘˜é‚®ä»¶åœ°å€: <code>Androidå‚æ•°åŒ–æ„å»º&lt;aaa@163.com&gt;</code></p><blockquote><p>æ­¤å¤„<code>Androidå‚æ•°åŒ–æ„å»º</code>å°±ä¸ºé‚®ä»¶ä¸­çš„å‘é€äººåç§°</p></blockquote><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/mail_config1.jpg" alt="jenkins_total"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/mail_config2.png" alt="jenkins_total"></p><blockquote><p>ç³»ç»Ÿè®¾ç½®ä¸­çš„é»˜è®¤æ”¶ä»¶äººæœ€å¥½ä¸è¦é…ç½®ä¸ºè‡ªå·±,å› ä¸ºå¦‚æœé…ç½®å,è‡ªå·±å°±æ°¸è¿œåœ¨æ”¶ä»¶äººçš„å‰ç«¯,åé¢æƒ³å‘é€ç»™é¢†å¯¼æ—¶,ä¾¿ä¸å¤§å¥½. é‚®ä»¶çš„å†…å®¹å¯è‡ªå®šä¹‰htmlå†…å®¹,äºŒç»´ç ç›´æ¥çº¿ä¸‹ç”Ÿæˆè’²å…¬è‹±çš„åœ°å€ç„¶åè´´åœ¨é‚®ä»¶å†…å³å¯</p></blockquote><h3 id="Appæœ¬åœ°Gradleé…ç½®"><a href="#Appæœ¬åœ°Gradleé…ç½®" class="headerlink" title="Appæœ¬åœ°Gradleé…ç½®"></a>Appæœ¬åœ°Gradleé…ç½®</h3><p>é¦–å…ˆåœ¨<code>gradle.properties</code>æ–‡ä»¶ä¸­è¿›è¡Œå‚æ•°åŒ–æ„å»ºåœ¨éJenkinså†™å…¥æƒ…å†µæ—¶çš„ç¼ºçœå€¼é…ç½®</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/gradle_properties.png" alt="jenkins_total"></p><p>åœ¨æœªä½¿ç”¨Jenkinsæ„å»ºçš„æƒ…å†µä¸‹åº”ç”¨ä¼šè¯»æœ¬åœ°çš„è¿™äº›å˜é‡å€¼</p><p>ç„¶ååœ¨<code>app</code>moduleä¸‹çš„<code>build.gradle</code>ä¸­è¿›è¡Œé…ç½®å†™å…¥çš„å€¼é…ç½®</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/app_gradle.jpg" alt="jenkins_total"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">//ä¿®æ”¹ç”Ÿæˆçš„apkåå­—åŠè¾“å‡ºç›®å½•</span><br><span class="line">applicationVariants.all &#123; variant -&gt;</span><br><span class="line">    variant.outputs.each &#123; output -&gt;</span><br><span class="line">        def newName</span><br><span class="line">        def oldFile = output.outputFile</span><br><span class="line">        def outDirectory = oldFile.parent</span><br><span class="line">        def buildPrefix</span><br><span class="line">        def showVersion</span><br><span class="line">        if (variant.buildType.name == &apos;debug&apos;) &#123;</span><br><span class="line">            buildPrefix = BUILD_PREFIX</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            buildPrefix = BUILD_PREFIX_RELEASE</span><br><span class="line">        &#125;</span><br><span class="line">        def jenkinsTime = JENKINS_TIME</span><br><span class="line">        if (variant.buildType.name == &apos;debug&apos;) &#123;</span><br><span class="line">            showVersion = buildPrefix + &apos;_&apos; + jenkinsTime + &apos;_&apos; + DAY_VERSION</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            showVersion = APP_VERSION</span><br><span class="line">        &#125;</span><br><span class="line">        resValue(&quot;string&quot;, &apos;fund_app_version&apos;, showVersion)</span><br><span class="line">        def tempFile = file(&quot;build.gradle&quot;)</span><br><span class="line">        outDirectory = tempFile.parent + &apos;/apks&apos;</span><br><span class="line">        if (IS_JENKINS) &#123;</span><br><span class="line">            newName = buildPrefix + &apos;_&apos; + jenkinsTime + &apos;_&apos; + DAY_VERSION + &apos;.apk&apos;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line"></span><br><span class="line">            newName = &apos;android-v&apos; +</span><br><span class="line">                    APP_VERSION + &apos;-&apos; + variant.productFlavors[0].name + &apos;-&apos; + variant.buildType.name + &apos;.apk&apos;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        output.outputFile = new File(outDirectory, newName)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç³»ç»Ÿé»˜è®¤çš„è¾“å…¥è·¯å¾„æ˜¯åœ¨<code>build</code>æ–‡ä»¶å¤¹ä¸­,å±‚çº§æ¯”è¾ƒæ·±.æ­¤å¤„ç¬”è€…å°†apkçš„è¾“å‡ºè·¯å¾„è¿›è¡Œäº†ä¿®æ”¹å¹¶ä¸”å¯¹apkçš„è¾“å‡ºåç§°è¿›è¡Œäº†è°ƒæ•´</p><p>è‡³æ­¤,Jenkinså‚æ•°è‡ªåŠ¨åŒ–æ„å»ºå·²ç»å®Œæˆ!ğŸ˜€</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨&lt;a href=&quot;http://lhalcyon.com/linux-jenkins-gradle_build_android1/&quot;&gt;å‰ä¸€ç¯‡æ–‡ç« &lt;/a&gt;ä¸­,è¯´æ˜äº†åœ¨CenterOSä¸Šè¿›è¡Œä¸€ç³»åˆ—çš„ç¯å¢ƒæ­å»º,æœ¬æ–‡å¼€å§‹è¯´æ˜å…³äºé¡¹ç›®çš„ä¸€ç³»åˆ—é…ç½®&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="https://lhalcyon.com/categories/Android/"/>
    
    
      <category term="Jenkins" scheme="https://lhalcyon.com/tags/Jenkins/"/>
    
      <category term="Android" scheme="https://lhalcyon.com/tags/Android/"/>
    
      <category term="Linux" scheme="https://lhalcyon.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linux+Jenkins+Gradleæ„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(ä¸€)</title>
    <link href="https://lhalcyon.com/linux-jenkins-gradle_build_android1/"/>
    <id>https://lhalcyon.com/linux-jenkins-gradle_build_android1/</id>
    <published>2017-07-07T12:40:25.000Z</published>
    <updated>2018-02-06T12:50:41.115Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><div class="note info"><p>å…³äºJenkinséƒ¨ç½²å®‰å“è‡ªåŠ¨æ‰“åŒ…æœ‰å¾ˆå¤šå¥½å¤„,å¯ä»¥é…ç½®å‚æ•°è¿›è¡Œæ„å»º,é€‰æ‹©æ‰“åŒ…ç¯å¢ƒã€è®¾ç½®Appç‰ˆæœ¬ã€è®¾ç½®åŠ å¯†å¼€å…³ç­‰.èµ·åˆ,ç¬”è€…ä¹Ÿæ˜¯å‚è€ƒäº†ä¸€äº›ç½‘ä¸Šçš„æ•™ç¨‹,å°†è‡ªåŠ¨åŒ–æ‰“åŒ…æ„å»ºåœ¨äº†è‡ªå·±çš„windowså¼€å‘æœºå™¨ä¸Š,è€Œå°†Jenkinsè‡ªåŠ¨æ„å»ºAndroidéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šå’Œæœ¬æœºä¸Šåœ¨ç¯å¢ƒæ„å»ºæ–¹é¢ç•¥æœ‰ä¸åŒ,å‘ç•¥å¤š.</p><p>å‚æ•°åŒ–æ„å»ºçš„è¿‡ç¨‹å´æ˜¯å¾ˆä¾¿æ·,ä½†æ˜¯éƒ¨ç½²åœ¨æœ¬æœºä¸Šè‡ªåŠ¨åŒ–æ‰“åŒ…å…¶å®æ˜¯ä¸ªä¼šå¢åŠ æ‰“åŒ…æ—¶é•¿çš„å·¥ä½œ,å› ä¸ºè‡ªåŠ¨åŒ–æ‰“åŒ…ä¼šé¦–å…ˆå»ä»£ç ä»“åº“æ‹‰å–ä»£ç åˆ°æœ¬åœ°,ç„¶åå†å¼€å§‹æ‰“åŒ…,è¿™ä¸ªè¿‡ç¨‹ä¼šæ¯”ç›´æ¥ç”¨ASæ‰“åŒ…æ…¢å¾ˆå¤š.åæ¥æå‡ºéœ€æ±‚,è¦å°†è‡ªåŠ¨åŒ–æ‰“åŒ…é…ç½®åˆ°æœåŠ¡å™¨ä¸Š.è¿ç»´å°±æä¾›äº†ä¸€å°<code>Linux</code>æœåŠ¡å™¨,å¹¶ä¸”ä¸Šé¢å·²é…ç½®åå°çš„è‡ªåŠ¨åŒ–æ‰“åŒ…ç¯å¢ƒ,ç”¨çš„æ˜¯<code>Jdk1.7</code>å’Œæ¯”è¾ƒæ—§ç‰ˆæœ¬çš„<code>Jenkins</code>,äºæ˜¯æˆ‘ä»¬å¾—å¦è¡Œä½¿ç”¨ç‹¬ç«‹çš„å®‰è£…çš„ç¯å¢ƒ.</p></div><h3 id="æœ€ç»ˆç»“æœ"><a href="#æœ€ç»ˆç»“æœ" class="headerlink" title="æœ€ç»ˆç»“æœ"></a>æœ€ç»ˆç»“æœ</h3><p>æœ€ç»ˆæˆ‘ä»¬è¦å®ç°çš„æ˜¯å®ç°Jenkinsä¸Šé¢é…ç½®<strong>åº”ç”¨ç‰ˆæœ¬å·</strong>ã€<strong>Gitåˆ†æ”¯</strong>ã€<strong>åº”ç”¨æ¸ é“</strong>ã€<strong>è¯·æ±‚åŸºåœ°å€</strong>ã€<strong>åº”ç”¨ç¯å¢ƒ</strong>ç­‰å‚æ•°,è¿›è¡Œä¸€é”®å‚æ•°åŒ–æ„å»ºæ‰“åŒ…ä¸Šä¼ è‡³è’²å…¬è‹±å¹¶å‘é€é‚®ä»¶é€šçŸ¥ç»™<strong>è‡ªå®šä¹‰çš„æ¥æ”¶è€…</strong></p><p>æœ€ç»ˆå®ç°å‚æ•°åŒ–é…ç½®å¤§è‡´å¦‚ä¸‹æ‰€ç¤º:</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_total.png" alt="jenkins_total"></p><p>å‘é€é‚®ä»¶(é‚®ä»¶å†…å®¹è¾ƒé•¿,è¿›è¡Œäº†ç›¸åº”ç¼©å°)</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_result.jpg" alt="jenkins_total"></p><a id="more"></a><h3 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h3><p><strong>æ‰€éœ€ç¯å¢ƒ</strong></p><ul><li>æ–°ç‰ˆJenkins(éœ€èƒ½å®‰è£…å‚æ•°åŒ–æ„å»ºæ’ä»¶)</li><li>Tomcat</li><li>æ–°ç‰ˆJenkins</li><li>Android SDK</li><li>Android NDK</li><li>aapt</li><li>Git</li><li>Gradle</li><li>å…¶å®ƒ(è§†è‡ªèº«é¡¹ç›®æ‰€éœ€)</li></ul><p><strong>CenterOS64ä½å·²æœ‰ç¯å¢ƒ</strong></p><ul><li>Jdk1.7</li><li>Tomcat</li><li>æ—§ç‰ˆJenkins</li></ul><h4 id="1-Jdkå®‰è£…åŠé…ç½®"><a href="#1-Jdkå®‰è£…åŠé…ç½®" class="headerlink" title="1. Jdkå®‰è£…åŠé…ç½®"></a>1. Jdkå®‰è£…åŠé…ç½®</h4><p>ç”±äºAndroidå¼€å‘ä½¿ç”¨çš„ <code>Jdk1.8</code>,å› æ­¤ä¸èƒ½å¤ç”¨æœåŠ¡å™¨ä¸Šç°æœ‰çš„Jdk </p><p>é¦–å…ˆå»<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">Oracle Downloads</a>ä¸‹è½½ <strong>Jdk for Linux</strong>.ç¬”è€…ä¸‹è½½çš„æ˜¯<code>jdk-8u131-linux-x64.tar.gz</code></p><p>ä¸Šä¼ åˆ°æœåŠ¡å™¨,è¿›å…¥ç›¸å…³ç›®å½•è§£å‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf jdk-8u131-linux-x64.tar.gz</span><br></pre></td></tr></table></figure><p>å¯å°†ç›®å½•ç§»è‡³å…¶ä»–ç›®å½•.å…¶å®æœ€å¥½åœ¨è§£å‹å‰å°±å°†å‹ç¼©åŒ…ç§»è‡³ç›®æ ‡ç›®å½•</p><p><strong>Jdkç¯å¢ƒå˜é‡é…ç½®</strong>(å¯é€‰)</p><p>ç”±äºåå°ä½¿ç”¨äº†<code>JAVA_HOME</code>ã€<code>JENKINS_HOME</code>ç­‰ä¸€ç³»åˆ—ç¯å¢ƒå˜é‡å,æ‰€ä»¥æœåŠ¡å™¨ä¸Šé»˜è®¤è°ƒç”¨çš„ä¼šæ˜¯ä»–ä»¬çš„ç¯å¢ƒå˜é‡,æˆ‘ä»¬å¼€å‘çš„ä¸€å¥—åªèƒ½åœ¨è‡ªå·±çš„Tomcatã€Jenkinsä¸­è¿›è¡ŒæŒ‡å®š,å…·ä½“ä¸‹æ–‡ä¼šè¿›è¡Œè¯´æ˜</p><h4 id="2-Tomcatå®‰è£…åŠé…ç½®"><a href="#2-Tomcatå®‰è£…åŠé…ç½®" class="headerlink" title="2. Tomcatå®‰è£…åŠé…ç½®"></a>2. Tomcatå®‰è£…åŠé…ç½®</h4><p>é¦–å…ˆå»<a href="http://tomcat.apache.org/" target="_blank" rel="noopener">Tomcat Download</a>é€‰æ‹©ç‰ˆæœ¬è¿›è¡Œä¸‹è½½.è¿™é‡Œç¬”è€…é€‰æ‹©çš„æ˜¯<code>apache-tomcat-7.0.79.tar.gz</code></p><p>ä¸Šä¼ åˆ°æœåŠ¡å™¨,è¿›å…¥ç›¸å…³ç›®å½•è§£å‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxv -f apache-tomcat-7.0.79.tar.gz</span><br></pre></td></tr></table></figure><h5 id="a-ç«¯å£ä¿®æ”¹"><a href="#a-ç«¯å£ä¿®æ”¹" class="headerlink" title="a.ç«¯å£ä¿®æ”¹"></a>a.ç«¯å£ä¿®æ”¹</h5><p>ç”±äºå¸¸è§„tomcatç«¯å£è¢«å·²æœ‰tomcatå ç”¨,å› æ­¤æˆ‘ä»¬éœ€è¦ä¿®æ”¹ç«¯å£</p><p>è¿›å…¥<code>conf</code>ç›®å½•ä¸‹çš„<code>server.xml</code>ä¿®æ”¹,æ­¤å¤„ç¬”è€…æ˜¯ç”¨<strong>Vim</strong>ä¿®æ”¹.ä¸ä¼šç”¨çš„åŒå­¦è¯·å‡ºé—¨å·¦è½¬åº¦å¨˜ğŸ¤”</p><p>ä¸»è¦ä¿®æ”¹çš„æ˜¯,è®¾ç½®ä¸ºè‡ªå®šä¹‰ç«¯å£å·</p><ul><li><code>Tomcat admin port</code> å³æ–‡ä»¶æœ€ä¸Šé¢çš„ç«¯å£å·</li><li><code>Http/1.1 port</code> è¿æ¥è®¿é—®çš„ç«¯å£å·</li><li><code>AJP/1.3 port</code></li></ul><h5 id="b-ç¯å¢ƒé…ç½®"><a href="#b-ç¯å¢ƒé…ç½®" class="headerlink" title="b.ç¯å¢ƒé…ç½®"></a>b.ç¯å¢ƒé…ç½®</h5><p>æŒ‡å®šTomcatè¿è¡Œæ—¶ç¯å¢ƒ,åœ¨<code>bin</code>ç›®å½•ä¸‹ä¿®æ”¹<code>setclasspath.sh</code> ä»¥ä¸‹æ˜¯ç¬”è€…çš„ç¯å¢ƒ,è¯·è‡ªè¡Œæ›¿æ¢è·¯å¾„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/android/java/jdk1.8.0_131</span><br><span class="line">export JRE_HOME=/usr/android/java/jdk1.8.0_131/jre</span><br><span class="line">export JENKINS_HOME=/home/android/jenkins</span><br></pre></td></tr></table></figure><h4 id="3-Gradleå®‰è£…åŠé…ç½®"><a href="#3-Gradleå®‰è£…åŠé…ç½®" class="headerlink" title="3. Gradleå®‰è£…åŠé…ç½®"></a>3. Gradleå®‰è£…åŠé…ç½®</h4><p>é¦–å…ˆå»<a href="http://services.gradle.org/distributions/" target="_blank" rel="noopener">Gradle Download</a>ä¸‹è½½å¯¹åº”Gradleç‰ˆæœ¬,ç¬”è€…ä½¿ç”¨åˆ°çš„æ˜¯<code>gradle-3.3-all.zip</code></p><p>ä¸Šä¼ åˆ°æŒ‡å®šç›®å½•è§£å‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip gradle-3.3-all.zip</span><br></pre></td></tr></table></figure><p>ç„¶åæ·»åŠ ç¯å¢ƒå˜é‡<code>vim /etc/profile</code>,åœ¨ç¯å¢ƒå˜é‡é…ç½®å¤„å¢åŠ ä¸€å¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export GRADLE_HOME=/home/gradle-3.3/bin</span><br></pre></td></tr></table></figure><h4 id="4-Android-Sdk-For-Linux-å®‰è£…åŠæ›´æ–°"><a href="#4-Android-Sdk-For-Linux-å®‰è£…åŠæ›´æ–°" class="headerlink" title="4. Android Sdk For Linux å®‰è£…åŠæ›´æ–°"></a>4. Android Sdk For Linux å®‰è£…åŠæ›´æ–°</h4><p>è¿™é‡Œä¸‹è½½Sdkè§£å‹éƒ½ä¸æ˜¯éš¾ç‚¹.éš¾ç‚¹åœ¨äºå®‰è£…ä¹‹åæ›´æ–°çš„é—®é¢˜.</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/sdk_manager_accept_license.png" alt="sdk_manager_agree_license"></p><p>ç”¨ASæˆ–è€…Eclipseçš„åŒå­¦è‚¯å®šæ¥è§¦è¿‡<code>Sdk Manager</code>,æ­¤å¤„é€‰æ‹©æ›´æ–°åè¦æ‰‹åŠ¨ç‚¹<code>Accept License</code>æ‰èƒ½å¯åŠ¨æ›´æ–°.ä½†æ˜¯åœ¨Linuxä¸‹æ²¡æœ‰ç•Œé¢åŒ–çš„å‹¾é€‰å¯ç”¨.å› æ­¤éœ€è¦ç”¨è„šæœ¬æ¥æ›´æ–°.ç½‘ä¸Šæœ‰è¯´å¤åˆ¶<code>License</code>çš„æ–¹æ³•ç¬”è€…è¯•äº†æ— æ•ˆ,ä¹Ÿè®¸æ˜¯å§¿åŠ¿ä¸å¯¹å§,æ­¤å¤„ä¹Ÿæ˜¯è¸©äº†å¾ˆä¹…çš„å‘æ‰æœå‡ºæ¥çš„è§£å†³æ–¹æ³•:</p><p><a href="http://blog.csdn.net/yygydjkthh/article/details/48263973" target="_blank" rel="noopener">æ›´æ–°Sdkæ–¹æ³•ä¼ é€é—¨</a> è¿™é‡Œå…ˆæ„Ÿè°¢ä¸‹è¯¥ä½œè€…ğŸ‘</p><p>è¿™é‡Œä¹Ÿä¸ºä¸æ„¿è·³ä¼ é€é—¨çš„åŒå­¦è¯´æ˜ä¸€ä¸‹,å°±å‡ ä¸ªæ­¥éª¤.</p><p><strong>a.æŸ¥çœ‹å¯æ›´æ–°åˆ—è¡¨</strong></p><p>åœ¨Sdkçš„<code>tools</code>ç›®å½•ä½¿ç”¨<code>./android list sdk --all</code>æŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨æä¾›çš„SdkåŒ…çš„åºå·,è®°å½•æƒ³è¦æ›´æ–°çš„Sdkåºå·</p><p><strong>b.ç¼–è¾‘è„šæœ¬</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/expect</span><br><span class="line">set timeout -1</span><br><span class="line">spawn /usr/local/android-sdk-linux/tools/android update sdk -u -a -t 1,2,3,24,25,26,27,28,30,95,96,102,103,104,105,106,107</span><br><span class="line">expect &#123;</span><br><span class="line">    &quot;Do you accept the license&quot; &#123; exp_send &quot;y\r&quot; ; exp_continue &#125;</span><br><span class="line">    eof</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤å¤„<code>1,2,3,...</code>ä¸ºéœ€è¦ä¸‹è½½çš„Sdkåºå·</p><p><strong>c.è¿è¡Œè„šæœ¬</strong></p><p>å¾…è„šæœ¬è·‘å®Œ,sdkå°±æ›´æ–°å®Œæ¯•äº†</p><blockquote><p>æ³¨æ„æ­¤å¤„è„šæœ¬ç”¨åˆ°äº†<code>expect</code>,éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…,æ­¤å¤„æä¾›<a href="http://www.centoscn.com/image-text/install/2014/0310/2532.html" target="_blank" rel="noopener">expectå®‰è£…ä¼ é€é—¨</a></p></blockquote><h4 id="5-Ndk-for-Linuxå®‰è£…"><a href="#5-Ndk-for-Linuxå®‰è£…" class="headerlink" title="5. Ndk for Linuxå®‰è£…"></a>5. Ndk for Linuxå®‰è£…</h4><p>å®‰è£…è¾ƒç®€å•,åç»­éœ€é…ç½®Jenkinsç³»ç»Ÿå˜é‡,ä¸‹æ–‡ä¼šè¿›è¡Œè¯´æ˜</p><blockquote><p>é¡¹ç›®å› ç”¨åˆ°äº†Jni,éœ€è¦å®‰è£…Ndk,å¯æ˜¯åæœŸå‘ç°åœ¨é¡¹ç›®é‡Œæ¯æ¬¡å‡å»ç¼–è¯‘jniå¯¼è‡´é¡¹ç›®çš„compile sdkä¸èƒ½ä½¿ç”¨é«˜äº23çš„,è‡´ä½¿Instant Runç­‰åŠŸèƒ½ä½¿ç”¨,å¾ˆå½±å“å¼€å‘æ•ˆç‡.åæœŸæ”¹åœ¨é¡¹ç›®å¤–ç¼–è¯‘å¥½äº†é™æ€åº“ç„¶åæ”¾å…¥é¡¹ç›®ä¸­,è¿™æ ·ä¸ä¼šé™åˆ¶é¡¹ç›®è‡ªèº«çš„SDKç‰ˆæœ¬,å› æ­¤<strong>è‹¥æœªä½¿ç”¨JNIçš„é¡¹ç›®,åˆ™å¯è·³è¿‡æ­¤æ­¥éª¤</strong></p></blockquote><h4 id="6-Gitå®‰è£…åŠç¯å¢ƒå˜é‡é…ç½®"><a href="#6-Gitå®‰è£…åŠç¯å¢ƒå˜é‡é…ç½®" class="headerlink" title="6. Gitå®‰è£…åŠç¯å¢ƒå˜é‡é…ç½®"></a>6. Gitå®‰è£…åŠç¯å¢ƒå˜é‡é…ç½®</h4><p>ä¸‹è½½å®‰è£…å¹¶é…ç½®ç¯å¢ƒå˜é‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export GIT_HOME=/usr/android/git-2.12.2/bin</span><br></pre></td></tr></table></figure><h4 id="7-Jenkinså®‰è£…åŠé…ç½®"><a href="#7-Jenkinså®‰è£…åŠé…ç½®" class="headerlink" title="7. Jenkinså®‰è£…åŠé…ç½®"></a>7. Jenkinså®‰è£…åŠé…ç½®</h4><h5 id="a-ä¸‹è½½"><a href="#a-ä¸‹è½½" class="headerlink" title="a. ä¸‹è½½"></a>a. ä¸‹è½½</h5><p>ä¸‹è½½Jenkinså°†waråŒ…æ”¾å…¥Tomcatçš„<code>webapps</code>ç›®å½•ä¸‹,å¯åŠ¨tomcat</p><p>ç„¶ååœ¨åœ°å€æ è¾“å…¥è·¯å¾„<code>http://localhost:/8777</code> å…¶ä¸­<code>8777</code>ä¸ºç¬¬äºŒæ­¥ä¸­è‡ªå®šä¹‰çš„ç«¯å£å·</p><h5 id="b-æ’ä»¶å®‰è£…"><a href="#b-æ’ä»¶å®‰è£…" class="headerlink" title="b. æ’ä»¶å®‰è£…"></a>b. æ’ä»¶å®‰è£…</h5><p>ç„¶åå®‰è£…æ’ä»¶(åŸºæœ¬å‚è€ƒç½‘ä¸Šçš„)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">1.Branch API Plugin</span><br><span class="line">2.build timeout plugin</span><br><span class="line">3.build-name-setter</span><br><span class="line">4.Credentials Binding Plugin</span><br><span class="line">5.description setter plugin</span><br><span class="line">6.Dynamic Parameter Plug-in</span><br><span class="line">7.Environment Injector Plugin</span><br><span class="line">9.Git plugin</span><br><span class="line">10.GIT server Plugin</span><br><span class="line">11.Gradle Plugin</span><br><span class="line">12.Git Parameter Plug-In</span><br><span class="line">13.Pipeline: Basic Steps</span><br><span class="line">14.Pipeline: Build Step</span><br><span class="line">15.Pipeline: Input Step</span><br><span class="line">16.Pipeline: Nodes and Processes</span><br><span class="line">17.Pipeline: Stage Step</span><br><span class="line">18.Scriptler</span><br><span class="line">19.Workspace Cleanup Plugin</span><br><span class="line">20.Post-Build Script Plug-in</span><br><span class="line">21.Email Extension Plugin</span><br><span class="line">22.SSH Slaves plugin</span><br><span class="line">23.Timestamper</span><br><span class="line">(ä¸æ˜ä¸ºä»€ä¹ˆå°‘8)</span><br></pre></td></tr></table></figure><p>å› ä¸ºJenkinsç‰ˆæœ¬ä¸åŒ,å®é™…ä½¿ç”¨ä¸­å‘ç°ç¼ºå¤±ä¸å°‘</p><p>ä»¥ä¸‹é™„ä¸Šç¬”è€…æ‰€å®‰è£…çš„æ‰€æœ‰æ’ä»¶(è‹¥æ— é—®é¢˜çš„å¯è·³è¿‡)</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_plugin1.jpg" alt="jenkins_plugin_1"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_plugin2.jpg" alt="jenkins_plugin_2"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_plugin3.jpg" alt="jenkins_plugin_3"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_plugin4.jpg" alt="jenkins_plugin_4"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_plugin5.jpg" alt="jenkins_plugin_5"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_plugin6.jpg" alt="jenkins_plugin_6"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_plugin7.jpg" alt="jenkins_plugin_7"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_plugin8.jpg" alt="jenkins_plugin_8"></p><h5 id="c-ç¯å¢ƒå˜é‡é…ç½®"><a href="#c-ç¯å¢ƒå˜é‡é…ç½®" class="headerlink" title="c. ç¯å¢ƒå˜é‡é…ç½®"></a>c. ç¯å¢ƒå˜é‡é…ç½®</h5><p><strong>ç¯å¢ƒå˜é‡</strong></p><p>é¦–å…ˆç‚¹å‡»<code>ç³»ç»Ÿç®¡ç†</code>-&gt;<code>ç³»ç»Ÿè®¾ç½®</code>é…ç½®Jdkã€Android Sdkã€Gradleã€Android Ndkç¯å¢ƒå˜é‡(æ­¤å¤„ä¹Ÿå¯é…ç½®Gitç›®å½•,ç¬”è€…æ˜¯å°†Gitç›®å½•é…ç½®åœ¨Linuxç¯å¢ƒå˜é‡ä¸­äº†)</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_config.png" alt="jenkins_plugin_8"></p><p><em>å…¶å®ƒå¦‚é‚®ä»¶ç›¸å…³é…ç½®çš„åœ¨ä¸‹ç¯‡ä¼šè¯´æ˜</em></p><p>è‡³æ­¤ç¯å¢ƒå¤§ä½“ä¸Šé…ç½®å·²ç»å®Œæˆ,ä¸‹ç¯‡å³å¯è¿›å…¥é¡¹ç›®ç›¸å…³é…ç½®</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;div class=&quot;note info&quot;&gt;&lt;p&gt;å…³äºJenkinséƒ¨ç½²å®‰å“è‡ªåŠ¨æ‰“åŒ…æœ‰å¾ˆå¤šå¥½å¤„,å¯ä»¥é…ç½®å‚æ•°è¿›è¡Œæ„å»º,é€‰æ‹©æ‰“åŒ…ç¯å¢ƒã€è®¾ç½®Appç‰ˆæœ¬ã€è®¾ç½®åŠ å¯†å¼€å…³ç­‰.èµ·åˆ,ç¬”è€…ä¹Ÿæ˜¯å‚è€ƒäº†ä¸€äº›ç½‘ä¸Šçš„æ•™ç¨‹,å°†è‡ªåŠ¨åŒ–æ‰“åŒ…æ„å»ºåœ¨äº†è‡ªå·±çš„windowså¼€å‘æœºå™¨ä¸Š,è€Œå°†Jenkinsè‡ªåŠ¨æ„å»ºAndroidéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šå’Œæœ¬æœºä¸Šåœ¨ç¯å¢ƒæ„å»ºæ–¹é¢ç•¥æœ‰ä¸åŒ,å‘ç•¥å¤š.&lt;/p&gt;
&lt;p&gt;å‚æ•°åŒ–æ„å»ºçš„è¿‡ç¨‹å´æ˜¯å¾ˆä¾¿æ·,ä½†æ˜¯éƒ¨ç½²åœ¨æœ¬æœºä¸Šè‡ªåŠ¨åŒ–æ‰“åŒ…å…¶å®æ˜¯ä¸ªä¼šå¢åŠ æ‰“åŒ…æ—¶é•¿çš„å·¥ä½œ,å› ä¸ºè‡ªåŠ¨åŒ–æ‰“åŒ…ä¼šé¦–å…ˆå»ä»£ç ä»“åº“æ‹‰å–ä»£ç åˆ°æœ¬åœ°,ç„¶åå†å¼€å§‹æ‰“åŒ…,è¿™ä¸ªè¿‡ç¨‹ä¼šæ¯”ç›´æ¥ç”¨ASæ‰“åŒ…æ…¢å¾ˆå¤š.åæ¥æå‡ºéœ€æ±‚,è¦å°†è‡ªåŠ¨åŒ–æ‰“åŒ…é…ç½®åˆ°æœåŠ¡å™¨ä¸Š.è¿ç»´å°±æä¾›äº†ä¸€å°&lt;code&gt;Linux&lt;/code&gt;æœåŠ¡å™¨,å¹¶ä¸”ä¸Šé¢å·²é…ç½®åå°çš„è‡ªåŠ¨åŒ–æ‰“åŒ…ç¯å¢ƒ,ç”¨çš„æ˜¯&lt;code&gt;Jdk1.7&lt;/code&gt;å’Œæ¯”è¾ƒæ—§ç‰ˆæœ¬çš„&lt;code&gt;Jenkins&lt;/code&gt;,äºæ˜¯æˆ‘ä»¬å¾—å¦è¡Œä½¿ç”¨ç‹¬ç«‹çš„å®‰è£…çš„ç¯å¢ƒ.&lt;/p&gt;&lt;/div&gt;
&lt;h3 id=&quot;æœ€ç»ˆç»“æœ&quot;&gt;&lt;a href=&quot;#æœ€ç»ˆç»“æœ&quot; class=&quot;headerlink&quot; title=&quot;æœ€ç»ˆç»“æœ&quot;&gt;&lt;/a&gt;æœ€ç»ˆç»“æœ&lt;/h3&gt;&lt;p&gt;æœ€ç»ˆæˆ‘ä»¬è¦å®ç°çš„æ˜¯å®ç°Jenkinsä¸Šé¢é…ç½®&lt;strong&gt;åº”ç”¨ç‰ˆæœ¬å·&lt;/strong&gt;ã€&lt;strong&gt;Gitåˆ†æ”¯&lt;/strong&gt;ã€&lt;strong&gt;åº”ç”¨æ¸ é“&lt;/strong&gt;ã€&lt;strong&gt;è¯·æ±‚åŸºåœ°å€&lt;/strong&gt;ã€&lt;strong&gt;åº”ç”¨ç¯å¢ƒ&lt;/strong&gt;ç­‰å‚æ•°,è¿›è¡Œä¸€é”®å‚æ•°åŒ–æ„å»ºæ‰“åŒ…ä¸Šä¼ è‡³è’²å…¬è‹±å¹¶å‘é€é‚®ä»¶é€šçŸ¥ç»™&lt;strong&gt;è‡ªå®šä¹‰çš„æ¥æ”¶è€…&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆå®ç°å‚æ•°åŒ–é…ç½®å¤§è‡´å¦‚ä¸‹æ‰€ç¤º:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_total.png&quot; alt=&quot;jenkins_total&quot;&gt;&lt;/p&gt;
&lt;p&gt;å‘é€é‚®ä»¶(é‚®ä»¶å†…å®¹è¾ƒé•¿,è¿›è¡Œäº†ç›¸åº”ç¼©å°)&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_171024/jenkins_result.jpg&quot; alt=&quot;jenkins_total&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="https://lhalcyon.com/categories/Android/"/>
    
    
      <category term="Jenkins" scheme="https://lhalcyon.com/tags/Jenkins/"/>
    
      <category term="Android" scheme="https://lhalcyon.com/tags/Android/"/>
    
      <category term="Linux" scheme="https://lhalcyon.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>æ··ç¼–:Swiftè°ƒç”¨Objective-C</title>
    <link href="https://lhalcyon.com/hybrid-compile_swift2oc/"/>
    <id>https://lhalcyon.com/hybrid-compile_swift2oc/</id>
    <published>2017-06-20T08:02:11.000Z</published>
    <updated>2018-02-04T08:01:52.836Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><ul><li>Xcode 8.3.3</li><li>Swift3.+</li></ul><h3 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><h4 id="1-åˆ›å»ºæ··ç¼–æ¡¥æ¥å¤´æ–‡ä»¶"><a href="#1-åˆ›å»ºæ··ç¼–æ¡¥æ¥å¤´æ–‡ä»¶" class="headerlink" title="1.åˆ›å»ºæ··ç¼–æ¡¥æ¥å¤´æ–‡ä»¶"></a>1.åˆ›å»ºæ··ç¼–æ¡¥æ¥å¤´æ–‡ä»¶</h4><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_170620/hybrid-compile.png" alt="hybrid-compile"></p><p>åç§°éšä¾¿å–,æœ€å¥½èƒ½å’Œæ™®é€šheaderæ–‡ä»¶åšåŒºåˆ«</p><h4 id="2-é¡¹ç›®é…ç½®æ¡¥æ¥æ–‡ä»¶"><a href="#2-é¡¹ç›®é…ç½®æ¡¥æ¥æ–‡ä»¶" class="headerlink" title="2.é¡¹ç›®é…ç½®æ¡¥æ¥æ–‡ä»¶"></a>2.é¡¹ç›®é…ç½®æ¡¥æ¥æ–‡ä»¶</h4><ol><li>ç‚¹å‡»å·¥ç¨‹,é€‰ä¸­<code>Build Settings</code>,å­é€‰é¡¹å‹¾é€‰<code>All</code></li><li>åœ¨ä¸‹é¢é…ç½®ä¸­æ‰¾åˆ°(æˆ–è€…æœç´¢)<code>Swift Compile - General</code></li><li>é…ç½®æ··ç¼–æ¡¥æ¥å¤´æ–‡ä»¶</li></ol><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_170620/bridge-config.png" alt="bridge-config"></p><p>ç‚¹å¼€å›¾ä¸­çº¢åœˆåŒºåŸŸè¿›è¡Œé…ç½®,å¦‚æˆ‘æ‰€å»ºçš„æ–‡ä»¶åœ¨å·¥ç¨‹é‡Œè·¯å¾„ä¸º<code>MyProject/Hybrid-Compile.h</code></p><p>åˆ™é…ç½®ä¹Ÿåº”æ˜¯è¿™ä¸ªè·¯å¾„</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_170620/path-config.png" alt="path-config"></p><p>ä¿å­˜ååœ¨è¯¥å¤´æ–‡ä»¶ä¸­å¼•ç”¨ç›¸åº”OCç±»å¤´æ–‡ä»¶å³å¯åœ¨Swiftä¸­è°ƒç”¨</p><h3 id="å¼•ç”¨æ³¨æ„"><a href="#å¼•ç”¨æ³¨æ„" class="headerlink" title="å¼•ç”¨æ³¨æ„"></a>å¼•ç”¨æ³¨æ„</h3><p>å¦‚æœæ˜¯é¡¹ç›®å†…çš„OCæ–‡ä»¶ç›´æ¥å¼•ç”¨å³å¯</p><p>å¦‚æœæ˜¯<code>Pod</code>å¼•ç”¨çš„åº“ä¸­çš„OCæ–‡ä»¶åˆ™éœ€è¦å¸¦ä¸Šå…¶<code>Pod</code>ä¸­çš„è·¯å¾„</p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_170620/reference.png" alt="reference"></p><p><img src="https://github.com/lhalcyon/RefImageRepo/raw/master/Hexo_170620/reference1.png" alt="reference1"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;ç¯å¢ƒ&quot;&gt;&lt;a href=&quot;#ç¯å¢ƒ&quot; class=&quot;headerlink&quot; title=&quot;ç¯å¢ƒ&quot;&gt;&lt;/a&gt;ç¯å¢ƒ&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Xcode 8.3.3&lt;/li&gt;
&lt;li&gt;Swift3.+&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;æ­¥éª¤&quot;&gt;&lt;a href=&quot;#æ­¥
      
    
    </summary>
    
      <category term="iOS" scheme="https://lhalcyon.com/categories/iOS/"/>
    
    
      <category term="Swift" scheme="https://lhalcyon.com/tags/Swift/"/>
    
      <category term="Xcode" scheme="https://lhalcyon.com/tags/Xcode/"/>
    
  </entry>
  
</feed>
