<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[è§£å†³Dockeré•œåƒæ‹‰å–æ…¢]]></title>
    <url>%2Fdocker-pull-speedup%2F</url>
    <content type="text"><![CDATA[åœ¨å›½å†…æœåŠ¡å™¨ä¸Šæ“ä½œ Docker æ‹‰å–é•œåƒå¤ªæ…¢ ,æ— éžæ˜¯é•œåƒåœ¨å›½å¤– . è§£å†³åŠžæ³•å°±æ˜¯é…ç½®å›½å†…é•œåƒæº , ä¸€èˆ¬ç”±é˜¿é‡Œã€ç½‘æ˜“ã€docker ä¸­å›½å®˜æ–¹ç­‰ç­‰ æŽ¨èæ–¹æ¡ˆ1. ç¼–è¾‘ /etc/docker/daemon.json (è‹¥æ—  , åˆ™åˆ›å»º) , æ·»åŠ ä»¥ä¸‹ json 123&#123; "registry-mirrors": ["https://docker.mirrors.ustc.edu.cn", "http://hub-mirror.c.163.com", "https://registry.docker-cn.com"]&#125; 2. é‡å¯ docker æœåŠ¡ 1systemctl restart docker å‚è€ƒé“¾æŽ¥Docker - è§£å†³é•œåƒæ‹‰å–æ…¢]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TextViewæ·»åŠ SpannableStringå¹¶è®¾ç½®ç‚¹å‡»è‰²]]></title>
    <url>%2Fspannablestring-issue%2F</url>
    <content type="text"><![CDATA[é€šå¸¸åœ¨é¡¹ç›®çš„æ³¨å†Œç­‰æœåŠ¡é¡µé¢ , ä¼šæœ‰ä¸€äº›æ¡æ¬¾ æ³¨å†Œå³è¡¨ç¤ºåŒæ„ã€ŠxxæœåŠ¡åè®®ã€‹ , å¼€å‘éœ€è¦å¯¹æœåŠ¡åè®®çš„éƒ¨åˆ†è®¾ç½®è¶…é“¾ç‚¹å‡». é€šå¸¸æˆ‘ä»¬ç”¨ SpannableString æ¥å®žçŽ°å¯Œæ–‡æœ¬åŠŸèƒ½ , ä¸‹é¢å°†è¯´æ˜Žä½¿ç”¨æ–¹æ³•åŠé‡åˆ°çš„é—®é¢˜. åœ¨æœç´¢å¼•æ“Žå¸®åŠ©ä¸‹ , å¸¸è§„åšæ³•æ˜¯è¿™æ · 1234567891011 TextView tv = (TextView) findViewById(R.id.tv_content); String content = "This is a text,click me" ; SpannableString spannableString = new SpannableString(content); spannableString.setSpan(new Clickable(v -&gt; &#123; // ç‚¹å‡»äº‹ä»¶ &#125;), start, end,Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);// å¿…é¡»è®¾ç½®å¦åˆ™æ— æ³•ç‚¹å‡» tv.setMovementMethod(LinkMovementMethod.getInstance());// ä¸è®¾ç½®è¯¥å±žæ€§ï¼Œç‚¹å‡»åŽä¼šæœ‰èƒŒæ™¯è‰² tv.setHighlightColor(getResources().getColor(android.R.color.transparent)); tv.setText(spannableString); è¿™é‡Œä½¿ç”¨ setHighlightColor(...) API çš„åŽŸå› æ˜¯åœ¨ç‚¹å‡»å¯Œæ–‡æœ¬ä¸­çš„é“¾æŽ¥åŽ , é“¾æŽ¥èƒŒæ™¯ä¼šå˜ä¸ºç³»ç»Ÿä¸»é¢˜ä¸­çš„é»˜è®¤ Highlight é¢œè‰² , Android 4.0 ä»¥ä¸Šé»˜è®¤æ˜¯æ·¡ç»¿è‰²(ä½Žç‰ˆæœ¬ä¸­æ˜¯é»„è‰²) , äº§ç”Ÿ UI æ•ˆæžœçš„ä¸åè°ƒ , æ‰€ä»¥è¿™é‡Œè®¾ç½®å…¶ä¸ºé€æ˜Ž. ç„¶è€Œè¿™æ ·è®¾ç½®åŽ , ä»æœ‰ç‚¹å‡»è¶…é“¾çš„æ—¶å€™ç•Œé¢æ— ä»»ä½• UI å“åº” , è¶…é“¾è¿˜æœ‰ä¸‹åˆ’çº¿ç­‰é—®é¢˜ , äºŽæ˜¯éœ€è¦è¿›è¡Œä¸€äº›è‡ªå®šä¹‰. è‡ªå®šä¹‰TouchableSpan.java 123456789101112131415161718192021public abstract class TouchableSpan extends ClickableSpan &#123; private boolean mIsPressed; private int mNormalTextColor; private int mPressedTextColor; public TouchableSpan(int normalTextColor, int pressedTextColor) &#123; mNormalTextColor = normalTextColor; mPressedTextColor = pressedTextColor; &#125; public void setPressed(boolean isSelected) &#123; mIsPressed = isSelected; &#125; @Override public void updateDrawState(TextPaint ds) &#123; super.updateDrawState(ds); ds.setColor(mIsPressed ? mPressedTextColor : mNormalTextColor); ds.setUnderlineText(false); &#125;&#125; è®¾ç½®æ–‡å­—ç‚¹å‡»é¢œè‰² 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455public class LinkTouchMovementMethod extends LinkMovementMethod &#123; private TouchableSpan mPressedSpan; @Override public boolean onTouchEvent(TextView textView, Spannable spannable, MotionEvent event) &#123; if (event.getAction() == MotionEvent.ACTION_DOWN) &#123; mPressedSpan = getPressedSpan(textView, spannable, event); if (mPressedSpan != null) &#123; mPressedSpan.setPressed(true); Selection.setSelection(spannable, spannable.getSpanStart(mPressedSpan), spannable.getSpanEnd(mPressedSpan)); &#125; &#125; else if (event.getAction() == MotionEvent.ACTION_MOVE) &#123; TouchableSpan touchedSpan = getPressedSpan(textView, spannable, event); if (mPressedSpan != null &amp;&amp; touchedSpan != mPressedSpan) &#123; mPressedSpan.setPressed(false); mPressedSpan = null; Selection.removeSelection(spannable); &#125; &#125; else &#123; if (mPressedSpan != null) &#123; mPressedSpan.setPressed(false); super.onTouchEvent(textView, spannable, event); &#125; mPressedSpan = null; Selection.removeSelection(spannable); &#125; return true; &#125; private TouchableSpan getPressedSpan(TextView textView, Spannable spannable, MotionEvent event) &#123; int x = (int) event.getX(); int y = (int) event.getY(); x -= textView.getTotalPaddingLeft(); y -= textView.getTotalPaddingTop(); x += textView.getScrollX(); y += textView.getScrollY(); Layout layout = textView.getLayout(); int line = layout.getLineForVertical(y); int off = layout.getOffsetForHorizontal(line, x); TouchableSpan[] link = spannable.getSpans(off, off, TouchableSpan.class); TouchableSpan touchedSpan = null; if (link.length &gt; 0) &#123; touchedSpan = link[0]; &#125; return touchedSpan; &#125;&#125; å·¥å…·ç±» 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497public class SpannableStringUtils &#123; private SpannableStringUtils() &#123; throw new UnsupportedOperationException("u can't instantiate me..."); &#125; /** * èŽ·å–å»ºé€ è€… * * @return &#123;@link Builder&#125; */ public static Builder getBuilder(@NonNull CharSequence text) &#123; return new Builder(text); &#125; public static class Builder &#123; private int defaultValue = 0x12000000; private CharSequence text; private int flag; @ColorInt private int foregroundColor; @ColorInt private int backgroundColor; @ColorInt private int quoteColor; private boolean isLeadingMargin; private int first; private int rest; private boolean isBullet; private int gapWidth; private int bulletColor; private float proportion; private float xProportion; private boolean isStrikethrough; private boolean isUnderline; private boolean isSuperscript; private boolean isSubscript; private boolean isBold; private boolean isItalic; private boolean isBoldItalic; private String fontFamily; private Layout.Alignment align; private boolean imageIsBitmap; private Bitmap bitmap; private boolean imageIsDrawable; private Drawable drawable; private boolean imageIsUri; private Uri uri; private boolean imageIsResourceId; @DrawableRes private int resourceId; private TouchableSpan clickSpan; private String url; private boolean isBlur; private float radius; private BlurMaskFilter.Blur style; private SpannableStringBuilder mBuilder; private Builder(@NonNull CharSequence text) &#123; this.text = text; flag = Spanned.SPAN_EXCLUSIVE_EXCLUSIVE; foregroundColor = defaultValue; backgroundColor = defaultValue; quoteColor = defaultValue; proportion = -1; xProportion = -1; mBuilder = new SpannableStringBuilder(); &#125; /** * è®¾ç½®æ ‡è¯† * * @param flag &lt;ul&gt; * &lt;li&gt;&#123;@link Spanned#SPAN_INCLUSIVE_EXCLUSIVE&#125;&lt;/li&gt; * &lt;li&gt;&#123;@link Spanned#SPAN_INCLUSIVE_INCLUSIVE&#125;&lt;/li&gt; * &lt;li&gt;&#123;@link Spanned#SPAN_EXCLUSIVE_EXCLUSIVE&#125;&lt;/li&gt; * &lt;li&gt;&#123;@link Spanned#SPAN_EXCLUSIVE_INCLUSIVE&#125;&lt;/li&gt; * &lt;/ul&gt; * @return &#123;@link Builder&#125; */ public Builder setFlag(int flag) &#123; this.flag = flag; return this; &#125; /** * è®¾ç½®å‰æ™¯è‰² * * @param color å‰æ™¯è‰² * @return &#123;@link Builder&#125; */ public Builder setForegroundColor(@ColorInt int color) &#123; this.foregroundColor = color; return this; &#125; /** * è®¾ç½®èƒŒæ™¯è‰² * * @param color èƒŒæ™¯è‰² * @return &#123;@link Builder&#125; */ public Builder setBackgroundColor(@ColorInt int color) &#123; this.backgroundColor = color; return this; &#125; /** * è®¾ç½®å¼•ç”¨çº¿çš„é¢œè‰² * * @param color å¼•ç”¨çº¿çš„é¢œè‰² * @return &#123;@link Builder&#125; */ public Builder setQuoteColor(@ColorInt int color) &#123; this.quoteColor = color; return this; &#125; /** * è®¾ç½®ç¼©è¿› * * @param first é¦–è¡Œç¼©è¿› * @param rest å‰©ä½™è¡Œç¼©è¿› * @return &#123;@link Builder&#125; */ public Builder setLeadingMargin(int first, int rest) &#123; this.first = first; this.rest = rest; isLeadingMargin = true; return this; &#125; /** * è®¾ç½®åˆ—è¡¨æ ‡è®° * * @param gapWidth åˆ—è¡¨æ ‡è®°å’Œæ–‡å­—é—´è·ç¦» * @param color åˆ—è¡¨æ ‡è®°çš„é¢œè‰² * @return &#123;@link Builder&#125; */ public Builder setBullet(int gapWidth, int color) &#123; this.gapWidth = gapWidth; bulletColor = color; isBullet = true; return this; &#125; /** * è®¾ç½®å­—ä½“æ¯”ä¾‹ * * @param proportion æ¯”ä¾‹ * @return &#123;@link Builder&#125; */ public Builder setProportion(float proportion) &#123; this.proportion = proportion; return this; &#125; /** * è®¾ç½®å­—ä½“æ¨ªå‘æ¯”ä¾‹ * * @param proportion æ¯”ä¾‹ * @return &#123;@link Builder&#125; */ public Builder setXProportion(float proportion) &#123; this.xProportion = proportion; return this; &#125; /** * è®¾ç½®åˆ é™¤çº¿ * * @return &#123;@link Builder&#125; */ public Builder setStrikethrough() &#123; this.isStrikethrough = true; return this; &#125; /** * è®¾ç½®ä¸‹åˆ’çº¿ * * @return &#123;@link Builder&#125; */ public Builder setUnderline() &#123; this.isUnderline = true; return this; &#125; /** * è®¾ç½®ä¸Šæ ‡ * * @return &#123;@link Builder&#125; */ public Builder setSuperscript() &#123; this.isSuperscript = true; return this; &#125; /** * è®¾ç½®ä¸‹æ ‡ * * @return &#123;@link Builder&#125; */ public Builder setSubscript() &#123; this.isSubscript = true; return this; &#125; /** * è®¾ç½®ç²—ä½“ * * @return &#123;@link Builder&#125; */ public Builder setBold() &#123; isBold = true; return this; &#125; /** * è®¾ç½®æ–œä½“ * * @return &#123;@link Builder&#125; */ public Builder setItalic() &#123; isItalic = true; return this; &#125; /** * è®¾ç½®ç²—æ–œä½“ * * @return &#123;@link Builder&#125; */ public Builder setBoldItalic() &#123; isBoldItalic = true; return this; &#125; /** * è®¾ç½®å­—ä½“ * * @param fontFamily å­—ä½“ * &lt;ul&gt; * &lt;li&gt;monospace&lt;/li&gt; * &lt;li&gt;serif&lt;/li&gt; * &lt;li&gt;sans-serif&lt;/li&gt; * &lt;/ul&gt; * @return &#123;@link Builder&#125; */ public Builder setFontFamily(@Nullable String fontFamily) &#123; this.fontFamily = fontFamily; return this; &#125; /** * è®¾ç½®å¯¹é½ * * Layout.Alignment align * * @return &#123;@link Builder&#125; */ public Builder setAlign(@Nullable Layout.Alignment align) &#123; this.align = align; return this; &#125; /** * è®¾ç½®å›¾ç‰‡ * * @param bitmap å›¾ç‰‡ä½å›¾ * @return &#123;@link Builder&#125; */ public Builder setBitmap(@NonNull Bitmap bitmap) &#123; this.bitmap = bitmap; imageIsBitmap = true; return this; &#125; /** * è®¾ç½®å›¾ç‰‡ * * @param drawable å›¾ç‰‡èµ„æº * @return &#123;@link Builder&#125; */ public Builder setDrawable(@NonNull Drawable drawable) &#123; this.drawable = drawable; imageIsDrawable = true; return this; &#125; /** * è®¾ç½®å›¾ç‰‡ * * @param uri å›¾ç‰‡uri * @return &#123;@link Builder&#125; */ public Builder setUri(@NonNull Uri uri) &#123; this.uri = uri; imageIsUri = true; return this; &#125; /** * è®¾ç½®å›¾ç‰‡ * * @param resourceId å›¾ç‰‡èµ„æºid * @return &#123;@link Builder&#125; */ public Builder setResourceId(@DrawableRes int resourceId) &#123; this.resourceId = resourceId; imageIsResourceId = true; return this; &#125; /** * è®¾ç½®ç‚¹å‡»äº‹ä»¶ * &lt;p&gt;éœ€æ·»åŠ view.setMovementMethod(LinkMovementMethod.getInstance())&lt;/p&gt; * * @param clickSpan ç‚¹å‡»äº‹ä»¶ * @return &#123;@link Builder&#125; */ public Builder setClickSpan(@NonNull TouchableSpan clickSpan) &#123; this.clickSpan = clickSpan; return this; &#125; /** * è®¾ç½®è¶…é“¾æŽ¥ * &lt;p&gt;éœ€æ·»åŠ view.setMovementMethod(LinkMovementMethod.getInstance())&lt;/p&gt; * * @param url è¶…é“¾æŽ¥ * @return &#123;@link Builder&#125; */ public Builder setUrl(@NonNull String url) &#123; this.url = url; return this; &#125; /** * è®¾ç½®æ¨¡ç³Š * &lt;p&gt;å°šå­˜bugï¼Œå…¶ä»–åœ°æ–¹å­˜åœ¨ç›¸åŒçš„å­—ä½“çš„è¯ï¼Œç›¸åŒå­—ä½“å‡ºçŽ°åœ¨ä¹‹å‰çš„è¯é‚£ä¹ˆå°±ä¸ä¼šæ¨¡ç³Šï¼Œå‡ºçŽ°åœ¨ä¹‹åŽçš„è¯é‚£ä¼šä¸€èµ·æ¨¡ç³Š&lt;/p&gt; * &lt;p&gt;æŽ¨èè¿˜æ˜¯æŠŠæ‰€æœ‰å­—ä½“éƒ½æ¨¡ç³Šè¿™æ ·ä½¿ç”¨&lt;/p&gt; * * @param radius æ¨¡ç³ŠåŠå¾„ï¼ˆéœ€å¤§äºŽ0ï¼‰ * @param style æ¨¡ç³Šæ ·å¼&lt;ul&gt; * &lt;li&gt;&#123;@link Blur#NORMAL&#125;&lt;/li&gt; * &lt;li&gt;&#123;@link Blur#SOLID&#125;&lt;/li&gt; * &lt;li&gt;&#123;@link Blur#OUTER&#125;&lt;/li&gt; * &lt;li&gt;&#123;@link Blur#INNER&#125;&lt;/li&gt; * &lt;/ul&gt; * @return &#123;@link Builder&#125; */ public Builder setBlur(float radius, BlurMaskFilter.Blur style) &#123; this.radius = radius; this.style = style; this.isBlur = true; return this; &#125; /** * è¿½åŠ æ ·å¼å­—ç¬¦ä¸² * * @param text æ ·å¼å­—ç¬¦ä¸²æ–‡æœ¬ * @return &#123;@link Builder&#125; */ public Builder append(@NonNull CharSequence text) &#123; setSpan(); this.text = text; return this; &#125; /** * åˆ›å»ºæ ·å¼å­—ç¬¦ä¸² * * @return æ ·å¼å­—ç¬¦ä¸² */ public SpannableStringBuilder create() &#123; setSpan(); return mBuilder; &#125; /** * è®¾ç½®æ ·å¼ */ private void setSpan() &#123; int start = mBuilder.length(); mBuilder.append(this.text); int end = mBuilder.length(); if (foregroundColor != defaultValue) &#123; mBuilder.setSpan(new ForegroundColorSpan(foregroundColor), start, end, flag); foregroundColor = defaultValue; &#125; if (backgroundColor != defaultValue) &#123; mBuilder.setSpan(new BackgroundColorSpan(backgroundColor), start, end, flag); backgroundColor = defaultValue; &#125; if (isLeadingMargin) &#123; mBuilder.setSpan(new LeadingMarginSpan.Standard(first, rest), start, end, flag); isLeadingMargin = false; &#125; if (quoteColor != defaultValue) &#123; mBuilder.setSpan(new QuoteSpan(quoteColor), start, end, 0); quoteColor = defaultValue; &#125; if (isBullet) &#123; mBuilder.setSpan(new BulletSpan(gapWidth, bulletColor), start, end, 0); isBullet = false; &#125; if (proportion != -1) &#123; mBuilder.setSpan(new RelativeSizeSpan(proportion), start, end, flag); proportion = -1; &#125; if (xProportion != -1) &#123; mBuilder.setSpan(new ScaleXSpan(xProportion), start, end, flag); xProportion = -1; &#125; if (isStrikethrough) &#123; mBuilder.setSpan(new StrikethroughSpan(), start, end, flag); isStrikethrough = false; &#125; if (isUnderline) &#123; mBuilder.setSpan(new UnderlineSpan(), start, end, flag); isUnderline = false; &#125; if (isSuperscript) &#123; mBuilder.setSpan(new SuperscriptSpan(), start, end, flag); isSuperscript = false; &#125; if (isSubscript) &#123; mBuilder.setSpan(new SubscriptSpan(), start, end, flag); isSubscript = false; &#125; if (isBold) &#123; mBuilder.setSpan(new StyleSpan(Typeface.BOLD), start, end, flag); isBold = false; &#125; if (isItalic) &#123; mBuilder.setSpan(new StyleSpan(Typeface.ITALIC), start, end, flag); isItalic = false; &#125; if (isBoldItalic) &#123; mBuilder.setSpan(new StyleSpan(Typeface.BOLD_ITALIC), start, end, flag); isBoldItalic = false; &#125; if (fontFamily != null) &#123; mBuilder.setSpan(new TypefaceSpan(fontFamily), start, end, flag); fontFamily = null; &#125; if (align != null) &#123; mBuilder.setSpan(new AlignmentSpan.Standard(align), start, end, flag); align = null; &#125; if (imageIsBitmap || imageIsDrawable || imageIsUri || imageIsResourceId) &#123; if (imageIsBitmap) &#123; mBuilder.setSpan(new ImageSpan(App.getApp(), bitmap), start, end, flag); bitmap = null; imageIsBitmap = false; &#125; else if (imageIsDrawable) &#123; mBuilder.setSpan(new ImageSpan(drawable), start, end, flag); drawable = null; imageIsDrawable = false; &#125; else if (imageIsUri) &#123; mBuilder.setSpan(new ImageSpan(App.getApp(), uri), start, end, flag); uri = null; imageIsUri = false; &#125; else &#123; mBuilder.setSpan(new ImageSpan(App.getApp(), resourceId), start, end, flag); resourceId = 0; imageIsResourceId = false; &#125; &#125; if (clickSpan != null) &#123; mBuilder.setSpan(clickSpan, start, end, flag); clickSpan = null; &#125; if (url != null) &#123; mBuilder.setSpan(new URLSpan(url), start, end, flag); url = null; &#125; if (isBlur) &#123; mBuilder.setSpan(new MaskFilterSpan(new BlurMaskFilter(radius, style)), start, end, flag); isBlur = false; &#125; flag = Spanned.SPAN_EXCLUSIVE_EXCLUSIVE; &#125; &#125;&#125; ä½¿ç”¨ 12345678910111213141516171819202122SpannableStringBuilder builder = SpannableStringUtils .getBuilder("ç™»å½•/æ³¨å†Œè¡¨ç¤ºæ‚¨åŒæ„") .append(" ã€Šxxxéšç§æ”¿ç­–ã€‹ ") .setForegroundColor(linkColor) .setClickSpan(new TouchableSpan(linkColor,linkPressedColor) &#123; @Override public void onClick(View widget) &#123; // ç‚¹å‡»äº‹ä»¶ &#125; &#125;) .append("å’Œ") .append(" ã€ŠxxxæœåŠ¡åè®®ã€‹ ") .setForegroundColor(linkColor) .setClickSpan(new TouchableSpan(linkColor,linkPressedColor) &#123; @Override public void onClick(View widget) &#123; // ç‚¹å‡»äº‹ä»¶ &#125; &#125;).create(); textView.setText(builder); textView.setHighlightColor(transparent); textView.setMovementMethod(new LinkTouchMovementMethod()); ç»¼ä¸Šå³å¯å®žçŽ°åŠŸèƒ½å¹¶è§£å†³æåŠé—®é¢˜ å‚è€ƒé“¾æŽ¥æŽ˜é‡‘:TextViewæ·»åŠ SpannableStringå¹¶æ·»åŠ ç‚¹å‡»è‰²]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>SpannableString</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½¬-BottomSheetè¯¦è§£]]></title>
    <url>%2Fbottomsheet%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡è½¬è‡ª æŽ˜é‡‘: BottomSheetè¯¦è§£ å…³ç³» BottomSheetä¸æ˜¯çœŸæ­£å­˜åœ¨çš„ç±»ï¼Œè€Œæ˜¯ä¸€ç§ç§°å‘¼ï¼Œè¡¨ç¤ºè¯¥ç§æŽ§ä»¶ç±»åž‹ï¼Œå‚ç…§Googleç¿»è¯‘ï¼Œæœ¬æ–‡ä»¥ä¸‹ç§°ä¹‹ä¸ºâ€œåº•é¡µâ€ï¼Œå°±æ˜¯ä»Žå±å¹•åº•éƒ¨å¼¹å‡ºçš„å·¥å…·æ¡ã€‚ä¸Žä¹‹å¯¹åº”æ˜¯BottomSheetBehaviorçš„è¡Œä¸ºç±»ï¼Œå®ƒéœ€è¦é™„å±žæŸä¸ªæŽ§ä»¶ä½¿ç”¨ã€‚è¯¥è¡Œä¸ºæ€§è´¨åŒ…æ‹¬ï¼š å¯ä»¥ä»Žåº•éƒ¨å¼¹å‡º å¯ä»¥ä¸Šä¸‹æ‹–æ‹½å¸ƒå±€ å¯ä»¥å•å‡»æ·¡é»‘è‰²é®ç½©éšè—/å…³é—­ BottomSheetDialogç»§æ‰¿Dialogï¼Œæ˜¯ä¸€ç§å¯¹è¯æ¡†ï¼Œå®ƒæ˜¯æ‹¥æœ‰BottomSheetBehaviorè¡Œä¸ºçš„å¯¹è¯æ¡†ï¼Œä»Žè€Œå®žçŽ°ä»Žåº•éƒ¨å¼¹å‡ºå’Œä¸Šä¸‹æ‹‰ä¼¸çš„æ•ˆæžœã€‚ BottomSheetDialogFragmentæ˜¯åŒ…å«BottomSheetDialogçš„ç‰‡æ®µï¼ˆFragmentï¼‰ï¼Œæ‰€ä»¥å®ƒå¯ä»¥åŒæ—¶åˆ©ç”¨Fragmentçš„ç‰¹ç‚¹å’ŒBottomSheetè¿™ä¸€äº¤äº’æ•ˆæžœ BottomSheetBehaviorä½¿ç”¨åœ¨xmlå¸ƒå±€æ–‡ä»¶ä¸­ä¸ŽCoordinatorLayouté…åˆä½¿ç”¨ã€‚å¦‚ä¸‹è®¾ç½®åŽï¼ŒNestedScrollViewå…·æœ‰BottomSheetBehaviorçš„æ€§è´¨ï¼Œä¸”ä¸€å¼€å§‹å°±æ˜¾ç¤ºåœ¨å¸ƒå±€ä¸­ï¼Œåˆå§‹çš„æ˜¾ç¤ºé«˜åº¦ä¸ºpeekHeightå€¼ã€‚èƒŒæ™¯æ²¡æœ‰æ·¡é»‘è‰²é®ç½©ï¼Œå¯ä»¥ä¸Šä¸‹æ‹–æ‹½ã€‚ å…³é”®è¯­å¥app:layout_behavior=&quot;@string/bottom_sheet_behavior&quot;ã€‚ NestedScrollViewçš„å­è§†å›¾åªèƒ½æœ‰ä¸€ä¸ªã€‚ 123456789101112131415161718192021&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;android.support.design.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto" android:layout_width="match_parent" android:layout_height="match_parent" android:fitsSystemWindows="true"&gt; &lt;android.support.v4.widget.NestedScrollView android:id="@+id/bottom_sheet" android:layout_width="match_parent" android:layout_height="wrap_content" app:behavior_hideable="true" app:behavior_peekHeight="50dp" app:layout_behavior="@string/bottom_sheet_behavior"&gt; &lt;!--å†…éƒ¨å¸ƒå±€--&gt; &lt;/android.support.v4.widget.NestedScrollView&gt; &lt;/android.support.design.widget.CoordinatorLayout&gt; ä¸Šè¿°ä»£ç ä¸­æœ‰ä¸¤ä¸ªå±žæ€§å€¼å¾—æ³¨æ„ã€‚ app:behavior_hideableï¼šå½“æˆ‘ä»¬ä¸Šä¸‹æ‹–æ‹½æ—¶ï¼Œå¸ƒå±€æ˜¯å¦å¯ä»¥å…¨éƒ¨éšè—ã€‚å¦‚æžœè®¾ç½®ä¸ºçœŸï¼Œé‚£ä¹ˆä½ å‘ä¸‹æ»‘å®Œä¹‹åŽï¼Œå¸ƒå±€ä¼šè¢«éšè—èµ·æ¥ï¼Œç„¶åŽå°±æ»‘ä¸å‡ºæ¥äº†ã€‚ã€‚ã€‚ï¼ˆé™¤éžä½ å†™äº†æŒ‰é’®ä¹‹ç±»çš„é€»è¾‘æŽ§åˆ¶å®ƒçš„è¡Œä¸ºï¼‰æ‰€ä»¥è¦è°¨æ…Žã€‚ app:behavior_peekHeightï¼šæ˜¯å½“åº•é¡µå…³é—­çš„æ—¶å€™ï¼Œåº•éƒ¨æˆ‘ä»¬èƒ½çœ‹åˆ°çš„é«˜åº¦ï¼Œé»˜è®¤æ˜¯0ä¸å¯è§ã€‚ èŽ·å–è¡Œä¸ºåœ¨å¸ƒå±€æ–‡ä»¶ä¸­å£°æ˜Žä¹‹åŽï¼Œå°±å¯ä»¥åœ¨ä»£ç ä¸­èŽ·å–è¡Œä¸ºäº†ã€‚ 1234// èŽ·å–è§†å›¾View = findViewById(R.id.bottom_sheet);// èŽ·å–è¡Œä¸ºBottomSheetBehavior behavior = BottomSheetBehavior.from(view); æ–¹æ³•è¡Œä¸ºçš„ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•ã€‚ æ–¹æ³•å ç”¨æ³•ç¤ºä¾‹ è¯´æ˜Ž setHideable setHideable(true) å¯¹åº”app:behavior_hideableå±žæ€§ setPeekHeight setPeekHeight(500) å¯¹åº”app:behavior_peekHeightå±žæ€§ setBottomSheetCallback / è®¾ç½®ç›‘å¬å›žè°ƒ setState setState(BottomSheetBehavior.STATE_EXPANDED) è®¾ç½®åº•é¡µçŠ¶æ€ BottomSheetCallback123456789101112behavior.setBottomSheetCallback(new BottomSheetBehavior.BottomSheetCallback() &#123; @Override public void onStateChanged(@NonNull View bottomSheet, int newState) &#123; //ç›‘å¬BottomSheetçŠ¶æ€çš„æ”¹å˜ &#125; @Override public void onSlide(@NonNull View bottomSheet, float slideOffset) &#123; //ç›‘å¬æ‹–æ‹½ä¸­çš„å›žè°ƒï¼Œæ ¹æ®slideOffsetå¯ä»¥åšä¸€äº›åŠ¨ç”» &#125;&#125;); åº•é¡µè¡Œä¸ºä¸€å…±æœ‰äº”ç§çŠ¶æ€ã€‚ STATE_HIDDEN: éšè—çŠ¶æ€ã€‚é»˜è®¤æ˜¯falseï¼Œå¯é€šè¿‡app:behavior_hideableå±žæ€§è®¾ç½®ã€‚ STATE_COLLAPSED: æŠ˜å å…³é—­çŠ¶æ€ã€‚å¯é€šè¿‡app:behavior_peekHeightæ¥è®¾ç½®æ˜¾ç¤ºçš„é«˜åº¦ï¼ŒpeekHeighté»˜è®¤æ˜¯0ã€‚ STATE_DRAGGING: è¢«æ‹–æ‹½çŠ¶æ€ STATE_SETTLING: æ‹–æ‹½æ¾å¼€ä¹‹åŽåˆ°è¾¾ç»ˆç‚¹ä½ç½®ï¼ˆcollapsed or expandedï¼‰å‰çš„çŠ¶æ€ã€‚ STATE_EXPANDED: å®Œå…¨å±•å¼€çš„çŠ¶æ€ã€‚ BottomSheetDialogè¿™æ˜¯å…·æœ‰åº•é¡µè¡Œä¸ºæ€§è´¨çš„å¯¹è¯æ¡†ï¼Œä¸éœ€è¦ä¸ŽCoordinatorLayouté…åˆä½¿ç”¨ã€‚å¼¹å‡ºæ—¶ï¼ŒèƒŒæ™¯ä¸ºå‡ºçŽ°ä¸€å±‚æ·¡é»‘è‰²é®ç½©ã€‚éœ€è¦ç›¸å…³é€»è¾‘æŽ§åˆ¶å®ƒçš„å¼¹å‡ºã€‚ ä½¿ç”¨å¸ƒå±€æ–‡ä»¶è®¾è®¡BottomSheetDialogå†…éƒ¨çš„è§†å›¾ã€‚Xmlå¯ä»¥ä¸ç”¨è¢«CoordinatorLayoutåŒ…è£¹ï¼Œä½†æ˜¯è¿˜æ˜¯æŽ¨èå®žç”¨æŽ¨èçš„æ»‘åŠ¨æŽ§ä»¶NestedScrollViewã€‚ ä½¿ç”¨ä»£ç ä½¿ç”¨ä¸Šè¿°çš„å¸ƒå±€æ–‡ä»¶ï¼Œå‡è®¾åç§°ä¸ºlayout_bsdã€‚å¯ä»¥èŽ·å–è¡Œä¸ºå®žçŽ°è‡ªå®šä¹‰ã€‚è¦æ³¨æ„çš„æ˜¯ä»Žè§†å›¾çš„çˆ¶è§†å›¾ï¼ˆ(View)view.getParent()ï¼‰èŽ·å–åº•é¡µè¡Œä¸ºï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š The view is not a child of CoordinatorLayout. 123456BottomSheetDialog dialog = new BottomSheetDialog(context);View view = getLayoutInflater.inflate(R.layout.layout_bsd, null);dialog.setContentView(view);// èŽ·å–è¡Œä¸ºï¼Œç”¨äºŽè‡ªå®šä¹‰BottomSheetBehavior behavior = BottomSheetBehavior.from((View)view.getParent());dialog.show(); BottomSheetDialogFragmentæœ‰ä¸¤ç§ç”¨æ³•ã€‚ å½“ä½œä¸­è£…äº†ä¸€ä¸ªåº•é¡µå¯¹è¯æ¡†çš„Fragmentã€‚å®žé™…æ˜¯ä¸Žåº•é¡µå¯¹è¯æ¡†çš„ä½œç”¨å’Œä½¿ç”¨æ–¹æ³•æ˜¯ç›¸åŒçš„ã€‚ å…·æœ‰åº•é¡µè¡Œä¸ºçš„Fragmentã€‚ ç”¨æ³•1 æŠ«ç€ Fragment å¤–è¡£çš„ Dialogé‡å†™BottomSheetDialogFragmentä¸­çš„onCreateDialogæ–¹æ³•ã€‚å¯ä»¥çœ‹åˆ°å’Œä¸Šé¢BottomSheetDialogçš„ä»£ç æ˜¯ç›¸åŒçš„ã€‚åŒæ ·å¯ä»¥åœ¨ä¸­é—´èŽ·å–è¡Œä¸ºç”¨äºŽè‡ªå®šä¹‰ã€‚è¦æ³¨æ„æ˜¯å­è§†å›¾çš„æ‰©å……ç”¨åˆ°çš„æ˜¯View.inflateçš„é™æ€æ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ 123456789@Overridepublic Dialog onCreateDialog(Bundle savedInstanceState)&#123; BottomSheetDialog dialog = (BottomSheetDialog) super.onCreateDialog(savedInstanceState); View view = View.inflate(getContext(), R.layout.dialog_bottom_sheet, null); dialog.setContentView(view); mBehavior = BottomSheetBehavior.from((View) view.getParent()); return dialog;&#125; ç”¨æ³•2 Fragmenté‡å†™BottomSheetDialogFragmentä¸­çš„onCreateViewæ–¹æ³•ã€‚ä»£ç ä¸ŽFragmentçš„å¸¸è§„å†™æ³•ç›¸åŒã€‚ä¸è¿‡ä¸å¥½çš„ä¸€ç‚¹æ˜¯ä¸å®¹æ˜“èŽ·å–è¡Œä¸ºã€‚å¦‚æžœè¦å¼ºè¡ŒèŽ·å–è¡Œä¸ºçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„ä»£ç ã€‚ 12345678910111213141516171819@Overridepublic void onStart() &#123; super.onStart(); Dialog dialog = getDialog(); if (dialog != null) &#123; View bottomSheet = dialog.findViewById(R.id.design_bottom_sheet); bottomSheet.getLayoutParams().height = ViewGroup.LayoutParams.MATCH_PARENT; &#125; View view = getView(); view.post(() -&gt; &#123; View parent = (View) view.getParent(); CoordinatorLayout.LayoutParams params = (CoordinatorLayout.LayoutParams) (parent).getLayoutParams(); CoordinatorLayout.Behavior behavior = params.getBehavior(); BottomSheetBehavior bottomSheetBehavior = (BottomSheetBehavior) behavior; bottomSheetBehavior.setPeekHeight(view.getMeasuredHeight()); ((View)bottomSheet.getParent()).setBackgroundColor(Color.TRANSPARENT); &#125;);&#125; ä½†æ˜¯å¦‚æžœè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½é‡å†™äº†ï¼Œé‚£ä¹ˆä»¥onCreateViewé‡Œçš„è§†å›¾ä¸ºå‡†ï¼ŒonCreateDialogä¼šè¢«è¦†ç›–ã€‚ æ‰©å±•: é€šè¿‡è®¾ç½®styleå®žçŽ°åœ†è§’æ ·å¼å¦‚ä¸‹è®¾ç½®å¥½ä¹‹åŽï¼Œåœ¨åˆ›å»ºBottomSheetDialogæ—¶ä¼ å…¥æ ·å¼ã€‚ 1BottomSheetDialog dialog = new BottomSheetDialog(context, R.style.BottomSheetDialog); 123456789101112131415161718192021222324252627&lt;!--styles.xmlæ–‡ä»¶--&gt;&lt;style name="BottomSheet" parent="Widget.Design.BottomSheet.Modal"&gt; &lt;!--èƒŒæ™¯ï¼Œé¡¶éƒ¨ä¸¤ä¸ªåœ†è§’--&gt; &lt;item name="android:background"&gt;@drawable/bg_bottom_sheet&lt;/item&gt;&lt;/style&gt;&lt;style name="BottomSheetDialog" parent="Theme.Design.Light.BottomSheetDialog"&gt; &lt;item name="android:windowIsFloating"&gt;false&lt;/item&gt; &lt;!--åº•éƒ¨å¼¹å‡ºæ¡çš„æ ·å¼ï¼ˆç›¸å½“äºŽèƒŒæ™¯ï¼‰--&gt; &lt;item name="bottomSheetStyle"&gt;@style/BottomSheet&lt;/item&gt; &lt;!--çŠ¶æ€æ é¢œè‰²--&gt; &lt;item name="android:statusBarColor"&gt;@color/transparent&lt;/item&gt; &lt;!--å¯¼èˆªæ¡é¢œè‰²--&gt; &lt;item name="android:navigationBarColor"&gt;@color/white&lt;/item&gt;&lt;/style&gt;&lt;!--ä»¥ä¸‹æ˜¯@drawable/bg_bottom_sheet--&gt;&lt;shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle"&gt; &lt;corners android:topLeftRadius="16dp" android:topRightRadius="16dp"&gt; &lt;/corners&gt; &lt;solid android:color="@android:color/white"/&gt; &lt;padding android:top="16dp" android:left="8dp" android:right="8dp" /&gt;&lt;/shape&gt; æ•ˆæžœå›¾ .png) å‚è€ƒBottomSheetã€BottomSheetDialogä½¿ç”¨è¯¦è§£ StackOverflow]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>BottomSheet</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½¬-Dockerfileè¯¦è§£]]></title>
    <url>%2Fdockerfile%2F</url>
    <content type="text"><![CDATA[ä¸€æ®µæ—¶é—´æœªå†™ Dockerfile , æœ‰äº›å¿˜è®°ç¼–å†™è§„åˆ™ , äºŽæ˜¯è½¬å‘ä¸€ç¯‡è¯¦è§£æ–‡ç«  , ä»¥åšè®°å½• æœ¬æ–‡è½¬è‡ª çœ‹å®Œè¿™ç¯‡,å†ä¹Ÿä¸ç”¨æ‹…å¿ƒä¸ä¼šå†™dockerfileäº† Dockerfileæ˜¯Dockerç”¨æ¥æž„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶,åŒ…æ‹¬è‡ªå®šä¹‰çš„æŒ‡ä»¤å’Œæ ¼å¼ã€‚å¯ä»¥é€šè¿‡docker buildå‘½ä»¤ä»ŽDockerfileä¸­æž„å»ºé•œåƒã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ç»Ÿä¸€çš„è¯­æ³•å‘½ä»¤æ¥æ ¹æ®éœ€æ±‚è¿›è¡Œé…ç½®ï¼Œé€šè¿‡è¿™ä»½ç»Ÿä¸€çš„é…ç½®æ–‡ä»¶ï¼Œåœ¨ä¸åŒçš„æ–‡ä»¶ä¸Šè¿›è¡Œåˆ†å‘ï¼Œéœ€è¦ä½¿ç”¨æ—¶å°±å¯ä»¥æ ¹æ®é…ç½®æ–‡ä»¶è¿›è¡Œè‡ªåŠ¨åŒ–æž„å»ºï¼Œè¿™è§£å†³äº†å¼€å‘äººå‘˜æž„å»ºé•œåƒçš„å¤æ‚è¿‡ç¨‹ã€‚ Dockerfileä½¿ç”¨Dockerfileæè¿°äº†ç»„è£…å¯¹è±¡çš„æ­¥éª¤ï¼Œå…¶ä¸­æ¯æ¡æŒ‡ä»¤éƒ½æ˜¯å•ç‹¬è¿è¡Œçš„ã€‚é™¤äº†FROMæŒ‡ä»¤ï¼Œå…¶ä»–æ¯æ¡å‘½ä»¤éƒ½ä¼šåœ¨ä¸Šä¸€æ¡æŒ‡ä»¤æ‰€ç”Ÿæˆé•œåƒçš„åŸºç¡€ä¸Šæ‰§è¡Œï¼Œæ‰§è¡Œå®ŒåŽä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„é•œåƒå±‚ï¼Œæ–°çš„é•œåƒå±‚è¦†ç›–åœ¨åŽŸæ¥çš„é•œåƒä¹‹ä¸Šä»Žè€Œå½¢æˆäº†æ–°çš„é•œåƒã€‚Dockerfileæ‰€ç”Ÿæˆçš„æœ€ç»ˆé•œåƒå°±æ˜¯åœ¨åŸºç¡€é•œåƒä¸Šé¢å åŠ ä¸€å±‚å±‚çš„é•œåƒå±‚ç»„å»ºçš„ã€‚ DockerfileæŒ‡ä»¤Dockerfileçš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹: 12# CommentINSTRUCTION arguments åœ¨Dockerfileä¸­,æŒ‡ä»¤(INSTRUCTION)ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†æ˜¯ä¸ºäº†ä¸Žå‚æ•°åŒºåˆ†ï¼ŒæŽ¨èå¤§å†™ã€‚Dockerä¼šé¡ºåºæ‰§è¡ŒDockerfileä¸­çš„æŒ‡ä»¤ï¼Œç¬¬ä¸€æ¡æŒ‡ä»¤å¿…é¡»æ˜¯FROMæŒ‡ä»¤ï¼Œå®ƒç”¨äºŽæŒ‡å®šæž„å»ºé•œåƒçš„åŸºç¡€é•œåƒã€‚åœ¨Dockerfileä¸­ä»¥#å¼€å¤´çš„è¡Œæ˜¯æ³¨é‡Šï¼Œè€Œåœ¨å…¶ä»–ä½ç½®å‡ºçŽ°çš„#ä¼šè¢«å½“æˆå‚æ•°ã€‚ Dockerfileä¸­çš„æŒ‡ä»¤æœ‰FROMã€MAINTAINERã€RUNã€CMDã€EXPOSEã€ENVã€ADDã€COPYã€ENTRYPOINGã€VOLUMEã€USERã€WORKDIRã€ONBUILD,é”™è¯¯çš„æŒ‡ä»¤ä¼šè¢«å¿½ç•¥ã€‚ä¸‹é¢å°†è¯¦ç»†è®²è§£ä¸€äº›é‡è¦çš„DockeræŒ‡ä»¤ã€‚ FROMæ ¼å¼: FROM &lt;image&gt; æˆ–è€… FROM &lt;image&gt;:&lt;tag&gt; FROMæŒ‡ä»¤çš„åŠŸèƒ½æ˜¯ä¸ºåŽé¢çš„æŒ‡ä»¤æä¾›åŸºç¡€é•œåƒ,å› æ­¤Dockerfileå¿…é¡»ä»¥FROMæŒ‡ä»¤ä½œä¸ºç¬¬ä¸€æ¡éžæ³¨é‡ŠæŒ‡ä»¤ã€‚ä»Žå…¬å…±é•œåƒåº“ä¸­æ‹‰å–é•œåƒå¾ˆå®¹æ˜“,åŸºç¡€é•œåƒå¯ä»¥é€‰æ‹©ä»»ä½•æœ‰æ•ˆçš„é•œåƒã€‚åœ¨ä¸€ä¸ªDockerfileä¸­FROMæŒ‡ä»¤å¯ä»¥å‡ºçŽ°å¤šæ¬¡,è¿™æ ·ä¼šæž„å»ºå¤šä¸ªé•œåƒã€‚tagçš„é»˜è®¤å€¼æ˜¯latest,å¦‚æžœå‚æ•°imageæˆ–è€…tagæŒ‡å®šçš„é•œåƒä¸å­˜åœ¨ï¼Œåˆ™è¿”å›žé”™è¯¯ã€‚ ENVæ ¼å¼: ENV &lt;key&gt; &lt;value&gt; æˆ–è€… ENV &lt;key&gt;=&lt;value&gt; ENVæŒ‡ä»¤å¯ä»¥ä¸ºé•œåƒåˆ›å»ºå‡ºæ¥çš„å®¹å™¨å£°æ˜ŽçŽ¯å¢ƒå˜é‡ã€‚å¹¶ä¸”åœ¨Dockerfileä¸­ï¼ŒENVæŒ‡ä»¤å£°æ˜Žçš„çŽ¯å¢ƒå˜é‡ä¼šè¢«åŽé¢çš„ç‰¹å®šæŒ‡ä»¤(å³ENVã€ADDã€COPYã€WORKDIRã€EXPOSEã€VOLUMEã€USER)è§£é‡Šä½¿ç”¨ã€‚ å…¶ä»–æŒ‡ä»¤ä½¿ç”¨çŽ¯å¢ƒå˜é‡æ—¶ï¼Œä½¿ç”¨æ ¼å¼ä¸º$variable_nameæˆ–è€…${variable_name}ã€‚å¦‚æžœåœ¨å˜é‡é¢å‰æ·»åŠ æ–œæ \å¯ä»¥è½¬ä¹‰ã€‚å¦‚\\$fooæˆ–è€…\\${foo}å°†ä¼šè¢«è½¬æ¢ä¸º$fooå’Œ${foo},è€Œä¸æ˜¯çŽ¯å¢ƒå˜é‡æ‰€ä¿å­˜çš„å€¼ã€‚å¦å¤–ï¼ŒONBUILDæŒ‡ä»¤ä¸æ”¯æŒçŽ¯å¢ƒæ›¿æ¢ã€‚ COPYæ ¼å¼: COPY &lt;src&gt; &lt;dest&gt; COPYæŒ‡ä»¤å¤åˆ¶æ‰€æŒ‡å‘çš„æ–‡ä»¶æˆ–ç›®å½•,å°†å®ƒæ·»åŠ åˆ°æ–°é•œåƒä¸­,å¤åˆ¶çš„æ–‡ä»¶æˆ–ç›®å½•åœ¨é•œåƒä¸­çš„è·¯å¾„æ˜¯&lt;dest&gt;ã€‚&lt;src&gt;æ‰€æŒ‡å®šçš„æºå¯ä»¥æœ‰å¤šä¸ª,ä½†å¿…é¡»æ˜¯ä¸Šä¸‹æ–‡æ ¹ç›®å½•ä¸­çš„ç›¸å¯¹è·¯å¾„ã€‚ä¸èƒ½åªç”¨å½¢å¦‚ COPY ../something /somethingè¿™æ ·çš„æŒ‡ä»¤ã€‚æ­¤å¤–,&lt;src&gt;å¯ä»¥ä½¿ç”¨é€šé…ç¬¦æŒ‡å‘æ‰€æœ‰åŒ¹é…é€šé…ç¬¦çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œä¾‹å¦‚ï¼ŒCOPY home* /mydir/ è¡¨ç¤ºæ·»åŠ æ‰€æœ‰ä»¥â€homâ€å¼€å¤´çš„æ–‡ä»¶åˆ°ç›®å½•/mydir/ä¸­ã€‚ &lt;dest&gt;å¯ä»¥æ˜¯æ–‡ä»¶æˆ–ç›®å½•ï¼Œä½†å¿…é¡»æ˜¯ç›®æ ‡é•œåƒä¸­çš„ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹äºŽWORKDIRçš„ç›¸å¯¹è·¯å¾„(WORKDIRå³Dockerfileä¸­WORKDIRæŒ‡ä»¤æŒ‡å®šçš„è·¯å¾„,ç”¨æ¥ä¸ºå…¶ä»–æŒ‡ä»¤è®¾ç½®å·¥ä½œç›®å½•)ã€‚è‹¥&lt;dest&gt;ä»¥åæ–œæ /ç»“å°¾åˆ™å…¶æŒ‡å‘çš„æ˜¯ç›®å½•ï¼›å¦åˆ™æŒ‡å‘æ–‡ä»¶ã€‚&lt;src&gt;åŒç†ã€‚è‹¥&lt;dest&gt;æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåˆ™&lt;src&gt;çš„å†…å®¹ä¼šè¢«å†™åˆ°&lt;dest&gt;ä¸­ï¼›å¦åˆ™&lt;src&gt;æŒ‡å‘çš„æ–‡ä»¶æˆ–ç›®å½•ä¸­çš„å†…å®¹ä¼šè¢«å¤åˆ¶æ·»åŠ åˆ°&lt;dest&gt;ç›®å½•ä¸­ã€‚å½“&lt;src&gt;æŒ‡å®šå¤šä¸ªæºæ—¶ï¼Œ&lt;dest&gt;å¿…é¡»æ˜¯ç›®å½•ã€‚å¦‚æžœ&lt;dest&gt;ä¸å­˜åœ¨ï¼Œåˆ™è·¯å¾„ä¸­ä¸å­˜åœ¨çš„ç›®å½•ä¼šè¢«åˆ›å»ºã€‚ ADDæ ¼å¼: ADD &lt;src&gt; &lt;dest&gt; ADDä¸ŽCOPYæŒ‡ä»¤åœ¨åŠŸèƒ½ä¸Šå¾ˆç›¸ä¼¼ï¼Œéƒ½æ”¯æŒå¤åˆ¶æœ¬åœ°æ–‡ä»¶åˆ°é•œåƒçš„åŠŸèƒ½ï¼Œä½†ADDæŒ‡ä»¤è¿˜æ”¯æŒå…¶ä»–åŠŸèƒ½ã€‚&lt;src&gt;å¯ä»¥æ˜¯æŒ‡å‘ç½‘ç»œæ–‡ä»¶çš„URL,æ­¤æ—¶è‹¥&lt;dest&gt;æŒ‡å‘ä¸€ä¸ªç›®å½•ï¼Œåˆ™URLå¿…é¡»æ˜¯å®Œå…¨è·¯å¾„ï¼Œè¿™æ ·å¯ä»¥èŽ·å¾—ç½‘ç»œæ–‡ä»¶çš„æ–‡ä»¶åfilenameï¼Œè¯¥æ–‡ä»¶ä¼šè¢«å¤åˆ¶æ·»åŠ åˆ°&lt;dest&gt;/&lt;filename&gt;ã€‚æ¯”å¦‚ ADD http://example.com/config.proâ€¦ / ä¼šåˆ›å»ºæ–‡ä»¶/config.propertyã€‚ &lt;src&gt;è¿˜å¯ä»¥æŒ‡å‘ä¸€ä¸ªæœ¬åœ°åŽ‹ç¼©å½’æ¡£æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¼šåœ¨å¤åˆ¶åˆ°å®¹å™¨æ—¶ä¼šè¢«è§£åŽ‹æå–ï¼Œå¦‚ADD sxample.tar.xz /ã€‚ä½†æ˜¯è‹¥URLä¸­çš„æ–‡ä»¶ä¸ºå½’æ¡£æ–‡ä»¶åˆ™ä¸ä¼šè¢«è§£åŽ‹æå–ã€‚ ADD å’Œ COPYæŒ‡ä»¤è™½ç„¶åŠŸèƒ½ç›¸ä¼¼ï¼Œä½†ä¸€èˆ¬æŽ¨èä½¿ç”¨COPY,å› ä¸ºCOPYåªæ”¯æŒæœ¬åœ°æ–‡ä»¶ï¼Œç›¸æ¯”ADDè€Œè¨€ï¼Œå®ƒæ›´åŠ é€æ˜Žã€‚ EXPOSEæ ¼å¼: EXPOSE &lt;port&gt; [&lt;port&gt;/&lt;protocol&gt;...] EXPOSEæŒ‡ä»¤é€šçŸ¥Dockerè¯¥å®¹å™¨åœ¨è¿è¡Œæ—¶ä¾¦å¬æŒ‡å®šçš„ç½‘ç»œç«¯å£ã€‚å¯ä»¥æŒ‡å®šç«¯å£æ˜¯ä¾¦å¬TCPè¿˜æ˜¯UDPï¼Œå¦‚æžœæœªæŒ‡å®šåè®®ï¼Œåˆ™é»˜è®¤å€¼ä¸ºTCPã€‚è¿™ä¸ªæŒ‡ä»¤ä»…ä»…æ˜¯å£°æ˜Žå®¹å™¨æ‰“ç®—ä½¿ç”¨ä»€ä¹ˆç«¯å£è€Œå·²ï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨åœ¨å®¿ä¸»æœºè¿›è¡Œç«¯å£æ˜ å°„,å¯ä»¥åœ¨è¿è¡Œçš„æ—¶å€™é€šè¿‡docker -pæŒ‡å®šã€‚ 12EXPOSE 80/tcpEXPOSE 80/udp USERæ ¼å¼: USER &lt;user&gt;[:&lt;group] æˆ–è€… USER &lt;UID&gt;[:&lt;GID&gt;] USERæŒ‡ä»¤è®¾ç½®äº†user nameå’Œuser group(å¯é€‰)ã€‚åœ¨å®ƒä¹‹åŽçš„RUN,CMDä»¥åŠENTRYPOINTæŒ‡ä»¤éƒ½ä¼šä»¥è®¾ç½®çš„useræ¥æ‰§è¡Œã€‚ WORKERæ ¼å¼: WORKDIR /path/to/workdir WORKDIRæŒ‡ä»¤è®¾ç½®å·¥ä½œç›®å½•ï¼Œå®ƒä¹‹åŽçš„RUNã€CMDã€ENTRYPOINTã€COPYä»¥åŠADDæŒ‡ä»¤éƒ½ä¼šåœ¨è¿™ä¸ªå·¥ä½œç›®å½•ä¸‹è¿è¡Œã€‚å¦‚æžœè¿™ä¸ªå·¥ä½œç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªã€‚WORKDIRæŒ‡ä»¤å¯åœ¨Dockerfileä¸­å¤šæ¬¡ä½¿ç”¨ã€‚å¦‚æžœæä¾›äº†ç›¸å¯¹è·¯å¾„ï¼Œåˆ™å®ƒå°†ç›¸å¯¹äºŽä¸Šä¸€ä¸ªWORKDIRæŒ‡ä»¤çš„è·¯å¾„ã€‚ä¾‹å¦‚ 1234WORKDIR /aWORKDIR bWORKDIR cRUN pwd è¾“å‡ºç»“æžœæ˜¯ /a/b/c RUNæ ¼å¼1ï¼š RUN &lt;command&gt; (shellæ ¼å¼)æ ¼å¼2ï¼š RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;] (execæ ¼å¼ï¼ŒæŽ¨èä½¿ç”¨) RUNæŒ‡ä»¤ä¼šåœ¨å‰ä¸€æ¡å‘½ä»¤åˆ›å»ºå‡ºçš„é•œåƒçš„åŸºç¡€ä¸Šåˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œå¹¶åœ¨å®¹å™¨ä¸­è¿è¡Œå‘½ä»¤ï¼Œåœ¨å‘½ä»¤ç»“æŸè¿è¡ŒåŽæäº¤å®¹å™¨ä¸ºæ–°é•œåƒï¼Œæ–°é•œåƒè¢«Dockerfileä¸­çš„ä¸‹ä¸€æ¡æŒ‡ä»¤ä½¿ç”¨ã€‚ RUNæŒ‡ä»¤çš„ä¸¤ç§æ ¼å¼è¡¨ç¤ºå‘½ä»¤åœ¨å®¹å™¨ä¸­çš„ä¸¤ç§è¿è¡Œæ–¹å¼ã€‚å½“ä½¿ç”¨shellæ ¼å¼æ—¶ï¼Œå‘½ä»¤é€šè¿‡/bin/sh -cè¿è¡Œã€‚å½“ä½¿ç”¨execæ ¼å¼æ—¶ï¼Œå‘½ä»¤æ˜¯ç›´æŽ¥è¿è¡Œçš„ï¼Œå®¹å™¨ä¸è°ƒç”¨shellç¨‹åºï¼Œå³å®¹å™¨ä¸­æ²¡æœ‰shellç¨‹åºã€‚execæ ¼å¼ä¸­çš„å‚æ•°ä¼šè¢«å½“æˆJSONæ•°ç»„è¢«Dockerè§£æžï¼Œæ•…å¿…é¡»ä½¿ç”¨åŒå¼•å·è€Œä¸èƒ½ä½¿ç”¨å•å¼•å·ã€‚å› ä¸ºexecæ ¼å¼ä¸ä¼šåœ¨shellä¸­æ‰§è¡Œï¼Œæ‰€ä»¥çŽ¯å¢ƒå˜é‡çš„å‚æ•°ä¸ä¼šè¢«æ›¿æ¢ã€‚ æ¯”å¦‚æ‰§è¡ŒRUN [&quot;echo&quot;, &quot;$HOME&quot;]æŒ‡ä»¤æ—¶ï¼Œ$HOMEä¸ä¼šåšå˜é‡æ›¿æ¢ã€‚å¦‚æžœå¸Œæœ›è¿è¡Œshellç¨‹åºï¼ŒæŒ‡ä»¤å¯ä»¥å†™æˆ RUN [&quot;/bin/bash&quot;, &quot;-c&quot;, &quot;echo&quot;, &quot;$HOME&quot;]ã€‚ CMDCMDæŒ‡ä»¤æœ‰3ç§æ ¼å¼ã€‚ æ ¼å¼1ï¼šCMD &lt;command&gt; (shellæ ¼å¼)æ ¼å¼2ï¼šCMD [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;] (execæ ¼å¼ï¼ŒæŽ¨èä½¿ç”¨)æ ¼å¼3ï¼šCMD [&quot;param1&quot;, &quot;param2&quot;] (ä¸ºENTRYPOINTæŒ‡ä»¤æä¾›å‚æ•°) CMDæŒ‡ä»¤æä¾›å®¹å™¨è¿è¡Œæ—¶çš„é»˜è®¤å€¼ï¼Œè¿™äº›é»˜è®¤å€¼å¯ä»¥æ˜¯ä¸€æ¡æŒ‡ä»¤ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€äº›å‚æ•°ã€‚ä¸€ä¸ªDockerfileä¸­å¯ä»¥æœ‰å¤šæ¡CMDæŒ‡ä»¤ï¼Œä½†åªæœ‰æœ€åŽä¸€æ¡CMDæŒ‡ä»¤æœ‰æ•ˆã€‚CMD [â€œparam1â€, â€œparam2â€]æ ¼å¼æ˜¯åœ¨CMDæŒ‡ä»¤å’ŒENTRYPOINTæŒ‡ä»¤é…åˆæ—¶ä½¿ç”¨çš„ï¼ŒCMDæŒ‡ä»¤ä¸­çš„å‚æ•°ä¼šæ·»åŠ åˆ°ENTRYPOINGæŒ‡ä»¤ä¸­.ä½¿ç”¨shellå’Œexecæ ¼å¼æ—¶ï¼Œå‘½ä»¤åœ¨å®¹å™¨ä¸­çš„è¿è¡Œæ–¹å¼ä¸ŽRUNæŒ‡ä»¤ç›¸åŒã€‚ ä¸åŒä¹‹å¤„åœ¨äºŽï¼ŒRUNæŒ‡ä»¤åœ¨æž„å»ºé•œåƒæ—¶æ‰§è¡Œå‘½ä»¤ï¼Œå¹¶ç”Ÿæˆæ–°çš„é•œåƒï¼›CMDæŒ‡ä»¤åœ¨æž„å»ºé•œåƒæ—¶å¹¶ä¸æ‰§è¡Œä»»ä½•å‘½ä»¤ï¼Œè€Œæ˜¯åœ¨å®¹å™¨å¯åŠ¨æ—¶é»˜è®¤å°†CMDæŒ‡ä»¤ä½œä¸ºç¬¬ä¸€æ¡æ‰§è¡Œçš„å‘½ä»¤ã€‚å¦‚æžœç”¨æˆ·åœ¨å‘½ä»¤è¡Œç•Œé¢è¿è¡Œdocker runå‘½ä»¤æ—¶æŒ‡å®šäº†å‘½ä»¤å‚æ•°ï¼Œåˆ™ä¼šè¦†ç›–CMDæŒ‡ä»¤ä¸­çš„å‘½ä»¤ã€‚ ENDPOINTENTRYPOINTæŒ‡ä»¤æœ‰ä¸¤ç§æ ¼å¼ã€‚ æ ¼å¼1ï¼šENTRYPOINT &lt;command&gt; (shellæ ¼å¼)æ ¼å¼2ï¼šENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;] (execæ ¼å¼ï¼ŒæŽ¨èæ ¼å¼) ENTRYPOINTæŒ‡ä»¤å’ŒCMDæŒ‡ä»¤ç±»ä¼¼ï¼Œéƒ½å¯ä»¥è®©å®¹å™¨åœ¨æ¯æ¬¡å¯åŠ¨æ—¶æ‰§è¡Œç›¸åŒçš„å‘½ä»¤ï¼Œä½†å®ƒä»¬ä¹‹é—´åˆæœ‰ä¸åŒã€‚ä¸€ä¸ªDockerfileä¸­å¯ä»¥æœ‰å¤šæ¡ENTRYPOINTæŒ‡ä»¤ï¼Œä½†åªæœ‰æœ€åŽä¸€æ¡ENTRYPOINTæŒ‡ä»¤æœ‰æ•ˆã€‚ å½“ä½¿ç”¨Shellæ ¼å¼æ—¶ï¼ŒENTRYPOINTæŒ‡ä»¤ä¼šå¿½ç•¥ä»»ä½•CMDæŒ‡ä»¤å’Œdocker runå‘½ä»¤çš„å‚æ•°ï¼Œå¹¶ä¸”ä¼šè¿è¡Œåœ¨bin/sh -cä¸­ã€‚è¿™æ„å‘³ç€ENTRYPOINTæŒ‡ä»¤è¿›ç¨‹ä¸ºbin/sh -cçš„å­è¿›ç¨‹,è¿›ç¨‹åœ¨å®¹å™¨ä¸­çš„PIDå°†ä¸æ˜¯1ï¼Œä¸”ä¸èƒ½æŽ¥å—Unixä¿¡å·ã€‚å³å½“ä½¿ç”¨docker stop &lt;container&gt;å‘½ä»¤æ—¶ï¼Œå‘½ä»¤è¿›ç¨‹æŽ¥æ”¶ä¸åˆ°SIGTERMä¿¡å·ã€‚ æŽ¨èä½¿ç”¨execæ ¼å¼ï¼Œä½¿ç”¨æ­¤æ ¼å¼æ—¶ï¼Œdocker runä¼ å…¥çš„å‘½ä»¤å‚æ•°ä¼šè¦†ç›–CMDæŒ‡ä»¤çš„å†…å®¹å¹¶ä¸”é™„åŠ åˆ°ENTRYPOINTæŒ‡ä»¤çš„å‚æ•°ä¸­ã€‚ä»ŽENTRYPOINTçš„ä½¿ç”¨ä¸­å¯ä»¥çœ‹å‡ºï¼ŒCMDå¯ä»¥æ˜¯å‚æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯æŒ‡ä»¤ï¼Œè€ŒENTRYPOINTåªèƒ½æ˜¯å‘½ä»¤ï¼›å¦å¤–ï¼Œdocker runå‘½ä»¤æä¾›çš„è¿è¡Œå‘½ä»¤å‚æ•°å¯ä»¥è¦†ç›–CMD,ä½†ä¸èƒ½è¦†ç›–ENTRYPOINTã€‚ Dockerfileå®žè·µå¿ƒå¾—ä½¿ç”¨æ ‡ç­¾ç»™é•œåƒæ‰“ä¸Šæ ‡ç­¾ï¼Œæœ‰åˆ©äºŽå¸®åŠ©äº†è§£è¿›é•œåƒåŠŸèƒ½ è°¨æ…Žé€‰æ‹©åŸºç¡€é•œåƒé€‰æ‹©åŸºç¡€é•œåƒæ—¶ï¼Œå°½é‡é€‰æ‹©å½“å‰å®˜æ–¹é•œåƒåº“çš„è‚©å®½ï¼Œä¸åŒé•œåƒçš„å¤§å°ä¸åŒï¼Œç›®å‰Linuxé•œåƒå¤§å°ç”±å¦‚ä¸‹å…³ç³»: busybox &lt; debian &lt; centos &lt; ubuntu åŒæ—¶åœ¨æž„å»ºè‡ªå·±çš„Dockeré•œåƒæ—¶,åªå®‰è£…å’Œæ›´æ–°å¿…é¡»ä½¿ç”¨çš„åŒ…ã€‚æ­¤å¤–ç›¸æ¯”Ubuntué•œåƒï¼Œæ›´æŽ¨èä½¿ç”¨Debiané•œåƒï¼Œå› ä¸ºå®ƒéžå¸¸è½»é‡çº§(ç›®å‰å…¶å¤§å°æ˜¯åœ¨100MBä»¥ä¸‹),å¹¶ä¸”ä»ç„¶æ˜¯ä¸€ä¸ªå®Œæ•´çš„å‘å¸ƒç‰ˆæœ¬ã€‚ å……åˆ†åˆ©ç”¨ç¼“å­˜Docker daemonä¼šé¡ºåºæ‰§è¡ŒDockerfileä¸­çš„æŒ‡ä»¤ï¼Œè€Œä¸”ä¸€æ—¦ç¼“å­˜å¤±æ•ˆï¼ŒåŽç»­å‘½ä»¤å°†ä¸èƒ½ä½¿ç”¨ç¼“å­˜ã€‚ä¸ºäº†æœ‰æ•ˆåœ°åˆ©ç”¨ç¼“å­˜ï¼Œéœ€è¦ä¿è¯æŒ‡ä»¤çš„è¿žç»­æ€§ï¼Œå°½é‡å°†æ‰€æœ‰Dockerfileæ–‡ä»¶ç›¸åŒçš„éƒ¨åˆ†éƒ½æ”¾åœ¨å‰é¢ï¼Œè€Œå°†ä¸åŒçš„éƒ¨åˆ†æ”¾åˆ°åŽé¢ã€‚ æ­£ç¡®ä½¿ç”¨ADDä¸ŽCOPYå‘½ä»¤å½“åœ¨Dockerfileä¸­çš„ä¸åŒéƒ¨åˆ†éœ€è¦ç”¨åˆ°ä¸åŒçš„æ–‡ä»¶æ—¶ï¼Œä¸è¦ä¸€æ¬¡æ€§åœ°å°†è¿™äº›æ–‡ä»¶éƒ½æ·»åŠ åˆ°é•œåƒä¸­åŽ»ï¼Œè€Œæ˜¯åœ¨éœ€è¦æ—¶æ·»åŠ ï¼Œè¿™æ ·ä¹Ÿæœ‰åˆ©äºŽé‡å¤åˆ©ç”¨dockerç¼“å­˜ã€‚å¦å¤–è€ƒè™‘åˆ°é•œåƒå¤§å°é—®é¢˜ï¼Œä½¿ç”¨ADDæŒ‡ä»¤åŽ»èŽ·å–è¿œç¨‹URLä¸­çš„åŽ‹ç¼©åŒ…ä¸æ˜¯æŽ¨èçš„åšæ³•ã€‚åº”è¯¥ä½¿ç”¨RUN wgetæˆ–RUN curlä»£æ›¿ã€‚è¿™æ ·å¯ä»¥åˆ é™¤è§£åŽ‹åŽä¸åœ¨éœ€è¦çš„æ–‡ä»¶ï¼Œå¹¶ä¸”ä¸éœ€è¦åœ¨é•œåƒä¸­åœ¨æ·»åŠ ä¸€å±‚ã€‚ é”™è¯¯åšæ³•: 123ADD http://example.com/big.tar.xz /usr/src/things/RUN tar -xJf /usr/src/things/big.tar.xz -C /usr/src/thingsRUN make -C /usr/src/things all æ­£ç¡®çš„åšæ³• 1234RUN mkdir -p /usr/src/things \ &amp;&amp; curl -SL http://example.com/big.tar.xz \ | tar -xJC /usr/src/things \ &amp;&amp; make -C /usr/src/things all RUNæŒ‡ä»¤åœ¨ä½¿ç”¨è¾ƒé•¿çš„RUNæŒ‡ä»¤æ—¶å¯ä»¥ä½¿ç”¨åæ–œæ \åˆ†éš”å¤šè¡Œã€‚å¤§éƒ¨åˆ†ä½¿ç”¨RUNæŒ‡ä»¤çš„å¸¸è§æ˜¯è¿è¡Œapt-wgetå‘½ä»¤ï¼Œåœ¨è¯¥åœºæ™¯ä¸‹è¯·æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ã€‚ ä¸è¦åœ¨ä¸€è¡Œä¸­å•ç‹¬ä½¿ç”¨æŒ‡ä»¤RUN apt-get updateã€‚å½“è½¯ä»¶æºæ›´æ–°åŽï¼Œè¿™æ ·åšä¼šå¼•èµ·ç¼“å­˜é—®é¢˜ï¼Œå¯¼è‡´RUN apt-get installæŒ‡ä»¤è¿è¡Œå¤±è´¥ã€‚æ‰€ä»¥,RUN apt-get updateå’ŒRUN apt-get installåº”è¯¥å†™åœ¨åŒä¸€è¡Œã€‚æ¯”å¦‚ RUN apt-get update &amp;&amp; apt-get install -y package-1 package-2 package-3 é¿å…ä½¿ç”¨æŒ‡ä»¤RUN apt-get upgrade å’Œ RUN apt-get dist-upgradeã€‚å› ä¸ºåœ¨ä¸€ä¸ªæ— ç‰¹æƒçš„å®¹å™¨ä¸­ï¼Œä¸€äº›å¿…è¦çš„åŒ…ä¼šæ›´æ–°å¤±è´¥ã€‚å¦‚æžœéœ€è¦æ›´æ–°ä¸€ä¸ªåŒ…(å¦‚package-1)ï¼Œç›´æŽ¥ä½¿ç”¨å‘½ä»¤RUN apt-get install -y package-1ã€‚ CMDå’ŒENTRYPOINTå‘½ä»¤CMDå’ŒENTRYPOINTå‘½ä»¤æŒ‡å®šæ˜¯äº†å®¹å™¨è¿è¡Œçš„é»˜è®¤å‘½ä»¤ï¼ŒæŽ¨èäºŒè€…ç»“åˆä½¿ç”¨ã€‚ä½¿ç”¨execæ ¼å¼çš„ENTRYPOINTæŒ‡ä»¤è®¾ç½®å›ºå®šçš„é»˜è®¤å‘½ä»¤å’Œå‚æ•°ï¼Œç„¶åŽä½¿ç”¨CMDæŒ‡ä»¤è®¾ç½®å¯å˜çš„å‚æ•°ã€‚ æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­: 123456FROM busyboxWORKDIR /appCOPY run.sh /appRUN chmod +x run.shENTRYPOINT ["/app/run.sh"]CMD ["param1"] run.shå†…å®¹å¦‚ä¸‹: 12#!/bin/shecho &quot;$@&quot; è¿è¡ŒåŽè¾“å‡ºç»“æžœä¸ºparam1, Dockerfileä¸­CMDå’ŒENTRYPOINTçš„é¡ºåºä¸é‡è¦(CMDå†™åœ¨ENTRYPOINTå‰åŽéƒ½å¯ä»¥)ã€‚ å½“åœ¨windowsç³»ç»Ÿä¸‹build dockerfileä½ å¯èƒ½ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ 1standard_init_linux.go:207: exec user process caused &quot;no such file or directory&quot; è¿™æ˜¯å› ä¸ºshæ–‡ä»¶çš„fileformatæ˜¯dos,è¿™é‡Œéœ€è¦ä¿®æ”¹ä¸ºunix,ä¸éœ€è¦ä¸‹è½½é¢å¤–çš„å·¥å…·ï¼Œä¸€èˆ¬æˆ‘ä»¬æœºå™¨ä¸Šå®‰è£…äº†gitä¼šè‡ªå¸¦git bash,è¿›å…¥git bash,ä½¿ç”¨vi ç¼–è¾‘ï¼Œåœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸‹ä¿®æ”¹(:set ff=unix)ã€‚ ä¸è¦åœ¨Dockerfileä¸­åšç«¯å£æ˜ å°„ä½¿ç”¨Dockerfileçš„EXPOSEæŒ‡ä»¤ï¼Œè™½ç„¶å¯ä»¥å°†å®¹å™¨ç«¯å£æ˜ å°„åœ¨ä¸»æœºç«¯å£ä¸Šï¼Œä½†ä¼šç ´åDockerçš„å¯ç§»æ¤æ€§ï¼Œä¸”è¿™æ ·çš„é•œåƒåœ¨ä¸€å°ä¸»æœºä¸Šåªèƒ½å¯åŠ¨ä¸€ä¸ªå®¹å™¨ã€‚æ‰€ä»¥ç«¯å£æ˜ å°„åº”åœ¨docker runå‘½ä»¤ä¸­ç”¨-p å‚æ•°æŒ‡å®š 12345# ä¸è¦å†Dockerfileä¸­åšå¦‚ä¸‹æ˜ å°„EXPOSE 80:8080# ä»…æš´éœ²80ç«¯å£,éœ€è¦å¦åšæ˜ å°„EXPOSE 80 å®žè·µDockerfileJavaæœåŠ¡çš„Dockerfile12345678FROM openjdk:8-jre-alpineENV spring_profiles_active=devENV env_java_debug_enabled=falseEXPOSE 8080WORKDIR /appADD target/smcp-web.jar /app/target/smcp-web.jarADD run.sh /appENTRYPOINT ./run.sh å¯ä»¥çœ‹åˆ°åŸºç¡€é•œåƒæ˜¯openjdk,ç„¶åŽè®¾ç½®äº†ä¸¤ä¸ªçŽ¯å¢ƒå˜é‡,æœåŠ¡è®¿é—®ç«¯å£æ˜¯9090(æ„å‘³ç€springbootåº”ç”¨ä¸­æŒ‡å®šäº†server.port=8080),è®¾ç½®äº†å·¥ä½œç›®å½•æ˜¯/appã€‚é€šè¿‡ENTRYPOINTè®¾å®šäº†å¯åŠ¨é•œåƒæ—¶è¦å¯åŠ¨çš„å‘½ä»¤(./run.sh)ã€‚è¿™ä¸ªè„šæœ¬ä¸­çš„å†…å®¹å¦‚ä¸‹: 12345678#!/bin/sh# Set debug options if requiredif [ x&quot;$&#123;env_java_debug_enabled&#125;&quot; != x ] &amp;&amp; [ &quot;$&#123;env_java_debug_enabled&#125;&quot; != &quot;false&quot; ]; then java_debug_args=&quot;-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005&quot;fi# ex: env_jvm_flags=&quot;-Xmx1200m -XX:MaxRAM=1500m&quot; for productionjava $java_debug_args $env_jvm_flags -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -jar target/smcp-web.jar å¦‚æžœæˆ‘ä»¬è¦æŒ‡å®šjvmçš„ä¸€äº›å‚æ•°,å¯ä»¥é€šè¿‡åœ¨çŽ¯å¢ƒå˜é‡ä¸­è®¾ç½®env_jvm_flagsæ¥æŒ‡å®šã€‚ Maven Dockerfilemavençš„Dockerfileä¹Ÿå†™çš„å¾ˆå¥½ï¼Œè¿™é‡Œæˆ‘å‘ä¸Šæ¥ä¹Ÿç»™å¤§å®¶å‚è€ƒä¸‹ 12345678910111213141516171819202122FROM openjdk:8-jdkARG MAVEN_VERSION=3.6.3ARG USER_HOME_DIR="/root"ARG SHA=c35a1803a6e70a126e80b2b3ae33eed961f83ed74d18fcd16909b2d44d7dada3203f1ffe726c17ef8dcca2dcaa9fca676987befeadc9b9f759967a8cb77181c0ARG BASE_URL=https://apache.osuosl.org/maven/maven-3/$&#123;MAVEN_VERSION&#125;/binariesRUN mkdir -p /usr/share/maven /usr/share/maven/ref \ &amp;&amp; curl -fsSL -o /tmp/apache-maven.tar.gz $&#123;BASE_URL&#125;/apache-maven-$&#123;MAVEN_VERSION&#125;-bin.tar.gz \ &amp;&amp; echo "$&#123;SHA&#125; /tmp/apache-maven.tar.gz" | sha512sum -c - \ &amp;&amp; tar -xzf /tmp/apache-maven.tar.gz -C /usr/share/maven --strip-components=1 \ &amp;&amp; rm -f /tmp/apache-maven.tar.gz \ &amp;&amp; ln -s /usr/share/maven/bin/mvn /usr/bin/mvnENV MAVEN_HOME /usr/share/mavenENV MAVEN_CONFIG "$USER_HOME_DIR/.m2"COPY mvn-entrypoint.sh /usr/local/bin/mvn-entrypoint.shCOPY settings-docker.xml /usr/share/maven/ref/ENTRYPOINT ["/usr/local/bin/mvn-entrypoint.sh"]CMD ["mvn"] å¯ä»¥çœ‹åˆ°å®ƒæ˜¯åŸºäºŽopenjdkè¿™ä¸ªåŸºç¡€é•œåƒæ¥åˆ›å»ºçš„ï¼Œå…ˆåŽ»ä¸‹è½½mavençš„åŒ…ï¼Œç„¶åŽè¿›è¡Œäº†å®‰è£…ã€‚ ç„¶åŽåˆè®¾ç½®äº†MAVEN_HOMEå’ŒMAVEN_CONFIGè¿™ä¸¤ä¸ªçŽ¯å¢ƒå˜é‡ï¼Œæœ€åŽé€šè¿‡mvn-entrypoing.shæ¥è¿›è¡Œäº†å¯åŠ¨ã€‚ å‰ç«¯æœåŠ¡çš„ä¸¤é˜¶æ®µæž„å»ºæˆ‘æœ‰ä¸€ä¸ªå‰ç«¯æœåŠ¡ï¼Œç›®å½•ç»“æž„å¦‚ä¸‹ï¼š 12$ ls frontend/myaccount/ resources/ third_party/ myaccountç›®å½•ä¸‹æ˜¯æ”¾ç½®çš„js,vueç­‰ï¼Œresourcesæ”¾ç½®çš„æ˜¯css,imagesç­‰ã€‚third_partyæ”¾çš„æ˜¯ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚ è¿™é‡Œé‡‡ç”¨äº†ä¸¤é˜¶æ®µæž„å»ºï¼Œå³é‡‡ç”¨ä¸Šä¸€é˜¶æ®µçš„æž„å»ºç»“æžœä½œä¸ºä¸‹ä¸€é˜¶æ®µçš„æž„å»ºæ•°æ® 1234567891011121314151617FROM node:alpine as builderWORKDIR '/build'COPY myaccount ./myaccountCOPY resources ./resourcesCOPY third_party ./third_partyWORKDIR '/build/myaccount'RUN npm installRUN npm rebuild node-sassRUN npm run buildRUN ls /build/myaccount/distFROM nginxEXPOSE 80COPY --from=builder /build/myaccount/dist /usr/share/nginx/html éœ€è¦æ³¨æ„ç»“å°¾çš„ --from=builderè¿™é‡Œå’Œå¼€å¤´æ˜¯é¥ç›¸å‘¼åº”çš„ã€‚]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Dockerfile</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½¬-æ­£åˆ™]]></title>
    <url>%2Fregex%2F</url>
    <content type="text"><![CDATA[åœ¨ç ”å‘ä¸­ , ç»å¸¸ç”¨åˆ°æ­£åˆ™è¡¨è¾¾å¼ , çœ‹è¿‡å¾ˆå¤šæ¬¡ , åœ¨ç”¨æ—¶å´è®°ä¸ä½ , è¿™é‡Œè½¬ç¯‡ç»“åˆä¾‹å­è®²è§£çš„æ–‡ç« ä»¥è®°å½•. è½¬è‡ª æŽ˜é‡‘ æ­£åˆ™è¡¨è¾¾å¼1.1 åŸºæœ¬è¯­æ³•é€šè¿‡ä¸€å¼ å›¾è¡¨æ¥å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„åŸºæœ¬è¿›è¡Œä¸€ä¸ªå›žé¡¾ single char quantifiers(æ•°é‡) position(ä½ç½®) \d åŒ¹é…æ•°å­— * 0ä¸ªæˆ–è€…æ›´å¤š ^ä¸€è¡Œçš„å¼€å¤´ \w åŒ¹é…word(æ•°å­—ã€å­—æ¯) + 1ä¸ªæˆ–æ›´å¤šï¼Œè‡³å°‘1ä¸ª $ä¸€è¡Œçš„ç»“å°¾ \W åŒ¹é…éžword(æ•°å­—ã€å­—æ¯) ? 0ä¸ªæˆ–1ä¸ª,ä¸€ä¸ªOptional \b å•è¯â€ç»“ç•Œâ€(word bounds) \s åŒ¹é…white space(åŒ…æ‹¬ç©ºæ ¼ã€tabç­‰) {min,max}å‡ºçŽ°æ¬¡æ•°åœ¨ä¸€ä¸ªèŒƒå›´å†… \S åŒ¹é…éžwhite space(åŒ…æ‹¬ç©ºæ ¼ã€tabç­‰) {n}åŒ¹é…å‡ºçŽ°næ¬¡çš„ . åŒ¹é…ä»»ä½•ï¼Œä»»ä½•çš„å­—ç¬¦ 1.1.1 single charå‡è®¾ä½ æœ‰ä¸€æ®µå­—ç¬¦å¦‚ä¸‹: 1These are some phone numbers 917-555-1234. Also, you can call me at 645.555.1234 and of course I&apos;m always reachable at (212)867-5309. \w å°†åŒ¹é…æ‰€æœ‰wordï¼Œå½“ç„¶ï¼Œ() - ç­‰å­—ç¬¦é™¤å¤– \w\w\w æ³¨æ„æ­£åˆ™è¡¨è¾¾å¼æ˜¯åŒ¹é…ä¸€ä¸ªè¿žç»­ä¸²çš„è§„åˆ™ï¼Œæ‰€ä»¥å¯ä»¥çœ‹åˆ°ä¸‰ä¸ªå­—æ¯çš„å•è¯å¯ä»¥åŒ¹é…åˆ°ï¼Œ6ä¸ªå•è¯çš„ä¹Ÿå¯ä»¥åŒ¹é…åˆ°ã€‚ \s\s åŒ¹é…åˆ°ä¸€è¡Œä¸­è¿žç»­ä¸¤ä¸ªç©ºæ ¼ quantifierså‡è®¾æˆ‘ä»¬æœ‰ä¸€æ®µè¯: 12The colors of the rainbow have many colours and the rainbow does not have a single colour. æˆ‘ä»¬æƒ³æŠŠæ‰€æœ‰çš„é¢œè‰²æ‰¾å‡ºæ¥colors colours colour ç­”æ¡ˆ colou?rs? å—¯ï¼Œçœ‹èµ·æ¥å¾ˆç®€å•ï¼Œå¾ˆæ–¹ä¾¿ã€‚ å¥½äº†ï¼ŒçŽ°åœ¨æƒ³è¦åŒ¹é…ä¸€è¡Œä¸­çš„4ä¸ªæ•°å­—ï¼Œæˆ–è€…ä¸€è¡Œä¸­çš„5ä¸ªå­—æ¯ç­‰ï¼Œè¿™æ—¶å€™ç”¨quantifierså°±éžå¸¸æ–¹ä¾¿äº†ã€‚ æˆ‘çŽ°åœ¨æƒ³æ‰¾5ä¸ªå­—æ¯ç»„æˆçš„å•è¯ \w{5} è¿™æ ·å¯ä»¥å—ï¼Ÿå—¯..ä¸è¡Œçš„ï¼Œçœ‹ä¸‹å®ƒåŒ¹é…çš„å†…å®¹,å¦‚ä¸‹: â€˜These are some phone numbers 915-555-1234â€¦â€™ çš„ç¡®ï¼Œæˆ‘ä»¬æ¨¡æ¿ç»™çš„å¾ˆç®€å•ï¼Œå®ƒåªæ‰¾ä¸€è¡Œä¸­ï¼Œè¿žç»­å‡ºçŽ°5ä¸ªå­—æ¯çš„åºåˆ—ã€‚æ‰€ä»¥çŽ°åœ¨æ”¹è¿›ä¸€ä¸‹å¥½äº† \w{5}\s ä¸ºäº†èƒ½æ‰¾åˆ°å•è¯ï¼Œæ‰€ä»¥æˆ‘å¸Œæœ›5ä¸ªå­—æ¯åŽï¼Œè·Ÿä¸€ä¸ªç©ºæ ¼çš„åºåˆ—ï¼Œè¿™æ ·åº”è¯¥å¯ä»¥äº†å§ï¼Œçœ‹ä¸‹åŒ¹é…æƒ…å†µï¼š â€˜Theseare some phonenumbers915-555-1234â€¦â€™ å—¯ï¼Œæ˜¯çš„ï¼Œåªæœ‰ç›®å‰è¿™äº›æ–¹æ³•ï¼Œæ˜¯åšä¸åˆ°çš„ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ç¬¬ä¸‰ä¸ªå·¥å…· â€œpositionâ€ 1.1.2 positionå›žåˆ°åˆšæ‰çš„é—®é¢˜ä¹‹å‰ï¼Œå…ˆç†Ÿæ‚‰ä¸‹^ $ å’Œ \b 12345678This is somthingis abouta blahwordssequence of wordsHello andGoodBye and Go gogo! æ¥çœ‹ä¸‹å„ç§æ­£åˆ™æ‰€åŒ¹é…çš„å†…å®¹ \w+ è¿™ä¸ªåº”è¯¥æ¯«æ— ç–‘é—®ï¼ŒåŒ¹é…æ‰€æœ‰çš„words ^\w+ å¤šäº†ä¸€ä¸ª ^ ,è¿™æ ·å­,å°±åªèƒ½åŒ¹é…åˆ°æ¯ä¸€è¡Œå¼€å¤´çš„å•è¯äº† \w+$ è¿™æ ·å°±èƒ½åŒ¹é…åˆ°æ¯è¡Œçš„æœ€åŽä¸€ä¸ªå­—æ¯äº† å›žåˆ°åˆšæ‰çš„é—®é¢˜ çŽ°åœ¨æƒ³æ‰¾5ä¸ªå­—æ¯ç»„æˆçš„å•è¯ å°±å˜å¾—å¾ˆç®€å•äº†ï¼Œä½¿ç”¨å•è¯ç»“ç•Œç¬¦\b ç­”æ¡ˆå°±æ˜¯\b\w{5}\b 1.1.3 æ‰¾ä¸ªç”µè¯å·ç æœ€åŽï¼Œæ‰¾ä¸€ä¸ªåˆšæ‰å‡ºçŽ°çš„ç”µè¯å·123-456-1231 ç”¨ä»¥ä¸Šæœ€åŸºæœ¬çš„æ­£åˆ™æ–¹æ³•å°±æ˜¯ \d{3}-\d{3}-\d{4}ï¼Œè¿™æ ·å°±æ‰¾åˆ°äº†ã€‚ ä½†æ˜¯æœ‰çš„æ—¶å€™ï¼Œç”µè¯å·ç æ˜¯123.456.1234 æˆ–è€… (212)867-4233çš„ç»“æž„æ€Žä¹ˆåŠžå‘¢ï¼Ÿ æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„æˆ–æˆ–è€…å…¶ä»–è¡¨è¾¾æ–¹å¼ï¼Œä¸‹é¢ä¸€ä¸€æ¥ä»‹ç»ã€‚ 1.2 å­—ç¬¦åˆ†ç±»(char class)å‰é¢è®°å½•äº†æœ€åŸºæœ¬çš„æ–¹æ³• , æŽ¥ä¸‹æ¥è¯´ä¸€ä¸‹åˆ†ç±»ç¬¦ [] è¿™ä¸ªç¬¦å·ç”¨æ¥è¡¨ç¤ºé€»è¾‘å…³ç³»æˆ–ï¼Œæ¯”å¦‚[abc]è¡¨ç¤ºaæˆ–è€…bæˆ–c.[-.]è¡¨ç¤ºç¬¦å·-æˆ–è€….å·(æ³¨æ„è¿™é‡Œï¼Œåœ¨[]ä¸­çš„.å·ä»£è¡¨çš„å°±æ˜¯è¿™ä¸ªç¬¦å·ï¼Œä½†æ˜¯å¦‚æžœåœ¨å…¶å¤–é¢ï¼Œè¡¨ç¤ºä¸ªåŒ¹é…æ‰€æœ‰ã€‚ æ‰€ä»¥å¦‚æžœä¸åœ¨[]ä¹‹ä¸­ï¼Œæƒ³è¦åŒ¹é…â€™.â€™ï¼Œå°±è¦é€šè¿‡è½¬æ„ç¬¦å·\.) 1.2.1 åˆ†ç±»çš„ç®€å•åº”ç”¨å­—ç¬¦åºåˆ—: 1The lynk is quite a link don&apos;t you think? l nk l(nk æ­£åˆ™è¡¨è¾¾å¼ï¼š l[yi (]nk ç»“æžœ: 1lynk link l nk l(nk å¾ˆå®¹æ˜“ç†è§£çš„ï¼Œå°±æ˜¯è¡¨è¾¾æˆ–é€»è¾‘ã€‚ 1.2.2 åŒ¹é…æ‰€æœ‰å¯èƒ½çš„ç”µè¯å·ç å¥½äº†ï¼ŒçŽ°åœ¨å›žåˆ°ä¹‹å‰é—ç•™çš„é—®é¢˜ï¼Œæœ‰ä»¥ä¸‹å­—æ®µï¼Œè¯·åŒ¹é…æ‰€æœ‰å¯èƒ½çš„ç”µè¯å·ç ï¼š 123These are some phone numbers 915-134-3122. Also,you can call me at 643.123.1333 and of course,I&apos;m always reachable at (212)867-5509 å¥½çš„ï¼Œä¸€æ­¥ä¸€æ­¥æ¥ï¼Œåˆšæ‰æˆ‘ä»¬ä½¿ç”¨\d{3}-\d{3}-\d{4}åŒ¹é…äº†è¿žå­—ç¬¦çš„æƒ…å†µã€‚çŽ°åœ¨æˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„æŠŠ.è¿™ç§æƒ…å†µåŠ è¿›åŽ»äº† ç¬¬ä¸€æ­¥ï¼š \d{3}[-.]\d{3}[-.]\d{4} ç¬¬äºŒæ­¥: ä¸ºäº†èƒ½å¤ŸåŒ¹é…æ‹¬å·ï¼Œå¯ä»¥ä½¿ç”¨?æ¥ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªoptioné€‰æ‹©ã€‚æ‰€ä»¥æœ€åŽå°±æˆäº† 1\(?\d&#123;3&#125;[-.)]\d&#123;3&#125;[-.]\d&#123;4&#125; è¿™é‡Œè¿˜æ˜¯è¦è¯´æ˜Žï¼Œåœ¨[]ä¸­ï¼Œç‰¹æ®Šå­—ç¬¦ä¸éœ€è¦è½¬ä¹‰ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨ï¼Œæ¯”å¦‚[.()],ä½†æ˜¯åœ¨å¤–é¢ï¼Œæ˜¯éœ€è¦è½¬ä¹‰çš„\( \.ç­‰ 1.2.3 []çš„ç‰¹æ®Šè¯­æ³•åˆšæ‰ä»‹ç»äº†æœ€ç®€å•å’ŒåŸºæœ¬çš„åŠŸèƒ½ï¼Œä½†æ˜¯æœ‰äº›ç‰¹æ®Šçš„åœ°æ–¹éœ€è¦æ³¨æ„ 1. -è¿žæŽ¥ç¬¦æ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦æ—¶ æ¯”å¦‚[-.]çš„å«ä¹‰æ˜¯è¿žå­—ç¬¦-æˆ–è€…ç‚¹ç¬¦.ã€‚ ä½†æ˜¯ï¼Œå¦‚æžœå½“è¿žå­—ç¬¦ä¸æ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦æ—¶ï¼Œæ¯”å¦‚[a-z]ï¼Œè¿™å°±è¡¨ç¤ºæ˜¯ä»Žå­—æ¯aåˆ°å­—ç¬¦zã€‚ 2. []ä¸­çš„^ ^åœ¨ä¹‹å‰ä»‹ç»ä¸­ï¼Œæ˜¯è¡¨ç¤ºä¸€è¡Œå¼€å¤´ï¼Œä½†æ˜¯åœ¨[]ä¸­ï¼Œæœ‰ç€ä¸åŒçš„å«ä¹‰ã€‚ [ab] è¡¨ç¤ºaæˆ–è€…b [^ab] å•¥éƒ½è¡Œï¼Œåªè¦ä¸æ˜¯aæˆ–b(anythings except a and b)ï¼Œç›¸å½“äºŽå–å 1.2.4 []å’Œ()é™¤äº†ä½¿ç”¨[]è¡¨ç¤ºæˆ–é€»è¾‘,()ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ç”¨æ³•æ˜¯(a|b)è¡¨ç¤ºaæˆ–è€…b æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼ŒåŒ¹é…æ‰€æœ‰email 123gaoyaqi411@126.com dyumc@google.net sam@sjtu.edu æ€è·¯ï¼š é¦–å…ˆè¦æƒ³æˆ‘åˆ°åº•ç›¸åŒ¹é…ä»€ä¹ˆï¼Œè¿™é‡Œæˆ‘æƒ³åŒ¹é…çš„æ˜¯ ä»»ä½•ä¸€ä¸ªä»¥wordså¼€å¤´çš„ï¼Œä¸€ä¸ªæˆ–æ›´å¤š \w+ ç´§æŽ¥ç€æ˜¯ä¸€ä¸ª@ç¬¦å· \w+@ æŽ¥ç€æœ‰ä¸€ä¸ªæˆ–è€…æ›´å¤šçš„words \w+@\w+ æŽ¥ç€ä¸€ä¸ª.æ ‡ç‚¹ \w+@\w+\. æŽ¥ç€ä¸€ä¸ªcom net æˆ– edu \w+@\w+\.(com|net|edu) è¿˜æ˜¯æé†’æ³¨æ„ç¬¬å››æ­¥çš„\.è½¬ä¹‰ç¬¦å· å¥½äº†ï¼Œè¿™æ ·å‡ å¯ä»¥åŒ¹é…ä»¥ä¸Šçš„æ‰€æœ‰é‚®ç®±äº†ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºé‚®ç®±ç”¨æˆ·åæ˜¯å¯ä»¥æœ‰.çš„ï¼Œæ¯”å¦‚vincent.ko@126.com å…¶å®žä»ç„¶å¾ˆç®€å•ï¼Œä¿®å¤å¦‚ä¸‹ï¼š [\w.]+@\w+\.(com|net|edu) 1.2.5 æ€»ç»“ []çš„ä½œç”¨ï¼Œç”¨è‹±æ–‡è¡¨è¾¾å°±æ˜¯â€alternationâ€,è¡¨è¾¾ä¸€ä¸ªæˆ–çš„é€»è¾‘ï¼› /[-.(]/ åœ¨ç¬¦å·ä¸­çš„è¿žå­—ç¬¦-æ”¾åœ¨ç¬¬ä¸€ä½è¡¨ç¤ºè¿žå­—ç¬¦æœ¬èº«ï¼Œå¦‚æžœæ”¾åœ¨ä¸­é—´ï¼Œè¡¨ç¤ºâ€ä»Ž..åˆ°..â€ï¼Œæ¯”å¦‚[a-z]è¡¨ç¤ºa-z [.)] æ‹¬å·ä¸­çš„ç‰¹æ®Šç¬¦å·ä¸éœ€è¦è½¬ä¹‰ï¼Œå°±è¡¨ç¤ºå…¶æœ¬èº« [^ab]æ‹¬å·ä¸­çš„^è¡¨ç¤ºéžï¼Œanythings exceptaandb (a|b)ä¹Ÿå¯è¡¨ç¤ºé€‰æ‹©ï¼Œä½†æ˜¯å®ƒæœ‰æ›´å¼ºå¤§çš„åŠŸèƒ½â€¦. æ‰€ä»¥ï¼Œ()çš„å¼ºå¤§åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ åˆ†ç»„æ•èŽ·ï¼Œè¿™å¯¹åºåˆ—çš„æ›¿æ¢ã€äº¤æ¢æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚ åŽé¢ä¸€èŠ‚è¿›è¡Œå­¦ä¹ è®°å½• 1.3 åˆ†ç»„æ•èŽ·(capturing groups)ä»€ä¹ˆæ˜¯åˆ†ç»„æ•èŽ·ï¼ŒçŽ°åœ¨å›žåˆ°ä¹‹å‰ç”µè¯å·ç çš„ä¾‹å­ 12345678212-555-1234915-412-1333//æˆ‘æƒ³è¦ä¿ç•™åŒºå·ï¼ŒæŠŠåŽé¢çš„ç”µè¯å·ç å˜ä¸ºé€šç”¨æ€§çš„ðŸ‘‡ðŸ‘‡ðŸ‘‡ðŸ‘‡ðŸ‘‡ðŸ‘‡ðŸ‘‡ðŸ‘‡ðŸ‘‡ðŸ‘‡ðŸ‘‡ðŸ‘‡212-xxx-xxxx915-xxx-xxxx æŒ‰ç…§ä¹‹å‰çš„åšæ³•\d{3}-\d{3}-\d{4},è¿™ç§åŒ¹é…çš„æ–¹å¼ï¼Œæ˜¯å°†æ•´ä¸ªç”µè¯å·ç ä½œä¸ºä¸€ä¸ªç»„(group)åŒ¹é…èµ·æ¥ã€‚ æˆ‘ä»¬æŠŠ212-555-1234è¿™æ ·çš„å«Group0ã€‚ è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æžœæˆ‘ä»¬åŠ äº†ä¸€ä¸ªæ‹¬å·\d{3}-(\d{3})-\d{4}ï¼Œé‚£ä¹ˆåŒ¹é…åˆ°çš„555å°±å«Group1ã€‚ ä»¥æ­¤ç±»æŽ¨ï¼Œå¦‚æžœæœ‰ä¸¤ä¸ªå°æ‹¬å·\d{3}-(\d{3})-(\d{4})é‚£ä¹ˆåˆ†ç»„å°±æ˜¯ä¸‹é¢çš„æƒ…å†µï¼š 1.3.1 é€‰æ‹©åˆ†ç»„çŽ°åœ¨ç»„å·²ç»åˆ†å¥½ï¼Œé‚£ä¹ˆå¦‚ä½•é€‰æ‹©å·²ç»åŒ¹é…çš„åˆ†ç»„ï¼Ÿ è¿™é‡Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§ä½¿ç”¨$ç¬¦å·ï¼Œæ¯”å¦‚$1 ä»£è¡¨555,$2ä»£è¡¨1234ï¼›ç¬¬äºŒç§ï¼Œä½¿ç”¨\,æ¯”å¦‚\1ä»£è¡¨555ã€‚ä¸¤ç§çš„ä½¿ç”¨åœºæ™¯ä¸ä¸€æ ·ï¼Œå…ˆè®²$ çŽ°åœ¨ä¸ºäº†æ»¡è¶³æœ€å¼€å§‹çš„è¦æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåš 123reg: \(?(\d&#123;3&#125;)[-.)]\d&#123;3&#125;[-.]\d&#123;4&#125;replace: $1-xxx-xxxx 1.3.2 å®žæ™¯è®­ç»ƒ1. çŽ°åœ¨æœ‰ä¸€ä¸ªåå•åˆ—è¡¨ , ä½†æ˜¯å§“å’Œåæ˜¯åè¿‡æ¥çš„, éœ€è¦è°ƒæ­£ 1234shiffina, Danielshifafl, Daniellshquer, Danny... å®žçŽ°æ–¹æ³•: 123reg: (\w+),\s(\w+)replace: $2 $1 æ³¨æ„ï¼š$0 æ˜¯æ‰€æœ‰åŒ¹é…åˆ°çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªåŠ æ‹¬å·çš„æ˜¯$1 2. åŒ¹é…markdownä¸­çš„linkæ ‡ç­¾ï¼Œå¹¶æ›¿æ¢ä¸ºhtmlæ ‡ç­¾ 123[google](http://google.com)[itp](http://itp.nyu.edu)[Coding Rainbow](http://codingrainbow.com) è§£æžï¼š è¿™é“é¢˜æœ‰äº›å‘ï¼Œéœ€è¦æ…¢æ…¢æ¥ã€‚ çœ‹åˆ°è¿™ä¸ªï¼Œç¬¬ä¸€ä¸ªæƒ³è€ƒè™‘åŒ¹é…[google]è¿™ä¸ªä¸œè¥¿ï¼Œç«‹é©¬æƒ³åˆ°æ­£åˆ™è¡¨è¾¾å¼\[.*\]ã€‚ è¿™ä¸ªæ˜¯å·¨å¤§çš„å‘ï¼Œåœ¨å½“å‰æ¥çœ‹ï¼Œå®ƒçš„ç¡®èƒ½æ­£ç¡®åŒ¹é…åˆ°ä¸Šé¢çš„ä¸‰æ¡ã€‚ ä½†æ˜¯å¦‚æžœæ–‡æœ¬æ˜¯è¿™æ ·çš„ï¼š 123[google](http://google.com),[test][itp](http://itp.nyu.edu)[Coding Rainbow](http://codingrainbow.com) çœ‹åˆ°äº†ï¼Œç¬¬ä¸€è¡Œçš„å†…å®¹ä¼šå…¨éƒ¨åŒ¹é…ä¸‹æ¥ï¼Œè€Œä¸èƒ½åŒºåˆ†[google]å’Œ[test]ã€‚ ä¹‹æ‰€ä»¥è¿™æ ·ï¼Œæ˜¯å› ä¸º.æ˜¯è´ªå©ªçš„ï¼Œä»–è¡¨ç¤ºæ‰€æœ‰ï¼Œæ‰€æœ‰èƒ½åŒ¹é…åˆ°çš„ï¼Œæ‰€ä»¥å½“ç„¶ä¹ŸåŒ…æ‹¬äº†]ï¼Œä¸€ç›´åˆ°è¿™ä¸€è¡Œçš„æœ€åŽä¸€ä¸ª]ï¼Œå®ƒæ‰åœæ­¢ã€‚ æ‰€ä»¥ä¸ºäº†è®©å®ƒèƒ½æ­£ç¡®åŒ¹é…ï¼Œéœ€è¦åŽ»æŽ‰è¿™ç§è´ªå©ªçš„å±žæ€§ã€‚è¿™é‡Œç”¨åˆ°ï¼Ÿ ã€‚ å½“?æ”¾åœ¨äº†quantifiersç¬¦å·åŽï¼Œè¡¨ç¤ºåŽ»æŽ‰è´ªå©ªå±žæ€§ï¼ŒåŒ¹é…åˆ°ç»ˆæ­¢æ¡ä»¶ï¼Œå³å¯åœä¸‹ã€‚ \[.*?\]è¿™æ ·å­ï¼Œå°±å¯ä»¥å°†[google]å’Œ[test]åˆ†å¼€ æŽ¥ä¸‹æ¥å®Œæˆæ‰€æœ‰å†…å®¹ï¼š 123reg: \[(.*?)\]\((http.*?)\)replace: &lt;a href=&quot;$2&quot;&gt;$1&lt;/a&gt; 1.3.3 ä½¿ç”¨ \ é€‰æ‹©å™¨$é€‰æ‹©ç¬¦æ˜¯åœ¨æ›¿æ¢çš„æ—¶å€™è¿›è¡Œçš„æ ‡å¿—æˆ–é€‰æ‹©ï¼Œä½†æ˜¯å¦‚æžœåœ¨æ­£åˆ™è¡¨è¾¾å¼æœ¬èº«ï¼Œå°±è¦ä½¿ç”¨\é€‰æ‹©äº†ã€‚æ¯”å¦‚ä»¥ä¸‹çš„åœºæ™¯ 12This is is a a dog , I think think this is is reallya a good good dog. Don&apos;t you you thinks so so ? æˆ‘ä»¬æƒ³è¦åŒ¹é…æ¯”å¦‚is is so soè¿™æ ·è¿žç»­çš„åºåˆ—ï¼Œå°±ç”¨åˆ°äº†ä¸‹é¢çš„è¡¨è¾¾æ–¹å¼: (\w+)\s\1 å—¯ï¼Œå·®ä¸å¤šè¾¾åˆ°æ•ˆæžœï¼Œä½†æ˜¯æœ‰ä¸€äº›å°çš„bugã€‚æ¯”å¦‚ç¬¬ä¸€å¥è¯This is is a è¿™ä¸ªå°±åŒ¹é…ä¸å‡†ç¡®ï¼Œä¼šæŠŠç¬¬ä¸€ä¸ªThisçš„åŽé¢å­—æ¯åŒ¹é…è¿›åŽ»ã€‚ è¿™å°±ç”¨åˆ°ç¬¬ä¸€èŠ‚è¯´çš„å­—ç¬¦ç»“ç•Œ \bäº†ï¼Œå°±å˜æˆäº†\b(\w+)\s\1\b å¥½äº†ï¼Œå¤§åŠŸå‘Šæˆï¼Œå°±ä¸è´´æ•ˆæžœå›¾äº†ï¼Œè‡ªè¡Œè„‘è¡¥å°±å¥½äº†ã€‚ 1.3.4 æ€»ç»“ åˆ†ç»„æ•èŽ·ï¼Œä½¿ç”¨()è¿›è¡Œæ•°æ®åˆ†ç»„ï¼Œç¼–å·0ä»£è¡¨æ•´ä¸ªåŒ¹é…é¡¹ï¼Œé€‰æ‹©çš„åˆ†ç»„ä»Ž1å·å¼€å§‹ é€‰æ‹©å™¨å¯ä»¥ä½¿ç”¨$1å’Œ\1ï¼Œä½†æ˜¯ä½¿ç”¨åœºæ™¯ä¸åŒï¼Œ\ç”¨åœ¨æ­£åˆ™è¡¨è¾¾å¼è‡ªå·±èº«ä¸Š ?ç¬¦å·å¯ä»¥ç¦æ­¢è´ªå©ªå±žæ€§ï¼Œæ”¾åœ¨.*ä¹‹åŽï¼Œè¡¨ç¤ºä¸€æ¬¡åŒ¹é…é‡åˆ°é‡ç‚¹å°±å¯ä»¥åœæ­¢ã€‚å¦åˆ™å°†ä¼šä¸€ç›´å‘åŽåŒ¹é…ã€‚ 1.4 åœ¨JavaScriptä¸­çš„åº”ç”¨è¿™é‡Œå°±ä¸è´´äº†, è‹¥éœ€è¦æŸ¥çœ‹ ,è¯·å‚è€ƒ ä½œè€…æ–‡ç« ]]></content>
      <categories>
        <category>regex</category>
      </categories>
      <tags>
        <tag>regex</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Nginxä¹‹proxy_passè¯¦è§£]]></title>
    <url>%2Fnginx-proxy_pass%2F</url>
    <content type="text"><![CDATA[è®°å½•ä¸‹ Nginx proxy_pass å¸¸ç”¨è§„åˆ™ , ä»¥å…é—å¿˜ åœ¨ Nginx ä¸­é…ç½® proxy_pass ä»£ç†è½¬å‘æ—¶ , å¦‚æžœåœ¨ proxy_pass åŽé¢çš„ url åŠ  / ,è¡¨ç¤ºç»å¯¹è·¯å¾„ ; å¦‚æžœæ²¡æœ‰ / , è¡¨ç¤ºç›¸å¯¹è·¯å¾„ , æŠŠåŒ¹é…çš„è·¯å¾„éƒ¨åˆ†ä¹Ÿä¼šä»£ç†èµ° å®žä¾‹å‡è®¾ä»¥ä¸‹å››ç§æƒ…å†µåˆ†åˆ«ç”¨ http://192.168.1.1/proxy/test.html è¿›è¡Œè®¿é—® 1123location /proxy/ &#123; proxy_pass http://127.0.0.1/;&#125; ä»£ç†åˆ° URL: http://127.0.0.1/test.html 2ç›¸å¯¹ç¬¬ä¸€ç§ , å°¾éƒ¨å°‘ä¸ª / 123location /proxy/ &#123; proxy_pass http://127.0.0.1;&#125; ä»£ç†åˆ° URL: http://127.0.0.1/proxy/test.html 3123location /proxy/ &#123; proxy_pass http://127.0.0.1/aaa/;&#125; ä»£ç†åˆ° URL: http://127.0.0.1/aaa/test.html 4ç›¸å¯¹ç¬¬ä¸‰ç§ , æœ«å°¾å°‘ä¸ª / 123location /proxy/ &#123; proxy_pass http://127.0.0.1/aaa;&#125; ä»£ç†åˆ° URL: http://127.0.0.1/aaatest.html å‚è€ƒé“¾æŽ¥ç®€ä¹¦]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Appä¸­çš„ç¾Šè§’ç¬¦]]></title>
    <url>%2Fcny-symbol-issue%2F</url>
    <content type="text"><![CDATA[äººæ°‘å¸ç¾Šè§’ç¬¦æ˜¯ App å¼€å‘ä¸­å¸¸ä½¿ç”¨çš„ç¬¦å· . åœ¨ä½¿ç”¨ä¸­å´å¶å‘è§‰ç¬¦å·æ˜¾ç¤ºä¸æ­£å¸¸ , åœ¨æ­¤åšè®°å½• ä¸¤ç§ç¾Šè§’ç¬¦äººæ°‘å¸ç¾Šè§’ç¬¦ äººæ°‘å¸ç¬¦å·ä¸ºï¼šÂ¥ã€‚ä¹¦å†™é¡ºåºä¸ºï¼šå…ˆå†™å¤§å†™å­—æ¯â€œYâ€ï¼Œå†åœ¨ç«–åˆ’ä¸ŠåŠ ä¸ŠäºŒæ¨ªï¼Œå³ä¸ºâ€œÂ¥â€ï¼Œè¯»éŸ³ä¸ºï¼šyuÃ¡nï¼ˆéŸ³ï¼šå…ƒï¼‰ æ—¥å…ƒç¾Šè§’ç¬¦ æ—¥åœ†ï¼ˆå††ï¼‰ï¼Œåˆç§°ä½œæ—¥å…ƒï¼Œå…¶çº¸å¸ç§°ä¸ºæ—¥æœ¬é“¶è¡Œåˆ¸ï¼Œæ˜¯æ—¥æœ¬çš„å®˜æ–¹è´§å¸ï¼ŒäºŽ1871å¹´åˆ¶å®šã€‚æ—¥åœ†ä¹Ÿç»å¸¸åœ¨ç¾Žå…ƒå’Œæ¬§å…ƒä¹‹åŽè¢«å½“ä½œå‚¨å¤‡è´§å¸ã€‚è´§å¸ç¬¦å·â€œÂ¥â€ï¼Œå›½é™…æ ‡å‡†åŒ–ç»„ç»‡ISO4217è®¢å®šå…¶æ ‡å‡†ä»£å·ä¸ºJPYã€‚æ—¥è¯­ç½—é©¬å­—å†™ä½œYenã€‚ ä»Žå®šä¹‰ä¸Šçœ‹ , ä¸¤ç§ç¾Šè§’ç¬¦é•¿å¾—ä¸€æ · , æ‰‹å†™æ˜¯æ²¡æœ‰åŒºåˆ«çš„ . ä½†æ˜¯åœ¨è®¡ç®—æœºä¸Šæ˜¯æœ‰åŒºåˆ«çš„ 1ï¿¥Â¥ è‹¥çœ‹ä¸å‡ºåŒºåˆ« , å¯ä»¥å¤åˆ¶åˆ°æµè§ˆå™¨ä¸­å†çœ‹çœ‹ äºŒè€…åœ¨ UTF-8 è¡¨ä¸­çš„åŒºåˆ« å‰è€…æ˜¯å…¨è§’å…ƒ , åŽè€…æ˜¯åŠè§’å…ƒ . äºŒè€…åœ¨ä¸åŒçš„æœºåž‹ä¸Šè¡¨çŽ°ä¸ä¸€è‡´ , å…¨è§’å…ƒåœ¨æŸäº›æœºåž‹ä¸Šåªæ˜¾ç¤ºä¸€æ¨ª , è€ŒåŠè§’å…ƒéƒ½æ˜¯ä¸¤æ¨ª , å› æ­¤å®žé™…å¼€å‘ä¸­åº”è¯¥ä½¿ç”¨åŠè§’å…ƒ å‚è€ƒé“¾æŽ¥CSDN: Androidä¸­çš„ç¾Šè§’ç¬¦ CSDN:å¦‚ä½•è§£å†³ç¾Šè§’ç¬¦åªæ˜¾ç¤ºä¸€æ¨ªçš„é—®é¢˜]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>App</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½¬-win10ç³»ç»Ÿç«¯å£å ç”¨æŸ¥çœ‹]]></title>
    <url>%2Fwin10-port-issue%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘win10ç”µè„‘é‡å¯åŽæ€»æ˜¯æœ‰è¿›ç¨‹å ç”¨ç«¯å£ , ä½¿å¾—ç§‘å­¦ä¸Šç½‘è½¯ä»¶è‡ªå¯æ—¶æŠ¥é”™ , è¿™é‡Œè®°å½•ä¸‹è§£å†³è¿‡ç¨‹ ç®¡ç†å‘˜æ‰“å¼€ cmd è¾“å…¥netstat -aon|findstr 8080å‘½ä»¤ , å…¶ä¸­8080æ˜¯è¢«å ç”¨çš„ç«¯å£å· , åœ¨æ˜¾ç¤ºçš„ä¿¡æ¯ä¸­æ‰¾åˆ°å ç”¨ç«¯å£çš„è¿›ç¨‹å·PID è¾“å…¥tasklist|findstr 2524 å…¶ä¸­2524æ˜¯ç¬¬äºŒæ­¥ä¸­æ‰¾å‡ºçš„è¿›ç¨‹å· æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ , æ‰¾åˆ°å¯¹åº”è¿›ç¨‹çš„åº”ç”¨,ç»“æŸæŽ‰è¿›ç¨‹å³å¯ åŽŸæ–‡é“¾æŽ¥åº¦å¨˜]]></content>
      <categories>
        <category>Issue</category>
      </categories>
      <tags>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterç ”å‘æŠ¥é”™å½’æ•´]]></title>
    <url>%2Fflutter-issue%2F</url>
    <content type="text"><![CDATA[è®°å½•ä¸€äº› Flutter ç ”å‘ä¸­é‡åˆ°é”™è¯¯åŠå¤„ç†. 1. Unexpected end of file from serveråœ¨æ–°çŽ¯å¢ƒå®‰è£…å¥½ Flutter çŽ¯å¢ƒåŽ , è¿è¡Œé¡¹ç›®æŠ¥é”™ Exception in thread &quot;main&quot; java.net.SocketException: Unexpected end of file from server æœç´¢åŽå‘çŽ°æ˜¯å› ä¸º gradle è®¾ç½®äº†ä»£ç† . å‰å¾€ C:/Users/&lt;username&gt;/.gradle/gradle.properties ) (ä¸æ˜¯é¡¹ç›®ä¸‹çš„gradle.properties) , åˆ é™¤å¤šä½™çš„ä»£ç†è®¾ç½® systemProp.https.proxyPort=1080 â€¦ å‚è€ƒé“¾æŽ¥ç®€ä¹¦: è§£å†³FlutteræŠ¥é”™ Unexpectedâ€¦]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ElementUIç»„ä»¶ä¿®æ”¹æ ·å¼è¦†ç›–æ— æ•ˆ]]></title>
    <url>%2Felement-ui-style-issue%2F</url>
    <content type="text"><![CDATA[åœ¨ä½¿ç”¨ElementUIç»„ä»¶åº“å¼€å‘æ—¶å¾€å¾€ä¼šéœ€è¦å¯¹ç»„ä»¶è¿›è¡Œæ ·å¼ä¿®æ”¹ , ä¸ºäº† Vue é¡µé¢æ ·å¼æ¨¡å—åŒ– , ä¸å¯¹å…¨å±€æ ·å¼é€ æˆæ±¡æŸ“ , æˆ‘ä»¬å¾€å¾€éƒ½ä¼šåŠ å…¥ scoped å±žæ€§ç”¨æ¥é™åˆ¶æ ·å¼çš„ä½œç”¨åŸŸ , ç„¶åŽè¿™ä¹Ÿä¼šå¯¼è‡´å½“æˆ‘ä»¬ä¿®æ”¹éƒ¨åˆ† UI ç»„ä»¶æ ·å¼å¤±æ•ˆ. ä¸ºäº†é¿å…è¿™ç§é—®é¢˜ , æˆ‘ä»¬å¸¸ç”¨ä»¥ä¸‹æ–¹å¼æ¥è§£å†³ 1. æ·±åº¦ä½œç”¨é€‰æ‹©å™¨&gt;&gt;&gt; 12345&lt;style scoped&gt;.box &gt;&gt;&gt; .content &#123; font-size:20px;&#125;&lt;/style&gt; 2. /deep/ é¢„å¤„ç†å™¨ less ä¸‹ä½¿ç”¨æ·±åº¦é€‰æ‹©å™¨ /deep/ ä¸Ž &gt;&gt;&gt; ä½œç”¨ç›¸åŒ é€šè¿‡ &gt;&gt;&gt; å¯ä»¥ä½¿å¾—åœ¨ä½¿ç”¨ scoped å±žæ€§çš„æƒ…å†µä¸‹ , ç©¿é€ scoped , ä¿®æ”¹å…¶ä»–ç»„ä»¶çš„å€¼ 1234567&lt;style scoped lang="less"&gt;.select &#123; /deep/ .ivu-card-body &#123; width: 100%; &#125; &#125;&lt;/style&gt; å‚è€ƒé“¾æŽ¥CSDN:elementUIç»„ä»¶ä¿®æ”¹æ ·å¼ è¦†ç›–æ— æ•ˆ]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dockerå¸¸ç”¨å‘½ä»¤]]></title>
    <url>%2Fdocker-command%2F</url>
    <content type="text"><![CDATA[å¾ˆå¤šå®žç”¨çš„ Docker å‘½ä»¤ç»å¸¸ä¸è®°å¾— , è®°å½•äºŽæ­¤ åˆ—å‡ºæ‰€æœ‰å®¹å™¨ID 1docker ps -aq åœæ­¢æ‰€æœ‰å®¹å™¨ 1docker stop $(docker ps -aq) åˆ é™¤æ‰€æœ‰å®¹å™¨ 1docker rm $(docker ps -aq) åˆ é™¤æ‰€æœ‰ä¸ä½¿ç”¨çš„é•œåƒ 1docker image prune --force --all åˆ é™¤æ‰€æœ‰åœæ­¢çš„å®¹å™¨ 1docker container prune -f æ¸…ç†èµ„æºå‘½ä»¤ 1docker system prune åˆ é™¤ exited çŠ¶æ€å®¹å™¨ 1docker rm $(docker ps --all -q -f status=exited) æœ‰å¾…ç»§ç»­è¡¥å…… å‚è€ƒé“¾æŽ¥åœæ­¢ã€åˆ é™¤æ‰€æœ‰çš„dockerå®¹å™¨å’Œé•œåƒ]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Element-UI Uploaderä¸Šä¼ è¾¾åˆ°æ•°é‡åŽéšè—ä¸Šä¼ æŒ‰é’®]]></title>
    <url>%2Felement-ui-uploader-issue%2F</url>
    <content type="text"><![CDATA[åœ¨é¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº† Element UI çš„ Uploader ç»„ä»¶ . éœ€æ±‚æ˜¯è¾¾åˆ°ä¸Šä¼ æ–‡ä»¶ä¸Šé™åŽ , å°†ç»„ä»¶çš„æ·»åŠ å›¾ç‰‡æŒ‰é’®éšè—. é¦–å…ˆç»™ el-upload ç»„ä»¶å¢žåŠ  class 123&lt;el-upload :class="&#123;hide:hideUpload&#125;" :on-change="handleImgChange"&gt; ç„¶åŽ data é‡Œé¢è®¾å®šä¸€ä¸ªåˆå§‹çŠ¶æ€å€¼ 1hideUpload: false å†åœ¨ç»„ä»¶ä¸­ç»‘å®šä¸€ä¸ª on-change äº‹ä»¶ , handleImgChange 123handleImgChange(file, fileList) &#123; this.hideUpload = this.vouchers.length &gt;= this.limitCount;&#125; css éƒ¨åˆ† 123.hide .el-upload--picture-card &#123; display: none;&#125; è¿™æ ·å°±å¯ä»¥å®žçŽ°ä¸Šä¼ æŒ‰é’®çš„æ˜¾ç¤ºéšè—äº†. æ³¨æ„ , Vue ä¸­éœ€è¦å°† style ä¸­çš„ scopedåŽ»æŽ‰æ–¹å¯ç”Ÿæ•ˆ , æˆ–è€…å¢žåŠ å±‚çº§å‰ç¼€ 123/deep/ .hide .el-upload--picture-card &#123; display: none;&#125; å‚è€ƒé“¾æŽ¥CSDN:Element UIä¸Šä¼ å›¾ç‰‡åˆ°è¾¾ä¸€å®šæ•°é‡åŽéšè—å›¾ç‰‡ä¸Šä¼ æŒ‰é’®]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>ElementUI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MyBatis-Plus IndexOutOfBoundsException]]></title>
    <url>%2Fmybatis-plus-exception%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨ä½¿ç”¨ MyBatis-Plus æ—¶é‡åˆ°äº† java.lang.IndexOutOfBoundsExceptin .æŠ˜è…¾è®¸ä¹… , è®°å½•äºŽæ­¤ åˆçœ‹ä»¥ä¸ºçœŸæ˜¯æ•°ç»„è¶Šç•Œé”™è¯¯ , ä½†æ˜¯æ‰§è¡Œä¸€ä¸ªæ™®é€šçš„ select è¯­å¥éƒ½ä¼šæŠ¥é”™ . æœ€ç»ˆæœç´¢åˆ°äº†åŽŸå›  , ä¸»è¦æ˜¯å› ä¸º lombok ä½¿ç”¨ä¸å½“! å®žä½“ç±»ç”¨äº† @Builder æ³¨è§£ , åœ¨ä½¿ç”¨è¯¥æ³¨è§£åŽ , æˆ‘ä»¬å¿…é¡»æ˜¾ç¤ºåœ°å£°æ˜Žæž„é€ æ–¹æ³• , æˆ–è€…ä½¿ç”¨@AllArgsConstructor æˆ– @NoArgsConstructor æ¥å£°æ˜Žæž„é€  . ç”±äºŽ MyBatis æ‰¾ä¸åˆ°æž„é€ æ–¹æ³• , æ— æ³•å°†æŸ¥è¯¢ç»“æžœç»‘å®šåˆ°å®žä½“å¯¹è±¡ä¸Š ,å¯¼è‡´æŠ¥é”™ . å‚è€ƒé“¾æŽ¥ mybatis-plus java.lang.IndexOutOfBoundsException: Index: 23, Size: 23 mybatis issue]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>MyBatis-Plus</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[IDEAé¡¹ç›®åœ¨maven projectsä¸­æ˜¾ç¤ºç°è‰²çš„è§£å†³åŠžæ³•]]></title>
    <url>%2Fidea-maven-issue%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨ maven é¡¹ç›®å°†ä¸€ä¸ªå­ module åˆ é™¤é‡æ–°åˆ›å»ºåŽ , æœ‰ä¾èµ–å…³ç³»çš„ module ç¼–è¯‘å°±ä¼šæŠ¥é”™ , è¡¨çŽ°åˆ™ä¸º maven æ¨¡å—å˜ä¸ºç°è‰². ä»¥ä¸Šå›¾æ¥è‡ªå‚è€ƒé“¾æŽ¥ é€ æˆè¿™ä¸ªåŽŸå› åº”è¯¥æ˜¯åˆ é™¤ module åŽ IDEA å¿½ç•¥äº†è¯¥ maven æ¨¡å— è§£å†³åŠžæ³• åœ¨ IDEA ä¸­ maven çš„ setting ä¸­æ‰¾åˆ° ignored files , çœ‹å³è¾¹çš„é¢æ¿ä¸­æ˜¯å¦å°†å˜ç°çš„mavenæ¨¡å—å¿½ç•¥äº†.Settingsâ€“&gt;Mavenâ€“&gt;Ignored Files åŽ»æŽ‰å‹¾é€‰ å‚è€ƒé“¾æŽ¥ CSDN:ideaé¡¹ç›®åœ¨maven projectsä¸­æ˜¾ç¤ºç°è‰²çš„è§£å†³åŠžæ³•]]></content>
      <categories>
        <category>IDEA</category>
      </categories>
      <tags>
        <tag>IDEA</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macè®¾ç½®Officeè¯­è¨€]]></title>
    <url>%2Foffice-mac-language%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘ä½¿ç”¨Officeçš„æ—¶å€™å‘çŽ°äº†ä¸€ä¸ªé—®é¢˜ , ç”±äºŽç”µè„‘ç³»ç»Ÿè¯­è¨€ä¸ºè‹±æ–‡ , Office ä¹Ÿä¼šè‡ªåŠ¨åˆ‡æ¢ä¸ºè‹±æ–‡ . æƒ³å•ç‹¬è®¾ç½® Officeä¸ºä¸­æ–‡ç‰ˆ , æœç´¢äº†ä¸€åœˆ , å‘çŽ°ç½‘ä¸Šçš„æ–¹æ³•å¤ªå¤šä¸å¯ç”¨æˆ–è€…è¦ä¿®æ”¹ç³»ç»Ÿè¯­è¨€ , æœ€åŽæ‰¾åˆ°äº†ç›¸å…³è§£å†³åŠžæ³•. è®¾ç½®å…¶å®žå¾ˆç®€å• , æ‰“å¼€ç»ˆç«¯ , è¾“å…¥å‘½ä»¤ defaults write com.microsoft.Word AppleLanguages &#39;(&quot;zh-cn&quot;)&#39; é‡å¯åº”ç”¨å³å¯ é™„åŠ  å¦‚æžœè¿˜æœ‰å…¶ä»– Office åº”ç”¨éœ€è¦ä¿®æ”¹ ,ä¿®æ”¹å‘½ä»¤åŒ…åå³å¯ defaults write com.microsoft.Excel AppleLanguages &#39;(&quot;zh-cn&quot;)&#39; ä¿®æ”¹æˆå…¶ä»–è¯­è¨€ ä¿®æ”¹å¯¹åº”çš„è¯­è¨€ä»£å·å³å¯ , è¯­è¨€ä»£ç ä¸Žå›½å®¶åœ°åŒºå¯¹ç…§è¡¨ å‚è€ƒé“¾æŽ¥ https://blog.csdn.net/student9128/article/details/80026645 https://www.jianshu.com/p/96f930d2ffca]]></content>
      <categories>
        <category>Mac</category>
      </categories>
      <tags>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Jenkinså‰åŽç«¯é¡¹ç›®å‚æ•°åŒ–è‡ªåŠ¨æž„å»º]]></title>
    <url>%2Fjenkins-parameterized-build%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘è¿›è¡Œäº†ä¸€æ¬¡å¼€å‘æµ‹è¯•çŽ¯å¢ƒè¿ç§» , é¡ºå¸¦è¿žç€ä¹‹å‰çš„ Jenkins ä¹Ÿè¿›è¡Œäº†è¿ç§» , å› ä¸ºå¯¹ä¹‹å‰çš„æ­å»ºè¿‡ç¨‹æ²¡æœ‰è®°å½• , å¯¼è‡´è¿™æ¬¡çš„è¿ç§»è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸å°‘é˜»åŠ› . çŽ°è®°å½•ä¸»è¦æµç¨‹äºŽæ­¤ , æ–¹ä¾¿ä¹‹åŽæ­å»º . å®‰è£…é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£… Jenkins , éœ€è¦è£…å¸æ–¹ä¾¿ , å› æ­¤æˆ‘ä»¬é€‰æ‹©ç”¨ Docker æˆ– docker-compose ç›´æŽ¥å®‰è£… Docker 1docker run --name devops-jenkins --user=root -p 8080:8080 -p 50000:50000 -v /mnt/data/jenkins/jenkins_home:/var/jenkins_home -d jenkins/jenkins:lts docker-compose 1234567891011121314151617version: '3'services: jenkins: image: jenkins/jenkins:lts container_name: jenkins user: root ports: - "8080:8080" volumes: - /etc/localtime:/etc/localtime:ro - $PWD/jenkins_home:/var/jenkins_home - /var/run/docker.sock:/var/run/docker.sock - /usr/bin/docker:/usr/bin/docker - /usr/lib64/libltdl.so.7:/usr/lib/x86_64-linux-gnu/libltdl.so.7 - /mnt/data/docker:/data/docker environment: - TZ=Asia/Shanghai å¯åŠ¨åŽåˆå§‹åŒ–åŠå®‰è£…æŽ¨èæ’ä»¶ å¯ä»¥é€šè¿‡å®¹å™¨æ—¥å¿—æŸ¥è¯¢åˆå§‹å¯†ç  1docker logs xxx(å®¹å™¨ID) å¯èƒ½éƒ¨åˆ†æ’ä»¶è¶…æ—¶å®‰è£…å¤±è´¥ , æˆ‘ä»¬éœ€è¦åŽ»ç½‘ç«™ä¸Šä¸‹è½½ hpi æ’ä»¶æ–‡ä»¶ , æ‰‹åŠ¨ä¸Šä¼ å®‰è£… æœ¬æ–‡ç”¨åˆ°ä¸€äº›é‡è¦çš„æ’ä»¶åˆ—ä¸¾å¦‚ä¸‹: Http Request httpè¯·æ±‚æ’ä»¶ Publish Over SSH æ–‡ä»¶ä¸Šä¼ éƒ¨ç½²æ’ä»¶ Docker dockeræ’ä»¶ Role-based Authorization Strategy è§’è‰²æƒé™æ’ä»¶ Build-user-vars-plugin æž„å»ºè§’è‰²å˜é‡æ’ä»¶ Beary Chat åä½œå·¥å…·é€šçŸ¥æ’ä»¶(è§†å®žé™…æƒ…å†µè¿›è¡Œæ›¿æ¢) â€¦ ç³»ç»Ÿé…ç½®ç‚¹å‡»ç³»ç»Ÿç®¡ç† -&gt; Global Tool Configuration æ‰¾åˆ° JDK ç‚¹å‡»æ–°å¢žæŒ‰é’®è¿›è¡Œå®‰è£… , æ­¤å¤„éœ€è¦ Oracle è´¦å·è¯·è‡ªè¡Œæ³¨å†Œ ç„¶åŽæ‰¾åˆ° Maven ç‚¹å‡»æ–°å¢žæŒ‰é’® , æ­¤å¤„æˆ‘ä»¬ä½¿ç”¨ 3.2.5 è§†å…·ä½“æƒ…å†µè¿›è¡Œæ›¿æ¢ , ç¬”è€…æ˜¯å› ä¸ºé€‰æ‹©å…¶ä»–ç‰ˆæœ¬ç¼–è¯‘é¡¹ç›®ä¼šæŠ¥é”™ . ç‚¹å‡»ç³»ç»Ÿç®¡ç† -&gt; ç³»ç»Ÿè®¾ç½® é…ç½® SSH (å‰ç«¯nginxæœåŠ¡å™¨) æƒé™åˆ†é…é€‰æ‹©ç³»ç»Ÿç®¡ç† -&gt; Configuration Global Security å¯ç”¨å®‰å…¨ï¼š TCP port for JNLP agents -&gt;ç¦ç”¨ï¼Œè®¿é—®æŽ§åˆ¶-å®‰å…¨åŸŸ-&gt;jenkinsä¸“æœ‰ç”¨æˆ·æ•°æ®åº“ , è®¿é—®æŽ§åˆ¶-æŽˆæƒç­–ç•¥-&gt;Role-Based Strategy å¦‚ï¼š é€‰æ‹©ç³»ç»Ÿç®¡ç† Manage and Assign Roles -&gt; Manage Roles æ­¤å¤„é’ˆå¯¹é¡¹ç›®é…ç½®æƒé™ , ä»¥é¡¹ç›®åæ­£åˆ™åŒ¹é… . è¿™é‡Œæä¾›å‡ ä¸ªä¾‹å­ ^((?!other).)*$ é¡¹ç›®åä¸­ä¸å¸¦ other çš„å‡ç¬¦åˆ [\w\W]*frontend[\w\W] é¡¹ç›®åä¸­é—´æœ‰ frontend çš„å‡ç¬¦åˆ [\w\W]* ä»»æ„é¡¹ç›®åå‡ç¬¦åˆ å‰ç«¯åœºæ™¯è¯´æ˜Žè¿™é‡Œé’ˆå¯¹ å‰ç«¯ Vue é¡¹ç›®è¿›è¡Œæž„å»º . å‰ç«¯å¼€å‘äººå‘˜ä¼šæœ¬åœ°è¿›è¡Œæ‰“åŒ… , å¾—åˆ°ä¸€ä¸ª dist.zip åŽ‹ç¼©åŒ… , æ­¤æ—¶éœ€è¦ä¸Šä¼ åˆ° nginx æœåŠ¡å™¨ä¸Š , è‡ªåŠ¨è§£åŽ‹ . å½“ç„¶æœ‰æ›´å¥½çš„åšæ³• , ç›´æŽ¥åœ¨æœåŠ¡å™¨ä¸Šæ‹‰å–ä»£ç  , ç¼–è¯‘ , éƒ¨ç½² , æ­¤å¤„æˆ‘ä»¬åªè®²è§£æ‰“åŒ…åŽé€šè¿‡ Jenkins ä¸Šä¼ çš„æµç¨‹ . 123456# è§†å…·ä½“æƒ…å†µè¿›è¡Œæ›¿æ¢cd /mnt/data/frontend/$MODULEsudo rm -rf latest.zipsudo rm -rf distunzip pack.zipmv pack.zip latest.zip åŽç«¯åŽç«¯æ˜¯ä½¿ç”¨ Java Spring Cloud é¡¹ç›®. å¼€å‘è€…åœ¨ Jenkins æŒ‡å®šå¯¹åº”çŽ¯å¢ƒã€å‚æ•°ç„¶åŽå°±ä¼šå¼€å§‹æž„å»º , è¿‡ç¨‹å¤§è‡´ä¸º é€‰æ‹©å‚æ•°æž„å»º -&gt; Jenkins ä»Ž Git ä¸Šæ‹‰å–ä»£ç  -&gt; Mavenæž„å»º -&gt; Dockeræž„å»ºé•œåƒ -&gt; æŽ¨é€åˆ°ç§æœ‰é•œåƒä»“åº“ -&gt; é€šçŸ¥ Rancher é›†ç¾¤æ›´æ–°æœåŠ¡ -&gt; é€šçŸ¥åä½œå·¥å…· / é‚®ä»¶é€šçŸ¥ é¦–å…ˆç¡®å®šæž„å»ºå‚æ•° Execute Shell 12345678910111213docker login --username=ä»“åº“USERNAME --password=ä»“åº“PASSWORD $DOCKER_REGISTRYcp $WORKSPACE/$MODULE_NAME/target/*.jar $WORKSPACE/$MODULE_NAME/app.jarcd $WORKSPACE/$MODULE_NAMEdocker build -f Dockerfile-$ENV -t $DOCKER_REGISTRY/$DOCKER_NAMESPACE/$MODULE_NAME:latest .docker build -f Dockerfile-$ENV -t $DOCKER_REGISTRY/$DOCKER_NAMESPACE/$MODULE_NAME:$DOCKER_TAG .docker push $DOCKER_REGISTRY/$DOCKER_NAMESPACE/$MODULE_NAME:latestdocker push $DOCKER_REGISTRY/$DOCKER_NAMESPACE/$MODULE_NAME:$DOCKER_TAGdocker rmi $DOCKER_REGISTRY/$DOCKER_NAMESPACE/$MODULE_NAME:latestif [ $&#123;DOCKER_TAG&#125; != "latest" ]; then docker rmi $DOCKER_REGISTRY/$DOCKER_NAMESPACE/$MODULE_NAME:$DOCKER_TAGfi ç„¶åŽå†é€šè¿‡æž„å»ºåŽæ“ä½œä½¿ç”¨ Http Request æ’ä»¶è°ƒç”¨æŽ¥å£å‡çº§ Rancher æœåŠ¡ , å…·ä½“å‚è€ƒ Rancheré€šè¿‡APIå‡çº§æœåŠ¡ æ–‡ç«  . åœ¨å®žé™…åº”ç”¨ä¸­å‘çŽ° , æ­¤æ–¹æ³•å‡çº§ä¼šè¦†ç›–ä¹‹å‰çš„æœåŠ¡ä¸»æœºè°ƒåº¦ , å› æ­¤å¯¹äºŽå¤šæœºå™¨é›†ç¾¤ , ä¸å¤§é€‚ç”¨ å‚è€ƒé“¾æŽ¥jenkins+dockeræŒç»­é›†æˆ]]></content>
      <categories>
        <category>Jenkins</category>
      </categories>
      <tags>
        <tag>Jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Nginxå‡ºçŽ°403 ForbiddenæŠ¥é”™è§£å†³åŠžæ³•]]></title>
    <url>%2Fnginx-403-forbidden%2F</url>
    <content type="text"><![CDATA[ä¹‹å‰ AWS EC2 ä¸Šå®‰è£… nginx æ—¶ ,è®¿é—®ä¸€ç›´æ­£å¸¸ , ç›´åˆ°åœ¨ç‰©ç†æœºå’Œ GCP ä¸Šä½¿ç”¨æ—¶å°±ä¼šå‡ºçŽ° 403 Forbidden çš„æƒ…å†µ , æŸ¥çœ‹ nginx æ—¥å¿— , é»˜è®¤è·¯å¾„ä¸º /var/log/nginx/error.log , å‘çŽ°æŠ¥é”™å†…å®¹ä¸º Permission denied . äºŽæ˜¯è°·æ­Œè§£å†³åŠžæ³• . CSDN æ­¤ç¯‡æ–‡ç« åˆ†æžçš„æ¯”è¾ƒå®Œæ•´ , çŽ°ç®€å•æ€»ç»“å¦‚ä¸‹ . 1. ç”±äºŽå¯åŠ¨ç”¨æˆ·å’Œ nginx å·¥ä½œç”¨æˆ·ä¸ä¸€è‡´æ‰€è‡´æŸ¥çœ‹å‘½ä»¤ ps aux | grep &quot;nginx: worker process&quot; | awk&#39;{print $1}&#39; å¦‚è‹¥ä¸ä¸€è‡´ , åˆ™è¦å°† nginx.conf ä¸­çš„ user æ”¹ä¸ºå’Œå¯åŠ¨ç”¨æˆ·ä¸€è‡´ 12345678910user nginx;worker_processes 4;error_log /var/log/nginx/error.log warn;pid /var/run/nginx.pid;events &#123; worker_connections 65535;&#125; 2. ç¼ºå°‘ index.html æˆ–è€… index.php æ–‡ä»¶1234567891011server &#123; listen 80; server_name localhost; index index.php index.html; root /data/www/; &#125; å¦‚æžœåœ¨ /data/www/ ä¸‹æ²¡æœ‰ index.php æˆ– index.html æ—¶ å°±ä¼šæŠ¥ 403 forbidden 3. æƒé™é—®é¢˜ , è‹¥ nginx æ²¡æœ‰ web ç›®å½•çš„æ“ä½œæƒé™ , ä¹Ÿä¼šå‡ºçŽ°403é”™è¯¯è§£å†³åŠžæ³•: ä¿®æ”¹ web ç›®å½•çš„è¯»å†™æƒé™ , æˆ–è€…æ˜¯æŠŠnginxçš„å¯åŠ¨ç”¨æˆ·æ”¹æˆç›®å½•çš„æ‰€å±žç”¨æˆ· , é‡å¯ nginx è§£å†³ 12chmod -R 777 /datachmod -R 777 /data/www/ 4. SELinux è®¾ç½®ä¸ºå¼€å¯çš„åŽŸå› æŸ¥çœ‹å½“å‰ selinux çŠ¶æ€ cat /etc/selinux/conf å°†çŠ¶æ€æ”¹ä¸ºdisabled 1SELINUX=disabled é‡å¯ reboot ç”Ÿæ•ˆ]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQLç®€æ˜“å¤‡ä»½]]></title>
    <url>%2FMySQL%E7%AE%80%E6%98%93%E5%A4%87%E4%BB%BD%2F</url>
    <content type="text"><![CDATA[ç®€æ˜“çš„ MySQL æ•°æ®å…¨é‡æ—¥å¤‡ å¤‡ä»½è„šæœ¬é¦–å…ˆç¡®å®šä¸‹ç›®å½• 123456## æ€»ç›®å½•/mnt/data/backups## å†…å®¹- mysql-back.list æŒ‡å®šå¤‡ä»½æ•°æ®åº“å- mysql_backups.sh å¤‡ä»½è„šæœ¬- mysqldump.log å¤‡ä»½æ—¥å¿— mysql-back.list 123## å¤‡ä»½æ•°æ®åº“åtest_dbtest_db2 mysql_backups.sh å¤‡ä»½å‰æŽ¨20å¤©å†…çš„dbæ•°æ® 12345678910111213141516171819202122#!/bin/bash#This replication for Ali RDSPATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:/usr/local/mysql/binexport PATHDAT=`date +%m%d`HOR=`date +%H`begin=`date +%F" "%T`DIR=/mnt/data/backups/dbif [[ ! -d $DIR/$DAT ]];then mkdir $DIR/$DATfifor i in `cat /mnt/data/backups/mysql-back.list`do /bin/mysqldump -uroot -på¯†ç  $i &gt; $DIR/$DAT/$i-$DAT$HOR.sqldonefind /mnt/data/backups/db/* -mtime +20 -exec rm -rf &#123;&#125; \;end=`date +%F" "%T`echo "$begin dump mysql -------&gt; $end has done" &gt;&gt; /mnt/data/backups/mysqldump.log è„šæœ¬æ‰§è¡Œå®šæ—¶ä»»åŠ¡vim /etc/crontab 123456789101112131415SHELL=/bin/bashPATH=/sbin:/bin:/usr/sbin:/usr/binMAILTO=root# For details see man 4 crontabs# Example of job definition:# .---------------- minute (0 - 59)# | .------------- hour (0 - 23)# | | .---------- day of month (1 - 31)# | | | .------- month (1 - 12) OR jan,feb,mar,apr ...# | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat# | | | | |# * * * * * user-name command to be executed01 11 * * * root sh /mnt/data/backups/mysql_backups.sh æ‰‹åŠ¨æ‰§è¡Œbash /mnt/data/backups/mysql_backups.sh Docker å®‰è£…çš„MySQLä¿®æ”¹ç‚¹mysql-backup.sh 1234567891011121314151617181920#!/bin/bashDAT=`date +%m%d`HOR=`date +%H`begin=`date +%F" "%T`PARENT_DIR=/mnt/data/mysql/backupsDIR=$PARENT_DIR/dbif [[ ! -d $DIR/$DAT ]];then mkdir $DIR/$DATfifor i in `cat $PARENT_DIR/mysql-back.list`do docker exec mysqlå®¹å™¨å mysqldump -uroot -pæ•°æ®åº“å¯†ç  $i &gt; $DIR/$DAT/$i-$DAT$HOR.sqldonefind $DIR/* -mtime +20 -exec rm -rf &#123;&#125; \;end=`date +%F" "%T`echo "$begin dump mysql -------&gt; $end has done" &gt;&gt; $PARENT_DIR/mysqldump.log /etc/crontab æ¯å¤© 2:00 å¤‡ä»½ 10 2 * * * sh /mnt/data/mysql/backups/mysql-backup.sh &gt;&gt;/mnt/data/mysql/backups/checkES.log 2&gt;&amp;1]]></content>
      <categories>
        <category>Script</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dockeréƒ¨ç½²åŒºå—é“¾èŠ‚ç‚¹]]></title>
    <url>%2Fdocker-ethereum-rinkeby%2F</url>
    <content type="text"><![CDATA[EthereumRinkeby1docker run -it -d --name ethereum-node -p 8545:8545 -p 30303:30303 -v /mnt/data/ethereum:/root/.ethereum ethereum/client-go --rinkeby --rpc --rpcaddr "0.0.0.0"]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>BlockChain</tag>
        <tag>Ethereum</tag>
        <tag>Bitcoin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hystrix Dashboard æ–­è·¯å™¨ç›‘æŽ§]]></title>
    <url>%2Fhystrix-dashboard%2F</url>
    <content type="text"><![CDATA[Hystrix Dashboard æ˜¯ Hystrix æä¾›çš„ä¸€ä¸ªå¯ä»¥æŸ¥çœ‹ Hystrix ç›‘æŽ§æ•°æ®çš„æŽ§åˆ¶é¢æ¿ . Hystrixæä¾›äº†è¿‘å®žæ—¶çš„æ•°æ®ç›‘æŽ§ , Hystrix ä¼šå®žæ—¶ã€ç´¯åŠ çš„è®°å½•æ‰€æœ‰å…³äºŽ HystrixCommand çš„æ‰§è¡Œä¿¡æ¯ , åŒ…æ‹¬æ¯ç§’æ‰§è¡Œå¤šå°‘è¯·æ±‚ , å¤šå°‘æˆåŠŸå’Œå¤šå°‘å¤±è´¥ç­‰. åˆ›å»º Hystrix Dashboard å·¥ç¨‹ä¾èµ– pom.xml 123456789&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix-dashboard&lt;/artifactId&gt; &lt;/dependency&gt; application.yml 123456789server: port: 13000spring: application: name: dashboard cloud: consul: discovery: service-name: $&#123;spring.application.name&#125; å¯åŠ¨ç±»å¢žåŠ æ³¨è§£ 12345678910@SpringBootApplication@EnableDiscoveryClient@EnableHystrixDashboardpublic class HystrixDashboardApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(HystrixDashboardApplication.class, args); &#125;&#125; @EnableHystrixDashboardï¼šå¯åŠ¨Hystrix Dashboardæ–­è·¯å™¨çœ‹æ¿ç›¸å…³é…ç½® å¯åŠ¨åº”ç”¨ , æ‰“å¼€æµè§ˆå™¨ http://localhost:13000/hystrix ä»¥ä¸Šä¾¿é…ç½®å¥½äº† Dashboard . é€šè¿‡ä¸»é¡µçš„æ–‡å­— , æˆ‘ä»¬å¯ä»¥çŸ¥é“ Hystrix Dashboard æ”¯æŒä¸‰ç§ä¸åŒçš„ç›‘æŽ§æ–¹å¼ . é»˜è®¤çš„é›†ç¾¤ç›‘æŽ§. é€šè¿‡ http://turbine-hostname:port/turbine.stream å¼€å¯ , å®žçŽ°å¯¹é»˜è®¤é›†ç¾¤çš„ç›‘æŽ§ æŒ‡å®šçš„é›†ç¾¤ç›‘æŽ§. é€šè¿‡ http://turbine-hostname:port/turbine.stream?cluster=[clusterName] å¼€å¯ , å®žçŽ°å¯¹ clusterName é›†ç¾¤çš„ç›‘æŽ§ å•ä½“åº”ç”¨çš„ç›‘æŽ§ . å®žçŽ°å¯¹å…·ä½“æŸä¸ªæœåŠ¡å®žä¾‹çš„ç›‘æŽ§ . é€šè¿‡ http://hystrix-app:port/actuator/hystrix.stream Actuator 2.x ä»¥åŽ endpoints å…¨éƒ¨åœ¨ /actuator ä¸‹ ,å¯ä»¥é€šè¿‡ management.endpoints.web.base-path ä¿®æ”¹ è¢«ç›‘æŽ§æœåŠ¡é…ç½®pom.xml 12345678&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&lt;/dependency&gt; ä¸ºå¯åŠ¨ç±»æ·»åŠ  @EnableCircuitBreaker æˆ–@EnableHystrix æ³¨è§£ , å¼€å¯æ–­è·¯å™¨åŠŸèƒ½ é…ç½®æ–‡ä»¶ application.yml ä¸­æ·»åŠ  12345management: endpoints: web: exposure: include: hystrix.stream management.endpoints.web.exposure.include è¿™ä¸ªäº‹ç”¨æ¥æš´éœ² endpoints çš„ . ç”±äºŽ endpoints ä¸­ä¼šåŒ…å«å¾ˆå¤šæ•æ„Ÿä¿¡æ¯ , é™¤äº† health å’Œ info ä¸¤ä¸ªæ”¯æŒ web è®¿é—®å¤– , å…¶ä»–çš„é»˜è®¤ä¸æ”¯æŒ web è®¿é—® . è¯¦æƒ…è¯·å‚è€ƒ 50.Endpoints ä½¿ç”¨åœ¨ Dashboard ä¸»ç•Œé¢è¾“å…¥å¯¹åº”çš„åœ°å€ , ç„¶åŽç‚¹å‡» Monitor Stream æŒ‰é’®è¿›å…¥é¡µé¢ . ç„¶åŽè¯·æ±‚å¯¹åº”æœåŠ¡ , ä¼šå‡ºçŽ°ä»¥ä¸‹ç•Œé¢ å¦‚æžœåœ¨è¯¥ç•Œé¢å‡ºçŽ°æŠ¥é”™ Unable to connect to Command Metric Stream. , å¯ä»¥å‚è€ƒè¿™ä¸ª Issue ç•Œé¢è§£è¯» ä»¥ä¸Šå›¾æ¥è¯´æ˜Žå…¶ä¸­å„å…ƒç´ çš„å…·ä½“å«ä¹‰: å®žå¿ƒåœ†ï¼šå®ƒæœ‰é¢œè‰²å’Œå¤§å°ä¹‹åˆ† , åˆ†åˆ«ä»£è¡¨å®žä¾‹çš„ç›‘æŽ§ç¨‹åº¦å’Œæµé‡å¤§å° . å¦‚ä¸Šå›¾æ‰€ç¤º , å®ƒçš„å¥åº·åº¦ä»Žç»¿è‰²ã€é»„è‰²ã€æ©™è‰²ã€çº¢è‰²é€’å‡ . é€šè¿‡è¯¥å®žå¿ƒåœ†çš„å±•ç¤º , æˆ‘ä»¬å°±å¯ä»¥åœ¨å¤§é‡çš„å®žä¾‹ä¸­å¿«é€Ÿçš„å‘çŽ°æ•…éšœå®žä¾‹å’Œé«˜åŽ‹åŠ›å®žä¾‹ . æ›²çº¿ï¼šç”¨æ¥è®°å½• 2 åˆ†é’Ÿå†…æµé‡çš„ç›¸å¯¹å˜åŒ– , æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒæ¥è§‚å¯Ÿåˆ°æµé‡çš„ä¸Šå‡å’Œä¸‹é™è¶‹åŠ¿ . å…¶ä»–ä¸€äº›æ•°é‡æŒ‡æ ‡å¦‚ä¸‹å›¾æ‰€ç¤º å‚è€ƒé“¾æŽ¥ Spring Cloudï¼ˆäº”ï¼‰ï¼šHystrix ç›‘æŽ§é¢æ¿ã€Finchley ç‰ˆã€‘ CSDN: hystrix-dashboard]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Hystrix</tag>
        <tag>SpringCloud</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQLè¿žæŽ¥è¶…æ—¶è®¾ç½®]]></title>
    <url>%2Fmysql-settings%2F</url>
    <content type="text"><![CDATA[é¦–å…ˆç™»å½•æ•°æ®åº“ æŸ¥çœ‹è¿žæŽ¥æ•°show processlist; å¯ä»¥å‘çŽ°æœ‰å¾ˆå¤šè¿žæŽ¥å¤„äºŽ Sleep çŠ¶æ€ , è¿™äº›è¿žæŽ¥å…¶å®žæš‚æ—¶æ˜¯æ²¡æœ‰ç”¨çš„ , å¯ä»¥ kill æŽ‰ æŸ¥çœ‹æœ€å¤§è¿žæŽ¥æ•°show variables like &quot;max_connections&quot;; å®‰è£… MySQL 8.0 é»˜è®¤å€¼æ˜¯ 151 ä¸ª, å¯ä»¥é€‚å½“è¿›è¡Œè°ƒæ•´ è®¾ç½®æœ€å¤§è¿žæŽ¥æ•°set GLOBAL max_connections=1000; ä¿®æ”¹æœ€å¤§è¿žæŽ¥æ•° , ä½†æ˜¯è¿™ä¸æ˜¯ä¸€åŠ³æ°¸é€¸çš„æ–¹æ³• , åº”è¯¥è¦è®© MySQL è‡ªåŠ¨æ€æ­» Sleep çš„è¿žæŽ¥ æŸ¥çœ‹éžäº¤äº’è¿žæŽ¥è¶…æ—¶show global variables like &#39;wait_timeout&#39;; è¿™ä¸ªæ•°å€¼æŒ‡çš„æ˜¯ MySQL åœ¨å…³é—­ä¸€ä¸ªéžäº¤äº’çš„è¿žæŽ¥ä¹‹å‰è¦ç­‰å¾…çš„æè¿° , é»˜è®¤æ˜¯ 28800 s . ä¿®æ”¹éžäº¤äº’è¿žæŽ¥è¶…æ—¶set global wait_timeout=300; ç¬”è€…å°è¯•å°†å…¶æ”¹ä¸º 300 s ,åœ¨ç”Ÿäº§ä¸Šå°±ä¼šé‡åˆ°æœåŠ¡çªç„¶è¿žæŽ¥ä¸åˆ°æ•°æ®åº“çš„æƒ…å†µ , æŠ¥é”™ Communications link failure... å› æ­¤åˆæ”¹å›žäº†é»˜è®¤å€¼ . ä¿®æ”¹äº¤äº’è¿žæŽ¥è¶…æ—¶set global interactive_timeout=500; ä¿®æ”¹è¿™ä¸ªæ•°å€¼ , è¡¨ç¤º MySQL åœ¨å…³é—­ä¸€ä¸ªé“¾æŽ¥ä¹‹å‰è¦ç­‰å¾…çš„ç§’æ•° , è‡³æ­¤å¯ä»¥è®© MySQL è‡ªåŠ¨å…³é—­å“ªäº›æ²¡ç”¨çš„è¿žæŽ¥ , ä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ , æ­£åœ¨ä½¿ç”¨çš„è¿žæŽ¥åˆ°äº†æ—¶é—´ä¹Ÿä¼šè¢«å…³é—­ , å› æ­¤æ•°å€¼è¦åˆé€‚ . æ‰¹é‡Killè¿žæŽ¥é¦–å…ˆæŸ¥å‡ºæ¥æ‰€ç”¨ Sleep è¿žæŽ¥ id select concat(&#39;KILL &#39;,id,&#39;;&#39;) from information_schema.processlist where user=&#39;root&#39;; copy å‡ºæ¥åŽæ›¿æ¢åŽå¤åˆ¶å›žç»ˆç«¯è¿è¡Œ .å†è¿›è¡ŒæŸ¥çœ‹ å‚è€ƒé“¾æŽ¥ç®€ä¹¦]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ERC20æ‰¹é‡è½¬è´¦ç©ºæŠ•æ™ºèƒ½åˆçº¦å…¼å®¹é—®é¢˜]]></title>
    <url>%2Ferc20-smartcontract-compatibility%2F</url>
    <content type="text"><![CDATA[åŒºå—é“¾ç³»åˆ—è®¸ä¹…æ²¡æœ‰æ›´æ–°äº† , è¿™é‡Œæ›´æ–°ä¸€ç¯‡å…³äºŽ ERC20 æ™ºèƒ½åˆçº¦æ‰¹é‡è½¬è´¦(ç©ºæŠ•)çš„æ–‡ç«  . åœ¨ä»¥å¤ªåŠå¼€å‘ä¸­ , å…ä¸äº†ä¼šæœ‰æ‰¹é‡è½¬è´¦(ç©ºæŠ•)çš„éœ€æ±‚ . å› ä¸º nonce æœºåˆ¶çš„é—®é¢˜ , è½¬è´¦çš„å½¢å¼æ˜Žæ˜¾ä¸æ™º , æ­¤æ—¶æˆ‘ä»¬éœ€è¦é€šè¿‡æ™ºèƒ½åˆçº¦å®žçŽ° . é€šå¸¸ç©ºæŠ•åˆçº¦æˆ‘ä»¬æ˜¯åœ¨ç½‘ä¸Šæ‰¾ä¸€ä»½ , ç„¶åŽ Tether USDT é¦–å½“å…¶å†²æˆä¸ºæˆ‘ä»¬çš„æµ‹è¯• Token . åœ¨ä¸¤è€…åˆçº¦éƒ¨ç½²åŽ , æµ‹è¯•æ—¶å¾ˆå¯èƒ½å‘çŽ°æ— æ³•ç©ºæŠ•æˆåŠŸ , å¾—åˆ° Gas estimation failed...gas required exceeds allowance... çš„é”™è¯¯(å½“ç„¶æœ‰å…ˆ approve æˆåŠŸ) . äºŽæ˜¯ä¹Žæˆ‘ä»¬åŽ»ç©ºæŠ•åˆçº¦å„ç§å®šä½é—®é¢˜ , æœ€ç»ˆå¯èƒ½ä¹Ÿå¾ˆéš¾å‘çŽ°é—®é¢˜ . å…¶å®žè¿™é‡Œå¹¶ä¸æ˜¯ç©ºæŠ•åˆçº¦è‡ªèº«äº§ç”Ÿäº†é—®é¢˜ , è€Œæ˜¯ä¸€ä¸ª Token åˆçº¦å…¼å®¹æ€§çš„é—®é¢˜ . æŽ¥ä¸‹æ¥æˆ‘ä»¬è¿›å…¥åˆ†æž . è¿‡ç¨‹åˆ†æžé¦–å…ˆæ˜¯å…ˆ copy ä¸€ä»½ Tether USDT çš„åˆçº¦æºç è¿›è¡Œéƒ¨ç½² , è¿™é‡Œæˆ‘ä»¬é€‰æ‹© Rinkeby æµ‹è¯•ç½‘ç»œ , è¿‡ç¨‹ç•¥è¿‡ . ç„¶åŽæˆ‘ä»¬å†éƒ¨ç½²ç©ºæŠ•åˆçº¦ . ç¬”è€…æœ€åˆæ˜¯åœ¨ä»¥ä¸‹ç©ºæŠ•åˆçº¦åŸºç¡€ä¸Šé€‰æ‹©åŽè¿›è¡Œäº†ä¿®æ”¹ , ç„¶åŽéƒ¨ç½² . multisender Token-BulkSender ä¸¤è€…å‡æœ‰æ¼”ç¤ºç½‘ç«™ , æœ€åŽç¬”è€…é€‰æ‹©äº† multisender multisender åˆçº¦æœ‰ä¸¤ä¸ªç©ºæŠ•æ–¹æ³• multisendEther(address[] _contributors, uint256[] _balances) ç©ºæŠ• ETH multisendToken(address token, address[] _contributors, uint256[] _balances) ç©ºæŠ• ERC20 Token è€Œåœ¨æµ‹è¯•ä¸­å‘çŽ° , ç©ºæŠ• Token çš„æ–¹æ³•æ— æ³•æˆåŠŸ , æŠ¥ `Gas estimation failed...gas required exceeds allowance... å‡ºçŽ°è¿™ä¸ªé”™è¯¯çš„åŽŸå› è¾ƒå¤§çš„å¯èƒ½æ˜¯åˆçº¦ä¸­ require() æ–­è¨€æ¡ä»¶ , æˆ–è€…ç›´æŽ¥è§¦å‘äº†å…¶ä»–å¤±è´¥çš„æ–­è¨€ . 12345678910111213141516function multisendToken(address token, address[] _contributors, uint256[] _balances) public hasFee payable &#123; if (token == 0x000000000000000000000000000000000000bEEF)&#123; multisendEther(_contributors, _balances); &#125; else &#123; uint256 total = 0; require(_contributors.length &lt;= arrayLimit()); ERC20 erc20token = ERC20(token); uint8 i = 0; for (i; i &lt; _contributors.length; i++) &#123; erc20token.transferFrom(msg.sender, _contributors[i], _balances[i]); total += _balances[i]; &#125; setTxCount(msg.sender, txCount(msg.sender).add(1)); emit Multisended(total, token); &#125;&#125; è¿™é‡Œè´´ä¸€ä¸‹åˆçº¦æ­¤å‡½æ•°çš„å®Œæ•´å®žçŽ° , æµ‹è¯•ä¸­åŸºæœ¬ä¸Šæ˜¾å¼æ–­è¨€éƒ½æ˜¯æ»¡è¶³çš„ , è¿™é‡Œå°±åªå¯èƒ½æ˜¯ erc20token.transferFrom(...) è§¦å‘äº†å¤±è´¥ . ç»è¿‡ä¸€ç•ªå®šä½å‘çŽ° , æ ¹æœ¬åŽŸå› æ˜¯ Tether USDT æœªä¸¥æ ¼éµå¾ª ERC20 æ ‡å‡† , transferFrom æ–¹æ³•æœªè¿”å›ž bool å€¼ , è€Œ solidity ç¼–è¯‘å™¨åœ¨ 0.4.22 ç‰ˆæœ¬ä¹‹åŽå¯¹äºŽè¿™ç§æƒ…å†µä¼šå‘ç”Ÿ revert. è€Œå¯¹äºŽ 0.4.22 ä¹‹å‰çš„ç‰ˆæœ¬ , å½“å¤–éƒ¨åˆçº¦è°ƒç”¨æ²¡æœ‰è¿”å›žå€¼çš„ transfer å’Œ transferFrom , å¤–éƒ¨åˆçº¦è¿˜æ˜¯ä¼šåœ¨å†…å­˜ä¸­æŸ¥è¯¢å‡½æ•°çš„è¿”å›žå€¼ . ç”±äºŽæ²¡æœ‰çœŸæ­£çš„è¿”å›žå€¼ , å¤–éƒ¨è°ƒç”¨åˆçº¦è¿”å›žå€¼æœ¬åº”åœ¨å†…å­˜ä¸­å­˜å‚¨å¯¹åº”çš„ä½ç½®æŸ¥æ‰¾ , å°†æŸ¥åˆ°çš„æ•°æ®ä½œä¸ºè¿”å›žå€¼ . å®žé™…ä¸Š , æŸ¥è¯¢åˆ°çš„è¿”å›žå€¼å¹¶ä¸æ˜¯å‡½æ•°çš„è¿”å›žå€¼ , é€šå¸¸æ˜¯ä¸€ä¸ªå¤§äºŽ 0 çš„å€¼ , å¤–éƒ¨è°ƒç”¨åˆçº¦å°†å…¶è§†ä¸º true . å› ä¸ºæ ¹æ® EVM çš„å†…å­˜å¸ƒå±€, å‡½æ•°è°ƒç”¨æ•°æ®ï¼ˆcall dataï¼‰ä¸Žå‡½æ•°è¿”å›žæ•°æ®ï¼ˆreturn dataï¼‰æ˜¯å…±åŒä½¿ç”¨ä¸€å—å†…å­˜åŒºåŸŸ, å¦‚æžœ transfer() å‡½æ•°æ²¡æœ‰è°ƒç”¨ RETURN æŒ‡ä»¤è¿”å›žä»»ä½•å€¼, é‚£ä¹ˆå¦‚æžœè°ƒç”¨è€…åŽ»ç”¨ RETURNDATACOPY æ¥å–è¿”å›žå€¼çš„æ—¶å€™, ä¼šå°†å†…å­˜ä¸­çš„è„æ•°æ®å–å›ž. è„æ•°æ®çš„å€¼å¾ˆå¤§æ¦‚çŽ‡ä¼šä¸º éžé›¶å€¼, è¿™åœ¨EVMé‡Œé¢ä»£è¡¨ â€œtrueâ€. ä½†æ˜¯è¿™é‡Œè¯·æ³¨æ„, è„æ•°æ®ä¹Ÿå¾ˆæœ‰å¯èƒ½æ˜¯ é›¶, ä»£è¡¨ â€œfalseâ€. è¿™å°±æ„å‘³ç€: å³ä½¿tokenåˆçº¦æ­£å¸¸å®Œæˆäº†è½¬è´¦, ä½†æ˜¯å´è¿”å›ž â€œfalseâ€, å¯¼è‡´å¤–éƒ¨çš„ DAPP è¯¯è®¤ä¸ºè½¬è´¦æ²¡æœ‰æˆåŠŸ, è¿›è€Œå¯èƒ½å¼•å‘å®‰å…¨æ¼æ´ž. è¿™é‡Œå»ºè®®æŸ¥çœ‹ æ•°åƒä»½ä»¥å¤ªåŠ Token åˆçº¦ä¸å…¼å®¹é—®é¢˜æµ®å‡ºæ°´é¢, ä¸¥é‡å½±å“ DAPP ç”Ÿæ€ , æ–‡ç« æœ‰è¯¦ç»†çš„è¯´æ˜Ž . è§£å†³æ–¹æ¡ˆå¯¹äºŽè¿™ç§ä¸å…¼å®¹ , æˆ‘ä»¬è¯¥å¦‚ä½•åº”å¯¹ ? Token æ–¹é‡æ–°å‘å¸ƒåˆçº¦ DAPP å¼€å‘è€…éœ€è¦åŒä¸€ä¸ªå®‰å…¨çš„è°ƒç”¨ä»£ç æ¥è®¿é—®å„ç§ä¸å…¼å®¹çš„ ERC20 Token åˆçº¦ ä»¥å¤ªåŠç¡¬åˆ†å‰å‡çº§ è™½ç„¶æˆ‘ä»¬è®¤ä¸ºç¬¬ä¸€ç§æ–¹æ¡ˆæ˜¯èƒ½å½»åº•è§£å†³è¿™ä¸€éƒ¨å…¼å®¹æ€§é—®é¢˜å¸¦æ¥çš„å®‰å…¨é£Žé™© , ä½†æ˜¯å¯è¡Œæ€§ä¸é«˜ .ç¬¬ä¸‰ç§è¿‘æœŸéš¾ä»¥å¾—åˆ°å¦¥å–„è§£å†³ . æœ€ç»ˆåªèƒ½ä»Žæ–¹æ¡ˆäºŒå¼€å§‹ç€æ‰‹ , æˆ‘ä»¬éœ€è¦é‡‡ç”¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä½œä¸ºè°ƒç”¨ transfer æˆ–tranferFrom ç­‰çš„ä¸­é—´å±‚ä»£ç  : 12345678910111213141516171819202122232425262728library ERC20AsmTransfer &#123; function asmTransfer(address _erc20Addr, address _to, uint256 _value) internal returns (bool result) &#123;â€‹ // Must be a contract addr first! assembly &#123; if iszero(extcodesize(_erc20Addr)) &#123; revert(0, 0) &#125; &#125; // call return false when something wrong require(_erc20Addr.call(bytes4(keccak256(&quot;transfer(address,uint256)&quot;)), _to, _value)); // handle returndata assembly &#123; switch returndatasize() case 0 &#123; // not a std erc20 result := not(0) &#125; case 32 &#123; // std erc20 returndatacopy(0, 0, 32) result := mload(0) &#125; default &#123; // anything else, should revert for safety revert(0, 0) &#125; &#125; return result; &#125;&#125; è¿™æ®µä»£ç ä½¿ç”¨ call æ–¹æ³•æ‰‹åŠ¨ç›´æŽ¥è°ƒç”¨ transfer()å‡½æ•°, å¹¶ä½¿ç”¨å†…è” assembly code æ‰‹åŠ¨èŽ·å– returndatasize() è¿›è¡Œåˆ¤æ–­. å¦‚æžœä¸º 0, åˆ™è¡¨æ˜Žè¢«è°ƒç”¨ ERC20 åˆçº¦æ­£å¸¸æ‰§è¡Œå®Œæ¯•, ä½†æ²¡æœ‰è¿”å›žå€¼, å³è½¬è´¦æˆåŠŸï¼›å¦‚æžœä¸º 32, åˆ™è¡¨æ˜ŽERC20åˆçº¦ç¬¦åˆæ ‡å‡†, ç›´æŽ¥è¿›è¡Œ returndatacopy() æ“ä½œ, è°ƒç”¨ mload() æ‹¿åˆ°è¿”å›žå€¼è¿›è¡Œåˆ¤æ–­å³å¯ï¼›å¦‚æžœä¸ºå…¶ä»–å€¼åˆ™ revert. å°è£…æˆå‡½æ•°æ›¿ä»£ transfer ä½¿ç”¨. å®Œæ•´çš„ä¸­é—´å±‚ä»£ç å¯ä»¥å‚è€ƒ SECBIT å®žéªŒå®¤çš„ä»“åº“ badERC20Fix å¦å¤–è¿™é‡Œé™„ä¸Šä¿®æ”¹åŽçš„ multisender æºç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476pragma solidity ^0.4.24;library ERC20AsmFn &#123; function isContract(address addr) internal view &#123; assembly &#123; if iszero(extcodesize(addr)) &#123; revert(0, 0) &#125; &#125; &#125; function handleReturnData() internal pure returns (bool result) &#123; assembly &#123; switch returndatasize() case 0 &#123; // not a std erc20 result := 1 &#125; case 32 &#123; // std erc20 returndatacopy(0, 0, 32) result := mload(0) &#125; default &#123; // anything else, should revert for safety revert(0, 0) &#125; &#125; &#125; function asmTransfer(address _erc20Addr, address _to, uint256 _value) internal returns (bool result) &#123; // Must be a contract addr first! isContract(_erc20Addr); // call return false when something wrong require(_erc20Addr.call(bytes4(keccak256(&quot;transfer(address,uint256)&quot;)), _to, _value)); // handle returndata return handleReturnData(); &#125; function asmTransferFrom(address _erc20Addr, address _from, address _to, uint256 _value) internal returns (bool result) &#123; // Must be a contract addr first! isContract(_erc20Addr); // call return false when something wrong require(_erc20Addr.call(bytes4(keccak256(&quot;transferFrom(address,address,uint256)&quot;)), _from, _to, _value)); // handle returndata return handleReturnData(); &#125; function asmApprove(address _erc20Addr, address _spender, uint256 _value) internal returns (bool result) &#123; // Must be a contract addr first! isContract(_erc20Addr); // call return false when something wrong require(_erc20Addr.call(bytes4(keccak256(&quot;approve(address,uint256)&quot;)), _spender, _value)); // handle returndata return handleReturnData(); &#125;&#125;interface ERC20 &#123; function balanceOf(address who) external view returns (uint256); function transfer(address _to, uint256 _value) external returns (bool success); function transferFrom(address _from, address _to, uint256 _value) external returns (bool success); function approve(address _spender, uint256 _value) external returns (bool success);&#125;contract TestERC20AsmTransfer &#123; using ERC20AsmFn for ERC20; function dexTestTransfer(address _token, address _to, uint256 _value) public &#123; require(ERC20(_token).asmTransfer(_to, _value)); &#125; function dexTestTransferFrom(address _token, address _from, address _to, uint256 _value) public &#123; require(ERC20(_token).asmTransferFrom(_from, _to, _value)); &#125; function dexTestApprove(address _token, address _spender, uint256 _value) public &#123; require(ERC20(_token).asmApprove(_spender, _value)); &#125;&#125;// File: contracts/EternalStorage.sol// Roman Storm Multi Sender// To Use this Dapp: https://rstormsf.github.io/multisenderpragma solidity 0.4.24;/** * @title EternalStorage * @dev This contract holds all the necessary state variables to carry out the storage of any contract. */contract EternalStorage &#123; mapping(bytes32 =&gt; uint256) internal uintStorage; mapping(bytes32 =&gt; string) internal stringStorage; mapping(bytes32 =&gt; address) internal addressStorage; mapping(bytes32 =&gt; bytes) internal bytesStorage; mapping(bytes32 =&gt; bool) internal boolStorage; mapping(bytes32 =&gt; int256) internal intStorage;&#125;// File: contracts/UpgradeabilityOwnerStorage.sol// Roman Storm Multi Sender// To Use this Dapp: https://rstormsf.github.io/multisenderpragma solidity 0.4.24;/** * @title UpgradeabilityOwnerStorage * @dev This contract keeps track of the upgradeability owner */contract UpgradeabilityOwnerStorage &#123; // Owner of the contract address private _upgradeabilityOwner; /** * @dev Tells the address of the owner * @return the address of the owner */ function upgradeabilityOwner() public view returns (address) &#123; return _upgradeabilityOwner; &#125; /** * @dev Sets the address of the owner */ function setUpgradeabilityOwner(address newUpgradeabilityOwner) internal &#123; _upgradeabilityOwner = newUpgradeabilityOwner; &#125;&#125;// File: contracts/UpgradeabilityStorage.sol// Roman Storm Multi Sender// To Use this Dapp: https://rstormsf.github.io/multisenderpragma solidity 0.4.24;/** * @title UpgradeabilityStorage * @dev This contract holds all the necessary state variables to support the upgrade functionality */contract UpgradeabilityStorage &#123; // Version name of the current implementation string internal _version; // Address of the current implementation address internal _implementation; /** * @dev Tells the version name of the current implementation * @return string representing the name of the current version */ function version() public view returns (string) &#123; return _version; &#125; /** * @dev Tells the address of the current implementation * @return address of the current implementation */ function implementation() public view returns (address) &#123; return _implementation; &#125;&#125;// File: contracts/OwnedUpgradeabilityStorage.sol// Roman Storm Multi Sender// To Use this Dapp: https://rstormsf.github.io/multisenderpragma solidity &gt;=0.4.24;/** * @title OwnedUpgradeabilityStorage * @dev This is the storage necessary to perform upgradeable contracts. * This means, required state variables for upgradeability purpose and eternal storage per se. */contract OwnedUpgradeabilityStorage is UpgradeabilityOwnerStorage, UpgradeabilityStorage, EternalStorage &#123;&#125;// File: contracts/SafeMath.sol// Roman Storm Multi Sender// To Use this Dapp: https://rstormsf.github.io/multisenderpragma solidity 0.4.24;/** * @title SafeMath * @dev Math operations with safety checks that throw on error */library SafeMath &#123; /** * @dev Multiplies two numbers, throws on overflow. */ function mul(uint256 a, uint256 b) internal pure returns (uint256) &#123; if (a == 0) &#123; return 0; &#125; uint256 c = a * b; assert(c / a == b); return c; &#125; /** * @dev Integer division of two numbers, truncating the quotient. */ function div(uint256 a, uint256 b) internal pure returns (uint256) &#123; // assert(b &gt; 0); // Solidity automatically throws when dividing by 0 uint256 c = a / b; // assert(a == b * c + a % b); // There is no case in which this doesn&apos;t hold return c; &#125; /** * @dev Substracts two numbers, throws on overflow (i.e. if subtrahend is greater than minuend). */ function sub(uint256 a, uint256 b) internal pure returns (uint256) &#123; assert(b &lt;= a); return a - b; &#125; /** * @dev Adds two numbers, throws on overflow. */ function add(uint256 a, uint256 b) internal pure returns (uint256) &#123; uint256 c = a + b; assert(c &gt;= a); return c; &#125;&#125;// File: contracts/multisender/Ownable.sol// Roman Storm Multi Sender// To Use this Dapp: https://rstormsf.github.io/multisenderpragma solidity 0.4.24;/** * @title Ownable * @dev This contract has an owner address providing basic authorization control */contract Ownable is EternalStorage &#123; /** * @dev Event to show ownership has been transferred * @param previousOwner representing the address of the previous owner * @param newOwner representing the address of the new owner */ event OwnershipTransferred(address previousOwner, address newOwner); /** * @dev Throws if called by any account other than the owner. */ modifier onlyOwner() &#123; require(msg.sender == owner()); _; &#125; /** * @dev Tells the address of the owner * @return the address of the owner */ function owner() public view returns (address) &#123; return addressStorage[keccak256(&quot;owner&quot;)]; &#125; /** * @dev Allows the current owner to transfer control of the contract to a newOwner. * @param newOwner the address to transfer ownership to. */ function transferOwnership(address newOwner) public onlyOwner &#123; require(newOwner != address(0)); setOwner(newOwner); &#125; /** * @dev Sets a new owner address */ function setOwner(address newOwner) internal &#123; emit OwnershipTransferred(owner(), newOwner); addressStorage[keccak256(&quot;owner&quot;)] = newOwner; &#125;&#125;// File: contracts/multisender/Claimable.sol// Roman Storm Multi Sender// To Use this Dapp: https://rstormsf.github.io/multisenderpragma solidity 0.4.24;/** * @title Claimable * @dev Extension for the Ownable contract, where the ownership needs to be claimed. * This allows the new owner to accept the transfer. */contract Claimable is EternalStorage, Ownable &#123; function pendingOwner() public view returns (address) &#123; return addressStorage[keccak256(&quot;pendingOwner&quot;)]; &#125; /** * @dev Modifier throws if called by any account other than the pendingOwner. */ modifier onlyPendingOwner() &#123; require(msg.sender == pendingOwner()); _; &#125; /** * @dev Allows the current owner to set the pendingOwner address. * @param newOwner The address to transfer ownership to. */ function transferOwnership(address newOwner) public onlyOwner &#123; require(newOwner != address(0)); addressStorage[keccak256(&quot;pendingOwner&quot;)] = newOwner; &#125; /** * @dev Allows the pendingOwner address to finalize the transfer. */ function claimOwnership() public onlyPendingOwner &#123; emit OwnershipTransferred(owner(), pendingOwner()); addressStorage[keccak256(&quot;owner&quot;)] = addressStorage[keccak256(&quot;pendingOwner&quot;)]; addressStorage[keccak256(&quot;pendingOwner&quot;)] = address(0); &#125;&#125;// File: contracts/multisender/UpgradebleStormSender.sol// Roman Storm Multi Sender// To Use this Dapp: https://rstormsf.github.io/multisenderpragma solidity 0.4.24;contract UpgradebleStormSender is OwnedUpgradeabilityStorage, Claimable &#123; using SafeMath for uint256; using ERC20AsmFn for ERC20; event Multisended(uint256 total, address tokenAddress); event ClaimedTokens(address token, address owner, uint256 balance); modifier hasFee() &#123; if (currentFee(msg.sender) &gt; 0) &#123; require(msg.value &gt;= currentFee(msg.sender)); &#125; _; &#125; function() public payable &#123;&#125; function initialize(address _owner) public &#123; require(!initialized()); setOwner(_owner); setArrayLimit(200); setDiscountStep(0.00005 ether); setFee(0.05 ether); boolStorage[keccak256(&quot;rs_multisender_initialized&quot;)] = true; &#125; function initialized() public view returns (bool) &#123; return boolStorage[keccak256(&quot;rs_multisender_initialized&quot;)]; &#125; function txCount(address customer) public view returns(uint256) &#123; return uintStorage[keccak256(&quot;txCount&quot;, customer)]; &#125; function arrayLimit() public view returns(uint256) &#123; return uintStorage[keccak256(&quot;arrayLimit&quot;)]; &#125; function setArrayLimit(uint256 _newLimit) public onlyOwner &#123; require(_newLimit != 0); uintStorage[keccak256(&quot;arrayLimit&quot;)] = _newLimit; &#125; function discountStep() public view returns(uint256) &#123; return uintStorage[keccak256(&quot;discountStep&quot;)]; &#125; function setDiscountStep(uint256 _newStep) public onlyOwner &#123; require(_newStep != 0); uintStorage[keccak256(&quot;discountStep&quot;)] = _newStep; &#125; function fee() public view returns(uint256) &#123; return uintStorage[keccak256(&quot;fee&quot;)]; &#125; function currentFee(address _customer) public view returns(uint256) &#123; if (fee() &gt; discountRate(msg.sender)) &#123; return fee().sub(discountRate(_customer)); &#125; else &#123; return 0; &#125; &#125; function setFee(uint256 _newStep) public onlyOwner &#123; require(_newStep != 0); uintStorage[keccak256(&quot;fee&quot;)] = _newStep; &#125; function discountRate(address _customer) public view returns(uint256) &#123; uint256 count = txCount(_customer); return count.mul(discountStep()); &#125; function multisendToken(address token, address[] _contributors, uint256[] _balances) public hasFee payable &#123; if (token == 0x000000000000000000000000000000000000bEEF)&#123; multisendEther(_contributors, _balances); &#125; else &#123; uint256 total = 0; require(_contributors.length &lt;= arrayLimit()); ERC20 erc20token = ERC20(token); uint8 i = 0; for (i; i &lt; _contributors.length; i++) &#123; require(erc20token.asmTransferFrom(msg.sender,_contributors[i],_balances[i])); total += _balances[i]; &#125; setTxCount(msg.sender, txCount(msg.sender).add(1)); emit Multisended(total, token); &#125; &#125; function multisendEther(address[] _contributors, uint256[] _balances) public payable &#123; uint256 total = msg.value; uint256 current = currentFee(msg.sender); require(total &gt;= current); require(_contributors.length &lt;= arrayLimit()); total = total.sub(current); uint256 i = 0; for (i; i &lt; _contributors.length; i++) &#123; require(total &gt;= _balances[i]); total = total.sub(_balances[i]); _contributors[i].transfer(_balances[i]); &#125; setTxCount(msg.sender, txCount(msg.sender).add(1)); emit Multisended(msg.value, 0x000000000000000000000000000000000000bEEF); &#125; function claimTokens(address _token) public onlyOwner &#123; if (_token == 0x0) &#123; owner().transfer(address(this).balance); return; &#125; ERC20 erc20token = ERC20(_token); uint256 balance = erc20token.balanceOf(this); require(erc20token.asmTransfer(owner(), balance)); emit ClaimedTokens(_token, owner(), balance); &#125; function setTxCount(address customer, uint256 _txCount) private &#123; uintStorage[keccak256(&quot;txCount&quot;, customer)] = _txCount; &#125;&#125; å‚è€ƒé“¾æŽ¥ æ•°åƒä»½ä»¥å¤ªåŠ Token åˆçº¦ä¸å…¼å®¹é—®é¢˜æµ®å‡ºæ°´é¢, ä¸¥é‡å½±å“ DAPP ç”Ÿæ€ ç®€ä¹¦:å¤§å‘ï¼ä»¥å¤ªåŠ USDT æ²¡æœ‰å®Œå…¨éµå¾ª ERC20 æ ‡å‡† åŒºå—é“¾ Dapp åˆçº¦è°ƒç”¨é‡åˆ°çš„é—®é¢˜)]]></content>
      <categories>
        <category>Blockchain</category>
      </categories>
      <tags>
        <tag>Solidity</tag>
        <tag>Smart Contract</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Closure Table-å¤šçº§å…³ç³»è®¾è®¡]]></title>
    <url>%2Fmysql-closuretable%2F</url>
    <content type="text"><![CDATA[åœ¨ç³»ç»Ÿè®¾è®¡ä¸­ , æ€»ä¼šç¢°åˆ°ä¸Šä¸‹çº§çš„æ¦‚å¿µ . ä¸åŒåœºæ™¯ä¸­ , å±‚çº§å…³ç³»å¯èƒ½ä¼šæ¯”è¾ƒå¤æ‚ , è¿™ä¸ªæ—¶å€™ , å¦‚ä½•è®¾è®¡å°±éžå¸¸é‡è¦äº† åœºæ™¯ä»‹ç»å¾ˆå¤šç³»ç»Ÿéƒ½ä¼šç»™ç”¨æˆ·è®¾è®¡ä¸€ä¸ªå±‚çº§çš„å…³ç³» , é‚€è¯·æˆ–è€…ä»£ç†å³å¯äº«å—ä¸‹çº§å¸¦æ¥çš„çº¢åˆ© , ä»¥è¾¾åˆ°è¿è¥äº§ç”Ÿè£‚å˜çš„æ•ˆæžœ . è¿™é‡Œç®€å•è¯´ä¸‹å¸¸ç”¨çš„æ•°æ®åº“è®¾è®¡ æ–¹æ¡ˆä¸€: ç›´æŽ¥è®°å½•çˆ¶çº§ id name parent 1 Arthas 0 2 Bill 1 3 Catherine 2 4 Damon 3 5 Finn 3 6 Grabby 3 ä¼˜ç‚¹ : å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ‰¾åˆ°ç”¨æˆ·çš„ä¸Šçº§ å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ‰¾åˆ°ç”¨æˆ·çš„ä¸€å±‚ä¸‹çº§ ç¼ºç‚¹: æŸ¥æ‰¾å¤šå±‚ä¸Šä¸‹çº§å¾ˆéš¾å¤„ç† æ–¹æ¡ˆäºŒ: è®°å½•è·¯å¾„ id name Path 1 Arthas 0 2 Bill 0-1 3 Catherine 0-1-2 4 Damon 0-1-2-3 5 Finn 0-1-2-3 6 Grabby 0-1-2-3 æ€»ç»“: è¿™ç§è®¾è®¡æ¯”è¾ƒå¸¸ç”¨ , ä½†åœ¨æŸ¥è¯¢å¤šå±‚æ—¶è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦ æ–¹æ¡ˆä¸‰: CLOSURE TABLEå¸¸è§„çš„ç”¨æˆ·è¡¨ id name parent 1 Arthas 0 2 Bill 1 3 Catherine 2 4 Damon 3 5 Finn 3 6 Grabby 3 å…³ç³»è¡¨ category_tree ancestor descendant distance 1 1 0 1 2 1 2 2 0 1 3 2 2 3 1 3 3 0 1 4 3 2 4 2 3 4 1 4 4 0 1 5 3 2 5 2 3 5 1 5 5 0 1 6 3 2 6 2 3 6 1 6 6 0 ancestor ç¥–å…ˆ: ä¸Šçº§çš„id descendant å­ä»£: ä¸‹çº§çš„id distance è·ç¦»: å­ä»£åˆ°ç¥–å…ˆä¸­é—´éš”äº†å‡ çº§ è¿™ä¸‰ä¸ªå­—æ®µçš„ç»„åˆæ˜¯å”¯ä¸€çš„ . å› ä¸ºåœ¨æ ‘ä¸­ , ä¸€æ¡è·¯å¾„å¯ä»¥æ ‡è¯†ä¸€ä¸ªèŠ‚ç‚¹ , æ‰€ä»¥å¯ä»¥ç›´æŽ¥æŠŠå®ƒä»¬ç»„åˆä½œä¸ºä¸»é”® . ä»¥è¡¨ä¸ºä¾‹ ,èŠ‚ç‚¹ 6 åˆ°å®ƒçš„ä¸Šçº§èŠ‚ç‚¹ 3 çš„è·ç¦»ä¸º1 åœ¨æ•°æ®åº“ä¸­å­˜å‚¨ä¸º ancestor=3,descentant=6,distance=1 åˆ°ä¸Šä¸¤çº§çš„èŠ‚ç‚¹ 2 çš„è·ç¦»ä¸º 2 äºŽæ˜¯æœ‰ ancestor=2,descentant=6,distance=2 . å¯¹äºŽè¿™æ ·çš„æ ‘ç»“æž„å¸¸ç”¨çš„æŸ¥è¯¢éƒ½èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„å¤„ç† . ç›¸å…³ç”¨æ³•1. å­èŠ‚ç‚¹æŸ¥è¯¢12345# æŸ¥è¯¢idä¸º5çš„èŠ‚ç‚¹çš„ç›´å±žå­èŠ‚ç‚¹ï¼šSELECT descendant FROM category_tree WHERE ancestor=5 AND distance=1# æŸ¥è¯¢æ‰€æœ‰å­èŠ‚ç‚¹ï¼šSELECT descendant FROM category_tree WHERE ancestor=5 AND distance&gt;0 æŸ¥è¯¢æŸä¸ªä¸Šçº§èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œæ¢å¥è¯è¯´å°±æ˜¯æŸ¥è¯¢å…·æœ‰æŒ‡å®šä¸Šçº§èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ancestorå­—æ®µç­‰äºŽä¸Šçº§èŠ‚ç‚¹idå³å¯ï¼Œç¬¬äºŒä¸ªè·ç¦»distanceå†³å®šäº†æŸ¥è¯¢çš„å¯¹è±¡æ˜¯ç”±ä¸Šçº§å¾€ä¸‹é‚£ä¸€å±‚çš„ï¼Œç­‰äºŽ1å°±æ˜¯å¾€ä¸‹ä¸€å±‚ï¼ˆç›´å±žå­èŠ‚ç‚¹ï¼‰ï¼Œå¤§äºŽ0å°±æ˜¯æ‰€æœ‰å­èŠ‚ç‚¹ã€‚è¿™ä¸¤ä¸ªæŸ¥è¯¢éƒ½æ˜¯ä¸€å¥å®Œæˆã€‚ 2. è·¯å¾„æŸ¥è¯¢1234567# æŸ¥è¯¢ç”±æ ¹èŠ‚ç‚¹åˆ°idä¸º10çš„èŠ‚ç‚¹ä¹‹é—´çš„æ‰€æœ‰èŠ‚ç‚¹ï¼ŒæŒ‰ç…§å±‚çº§ç”±å°åˆ°å¤§æŽ’åºSELECT ancestor FROM category_tree WHERE descendant=10 ORDER BY distance DESC# æŸ¥è¯¢idä¸º10çš„èŠ‚ç‚¹ï¼ˆå«ï¼‰åˆ°idä¸º3çš„èŠ‚ç‚¹ï¼ˆä¸å«ï¼‰ä¹‹é—´çš„æ‰€æœ‰èŠ‚ç‚¹ï¼ŒæŒ‰ç…§å±‚çº§ç”±å°åˆ°å¤§æŽ’åºSELECT ancestor FROM category_tree WHERE descendant=10 AND distance&lt;(SELECT distance FROM category_tree WHERE descendant=10 AND ancestor=3) ORDER BY distance DESC æŸ¥è¯¢è·¯å¾„ï¼Œåªéœ€è¦çŸ¥é“descendantå³å¯ï¼Œå› ä¸ºdescendantå­—æ®µæ‰€åœ¨çš„è¡Œå°±æ˜¯è®°å½•è¿™ä¸ªèŠ‚ç‚¹ä¸Žå…¶ä¸Šçº§èŠ‚ç‚¹çš„å…³ç³»ã€‚å¦‚æžœè¦è¿‡æ»¤æŽ‰ä¸€äº›åˆ™å¯ä»¥é™åˆ¶distanceçš„å€¼ã€‚ 3. æŸ¥è¯¢èŠ‚ç‚¹æ‰€åœ¨çš„å±‚çº§(æ·±åº¦)12345# æŸ¥è¯¢idä¸º5çš„èŠ‚ç‚¹æ˜¯ç¬¬å‡ çº§çš„SELECT distance FROM category_tree WHERE descendant=5 AND ancestor=0# æŸ¥è¯¢idä¸º5çš„èŠ‚ç‚¹æ˜¯idä¸º10çš„èŠ‚ç‚¹å¾€ä¸‹ç¬¬å‡ çº§SELECT distance FROM category_tree WHERE descendant=5 AND ancestor=10 æŸ¥è¯¢å±‚çº§ï¼ˆæ·±åº¦ï¼‰éžå¸¸ç®€å•ï¼Œå› ä¸ºdistanceå­—æ®µå°±æ˜¯ã€‚ç›´æŽ¥ä»¥ä¸Šä¸‹çº§çš„èŠ‚ç‚¹idä¸ºæ¡ä»¶ï¼ŒæŸ¥è¯¢è·ç¦»å³å¯ã€‚ 4. æŸ¥è¯¢æŸä¸€å±‚æ‰€æœ‰èŠ‚ç‚¹12# æŸ¥è¯¢æ‰€æœ‰ç¬¬ä¸‰å±‚çš„èŠ‚ç‚¹SELECT descendant FROM category_tree WHERE ancestor=0 AND distance=3 5. æ’å…¥æ’å…¥å’Œç§»åŠ¨å°±ä¸æ˜¯é‚£ä¹ˆæ–¹ä¾¿äº†ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹æ’å…¥åˆ°æŸä¸ªçˆ¶èŠ‚ç‚¹ä¸‹æ–¹æ—¶ï¼Œå®ƒå°†å…·æœ‰ä¸Žçˆ¶èŠ‚ç‚¹ç›¸ä¼¼çš„è·¯å¾„ï¼Œç„¶åŽå†åŠ ä¸Šä¸€ä¸ªè‡ªèº«è¿žæŽ¥å³å¯ã€‚ æ‰€ä»¥æ’å…¥æ“ä½œéœ€è¦ä¸¤æ¡è¯­å¥ï¼Œç¬¬ä¸€æ¡å¤åˆ¶çˆ¶èŠ‚ç‚¹çš„æ‰€æœ‰è®°å½•ï¼Œå¹¶æŠŠè¿™äº›è®°å½•çš„distanceåŠ ä¸€ï¼Œå› ä¸ºå­èŠ‚ç‚¹åˆ°æ¯ä¸ªä¸Šçº§èŠ‚ç‚¹çš„è·ç¦»éƒ½æ¯”å®ƒçš„çˆ¶èŠ‚ç‚¹å¤šä¸€ã€‚å½“ç„¶descendantä¹Ÿè¦æ”¹æˆè‡ªå·±çš„ã€‚ 12345# ä¾‹å¦‚æŠŠidä¸º10çš„èŠ‚ç‚¹æ’å…¥åˆ°idä¸º5çš„èŠ‚ç‚¹ä¸‹æ–¹ï¼ˆè¿™é‡Œç”¨äº†Mysqlçš„æ–¹è¨€ï¼‰INSERT INTO category_tree(ancestor,descendant,distance) (SELECT ancestor,10,distance+1 FROM category_tree WHERE descendant=5)# ç„¶åŽå°±æ˜¯åŠ å…¥è‡ªèº«è¿žæŽ¥çš„è®°å½•ã€‚INSERT INTO category_tree(ancestor,descendant,distance) VALUES(10,10,0) 6. åˆ é™¤12# åˆ é™¤DELETE FROM category_tree WHERE descendant = 6 AND distance != 0 å‚è€ƒé“¾æŽ¥ åŸºäºŽClosure Tableå®žçŽ°åˆ†ç±»ç›®å½•æ ‘å­˜å‚¨ ClosureTable - æ— é™æžåˆ†ç±»è§£å†³æ–¹æ¡ˆ)]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Rancheré€šè¿‡APIå‡çº§æœåŠ¡]]></title>
    <url>%2Francher-upgrade-service%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘çš„é¡¹ç›®åŸºæœ¬é‡‡ç”¨å®¹å™¨åŒ–éƒ¨ç½², ç”± Rancher ç»Ÿä¸€ç¼–æŽ’ . åœ¨æŒç»­è¿‡ç¨‹å»ºè®¾ä¸­ , ç”±äºŽæˆ‘ä»¬ä»£ç æ˜¯æ‰˜ç®¡åœ¨ è…¾è®¯å¼€å‘è€…å¹³å° ä¸åœ¨ Rancher é»˜è®¤æ”¯æŒèŒƒå›´å†… , åœ¨æŒç»­æž„å»ºè¿‡ç¨‹ä¸­ , æœ€åŽä¸€æ­¥æ›´æ–°æœåŠ¡å§‹ç»ˆåªèƒ½æ‰‹åŠ¨åŽ» Rancher UI ç‚¹å‡»å‡çº§ , ç”šæ˜¯ç¹ç . æœ¬ç¯‡å°†è®²è¿°å¦‚ä½•é€šè¿‡APIå‡çº§æœåŠ¡ å¦‚è‹¥çŽ¯å¢ƒæ”¯æŒ , ä½¿ç”¨ Rancher è‡ªèº«çš„æµæ°´çº¿éƒ¨ç½²å…¶å®žæ˜¯å¾ˆæ–¹ä¾¿çš„ , é»˜è®¤æ”¯æŒä»¥ä¸‹å‡ ç§æ‰˜ç®¡ä»“åº“ . æŒç»­æž„å»ºæµç¨‹é¦–å…ˆè¯´ä¸€ä¸‹é¡¹ç›®ç›®å‰æŒç»­é›†æˆçš„æ•´ä½“æµç¨‹ 1. Jenkins å‚æ•°é€‰æ‹©æž„å»º ç„¶åŽ Jenkins ä¼šåŽ»ä»“åº“æ‹‰å–ä»£ç  , ç¼–è¯‘ , æ‰“åŒ…é•œåƒç„¶åŽä¸Šä¼ åˆ°ç§æœ‰é•œåƒä»“åº“ 2. æ›´æ–°RancheræœåŠ¡ ç›®å‰æ˜¯åœ¨ Jenkins æž„å»ºåŽæ‰‹åŠ¨åŽ» Rancher UI ä¸Šç‚¹å‡»å‡çº§æœåŠ¡ , æ¯”è¾ƒç¹ç , å› æ­¤è¦å°†æ­¤æ­¥éª¤è‡ªåŠ¨åŒ– , é€šè¿‡è°ƒç”¨ Rancher API å®žçŽ°. Rancher 4ä¸ªä¸»è¦ API åˆ†åˆ«æ˜¯ 12345678# 1.èŽ·å–ä¸€ä¸ªæœåŠ¡çš„è¯¦ç»†ä¿¡æ¯GET https://&lt;rancher_server&gt;/v3/project/&lt;project_id&gt;/workloads/deployment:&lt;rancher_namespace&gt;:&lt;rancher_service&gt; # 2.èŽ·å–æœåŠ¡çš„æ‰€æœ‰å®¹å™¨ä¿¡æ¯GET https://&lt;rancher_server&gt;/v3/project/&lt;project_id&gt;/pods/?workloadId=deployment:&lt;rancher_namespace&gt;:&lt;rancher_service&gt; # 3.æ ¹æ®å®¹å™¨ååˆ é™¤å®¹å™¨DELETE https://&lt;rancher_server&gt;/v3/project/&lt;project_id&gt;/pods/&lt;rancher_namespace&gt;:&lt;container_name&gt; # 4.æ›´æ–°æœåŠ¡PUT https://&lt;rancher_server&gt;/v3/project/&lt;project_id&gt;/workloads/deployment:&lt;rancher_namespace&gt;:&lt;rancher_service&gt; æˆ‘ä»¬è¿™é‡Œç”¨åˆ°çš„æ˜¯ 1 å’Œ 4 å˜é‡å‚æ•°é€šè¿‡ Rancher ä¸­æŸ¥è¯¢èŽ·å¾— , åœ¨å®žè·µä¸­å‘çŽ°, ç›´æŽ¥æ‹¿åˆ°èŽ·å–çš„æœåŠ¡ä¿¡æ¯è°ƒç”¨ 4 æ›´æ–°æœåŠ¡çš„æŽ¥å£ , å¶å°”æœåŠ¡ä¸ä¼šæ›´æ–° , åŽé¢å‘çŽ°éœ€è¦å°†å‚æ•°ä¸­çš„æ—¶é—´æˆ³è¿›è¡Œè‡ªå¢ž , æ–¹å¯è¾¾åˆ°ç«‹å³å‡çº§çš„æ•ˆæžœ . å‚è€ƒé“¾æŽ¥Docker+Jenkins+Piplineå®žçŽ°æŒç»­é›†æˆ]]></content>
      <categories>
        <category>Rancher</category>
      </categories>
      <tags>
        <tag>Rancher</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¤§å‰ç«¯å¸¸ç”¨æŒ‰é’®é™æµé˜²æŠ–æ€»ç»“]]></title>
    <url>%2Ffrontend-throttling%2F</url>
    <content type="text"><![CDATA[åœ¨å®žé™…å‰ç«¯é¡¹ç›®ä¸­, ä¼šæœ‰ä¸€äº›åœºæ™¯ , åœ¨ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ ,å› æ‰‹æŠ–ç­‰å„ç§åŽŸå› å¤šæ¬¡ç‚¹å‡» , é‡å¤æäº¤è¯·æ±‚ . å› æ­¤ , é€šå¸¸æƒ…å†µä¸‹,ä¼šè¦æ±‚å‰åŽç«¯å‡åšä¸€äº›é™æµ/é˜²æ‰‹æŠ–ç­–ç•¥ . è¿™é‡Œç®€å•è¯´ä¸€ä¸‹å„å‰ç«¯å¦‚ä½•åŽ»å®žæ–½çš„. é˜²æŠ–å’Œé™æµæ˜¯æˆ‘ä»¬å†å¼€å‘è¿‡ç¨‹ä¸­å¸¸ç”¨çš„ä¼˜åŒ–æ€§èƒ½çš„æ–¹å¼ é€šå¸¸ , æˆ‘ä»¬ä¼šç»™é‡è¦è¯·æ±‚çš„æŒ‰é’®è®¾ç½®é™åˆ¶ , æ¯”å¦‚ 500ms åªèƒ½æäº¤ä¸€æ¬¡ Android (Java)Android ä¸­æˆ‘ä»¬ä½¿ç”¨ RxBinding æ¥å®žçŽ° . æ·»åŠ ä¾èµ– build.gradle 12// æŸ¥æ‰¾å¯¹åº”ç‰ˆæœ¬å¡«å…¥implementation "com.jakewharton.rxbinding2:rxbinding:$&#123;version&#125;" RxBind.java 1234567891011121314151617181920public class RxBind &#123; // é»˜è®¤æŒ‰é’®é˜²æ‰‹æŠ–æ—¶é—´(ms) public static final long THROTTLE_FIRST = 500; public static Disposable click(View view, Consumer&lt;View&gt; action) &#123; return click(view,action,THROTTLE_FIRST); &#125; public static Disposable click(View view, Consumer&lt;View&gt; action, long delay)&#123; return clicks(view) .throttleFirst(delay, TimeUnit.MILLISECONDS) .subscribe(action); &#125; private static Flowable&lt;View&gt; clicks(@NonNull View view)&#123; return Flowable.create(new ViewClickOnSubscribe(view), BackpressureStrategy.ERROR); &#125;&#125; è°ƒç”¨ 1RxBind.click(button, view -&gt; doSomething()); è¿™é‡Œæ˜¯ä½¿ç”¨åˆ°äº† RxJava ä¸­çš„ throttleFirst æ“ä½œç¬¦ , æ„ä¸ºäº‹ä»¶æµçš„è§¦å‘è·ç¬¬ä¸€æ¬¡è§¦å‘éœ€è¦é—´éš”500msæ‰èƒ½ç”Ÿæ•ˆ. iOS (Swift)iOS (Swift) ä¸­æˆ‘ä»¬é€šè¿‡ RxSwift æ¥å®žçŽ° Podfile 1234# æŸ¥æ‰¾å¯¹åº”ç‰ˆæœ¬å¡«å…¥pod &apos;RxSwift&apos;, &apos;~&gt; $&#123;version&#125;&apos;# çœ‹éœ€æ±‚æ˜¯å¦è¦å¼•ç”¨æ­¤è¡Œpod &apos;RxCocoa&apos;, &apos;~&gt; $&#123;version&#125;&apos; UIButtonExtension.swift 12345678extension UIButton &#123; /// é˜²é‡å¤æäº¤ var click: Observable&lt;Void&gt;&#123; return self.rx.tap .throttle(Config.clickDelay, scheduler: MainScheduler.instance) &#125;&#125; è°ƒç”¨ 123456button .click .subscribe(onNext: &#123; [weak self] in self?.doSomething() &#125;) .disposed(by: dispose) å‰ç«¯(Javascript)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051/** * å‡½æ•°é˜²æŠ– (åªæ‰§è¡Œæœ€åŽä¸€æ¬¡ç‚¹å‡») * @param fn * @param delay * @returns &#123;Function&#125; * @constructor */export const Debounce = (fn, t) =&gt; &#123; let delay = t || 500; let timer; console.log(fn) console.log(typeof fn) return function () &#123; let args = arguments; if(timer)&#123; clearTimeout(timer); &#125; timer = setTimeout(() =&gt; &#123; timer = null; fn.apply(this, args); &#125;, delay); &#125;&#125;; /** * å‡½æ•°èŠ‚æµ * @param fn * @param interval * @returns &#123;Function&#125; * @constructor */export const Throttle = (fn, t) =&gt; &#123; let last; let timer; let interval = t || 500; return function () &#123; let args = arguments; let now = +new Date(); if (last &amp;&amp; now - last &lt; interval) &#123; clearTimeout(timer); timer = setTimeout(() =&gt; &#123; last = now; //fn.apply(this, args); &#125;, interval); &#125; else &#123; last = now; fn.apply(this, args); &#125; &#125;&#125;; ä½¿ç”¨: 123456 methods:&#123; getAliyunData:Throttle(function()&#123; ... &#125;,1000),&#125; åœ¨Vueä¸­ä½¿ç”¨é¦–å…ˆå®šä¹‰å…¬å…±js 1234567891011121314151617181920212223242526272829303132333435363738// é˜²æŠ–export function _debounce(fn, delay) &#123; var delay = delay || 500; var timer; return function () &#123; var th = this; var args = arguments; if (timer) &#123; clearTimeout(timer); &#125; timer = setTimeout(function () &#123; timer = null; fn.apply(th, args); &#125;, delay); &#125;;&#125;// èŠ‚æµexport function _throttle(fn, interval) &#123; var last; var timer; var interval = interval || 500; return function () &#123; var th = this; var args = arguments; var now = +new Date(); if (last &amp;&amp; now - last &lt; interval) &#123; clearTimeout(timer); timer = setTimeout(function () &#123; last = now; //fn.apply(th, args); &#125;, interval); &#125; else &#123; last = now; fn.apply(th, args); &#125; &#125;&#125; å¼•ç”¨ 1import &#123; _debounce &#125; from "@/utils/public"; è°ƒç”¨ 123456methods: &#123; // æ”¹å˜åœºæ•° changefield: _debounce(function(_type, index, item) &#123; // do something ... &#125;, 500)&#125; Flutterpubspec.yaml 1rxdart: ^0.22.2 è°ƒç”¨ç¤ºä¾‹ 123456789101112131415161718import 'package:rxdart/rxdart.dart'; final _counterSubject = BehaviorSubject&lt;int&gt;(); @override void initState() &#123; super.initState(); _counterSubject.throttleTime(Duration(milliseconds: 500)).listen((int i) &#123; print(i); &#125;); &#125;RaisedButton( onPressed: () &#123; _counterSubject.add(1); &#125;, child: Text('Test'),) å‚è€ƒé“¾æŽ¥ vue ä¸­ä½¿ç”¨é˜²æŠ–å’ŒèŠ‚æµï¼Œé˜²æ­¢é‡å¤ç‚¹å‡»æˆ–é‡å¤ä¸Šæ‹‰åŠ è½½ Flutter: debounce é¿å…é«˜é¢‘çŽ‡äº‹ä»¶]]></content>
      <categories>
        <category>Android</category>
        <category>iOS</category>
        <category>Javascript</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Throttling</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Rancherä½¿ç”¨é‡åˆ°ç›¸å…³é—®é¢˜]]></title>
    <url>%2Francher-issues%2F</url>
    <content type="text"><![CDATA[Rancher æ˜¯ä¸€ä¸ªå¼€æºçš„ä¼ä¸šçº§å…¨æ ˆåŒ–å®¹å™¨éƒ¨ç½²åŠç®¡ç†å¹³å° Rancherä¸ºå®¹å™¨æä¾›ä¸€æ½å­åŸºç¡€æž¶æž„æœåŠ¡: CNI å…¼å®¹çš„ç½‘ç»œæœåŠ¡ã€å­˜å‚¨æœåŠ¡ã€ä¸»æœºç®¡ç†ã€è´Ÿè½½å‡è¡¡ã€é˜²æŠ¤å¢™â€¦â€¦ Rancherè®©ä¸Šè¿°æœåŠ¡è·¨è¶Šå…¬æœ‰äº‘ã€ç§æœ‰äº‘ã€è™šæ‹Ÿæœºã€ç‰©ç†æœºçŽ¯å¢ƒè¿è¡Œ , çœŸæ­£å®žçŽ°ä¸€é”®å¼åº”ç”¨éƒ¨ç½²å’Œç®¡ç† . åœ¨å®žé™…éƒ¨ç½²ä¸­ä½¿ç”¨Rancher2.x , é™†ç»­é‡åˆ°äº†ä¸å°‘é—®é¢˜ , çŽ°è®°å½•äºŽæ­¤. Rancher2.xä¸­æ–‡æ–‡æ¡£ æ­å»ºçŽ¯å¢ƒæœ‰é˜»ç¢å‚è€ƒä»¥ä¸Šå®˜æ–¹æ–‡æ¡£ . æœ€å¥½Rancherå•ç‹¬ä¸€å°æœºå™¨, ç‹¬ç«‹äºŽMaster/ETCD/WorkerèŠ‚ç‚¹. æ¸…ç†èŠ‚ç‚¹åŽ,å†æ¬¡ç¼–è¾‘é›†ç¾¤æˆåŠŸä¸äº†æ­¤æ—¶åœ¨Rancherä¸Šçš„è¡¨çŽ°ä¸€èˆ¬æ˜¯ä¸»æœºæ˜¾ç¤ºæ³¨å†Œä¸­,æœ‰æŠ¥çº¢é”™è¯¯. æµç¨‹ä¸Šå¡ä½åœ¨è¿™é‡Œäº†. é—®é¢˜èµ·å› é€šå¸¸æ˜¯èŠ‚ç‚¹æœªæ¸…ç†å¹²å‡€ , éœ€è¦ä¸¥æ ¼æŒ‰ç…§ æ¸…ç†èŠ‚ç‚¹ æ­¥éª¤æ¸…ç† . è‹¥ä»ä¸è¡Œ , ä¹Ÿå¯å°† docker ä¸‹ç›®å½•åˆ é™¤ éƒ¨ç½²æœåŠ¡åŽå®¹å™¨é—´ç½‘ç»œæ— æ³•äº’é€šéœ€è¦æ£€æŸ¥é˜²ç«å¢™æˆ–è€…å®‰å…¨ç»„. å®¹å™¨æ— æ³•è§£æžå¤–ç½‘åŸŸåè¯¥æƒ…å†µè¡¨çŽ°ä¸ºå®¿ä¸»æœºå™¨å¯ä»¥pingé€šå¤–ç½‘åŸŸååŠIP, è€Œåœ¨å®¹å™¨å†…æ— æ³•Pingé€š , è§£æžå¤–éƒ¨åŸŸåå¤±è´¥ ,éƒ¨ç½²çš„JavaæœåŠ¡ä¼šæŠ¥Unknown Host é”™è¯¯. æ­¤æ—¶éœ€è¦åœ¨éƒ¨ç½²çš„æœåŠ¡ç½‘ç»œé€‰é¡¹ä¸­åŠ å…¥DNSåœ°å€,å³å¯è§£å†³]]></content>
      <categories>
        <category>Rancher</category>
      </categories>
      <tags>
        <tag>Rancher</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®°å½•ä¸€æ¬¡ç”Ÿäº§è¯·æ±‚504æŽ’æŸ¥]]></title>
    <url>%2Fnginx-504onprod%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘ç”Ÿäº§çŽ¯å¢ƒä¸Šä½¿ç”¨å…¬å¸ç³»ç»Ÿæ—¶å¶æŠ¥504è¶…æ—¶ , å¹¶ä¸”ä½¿ç”¨èµ·æ¥è¶Šæ¥è¶Šå¡é¡¿ . äºŽæ˜¯å°†æŽ’æŸ¥é—®é¢˜è¿‡ç¨‹è®°å½•äºŽæ­¤ Linux &amp; NginxLinuxæŸ¥çœ‹ Nginx é”™è¯¯æ—¥å¿— , å‘çŽ°æŠ¥é”™ worker_connections exceed open file resource limit: 1024 æ­¤è­¦å‘Šçš„é—®é¢˜æ˜¯å—é™äºŽ Linux çš„æœ€å¤§æ–‡ä»¶æ•°é™åˆ¶ çŽ¯å¢ƒ: CenterOS7.4 + , Amazon Linux æŸ¥çœ‹è¿›ç¨‹æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æ•° ulimit -n , æ˜¾ç¤º1024 ä¿®æ”¹è¿›ç¨‹æœ€å¤§å¯æ‰“å¼€æ–‡ä»¶æ•° , æ‰“å¼€ /etc/security/limits.conf æ–‡ä»¶,åœ¨ä¸‹é¢æ·»åŠ  1234* soft noproc 65535* hard noproc 65535* soft nofile 65535* hard nofile 65535 è¿™é‡Œå°†æœ€å¤§çº¿ç¨‹æ•°å’Œæ–‡ä»¶æ•°é™åˆ¶æåˆ°äº† 65535 æƒ³è¦å³æ—¶ç”Ÿæ•ˆ , éœ€è¦å†è¾“å…¥å‘½ä»¤ ulimit -n 65535 NginxLinux é™åˆ¶ä¿®æ”¹åŽ, è¿˜éœ€è¦åŽ»è°ƒæ•´ Nginx è¿›ç¨‹æœ€å¤§å¯æ‰“å¼€æ–‡ä»¶æ•° (worker_processes å’Œ worker_connections) worker_processes : æ“ä½œç³»ç»Ÿå¯åŠ¨å¤šå°‘ä¸ªå·¥ä½œè¿›ç¨‹è¿è¡Œ Nginx . é€šå¸¸æ˜¯ 1ä¸ª master process å’Œ n ä¸ª worker process . ps -elf | grep nginx eg: 123456789[root@localhost nginx]# ps -elf | grep nginx4 S root 2203 2031 0 80 0 - 46881 wait 22:18 pts/0 00:00:00 su nginx4 S nginx 2204 2203 0 80 0 - 28877 wait 22:18 pts/0 00:00:00 bash5 S root 2252 1 0 80 0 - 11390 sigsus 22:20 ? 00:00:00 nginx: master process /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf5 S nobody 2291 2252 0 80 0 - 11498 ep_pol 22:23 ? 00:00:00 nginx: worker process5 S nobody 2292 2252 0 80 0 - 11498 ep_pol 22:23 ? 00:00:00 nginx: worker process5 S nobody 2293 2252 0 80 0 - 11498 ep_pol 22:23 ? 00:00:00 nginx: worker process5 S nobody 2294 2252 0 80 0 - 11498 ep_pol 22:23 ? 00:00:00 nginx: worker process0 R root 2312 2299 0 80 0 - 28166 - 22:24 pts/0 00:00:00 grep --color=auto nginx ä¸Šå›¾æ‰€ç¤ºå³ 1ä¸ª nginx ä¸»è¿›ç¨‹ (master process) , 4ä¸ª nginx å·¥ä½œè¿›ç¨‹ (worker process) . ä¸»è¿›ç¨‹è´Ÿè´£ç›‘æŽ§ç«¯å£ , åè°ƒå·¥ä½œè¿›ç¨‹çš„å·¥ä½œçŠ¶æ€ , åˆ†é…å·¥ä½œä»»åŠ¡ , å·¥ä½œè¿›ç¨‹è´Ÿè´£è¿›è¡Œä»»åŠ¡å¤„ç†. ä¸€èˆ¬è¿™ä¸ªå‚æ•°è¦å’Œæ“ä½œç³»ç»Ÿçš„ CPU å†…æ ¸æ•°æˆå€æ•° . worker_connections : è¿™ä¸ªå±žæ€§æ˜¯æŒ‡å•ä¸ªå·¥ä½œè¿›ç¨‹å¯ä»¥å…è®¸åŒæ—¶å»ºç«‹å¤–éƒ¨è¿žæŽ¥çš„æ•°é‡. æ— è®ºè¿™ä¸ªè¿žæŽ¥æ˜¯å¤–éƒ¨ä¸»åŠ¨å»ºç«‹çš„ , è¿˜æ˜¯å†…éƒ¨å»ºç«‹çš„. è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ , ä¸€ä¸ªå·¥ä½œè¿›ç¨‹å»ºç«‹ä¸€ä¸ªè¿žæŽ¥åŽ , è¿›ç¨‹å°†æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å‰¯æœ¬ . æ‰€ä»¥è¿™ä¸ªæ•°é‡è¿˜å—æ“ä½œç³»ç»Ÿè®¾å®šçš„è¿›ç¨‹æœ€å¤§å¯æ‰“å¼€æ–‡ä»¶æ•°æœ‰å…³. ä¿®æ”¹ nginx è½¯ä»¶çº§åˆ«è¿›ç¨‹æœ€å¤§å¯æ‰“å¼€æ–‡ä»¶æ•° 12345678user root root; worker_processes 4; worker_rlimit_nofile 65535;events &#123; use epoll; worker_connections 65535; &#125; nginx -s reload é‡å¯ç”Ÿæ•ˆ éªŒè¯æ˜¯å¦ç”Ÿæ•ˆé¦–å…ˆä½¿ç”¨ ulimit -n æŸ¥çœ‹ç³»ç»Ÿå‚æ•°æ˜¯å¦å·²ç»æ”¹å˜ æŽ¥ä¸‹æ¥éªŒè¯ nginx æ˜¯å¦ä¿®æ”¹ç”Ÿæ•ˆ . åœ¨ Linux ç³»ç»Ÿä¸­ , æ‰€æœ‰è¿›ç¨‹éƒ½ä¼šæœ‰ä¸€ä¸ªä¸´æ—¶çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶æè¿° , å­˜æ”¾è·¯å¾„åœ¨/pro/è¿›ç¨‹å·/limit é¦–å…ˆæŸ¥çœ‹è¿›ç¨‹ 123456789[root@localhost nginx]# ps -elf | grep nginx4 S root 2203 2031 0 80 0 - 46881 wait 22:18 pts/0 00:00:00 su nginx4 S nginx 2204 2203 0 80 0 - 28877 wait 22:18 pts/0 00:00:00 bash5 S root 2252 1 0 80 0 - 11390 sigsus 22:20 ? 00:00:00 nginx: master process /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf5 S nobody 2291 2252 0 80 0 - 11498 ep_pol 22:23 ? 00:00:00 nginx: worker process5 S nobody 2292 2252 0 80 0 - 11498 ep_pol 22:23 ? 00:00:00 nginx: worker process5 S nobody 2293 2252 0 80 0 - 11498 ep_pol 22:23 ? 00:00:00 nginx: worker process5 S nobody 2294 2252 0 80 0 - 11498 ep_pol 22:23 ? 00:00:00 nginx: worker process0 R root 2318 2299 0 80 0 - 28166 - 22:42 pts/0 00:00:00 grep --color=auto nginx å¯ä»¥çœ‹åˆ° nginx å·¥ä½œè¿›ç¨‹çš„è¿›ç¨‹å·åˆ†åˆ«æ˜¯ 2291 , 2293 , 2293 , 2294 . æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹æŸ¥çœ‹æ ¸å¿ƒé…ç½®ä¿¡æ¯ 123456789101112131415161718[root@localhost conf]# cat /proc/2351/limitsLimit Soft Limit Hard Limit UnitsMax cpu time unlimited unlimited secondsMax file size unlimited unlimited bytesMax data size unlimited unlimited bytesMax stack size 8388608 unlimited bytesMax core file size 0 unlimited bytesMax resident set unlimited unlimited bytesMax processes 3829 3829 processesMax open files 65535 65535 filesMax locked memory 65536 65536 bytesMax address space unlimited unlimited bytesMax file locks unlimited unlimited locksMax pending signals 3829 3829 signalsMax msgqueue size 819200 819200 bytesMax nice priority 0 0Max realtime priority 0 0Max realtime timeout unlimited unlimited us å‚è€ƒé“¾æŽ¥ ä¿®æ”¹ Nginx è¿›ç¨‹æœ€å¤§å¯æ‰“å¼€æ–‡ä»¶æ•° Nginx:worker_connections exceed open file resource limitæŽ’é”™ åº”ç”¨å±‚æŽ’æŸ¥åœ¨ä»¥ä¸Šä¿®æ”¹åŽ , å‘çŽ°ä½¿ç”¨å¡é¡¿çš„æƒ…å†µæ˜Žæ˜¾å‡å°‘ , å¯æ˜¯504è¶…æ—¶é—®é¢˜è¿˜æ˜¯ä¼šå¤çŽ° . æ­¤æ—¶åŸºæœ¬å·²ç¡®è®¤æ˜¯å‰ç«¯é¡¹ç›®çš„è¯·æ±‚åœ¨ nginx è½¬å‘åˆ°åŽç«¯æœåŠ¡å™¨æ—¶å‘ç”Ÿçš„è¶…æ—¶ , åŽæ¥å‘çŽ°è¶…æ—¶åªå‡ºçŽ°åœ¨ nginx è½¬å‘è¯·æ±‚åˆ°å…¶ä¸­ä¸€ä¸ªç½‘å…³çš„è¿‡ç¨‹ä¸­ , å› æ­¤ç›´æŽ¥åœ¨å¦å¤–çš„æœåŠ¡å™¨éƒ¨ç½²äº†æ–°ç½‘å…³è¿›è¡Œæ›¿æ¢ , æš‚æ—¶æœªå‡ºçŽ°è¿‡è¶…æ—¶äº† . åŽç»­æŒç»­è·Ÿè¸ªâ€¦]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ— æ³•é“¾æŽ¥åˆ°ç”±docker-composeå¯åŠ¨çš„æ­£åœ¨è¿è¡Œçš„å®¹å™¨é—®é¢˜è§£å†³]]></title>
    <url>%2Fdocker-networklink-issue%2F</url>
    <content type="text"><![CDATA[åœ¨ä¸€æ¬¡çŽ¯å¢ƒéƒ¨ç½²ä¸­ ,å‘çŽ°æ— æ³• link åˆ° å·²è¿è¡Œçš„é€šè¿‡ docker-compose éƒ¨ç½²çš„ mongo . æŠ¥é”™ docker: Error response from daemon: Cannot link to /mongo, as it does not belong to the default network çŽ°è®°å½•è§£å†³æ–¹æ¡ˆ. é¦–å…ˆé€šè¿‡å‘½ä»¤åˆ—å‡ºæ‰€æœ‰ docker ç½‘ç»œ . 1docker network ls docker-compose åœ¨è¿è¡Œæ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç½‘ç»œ . ä¾‹å¦‚åœ¨æˆ‘é‡åˆ°çš„æƒ…å†µä¸­,æ˜¯å·²æœ‰ä¸€ä¸ªç”± docker-compose è¿è¡Œçš„ docker_appnet çš„ç½‘ç»œ , åŽé¢æƒ³é€šè¿‡ docker run xxx å‘½ä»¤é“¾æŽ¥ä¸Š docker_appnet ç½‘ç»œ . åŽŸæœ¬æˆ‘çš„è¿è¡Œå‘½ä»¤æ˜¯ 1234567docker run -d \ --name yapi \ --link mongo:mongo \ --workdir /api/vendors \ -p 3000:3000 \ registry.cn-hangzhou.aliyuncs.com/anoy/yapi \ server/app.js æ­¤æ—¶æ— æ³•æ­£å¸¸è¿è¡Œ , æŠ¥å‡ºæ–‡ç« å¼€å¤´çš„é”™è¯¯ . æ­£ç¡®çš„è¿è¡Œå‘½ä»¤åº”è¯¥æ˜¯ 12345678docker run -d \ --name yapi \ --link mongo:mongo \ --net docker_appnet \ --workdir /api/vendors \ -p 3000:3000 \ registry.cn-hangzhou.aliyuncs.com/anoy/yapi \ server/app.js å‚è€ƒé“¾æŽ¥ æ— æ³•é“¾æŽ¥åˆ°ç”±docker-composeå¯åŠ¨çš„æ­£åœ¨è¿è¡Œçš„å®¹å™¨]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Network</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è§£å†³Dockerå®¹å™¨å’Œå®¿ä¸»æœºå™¨æ—¶é—´ä¸ä¸€è‡´çš„é—®é¢˜]]></title>
    <url>%2Fdocker-date-with-host%2F</url>
    <content type="text"><![CDATA[ä¹‹å‰åœ¨ AWS EC2 ä¸Šéƒ¨ç½² docker Java åº”ç”¨æ—¶ , å‘çŽ° Java log4j çš„æ‰“å°æ—¥å¿—æ—¶é—´å’Œå®¿ä¸»æ—¶é—´ä¸ä¸€è‡´ . åº”ç”¨å’Œå®¿ä¸»å‡æ˜¯ CST æ—¶é—´, è€Œå®¹å™¨è¿˜æ˜¯ UTC æ—¶åŒº. ç½‘ä¸Šç¿»é˜…äº†ä¸å°‘è§£å†³åŠžæ³•, çŽ°è®°å½•äºŽæ­¤ . å®¹å™¨ä¸Žå®¿ä¸»æ—¶é—´ä¸ä¸€è‡´é€šè¿‡ date å‘½ä»¤æŸ¥çœ‹æ—¶é—´ æŸ¥çœ‹ä¸»æœºæ—¶é—´ 1date æŸ¥çœ‹å®¹å™¨æ—¶é—´ 1docker exec -it &#123;å®¹å™¨id&#125; date å¯ä»¥å‘çŽ° , æ—¶é—´å·®äº† 8 ä¸ªå°æ—¶. CST (China Shanghai Time , ä¸œå…«åŒºæ—¶é—´) UTC (Coordinated Universal Time , æ ‡å‡†æ—¶é—´) è§£å†³æ–¹æ¡ˆå…±äº«ä¸»æœºçš„ localtimeåˆ›å»ºå®¹å™¨çš„æ—¶å€™æŒ‡å®šå¯åŠ¨å‚æ•° , æŒ‚è½½ localtime æ–‡ä»¶åˆ°å®¹å™¨å†… (åªè¯») , ä¿è¯ä¸¤è€…æ‰€é‡‡ç”¨çš„æ—¶åŒºæ˜¯ä¸€è‡´çš„. 1docker run --name &lt;name&gt; -v /etc/localtime:/etc/localtime:ro å¤åˆ¶ä¸»æœºçš„ localtime1docker cp /etc/localtime:ã€å®¹å™¨IDæˆ–è€…NAMEã€‘/etc/localtime åˆ›å»ºè‡ªå®šä¹‰çš„ dockerfileåˆ›å»º dockerfile æ–‡ä»¶ , è‡ªå®šä¹‰è¯¥é•œåƒçš„æ—¶é—´æ ¼å¼åŠæ—¶åŒº 123456FROM redisFROM tomcatENV CATALINA_HOME /usr/local/tomcat#è®¾ç½®æ—¶åŒºRUN /bin/cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \ &amp;&amp; echo 'Asia/Shanghai' &gt;/etc/timezone \ ç”Ÿæˆé•œåƒå³å¯ Issue!!! ç„¶è€Œå‘çŽ°å¦‚æ­¤æ“ä½œåŽ , Java log4j çš„æ—¶é—´ä»æ˜¯ UTC æ—¶é—´ . ç½‘ä¸Šå¤ªå¤šå›žå¤æ­¢äºŽä¸Šé¢çš„æ–¹æ³• . log4j ä¸»è¦æ˜¯ä½¿ç”¨ springboot å†…åµŒçš„ tomcat çš„æ—¶é—´ , å› æ­¤éœ€è¦åœ¨åˆ¶ä½œé•œåƒæ—¶è¿›è¡ŒæŒ‡å®š -Duser.timezone=GMT+8 12345FROM openjdk:8-jdk-alpineVOLUME /tmpARG JAR_FILECOPY $&#123;JAR_FILE&#125; app.jarENTRYPOINT ["java","-jar","-Duser.timezone=GMT+8","/app.jar","--spring.profiles.active=dev"] Ok , æžå®š . å‚è€ƒé“¾æŽ¥ å…³äºŽdockerä¸‹å®¹å™¨å’Œå®¿ä¸»æœºå™¨æ—¶é—´ä¸ä¸€è‡´çš„é—®é¢˜]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Date</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è§£å†³docker alpineç¼ºå°‘å­—ä½“çš„é—®é¢˜]]></title>
    <url>%2Falpine-font-issue%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘ä¸€ä¸ªé¡¹ç›®æ˜¯ç”¨ Rancher ç»Ÿä¸€éƒ¨ç½² , æ‰€æœ‰ç¨‹åºå‡åœ¨ Docker çŽ¯å¢ƒä¸‹è¿è¡Œ . å…¶ä¸­ Java åº•åŒ…ç”¨çš„ Alpine , ä½†æ˜¯ Alpine æ²¡æœ‰è‡ªå¸¦é»˜è®¤å­—ä½“ , é€ æˆäº†ä¸€äº›é—®é¢˜ , çŽ°è®°å½•è§£å†³æ–¹æ¡ˆ. Issueé‡åˆ°çš„é—®é¢˜æ˜¯åœ¨åŽå°ç®¡ç†ç³»ç»Ÿä¸­å¯¼å‡º Excel æ—¶æŠ¥ç©ºæŒ‡é’ˆ java.lang.NullPointerException at sun.awt.FontConfiguration.getVersion(FontConfiguration.java:1264) å¾ªç€è°ƒç”¨æ ˆè¿½è¸ªé—®é¢˜ ,å‘çŽ°é—®é¢˜å‡ºåœ¨ Excel ç»„ä»¶ä¸Š. Excel ç»„ä»¶è¯•å›¾æ ¹æ®å­—ä½“å¤§å°è‡ªåŠ¨è°ƒæ•´å•å…ƒæ ¼å®½åº¦ , å½“å¯»æ‰¾ fontconfig æ—¶æ‰¾ä¸åˆ°, è¿”å›ž null . å¤åˆ¶ä»¥ä¸ŠæŠ¥é”™è°·æ­Œ , å¯ä»¥çœ‹åˆ°å¾ˆå¤š Issue , å¯ä»¥å‘çŽ°æ˜¯ AlpineçŽ¯å¢ƒç¼ºå°‘å¯¹åº”çš„åŒ… , æ­¤é—®é¢˜å½±å“æ‰€æœ‰å®˜æ–¹ Alpine çš„JavaçŽ¯å¢ƒ. è§£å†³æ–¹æ¡ˆ1.åœ¨é¡¹ç›®çš„ Dockerfile ä¸­è¿›è¡Œä¿®æ”¹ , å¢žåŠ ä»¥ä¸‹å†…å®¹ 1ENV LANG en_US.UTF-8RUN apk add --update ttf-dejavu fontconfig &amp;&amp; rm -rf /var/cache/apk/* é€šè¿‡æ·»åŠ  fontconfig å’Œä¸€æ¬¾å­—ä½“ dejavu , å¯ä»¥å®Œç¾Žè§£å†³é—®é¢˜ . ç¼ºç‚¹æ˜¯æ¯æ¬¡æ‰“åŒ…éƒ½è¦å®‰è£… ttf-dejavu æ¯”è¾ƒæ…¢ , å› æ­¤è¯¥æ–¹æ³•ä¸æŽ¨è . 2.æœ€å¥½çš„æ–¹æ³•æ˜¯ç›´æŽ¥ä½¿ç”¨æ‰“åŒ…å¥½çš„é•œåƒ 1FROM frolvlad/alpine-java:jdk8-slim å‚è€ƒé“¾æŽ¥ è§£å†³docker alpineç¼ºå°‘å­—ä½“çš„é—®é¢˜)]]></content>
      <categories>
        <category>JRE</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Alpine</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Amazon Linux æ­å»ºå¼€å‘çŽ¯å¢ƒåŠå¸¸ç”¨è½¯ä»¶]]></title>
    <url>%2Famazon-linux-build-env%2F</url>
    <content type="text"><![CDATA[æœ¬ç¯‡è®°å½• AWS EC2 çš„çŽ¯å¢ƒæ­å»ºå†…å®¹ EBSç£ç›˜æŒ‚è½½å’Œå¸è½½å‚è€ƒé“¾æŽ¥AWS Doc æ·»åŠ ç”¨æˆ·å‚è€ƒé“¾æŽ¥ AWS Doc: å¦‚ä½•å°†å…·æœ‰ SSH è®¿é—®æƒé™çš„æ–°ç”¨æˆ·æ·»åŠ åˆ° Amazon EC2 Linux Amazon EC2 å¯†é’¥å¯¹å’Œ Windows å®žä¾‹ ç®€ä¹¦: å…å¯†ç ä½¿ç”¨ sudo å’Œ su CenterOS 7 åˆ›å»ºæ–°ç”¨æˆ·å’Œsshå®‰å…¨ç™»å½•é…ç½® chmod u+w /etc/sudoers å…ˆè¦ç»™äºˆæƒé™æ‰å¯ä¿®æ”¹ CenterOS æ·»åŠ æ–°ç”¨æˆ·åŽ,è‹¥éœ€è¦ SSH ç™»å½•å°±éœ€è¦åŽ»ä¿®æ”¹ /etc/ssh/sshd_config åœ¨AllowUsers åŽæ·»åŠ ç”¨æˆ·å, ç„¶åŽ service sshd restart é‡å¯ç”Ÿæ•ˆ æ£€ç´¢ pem æ–‡ä»¶ 1ssh-keygen -y -f XX.pem åŒæ­¥æ—¶åŒº123456# æŸ¥çœ‹æ—¶åŒºtimedatectl# è®¾ç½®å½“å‰ç³»ç»Ÿä¸ºAsia/Shanghaiä¸Šæµ·æ—¶åŒºtimedatectl set-timezone Asia/Shanghai# è®¾ç½®å®Œæ—¶åŒºåŽï¼Œå¼ºåˆ¶åŒæ­¥ä¸‹ç³»ç»Ÿæ—¶é’Ÿchronyc -a makestep å‚è€ƒé“¾æŽ¥ AWS Doc: ä¸º Linux å®žä¾‹è®¾ç½®æ—¶é—´ K8Så­¦ä¹ ç¬”è®°ä¹‹CentOS7é›†ç¾¤ä½¿ç”¨Chronyå®žçŽ°æ—¶é—´åŒæ­¥ JDK1yum list java* 1yum install java-1.8.0-openjdk.x86_64 SSLAWS Doc: åœ¨ Amazon Linux 2 ä¸Šé…ç½®SSL Nginx1. æ·»åŠ ä¸‹è½½æºåœ¨ /etc/yum.repos.d/ ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª nginx.repo æ–‡ä»¶ 12345[nginx]name=nginx repobaseurl=http://nginx.org/packages/centos/7/x86_64/gpgcheck=0enabled=1 ä¿å­˜ 2. ä¸‹è½½1yum install nginx 3. å¯åŠ¨12345678# è®¾ç½®å¼€æœºå¯åŠ¨sudo systemctl enable nginx# å¯åŠ¨æœåŠ¡sudo systemctl start nginx# é‡å¯æœåŠ¡sudo systemctl restart nginx# é‡æ–°åŠ è½½ï¼Œå› ä¸ºä¸€èˆ¬é‡æ–°é…ç½®ä¹‹åŽï¼Œä¸å¸Œæœ›é‡å¯æœåŠ¡ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨é‡æ–°åŠ è½½sudo systemctl reload nginx å‚è€ƒé“¾æŽ¥ Amazon Linux 2 AMI ä¸‹ yum å®‰è£… Nginx CentOS 7 ä¸‹ yum å®‰è£…å’Œé…ç½® Nginx Redis1. å®‰è£…é»˜è®¤ AWS EC2 ä¸Š æ˜¯æ²¡æœ‰ redis æºçš„ , éœ€è¦ä¸‹è½½ Fedora çš„ epel ä»“åº“ 1yum install epel-release è‹¥æ‰¾ä¸åˆ°åˆ™éœ€è¦æ‰‹åŠ¨å®‰è£… rpm -ivh http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm æ­¤æ—¶ä¼šæç¤ºéœ€è¦é€šè¿‡å¦å¤–çš„å‘½ä»¤å®‰è£…,è¾“å…¥å®‰è£…å³å¯ 1sudo amazon-linux-extras install epel ç„¶åŽå†å®‰è£…redis 1yum install redis 2. å¯åŠ¨12345678# å¯åŠ¨redisservice redis start# åœæ­¢redisservice redis stop# æŸ¥çœ‹redisè¿è¡ŒçŠ¶æ€service redis status# æŸ¥çœ‹redisè¿›ç¨‹ps -ef | grep redis å¼€å¯è‡ªå¯åŠ¨ 1chkconfig redis on 3. é…ç½®Redis é»˜è®¤é…ç½®æ–‡ä»¶ä¸º /etc/redis.conf , é€šå¸¸å¯¹å…¶è¿›è¡Œé…ç½®ä¿®æ”¹ 1234567891011121314151617181920# æŒ‡å®š Redis ç«¯å£port 6379# ç»‘å®šä¸»æœº IP , é€šå¸¸ä¿®æ”¹ä¸º 0.0.0.0 æˆ–å†…ç½‘åœ°å€æ–¹ä¾¿è¿œç¨‹è®¿é—®bind 127.0.0.1# è®¾ç½®æ•°æ®åº“æ•°é‡databases 16# æŒ‡å®šåœ¨å¤šé•¿æ—¶é—´å†…ï¼Œæœ‰å¤šå°‘æ¬¡æ›´æ–°æ“ä½œï¼Œå°±å°†æ•°æ®åŒæ­¥åˆ°æ•°æ®æ–‡ä»¶ï¼Œå¯ä»¥å¤šä¸ªæ¡ä»¶é…åˆ# save &lt;seconds&gt; &lt;changes&gt; # Redis é»˜è®¤é…ç½®æ–‡ä»¶ä¸­æä¾›äº†ä¸‰ä¸ªæ¡ä»¶save 900 1save 300 10save 60 10000# æŒ‡å®šæœ¬åœ°æ•°æ®åº“æ–‡ä»¶å,é»˜è®¤å¦‚ä¸‹dbfilename dump.rdb# æŒ‡å®šæœ¬åœ°æ•°æ®åº“å­˜æ”¾ç›®å½• , è‹¥è‡ªå®šä¹‰ç›®å½•,éœ€è¦èµ‹äºˆæƒé™ chown -R redis:redis &#123;è‡ªå®šä¹‰ç›®å½•&#125;dir /var/lib/redis # æŒ‡å®šæ˜¯å¦æ¿€æ´»é‡ç½®å“ˆå¸Œï¼Œé»˜è®¤ä¸ºå¼€å¯activerehashing yes# è®¾ç½®Redisè¿žæŽ¥å¯†ç ï¼Œå¦‚æžœé…ç½®äº†è¿žæŽ¥å¯†ç ï¼Œå®¢æˆ·ç«¯åœ¨è¿žæŽ¥Redisæ—¶éœ€è¦é€šè¿‡AUTH &lt;password&gt;å‘½ä»¤æä¾›å¯†ç ï¼Œé»˜è®¤å…³é—­requirepass foobared æ›´å¤šçš„é…ç½®,å¯ç›´æŽ¥æŸ¥çœ‹é…ç½®æ–‡ä»¶çš„æ³¨é‡Šæˆ–è€…æŸ¥çœ‹ è¯¦ç»†æ–‡æ¡£ 4. å¸¸ç”¨æ“ä½œ1. è¿žæŽ¥ Redis123redis-cli -h [ip] -p [ç«¯å£]#ä¾‹redis-cli -h 127.0.0.1 -p 6379 è‹¥è®¾ç½®äº†å¯†ç  , åˆ™éœ€è¦è¾“å…¥å¯†ç  1auth 445813 #445813ä¸ºå¯†ç ï¼Œè¾“å…¥å¯†ç å‰è¦å¯†ç å‰é¢åŠ  authå’Œç©ºæ ¼ 2. é”®å€¼æ“ä½œ12345678910111213141516171819202122232425#æ·»åŠ set key value#ä¾‹set webname django.cnset usrname "My namne is XXX" #ä¸­é—´æœ‰ç©ºæ ¼çš„è¦ç”¨å¼•å·#é€šè¿‡KEYæŸ¥è¯¢127.0.0.1:6379&gt; get webname"django.cn"#åˆ é™¤keydel webname#è®¾ç½®è¿‡æœŸæ—¶é—´(å•ä½ä¸ºç§’)expire key timeout#ä¹Ÿå¯ä»¥åœ¨è®¾ç½®å€¼çš„æ—¶å€™ï¼Œä¸€åŒæŒ‡å®šè¿‡æœŸæ—¶é—´set key value EX timeout#ä¾‹å­set name django.cn EX 20 #è®¾ç½®20ç§’è¿‡æœŸ#æŸ¥çœ‹è¿‡æœŸæ—¶é—´ttl key#å¦‚ttl name#æŸ¥çœ‹å½“å‰redisä¸­æ‰€æœ‰Keykeys * Redisæ”¯æŒäº”ç§æ•°æ®ç±»åž‹: stringï¼ˆå­—ç¬¦ä¸²),hashï¼ˆå“ˆå¸Œï¼‰, listï¼ˆåˆ—è¡¨ï¼‰,setï¼ˆé›†åˆï¼‰åŠzset(sorted set: æœ‰åºé›†åˆ).æ›´å¤šå…³äºŽä¸åŒæ•°æ®ç±»åž‹æ“ä½œæ–¹æ³•, å¯æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£: https://redis.io/commandsï¼ˆè‹±æ–‡ï¼‰, è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªä¸­æ–‡çš„, å¯ä»¥åŽ»çœ‹çœ‹ http://redisdoc.com/index.html docker-compose å®‰è£… Redisç›´æŽ¥é€šè¿‡ Rancher æˆ–è€… docker-compose å®‰è£… ,æ–¹ä¾¿è¿½è¸ª é¦–å…ˆåœ¨å¯¹åº”ç›®å½•ä¸‹åˆ›å»º redis.conf , å…³äºŽç«¯å£ , ç›®å½•ç­‰åŸºæœ¬ä¸è¦æ”¹ , å°±æ”¹åŠ¨è®¿é—®å¯†ç ç­‰å¹³å°ç›¸å…³çš„ä¿¡æ¯å³å¯ 12345678910111213version: '3'services: redis: image: redis container_name: redis restart: always ports: - 16379:6379 volumes: - $PWD:/data - /etc/localtime:/etc/localtime:ro - $PWD/conf/redis.conf:/etc/redis/redis.conf command: redis-server /etc/redis/redis.conf å‚è€ƒé“¾æŽ¥ djangoä¸­æ–‡ç½‘: centoså’Œubuntuä¸‹redisçš„å®‰è£…ä¸Žä½¿ç”¨ Dockerå®‰è£…Redis MySQL1. å¸è½½è‡ªå¸¦çš„ mariadb-lib åŠ mysqlé¦–å…ˆæŸ¥çœ‹å·²å®‰è£…çš„ mariadb å’Œ mysql ç„¶åŽä¸€ä¸€å¸è½½ 1234# æŸ¥çœ‹rpm -qa|grep mariadb# å¸è½½rpm -e --nodeps mariadb-libs-xxx mysql åŒç† 2. ä¸‹è½½ MySQL çš„ Yum RepositoryæŸ¥çœ‹ç³»ç»Ÿå‘è¡Œç‰ˆæœ¬ 1cat /etc/os-release 123456789NAME=&quot;Amazon Linux&quot;VERSION=&quot;2&quot;ID=&quot;amzn&quot;ID_LIKE=&quot;centos rhel fedora&quot; # ç•™æ„è¿™é‡Œ, å¯¹åº”å¯é€‰ä¸‹è½½ç‰ˆæœ¬VERSION_ID=&quot;2&quot;PRETTY_NAME=&quot;Amazon Linux 2&quot;ANSI_COLOR=&quot;0;33&quot;CPE_NAME=&quot;cpe:2.3:o:amazon:amazon_linux:2&quot;HOME_URL=&quot;https://amazonlinux.com/&quot; ç„¶åŽè¿›å…¥ MySQL å®˜ç½‘ Yum Repository ä¸‹è½½åŒº é€‰æ‹©å¯¹åº”ç‰ˆæœ¬å¤åˆ¶é“¾æŽ¥, ä¸‹è½½ 1wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm å®‰è£… repo 1yum localinstall ./mysql80-community-release-el7-3.noarch.rpm æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ 1yum repolist enabled | grep &quot;mysql.*-community.*&quot; 3. å®‰è£… MySQL1yum install mysql-community-server 4. é…ç½®ä¿®æ”¹ MySQL çš„é…ç½®æ–‡ä»¶ /etc/my.cnf , è¿™é‡Œç¬”è€…å°† mysql é…ç½®ç›®å½•é›†ä¸­é…ç½®åœ¨äº† /mnt/efs/mysql ä¸‹ 12345678910basedir=/mnt/efs/mysql # æ–°å¢ždatadir=/mnt/efs/mysql/data # ä¿®æ”¹socket=/mnt/efs/mysql/mysql.sock # ä¿®æ”¹character_set_server = utf8 # æ–°å¢žpid-file=/mnt/efs/mysql/mysqld/mysqld.pid # ä¿®æ”¹log-error=/mnt/efs/mysql/log/mysqld.log # ä¿®æ”¹[client] # æ–°å¢žsocket=/mnt/efs/mysql/mysql.sock# æ–°å¢ž ç„¶åŽéœ€è¦ç»™äºˆè‡ªå®šä¹‰ç›®å½•æƒé™ è¿™é‡Œéœ€è¦æ³¨æ„, åœ¨ç»™æƒé™ä¹‹å‰éœ€è¦åˆ›å»ºä¸€äº›å­ç›®å½•, å¦åˆ™åŽé¢å¯åŠ¨ mysql æ—¶ä¼šæŠ¥&quot;SERVER_BOOTING&quot; Permission denied ç±»ä¼¼çš„é”™è¯¯ , éœ€è¦æŸ¥çœ‹é”™è¯¯æ—¥å¿—äº†è§£è¯¦æƒ… . è¿™é‡Œç½—åˆ—ä¸‹è¦åˆ›å»ºçš„å­ç›®å½• undefined å†ç»™äºˆæƒé™ 1chown -R mysql:mysql /mnt/efs/mysql åˆå§‹åŒ– 1mysqld --initialize --user=mysql ç®¡ç† SELinux 1setenforce 0 è®¾ç½®å¼€æœºå¯åŠ¨ 1systemctl enable mysqld å¯åŠ¨ 1systemctl start mysqld æŸ¥è¯¢æ˜¯å¦å¯åŠ¨æˆåŠŸ 1systemctl status mysqld 5. ç™»å½•éªŒè¯1grep &quot;temporary password&quot; /mnt/efs/mysql/log/mysqld.log å¾—åˆ°ä¸´æ—¶å¯†ç  , ç„¶åŽç™»å½•æ•°æ®åº“ 1mysql -uroot -p # è¾“å…¥å¾—åˆ°çš„ä¸´æ—¶å¯†ç  å†ä¿®æ”¹å¯†ç  1ALTER USER &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;xxxxxx&apos;; å¦‚æžœæ˜¯ mysql8.0 éœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ , å¦åˆ™ç”¨ Navicat ç­‰å®¢æˆ·ç«¯ç™»å½•æ—¶ä¼šæŠ¥ Authentication plugin &#39;caching_sha2_password&#39; cannot be loaded 12ALTER USER &apos;root&apos;@&apos;%&apos; IDENTIFIED WITH mysql_native_password BY &apos;xxx&apos;;FLUSH PRIVILEGES; è‹¥è¿™é‡Œçš„ % å¡«å†™çš„æ˜¯localhost åŽé¢ç™»å½•æ—¶ä¼šæŠ¥ Host &#39;x.x.x.x&#39; is not allowed to connect to this MySQL server . å…¶ä¸­ x.x.x.x æ˜¯ç™»å½•çš„æœ¬åœ° IP . æœ€å¥½ä¸è¦æ”¹rootçš„ç™»å½•host , åˆ›å»ºæ–°ç”¨æˆ·å¹¶ä¿®æ”¹host . 6. åˆ›å»ºç”¨æˆ·åŠæƒé™æŽ§åˆ¶åˆ›å»º 123456789# rootç™»å½•,ç„¶åŽåˆ›å»ºç”¨æˆ· use mysql;# åˆ›å»ºç”¨æˆ·create user &apos;dev&apos;@&apos;%&apos;;# æŸ¥è¯¢ç”¨æˆ·select user,host from user;# mysql_native_password æ˜¯ä½¿ç”¨æ—§ç‰ˆæœ¬å¯†ç æ’ä»¶,ä½¿æœ¬åœ° navicat æ–¹ä¾¿ç™»å½•ALTER USER &apos;dev&apos;@&apos;%&apos; IDENTIFIED WITH mysql_native_password BY &apos;xxx&apos;;FLUSH PRIVILEGES; æŽˆæƒ 1234567# ç»™äºˆ dev my_db æ•°æ®åº“ä¸‹çš„æ‰€æœ‰è¡¨çš„æ‰€æœ‰æƒé™grant all privileges on my_db.* to &apos;dev&apos;@&apos;%&apos;;# ç»™äºˆ dev testDB æ•°æ®åº“ä¸‹çš„æ‰€æœ‰æŸ¥è¯¢å’Œæ›´æ–°è¯­å¥æƒé™grant select,update on testDB.* to &apos;dev&apos;@&apos;%&apos;;# ç»™äºˆ dev æ‰€æœ‰æ•°æ®åº“çš„æŸäº›æƒé™grant select,delete,update,create,drop on *.* to &apos;dev&apos;@&apos;%&apos;;FLUSH PRIVILEGES; 7. docker-compose å®‰è£… MySQLç›´æŽ¥é€šè¿‡ Rancher æˆ–è€… Docker å®‰è£… MySQL é¦–å…ˆåˆ›å»º conf/my.cnf æ–‡ä»¶ 12345678910[mysqld]default-authentication-plugin=mysql_native_passwordbind-address = 0.0.0.0character_set_server = utf8skip-name-resolvemax_connections = 1000[client] docker-compose.yml é…ç½® 123456789101112131415version: '3'services: mysql: image: mysql:8.0 restart: always ports: - 13306:3306 volumes: - /etc/localtime:/etc/localtime:ro - $PWD/conf:/etc/mysql/conf.d - $PWD/logs:/logs - $PWD/data:/var/lib/mysql privileged: true environment: - MYSQL_ROOT_PASSWORD=yourpassword 8. æ•°æ®åº“æ—¥å¤‡è¿™é‡Œæˆ‘ä»¬å¯¹ docker å®‰è£…çš„ MySQL è¿›è¡Œæ•°æ®åº“ç»“æž„+æ•°æ®çš„æ¯æ—¥å…¨é‡å¤‡ä»½ é¦–å…ˆ docker ps æŸ¥çœ‹ MySQL å®¹å™¨çš„ container ID æˆ–è€… Name ç„¶åŽç¼–å†™è„šæœ¬ , é¦–å…ˆåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºå¥½ db ç›®å½• , ç”¨äºŽå­˜æ”¾å¤‡ä»½å¥½çš„æ–‡ä»¶ 12345678910111213141516171819#!/bin/bashDAT=`date +%m%d`HOR=`date +%H`begin=`date +%F" "%T`DIR=$PWD/dbif [[ ! -d $DIR/$DAT ]];then mkdir $DIR/$DATfifor i in `cat $PWD/mysql-back.list`do docker exec -it CONTAINER_NAME mysqldump -uroot -pPASSWORD $i &gt; $DIR/$DAT/$i-$DAT$HOR.sqldonefind $DIR/* -mtime +20 -exec rm -rf &#123;&#125; \;end=`date +%F" "%T`echo "$begin dump mysql -------&gt; $end has done" &gt;&gt; $PWD/mysqldump.log ç„¶åŽåœ¨å½“å‰ç›®å½•åˆ›å»º mysql-back.list æ–‡ä»¶ , å¡«å…¥è¦å¤‡ä»½çš„æ•°æ®åº“å æ›¿æ¢ä»¥ä¸Šè„šæœ¬ä¸­çš„ CONTAINER_NAME å’Œ PASSWORD ç„¶åŽè®¾ç½®è„šæœ¬è¿è¡Œæ—¶é—´ vim /etc/crontab åœ¨æœ€ä¸‹æ–¹åŠ å…¥è¡Œ , sh æ–‡ä»¶è·¯å¾„æ›¿æ¢ä¸ºè‡ªå·±å­˜æ”¾çš„ 10 2 * * * root sh /mnt/data/mysql/backups/mysql-backup.sh è¿™æ ·æ¯å¤©å‡Œæ™¨2ç‚¹å°±ä¼šæ‰§è¡Œå…¨é‡æ•°æ®å¤‡ä»½ å‚è€ƒé“¾æŽ¥ Centos7ï¼Œredhatå®‰è£…Mysql CentOS7å®‰è£…MySQL8.0å›¾æ–‡æ•™ç¨‹ MySQL 8.0æŠ¥é”™ï¼šERROR 2059 (HY000): Authentication plugin â€˜caching_sha2_passwordâ€™ cannot be loaded æŸ¥çœ‹Linuxå‘è¡Œç‰ˆåç§°åŠç‰ˆæœ¬å· CenterOS7-Docker-å®‰è£…MySQL8 Docker1. å®‰è£…ä¾èµ–åŒ…é¦–å…ˆç§»é™¤æ—§çš„ docker åŠå…¶ ä¾èµ– 12345678sudo yum remove docker \ docker-client \ docker-client-latest \ docker-common \ docker-latest \ docker-latest-logrotate \ docker-logrotate \ docker-engine ç„¶åŽå®‰è£… docker ä¾èµ–åŒ… 1sudo yum install -y yum-utils device-mapper-persistent-data lvm2 2. æ·»åŠ  Docker-ce é•œåƒ å›½å¤–æº 1yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo å›½å†…é˜¿é‡Œäº‘æº 1yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo è¿œç¨‹çš„åŒ…ä¿¡æ¯ç¼“å­˜åˆ°æœ¬æœº 1yum makecache fast 3. å®‰è£… Dockeræœ€æ–°ç‰ˆå®‰è£… 1yum -y install docker-ce åœ¨ç”Ÿäº§çŽ¯å¢ƒä¸­, é€šå¸¸éœ€è¦ä½¿ç”¨ç»Ÿä¸€çš„ç¨³å®šç‰ˆ ,è€Œä¸æ˜¯æœ€æ–°ç‰ˆ . æ­¤æ—¶æˆ‘ä»¬éœ€è¦æŸ¥çœ‹å¹¶å®‰è£…æŒ‡å®šç‰ˆæœ¬ æŒ‡å®šç‰ˆæœ¬å®‰è£… 12345678910111213141516yum list docker-ce --showduplicates | sort -rLoaded plugins: extras_suggestions, langpacks, priorities, update-motddocker-ce.x86_64 3:18.09.6-3.el7 docker-ce-stabledocker-ce.x86_64 3:18.09.5-3.el7 docker-ce-stabledocker-ce.x86_64 3:18.09.4-3.el7 docker-ce-stabledocker-ce.x86_64 3:18.09.3-3.el7 docker-ce-stabledocker-ce.x86_64 3:18.09.2-3.el7 docker-ce-stabledocker-ce.x86_64 3:18.09.1-3.el7 docker-ce-stabledocker-ce.x86_64 3:18.09.0-3.el7 docker-ce-stabledocker-ce.x86_64 18.06.3.ce-3.el7 docker-ce-stabledocker-ce.x86_64 18.06.2.ce-3.el7 docker-ce-stabledocker-ce.x86_64 18.06.1.ce-3.el7 docker-ce-stabledocker-ce.x86_64 18.06.0.ce-3.el7 docker-ce-stabledocker-ce.x86_64 18.03.1.ce-1.el7.centos docker-ce-stable... ç„¶åŽå®‰è£…å¯¹åº”ç‰ˆæœ¬ 1sudo yum install docker-ce-18.09.5 docker-ce-cli-18.09.5 containerd.io-1.2.5 Issueæ­¤æ—¶å¯èƒ½å‡ºçŽ° Requires: container-selinux &gt;= 2.9 çš„æŠ¥é”™ 1234Error: Package: 3:docker-ce-18.09.6-3.el7.x86_64 (docker-ce-stable) Requires: container-selinux &gt;= 2.9 You could try using --skip-broken to work around the problem You could try running: rpm -Va --nofiles --nodigest æ­¤æ—¶éœ€è¦åŽ» http://rpm.pbone.net/index.php3/stat/4/idpl/40704222/dir/centos_7/com/container-selinux-2.9-4.el7.noarch.rpm.html æˆ– https://pkgs.org/download/container-selinux ä¸‹è½½ container-selinux2.9.4 1wget ftp://bo.mirror.garr.it/1/slc/centos/7.1.1503/extras/x86_64/Packages/container-selinux-2.9-4.el7.noarch.rpm æŽ¥ç€æ‰§è¡Œ 1rpm -ivh container-selinux-2.9-4.el7.noarch.rpm è¿‡ç¨‹ä¸­å¯èƒ½åˆæŠ¥é”™ , è‹¥æ— æŠ¥é”™åˆ™å¯è·³è¿‡ 12error: Failed dependencies: policycoreutils-python is needed by container-selinux-2:2.9-4.el7.noarch ç›´æŽ¥ yum install ç¼ºå¤±çš„åŒ…å³å¯ 1yum -y install policycoreutils-python è‡³æ­¤,ç¼ºå¤±çš„ä¾èµ–åŒ…å·²è¡¥å…¨ , å†æŒ‰ç…§ä¸Šè¿°å®‰è£… Docker 4. é…ç½® Dockeré‡è½½ systemctl å¹¶å¯åŠ¨å’Œå¼€æœºè‡ªå¯åŠ¨ docker 1234systemctl daemon-reloadsystemctl start dockersystemctl enable dockerdocker --version 5. å®‰è£… Docker-compose12345sudo curl -L "https://github.com/docker/compose/releases/download/1.24.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-composesudo chmod +x /usr/local/bin/docker-composedocker-compose --version 6. æ”¹å˜ Docker é»˜è®¤å­˜å‚¨è·¯å¾„å®‰è£…å®ŒåŽä¸è¦å¯åŠ¨,æˆ–è€…å…ˆåœæŽ‰æœåŠ¡ ç§»åŠ¨çŽ°æœ‰æ–‡ä»¶ 1mv /var/lib/docker/* /mnt/efs/docker åˆ é™¤åŽŸæ¥çš„ç›®å½• 1rm -rf /var/lib/docker å»ºç«‹è½¯è¿žæŽ¥ 1ln -s /mnt/efs/docker/ /var/lib/docker è¿›å…¥ /var/lib ä¸‹ç”¨å‘½ä»¤æŸ¥çœ‹è½¯è¿žæŽ¥ç»“æžœ 123 ls -la docker# æ˜¾ç¤ºç»“æžœå¦‚ä¸‹è¡¨ç¤ºæˆåŠŸdocker -&gt; /mnt/efs/docker/ å¯åŠ¨æœåŠ¡ , ç”¨ docker info æŸ¥çœ‹æ˜¯å¦æˆåŠŸ 7. å¸è½½ Docker1. æœç´¢å·²å®‰è£…çš„ docker åŒ… å¹¶åˆ é™¤ 123yum list installed|grep dockeryum â€“y remove &#123;ä»¥ä¸Šæ‰€åˆ—çš„åŒ…&#125; 2. åˆ é™¤ docker é•œåƒ 1rm -rf /var/lib/docker ## è‹¥æœ‰è‡ªå®šä¹‰ç›®å½•,éœ€åˆ é™¤è‡ªå®šä¹‰ç›®å½• ä¹Ÿå¯åœ¨å¸è½½å‰åˆ é™¤å®¹å™¨åŠé•œåƒ 123# åœæ­¢æ‰€æœ‰å®¹å™¨å¹¶åˆ é™¤docker stop $(docker ps -a -q)docker rm $(docker ps -a -q) Dockeråˆ¶ä½œ Java æœåŠ¡é•œåƒå¹¶æŽ¨é€åˆ°ç§æœ‰é•œåƒåº“é¦–å…ˆå°† Java å·¥ç¨‹æ”¹é€ æˆdockerå·¥ç¨‹ . åœ¨ pom.xml ä¸­åŠ å…¥ 123456789101112131415161718192021222324&lt;properties&gt; &lt;docker.image.prefix&gt;hc&lt;/docker.image.prefix&gt;&lt;/properties&gt;&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;com.spotify&lt;/groupId&gt; &lt;artifactId&gt;dockerfile-maven-plugin&lt;/artifactId&gt; &lt;version&gt;1.3.6&lt;/version&gt; &lt;configuration&gt; &lt;repository&gt;$&#123;docker.image.prefix&#125;/$&#123;project.artifactId&#125;&lt;/repository&gt; &lt;buildArgs&gt; &lt;JAR_FILE&gt;target/$&#123;project.build.finalName&#125;.jar&lt;/JAR_FILE&gt; &lt;/buildArgs&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; ç„¶åŽæœ¬åœ°å®‰è£… Docker , æ­¤å¤„ä¸æ¸…æ¥šçš„å¯è‡ªè¡Œ Google . ç„¶åŽå‘½ä»¤æ‰“åŒ… 1mvn clean package dockerfile:build -Dmaven.test.skip=true 123456# ç™»å½•ç§æœ‰é•œåƒåº“,ç„¶åŽè¾“å…¥å¯†ç sudo docker login --username=ç”¨æˆ·å registry.cn-shenzhen.aliyuncs.com# é€šè¿‡ docker images æŸ¥çœ‹imageId å¡«å…¥ä¸‹æ–¹æŒ‡ä»¤ä¸­sudo docker tag [ImageId] registry.cn-shenzhen.aliyuncs.com/å‘½åç©ºé—´/ä»“åº“:[é•œåƒç‰ˆæœ¬å·]# æŽ¨é€sudo docker push registry.cn-shenzhen.aliyuncs.com/å‘½åç©ºé—´/ä»“åº“:[é•œåƒç‰ˆæœ¬å·] æ­¤æ—¶æ³¨æ„ä¸‹,å¦‚æžœæ˜¯åœ¨ Mac ç«¯è¾“å…¥ sudo xxx å‘½ä»¤,ç¬¬ä¸€ä¸ªè¾“å…¥çš„å¯†ç å…¶å®žæ˜¯æœ¬åœ°ç”µè„‘å¯†ç , é€šè¿‡åŽæ‰æ˜¯è¾“å…¥é•œåƒåº“å¯†ç , åˆ«æžé”™äº†ðŸ˜‚ CenterOS è¡¥å……åŽé¢ä½¿ç”¨äº†å‡ å° CenterOS , å®‰è£…è¿‡ç¨‹ä¸­ä¾èµ–çŽ¯å¢ƒç›¸å¯¹äºŽ AWS Linux è¿˜æ˜¯å…¨ä¸€äº› . å¸è½½ device-mapper-* å®‰è£…é«˜ç‰ˆæœ¬å³å¯å®‰è£…æˆåŠŸ 12345678910# æŸ¥çœ‹å®‰è£…çš„ device* åŒ…rpm -qa | grep device# rpm -e xxx(ä»¥ä¸ŠæŸ¥æ‰¾å‡ºæ¥çš„åŒ…) --nodeps# ä¸‹è½½ä¾èµ–wget ftp://ftp.pbone.net/mirror/ftp.scientificlinux.org/linux/scientific/7.4/x86_64/os/Packages/device-mapper-1.02.140-8.el7.x86_64.rpmwget ftp://ftp.pbone.net/mirror/ftp.scientificlinux.org/linux/scientific/7.4/x86_64/os/Packages/device-mapper-libs-1.02.140-8.el7.x86_64.rpm# å®‰è£… rpm -ivh xxx(ä»¥ä¸Šä¸¤ä¸ªåŒ…) --nodeps NPM Repo 12# åˆ é™¤æ‰€æœ‰æ— ç”¨é•œåƒdocker image prune -a Issueè‹¥ docker info æŸ¥çœ‹æœ‰ WARNING: bridge-nf-call-iptables is disabled çš„è­¦å‘Šæ˜¾ç¤º . è§£å†³åŠžæ³• : 1vim /etc/sysctl.conf æ·»åŠ ä»¥ä¸‹å†…å®¹ 12net.bridge.bridge-nf-call-ip6tables = 1net.bridge.bridge-nf-call-iptables = 1 å†æ‰§è¡Œ 1sysctl -p å†æ‰§è¡Œ docker info å°±ä¸ä¼šæŠ¥é”™äº†. å‚è€ƒé“¾æŽ¥ Requires: container-selinux &gt;= 2.9æŠ¥é”™ å®˜ç½‘: Get Docker CE for CenterOS å®˜ç½‘: Install Docker Compose ä¿®æ”¹ docker é»˜è®¤çš„å­˜å‚¨ä½ç½® WARNING:bridge-nf-call-iptables is disabledè§£å†³ SSå‚è€ƒé“¾æŽ¥Amazon EC2 Linuxå®žä¾‹ä¸Šå®‰è£…ShadowsocksæœåŠ¡å™¨ GitLab1. DockeråŠdocker-composeå‚è€ƒæœ¬æ–‡ Dockeréƒ¨åˆ† 2. GitLabIssue é˜¿é‡Œäº‘ä¼ä¸šé‚®ç®± smtp OpenTimeout: execution expired é€šå¸¸æ˜¯å› ä¸ºé˜¿é‡Œäº‘æœåŠ¡å™¨ 25 ç«¯å£æœªå¼€æ”¾, æ¢æˆ 465 å³å¯. å·²ç»é€šè¿‡ docker-compose éƒ¨ç½²çš„ GitLab éœ€è¦ä¿®æ”¹GitLabè‡ªèº«çš„é…ç½®æ–‡ä»¶gitlab.rb é¦–å…ˆä¿®æ”¹è‡ªå®šä¹‰ç›®å½•ä¸‹çš„ {docker-composeæ–‡ä»¶ä¸­çš„è‡ªå®šä¹‰è·¯å¾„}/config/gitlab.rb å¹¶ä¿å­˜ 123456789gitlab_rails[&apos;smtp_enable&apos;] = truegitlab_rails[&apos;smtp_address&apos;] = &quot;smtp.mxhichina.com&quot;gitlab_rails[&apos;smtp_port&apos;] = 465gitlab_rails[&apos;smtp_user_name&apos;] = &quot;&#123;account&#125;@&#123;domain&#125;&quot;gitlab_rails[&apos;smtp_password&apos;] = &quot;æœ‰æŽˆæƒç å¡«æŽˆæƒç ,æ²¡æœ‰å¡«å¯†ç &quot;gitlab_rails[&apos;smtp_domain&apos;] = &quot;&#123;domain&#125;&quot;gitlab_rails[&apos;smtp_authentication&apos;] = &quot;login&quot;gitlab_rails[&apos;smtp_enable_starttls_auto&apos;] = truegitlab_rails[&apos;smtp_tls&apos;] = true ç„¶åŽè¿›å…¥å®¹å™¨ bash 1docker exec -it gitlab bash é‡æ–°è¯»å–é…ç½® 12gitlab-ctl reconfiguregitlab-ctl restart ç„¶åŽè¿›å…¥ gitlab æŽ§åˆ¶å° 1gitlab-rails console æ£€æŸ¥é‚®ä»¶é…ç½® æ£€æŸ¥é‚®ä»¶å‘é€åè®® 1ActionMailer::Base.delivery_method æ˜¾ç¤º=&gt; :smtp æŸ¥çœ‹å½“å‰çš„å‘é€é‚®ä»¶é…ç½® 1ActionMailer::Base.smtp_settings æŸ¥çœ‹é…ç½®æ˜¯å¦ä¸Žä¿®æ”¹åŽçš„ä¸€è‡´ ç„¶åŽå‘é€æµ‹è¯•é‚®ä»¶ 1Notify.test_email(&apos;xxx@yyy.com&apos;,&apos;æµ‹è¯•æ ‡é¢˜&apos;,&apos;æµ‹è¯•å†…å®¹&apos;).deliver_now å»ºè®®ä¸è¦ä½¿ç”¨163é‚®ç®±, å¯èƒ½å› ä¸ºå†…å®¹å¯¼è‡´é‚®ä»¶å‘é€å¤±è´¥æŠ¥554 å‚è€ƒé“¾æŽ¥Docker-composeä¸€é”®éƒ¨ç½²gitlabä¸­æ–‡ç‰ˆ Yapiå‚è€ƒé“¾æŽ¥é¡¶å°–APIæ–‡æ¡£ç®¡ç†å·¥å…·Yapi çˆ±å‘å¸ƒ APP æ‰˜ç®¡fabu.love å¸¸ç”¨çš„APPæ‰˜ç®¡å¹³å° è’²å…¬è‹± , fir å®¡æ ¸è¶Šæ¥è¶Šä¸¥æ ¼,æ—¶ä¸æ—¶è¿˜ä¼šçªç„¶ä¸‹æž¶. æœ€å¥½è‡ªå·±éƒ¨ç½²å¹³å° ç‰©ç†æœºçŽ¯å¢ƒè¡¥å……ç‰©ç†æœºåˆå§‹åŒ–ç¼ºå°‘å¾ˆå¤šäº‘ä¸»æœºè£…å¥½çš„çŽ¯å¢ƒ 12345678910## vimyum -y install vim*## wget yum -y install wget## yum-utilsyum -y install yum-utils## telnetyum list telnet* åˆ—å‡ºtelnetç›¸å…³çš„å®‰è£…åŒ…yum install telnet-server å®‰è£…telnetæœåŠ¡yum install telnet.* å®‰è£…telnetå®¢æˆ·ç«¯]]></content>
      <categories>
        <category>AWS</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>Docker</tag>
        <tag>Nginx</tag>
        <tag>GitLab</tag>
        <tag>Docker-Compose</tag>
        <tag>Redis</tag>
        <tag>JDK</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Nginxå¯ç”¨Let's Encrypt SSLè¯ä¹¦]]></title>
    <url>%2Fnginx-letsencrypt-ssl%2F</url>
    <content type="text"><![CDATA[Letâ€™ s Encrypt æ˜¯ä¸€ä¸ªå…è´¹çš„ SSL/TLS è¯ä¹¦å‘è¡Œæœºæž„, è¯ä¹¦æœ‰æ•ˆæœŸä¸º90å¤©, åˆ°æœŸå‰30å†…å¯ç»­æœŸï¼Œå› æ­¤ä¸éœ€è¦æ‹…å¿ƒè´¹ç”¨é—®é¢˜ã€‚æœ¬ç¯‡å°†è®²è¿°å¯ç”¨è¯ä¹¦çš„ä¸»è¦è¿‡ç¨‹: å®¢æˆ·ç«¯å®‰è£…ã€èŽ·å–è¯ä¹¦ã€é…ç½®Nginxã€è¯ä¹¦è‡ªåŠ¨ç»­æœŸç­‰ã€‚ æœåŠ¡å™¨çŽ¯å¢ƒ: nginx-1.10.1 php-7.0.4 mariadb-10.1.13 å¯ç”¨è¯ä¹¦çš„ä¸»è¦è¿‡ç¨‹åŒ…æ‹¬ï¼šå®¢æˆ·ç«¯å®‰è£…ã€èŽ·å–è¯ä¹¦ã€é…ç½®Nginxã€è¯ä¹¦è‡ªåŠ¨ç»­æœŸç­‰å‡ ä¸ªæ–¹é¢ã€‚ å®¢æˆ·ç«¯ä¸‹è½½ Letâ€™ s Encryptå®¢æˆ·ç«¯çŽ°å·²æ›´åä¸ºcertbotï¼Œå®¢æˆ·ç«¯çš„åœ°å€ä¸º GitHub ã€‚ 12345678#ä¸‹è½½wget https://github.com/certbot/certbot/archive/v0.22.2.tar.gz#è§£åŽ‹tar xzvf v0.22.2.tar.gz#è¿›å…¥ç›®å½•cd certbot-0.22.2 è¿è¡Œä¸€æ¬¡å®¢æˆ·ç«¯ï¼Œè¿›è¡Œæ£€æŸ¥å‡çº§ï¼š 12345#è¿›å…¥ç›®å½•cd ~/certbot#æ‰§è¡Œæ£€æŸ¥./certbot-auto --help å¦‚æžœæ²¡ä»€ä¹ˆé—®é¢˜çš„è¯ï¼Œä¼šæ˜¾ç¤ºå¸®åŠ©æ–‡æ¡£ã€‚ èŽ·å–è¯ä¹¦ ç”³è¯·è¿‡ç¨‹ä¸­è¦éªŒè¯ç»‘å®šçš„åŸŸåæ˜¯å¦å±žäºŽç”³è¯·äºº, å…¶åŽŸç†å°±æ˜¯ç”³è¯·äººåœ¨åŸŸåæ‰€åœ¨çš„æœåŠ¡å™¨ä¸Šç”³è¯·è¯ä¹¦, ç„¶åŽ Letâ€™ s Encrypt ä¼šè®¿é—®ç»‘å®šçš„åŸŸåä¸Žå®¢æˆ·ç«¯é€šä¿¡æˆåŠŸå³å¯é€šè¿‡ã€‚ éªŒè¯çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯åœæ­¢å½“å‰çš„ web server æœåŠ¡, è®©å‡º 80 ç«¯å£, ç”±å®¢æˆ·ç«¯å†…ç½®çš„ web server å¯åŠ¨ä¸Ž Letâ€™ s Encrypt é€šä¿¡ï¼›ä¸€ç§æ˜¯åœ¨åŸŸåæ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªä¸´æ—¶ç›®å½•, å¹¶è¦ä¿è¯å¤–ç½‘é€šç”¨åŸŸåå¯ä»¥è®¿é—®è¿™ä¸ªç›®å½•ï¼Œè¿™ç§æ–¹å¼ä¸éœ€è¦åœæ­¢å½“å‰çš„ web server æœåŠ¡ã€‚ 1. é€šè¿‡è®¿é—®80ç«¯å£æ–¹å¼éªŒè¯ 12345678#åœæ­¢nginxsystemctl stop nginx#èŽ·å–è¯ä¹¦, --standalone å‚æ•°:ä½¿ç”¨å†…ç½®web server. --email å‚æ•°:ç®¡ç†å‘˜é‚®ç®±,è¯ä¹¦åˆ°æœŸå‰ä¼šå‘é‚®ä»¶åˆ°æ­¤é‚®ç®±æé†’. -d å‚æ•°:è¦ç»‘å®šçš„åŸŸå,åŒä¸€åŸŸçš„ä¸åŒå­åŸŸéƒ½è¦è¾“å…¥../certbot-auto certonly --standalone --email admin@4spaces.org -d 4spaces.org -d www.4spaces.org#å¯åŠ¨nginxsystemctl start nginx 2. é€šè¿‡ä¸´æ—¶ç›®å½•éªŒè¯ 12#--webroot å‚æ•°:æŒ‡å®šä½¿ç”¨ä¸´æ—¶ç›®å½•çš„æ–¹å¼. -w å‚æ•°:æŒ‡å®šåŽé¢-d åŸŸåæ‰€åœ¨çš„æ ¹ç›®å½•, å¦‚æžœä¸€æ¬¡ç”³è¯·å¤šä¸ªåŸŸçš„, å¯ä»¥é™„åŠ æ›´å¤š -w...-d... è¿™æ®µ../certbot-auto certonly --webroot --email admin@4spaces.org -w /usr/share/nginx/html -d 4spaces.org -d www.4spaces.org å®Œæˆä¸Šé¢çš„æ“ä½œå³å¯èŽ·å¾— SSL è¯ä¹¦, ä¿å­˜åœ¨ â€œ/etc/letsencrypt/live/æ ¹åŸŸå/â€ ç›®å½•ä¸‹, ä¼šäº§ç”Ÿ 4 ä¸ªæ–‡ä»¶, å…¶ä¸­3ä¸ªè¯ä¹¦æ–‡ä»¶, 1ä¸ªç§é’¥æ–‡ä»¶. ä¸è¦ç§»åŠ¨è¯ä¹¦çš„ä½ç½®, ä»¥å…ç»­æœŸæ—¶å‡ºçŽ°é”™è¯¯ã€‚å…³äºŽLetsencryptä½¿ç”¨çš„æ›´å¤šå‘½ä»¤å‚è§ã€Œè¿™é‡Œã€ã€‚ é…ç½®Nginxå¯ç”¨https ä¸Šé¢ä½ çš„Nginxé…ç½®å¹¶æ²¡æœ‰å¯ç”¨sslï¼Œä¸‹é¢æˆ‘ä»¬éœ€è¦å¼€å§‹é…ç½®nginxï¼Œè®©å…¶æ”¯æŒhttpsã€‚è¿›è¡Œè¿™ä¸€æ­¥çš„å‰ææ˜¯ä½ å‰é¢å·²ç»æˆåŠŸç”Ÿæˆè¯ä¹¦ã€‚ ç¼–è¾‘æ–‡ä»¶/etc/nginx/conf.d/default.conf(æˆ‘æ˜¯é€šè¿‡yumçš„æ–¹å¼å®‰è£…çš„nginxï¼Œé…ç½®ç›®å½•åœ¨è¿™é‡Œï¼Œä½ æ ¹æ®è‡ªå·±çš„æƒ…å†µæ¥)ï¼Œè¿›è¡Œå¦‚ä¸‹é…ç½®ï¼ˆè¿™ä¸ªæ˜¯æˆ‘çš„å®Œæ•´é…ç½®ï¼‰ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152#è®¾ç½®éžå®‰å…¨è¿žæŽ¥æ°¸ä¹…è·³è½¬åˆ°å®‰å…¨è¿žæŽ¥server&#123; listen 80; server_name 4spaces.org www.4spaces.org; #å‘Šè¯‰æµè§ˆå™¨æœ‰æ•ˆæœŸå†…åªå‡†ç”¨ https è®¿é—® add_header Strict-Transport-Security max-age=15768000; #æ°¸ä¹…é‡å®šå‘åˆ° https ç«™ç‚¹ return 301 https://$server_name$request_uri;&#125;server &#123; #å¯ç”¨ https, ä½¿ç”¨ http/2 åè®®, nginx 1.9.11 å¯ç”¨ http/2 ä¼šæœ‰bug, å·²åœ¨ 1.9.12 ç‰ˆæœ¬ä¸­ä¿®å¤. listen 443 ssl http2; server_name 4spaces.org www.4spaces.org; #é¦–é¡µ index index.php index.html index.htm; #ç½‘ç«™æ ¹ç›®å½• root /usr/share/nginx/4spaces; #å‘Šè¯‰æµè§ˆå™¨å½“å‰é¡µé¢ç¦æ­¢è¢«frame add_header X-Frame-Options DENY; #å‘Šè¯‰æµè§ˆå™¨ä¸è¦çŒœæµ‹mimeç±»åž‹ add_header X-Content-Type-Options nosniff; #è¯ä¹¦è·¯å¾„ ssl_certificate /etc/letsencrypt/live/4spaces.org/fullchain.pem; #ç§é’¥è·¯å¾„ ssl_certificate_key /etc/letsencrypt/live/4spaces.org/privkey.pem; #å®‰å…¨é“¾æŽ¥å¯é€‰çš„åŠ å¯†åè®® ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #å¯é€‰çš„åŠ å¯†ç®—æ³•,é¡ºåºå¾ˆé‡è¦,è¶Šé å‰çš„ä¼˜å…ˆçº§è¶Šé«˜. ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5; #åœ¨ SSLv3 æˆ– TLSv1 æ¡æ‰‹è¿‡ç¨‹ä¸€èˆ¬ä½¿ç”¨å®¢æˆ·ç«¯çš„é¦–é€‰ç®—æ³•,å¦‚æžœå¯ç”¨ä¸‹é¢çš„é…ç½®,åˆ™ä¼šä½¿ç”¨æœåŠ¡å™¨ç«¯çš„é¦–é€‰ç®—æ³•. ssl_prefer_server_ciphers on; #å‚¨å­˜SSLä¼šè¯çš„ç¼“å­˜ç±»åž‹å’Œå¤§å° ssl_session_cache shared:SSL:10m; #ç¼“å­˜æœ‰æ•ˆæœŸ ssl_session_timeout 60m; location / &#123; try_files $uri $uri/ /index.php?$args; #ä¿®æ”¹å†…å®¹ &#125; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #ä¿®æ”¹æ­¤å¤„å†…å®¹æ”¯æŒphp location ~ \.php$ &#123; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME $document_root/$fastcgi_script_name; include fastcgi_params; &#125;&#125; è¯ä¹¦ç»­æœŸ å‰é¢è¯´äº†ï¼Œè¯ä¹¦çš„æœ‰æ•ˆæœŸæ˜¯3ä¸ªæœˆï¼Œä½ å¯ä»¥åœ¨è¯ä¹¦è¿‡æœŸå‰çš„30å¤©å†…ï¼Œè¿›è¡Œç»­æœŸï¼Œä¹Ÿå¯ä»¥è¿›è¡Œè„šæœ¬è‡ªåŠ¨ç»­æœŸã€‚ æ–¹å¼1 è¿›å…¥ä½ åœ¨ä¸‹è½½çš„certbotå®¢æˆ·ç«¯ç›®å½•ï¼Œæ‰§è¡Œè¯ä¹¦ç»­æœŸçš„è„šæœ¬å‘½ä»¤å¦‚ä¸‹ï¼š 1./certbot-auto renew renew å‚æ•°æ˜¯å®˜æ–¹æŽ¨èçš„ç»­æœŸæ–¹å¼, ä½¿ç”¨è¿™ä¸ªå‚æ•°ä¼šéåŽ† /etc/letsencrypt/live ä¸‹æ‰€æœ‰çš„è¯ä¹¦, å¦‚æžœè¯ä¹¦åœ¨å¯ç»­æœŸçš„æ—¶é—´èŒƒå›´å†…(è¿‡æœŸå‰30å¤©å†…), å°±ä¼šç”³è¯·æ–°çš„è¯ä¹¦å¹¶æ›¿æ¢åŽŸæœ‰è¯ä¹¦, å¦åˆ™è·³è¿‡ã€‚ æ–¹å¼2 å¦‚æžœè¦æŒ‡å®šæ›´æ–°æŸä¸ªåŸŸåçš„è¯ä¹¦, åˆ™è¦ä½¿ç”¨ certonly å‚æ•°, å…¶å®žå’Œæ–°ç”³è¯·è¯ä¹¦æ—¶çš„å‘½ä»¤å·®ä¸å¤š. 1./certbot-auto certonly --webroot --renew-by-default --email admin@4spaces.org -w /usr/share/nginx/html -d 4spaces.org -d www.4spaces.org æ–¹å¼3 ä¸Šé¢ä¸¤ç§æ–¹å¼ï¼Œéƒ½æ˜¯æ‰‹åŠ¨åŽ»æ‰§è¡Œçš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢ä¸¤ç§æ–¹å¼è·Ÿlinuxçš„å®šæ—¶ä»»åŠ¡è¿›è¡Œç»“åˆï¼Œæœ€ç»ˆè„šæœ¬å¦‚ä¸‹ï¼š 1) é€šè¿‡ç«¯å£éªŒè¯çš„è„šæœ¬ 12345678910#!/bin/sh#åœæ­¢ nginx æœåŠ¡,ä½¿ç”¨ --standalone ç‹¬ç«‹æœåŠ¡å™¨éªŒè¯éœ€è¦åœæ­¢å½“å‰ web server.systemctl stop nginxif ! /path/to/certbot-auto renew -nvv --standalone &gt; /var/log/letsencrypt/renew.log 2&gt;&amp;1 ; then echo Automated renewal failed: cat /var/log/letsencrypt/renew.log exit 1fi#å¯åŠ¨ nginxsystemctl start nginx 2) é€šè¿‡ä¸´æ—¶ç›®å½•çš„è„šæœ¬ 1234567891011#!/bin/sh# This script renews all the Let's Encrypt certificates with a validity &lt; 30 daysif ! /path/to/certbot-auto renew &gt; /var/log/letsencrypt/renew.log 2&gt;&amp;1 ; then echo Automated renewal failed: cat /var/log/letsencrypt/renew.log exit 1fi# éœ€è¦é‡å¯nginxè¯ä¹¦æ‰èƒ½ç”Ÿæ•ˆsystemctl reload nginx ä¸Šé¢ä¸¤ä¸ªè„šæœ¬ä¸­çš„/path/to/certbot-autoä»£è¡¨ä½ ä¸‹è½½å®¢æˆ·ç«¯è§£åŽ‹åŽçš„ç›®å½•ï¼Œå…¶ä¸­ç›®å½•ä¸‹æœ‰ä¸ªcertbot-autoã€‚ é€‰å–ä¸€ç§æ–¹å¼ï¼Œå°†å¯¹åº”çš„è„šæœ¬ä¿å­˜ä¸º certbotrenew.shã€‚ æ·»åŠ å¯æ‰§è¡Œæƒé™ 1chmod +x certbotrenew.sh ç¼–è¾‘ crontab é…ç½®æ–‡ä»¶æˆ–æ‰§è¡Œ crontab -e æ·»åŠ  cron ä»»åŠ¡ 12#ç¼–è¾‘å®šæ—¶ä»»åŠ¡sudo crontab -e æˆ‘è¿™é‡Œè®¾ç½®ä¸ºæ¯æœˆ28å·23ç‚¹æ‰§è¡Œæ­¤è„šæœ¬: 10 23 28 * * /bin/sh /home/michael/certbot/certbotrenew.sh ä¿å­˜é€€å‡ºå³å¯ã€‚]]></content>
      <categories>
        <category>SSL</category>
      </categories>
      <tags>
        <tag>SSL</tag>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaFxå‘TableViewColumnæ·»åŠ Image]]></title>
    <url>%2Fjavafx-customize-table-cell%2F</url>
    <content type="text"><![CDATA[JavaFX çš„è¡¨æ ¼æŽ§ä»¶ä½¿ç”¨ç¨å¾®ä¸åŒäºŽ Android å’Œ iOS ä¸­çš„è¡¨æ ¼ . æµç¨‹ä¸Šæ˜¯å‘ TableView ä¸­ æ·»åŠ åˆ— TableColumn ç„¶åŽå†ç»™åˆ—ç»‘å®šæ•°æ® , å†è®¾ç½® TableView çš„æ•°æ® , åˆ·æ–°å³å¯å¾—åˆ°å¯è§†ç»“æžœ . å…¶ä¸­éœ€è¦è‡ªå®šä¹‰ CellFactory 1. åŠ è½½å›¾ç‰‡ 1234567891011121314151617KiwiId.setCellFactory(new Callback&lt;TableColumn&lt;NewBeautifulKiwi, Integer&gt;, TableCell&lt;NewBeautifulKiwi, Integer&gt;&gt;() &#123; @Override public TableCell&lt;NewBeautifulKiwi, Integer&gt; call(TableColumn&lt;NewBeautifulKiwi, Integer&gt; param) &#123; ... TableCell&lt;NewBeautifulKiwi, Integer&gt; cell = new TableCell&lt;NewBeautifulKiwi, Integer&gt;() &#123; public void updateItem(Integer item, boolean empty) &#123; if (item != null) &#123; imageview.setImage(new Image("arrow.png")); &#125; &#125; &#125;; // Attach the imageview to the cell cell.setGraphic(imageview); return cell; &#125; &#125;); KiwiId.setCellValueFactory(new PropertyValueFactory&lt;NewBeautifulKiwi, Integer&gt;("KiwiId")); 2. ä»Žæ•°æ®ç±» NewBeautifulKiwi ä¸­å±žæ€§åŠ è½½å›¾ç‰‡ 123456789101112131415161718192021222324252627282930313233@Entity(name = "KIWI_TABLE")public class NewBeautifulKiwi implements Serializable &#123; @Id @GeneratedValue(strategy = GenerationType.AUTO) private int KiwiId; private String Kiwi; private Image kiwiImage; public int getKiwiId() &#123; return KiwiId; &#125; public void setKiwiId(int KiwiId) &#123; this.KiwiId = KiwiId; &#125; public String getKiwi() &#123; return Kiwi; &#125; public void setKiwi(String Kiwi) &#123; this.Kiwi = Kiwi; &#125; public Image getKiwiImage() &#123; return kiwiImage; &#125; public void setKiwiImage(Image kiwiImage) &#123; this.kiwiImage = kiwiImage; &#125;&#125; 3. åœ¨ table ä¸­ç»™ tableColumnç»‘å®šå±žæ€§ 1234567891011121314151617181920212223242526...@FXMLprivate TableColumn&lt;NewBeautifulKiwi, Image&gt; KiwiImageCol;...@Overridepublic void initialize(URL url, ResourceBundle rb) &#123; KiwiImageCol.setCellFactory(param -&gt; &#123; //Set up the ImageView final ImageView imageview = new ImageView(); imageview.setFitHeight(50); imageview.setFitWidth(50); //Set up the Table TableCell&lt;NewBeautifulKiwi, Image&gt; cell = new TableCell&lt;NewBeautifulKiwi, Image&gt;() &#123; public void updateItem(Image item, boolean empty) &#123; if (item != null) &#123; imageview.setImage(item); &#125; &#125; &#125;; // Attach the imageview to the cell cell.setGraphic(imageview); return cell; &#125;); KiwiImageCol.setCellValueFactory(new PropertyValueFactory&lt;NewBeautifulKiwi, Image&gt;("kiwiImage"));&#125; å‚è€ƒèµ„æ–™: stackoverflow]]></content>
      <categories>
        <category>JavaFX</category>
      </categories>
      <tags>
        <tag>JavaFX</tag>
        <tag>TableView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaFX Mavené¡¹ç›®æ‰“åŒ…exe]]></title>
    <url>%2Fjavafx-project-artifacts%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘å¸®æœ‹å‹å†™äº†ä¸€ä¸ª UI å°å·¥å…· . èµ·åˆæ˜¯ç”¨ Javascript å†™çš„, ä½†æ˜¯éœ€è¦å¯¹ç»“æžœè¿›è¡Œæ–‡ä»¶å½’ç±» , è€Œ Javascript æ²¡æœ‰æƒé™åˆ›å»ºæ–‡ä»¶å¤¹ , å› æ­¤åªå¥½æ¢ JavaFX æ¥å†™ . åœ¨ç¨‹åºå†™å®Œæ‰“åŒ…æ—¶é‡åˆ°ä¸€äº›é—®é¢˜ , è®°å½•åœ¨æ­¤ , æ–¹ä¾¿åŽç»­æŸ¥é˜… . å¸¸è§„ JavaFX é¡¹ç›®æ‰“åŒ…è¿™ä¸ªç›´æŽ¥åˆ©ç”¨ IDEA çš„ Build artifacts , æ­¥éª¤æ¯”è¾ƒå¸¸è§„ , æ­¤å¤„ä¸åšå±•å¼€ . ä¼ é€é—¨ Maven JavaFX é¡¹ç›®æ‰“åŒ…maven é¡¹ç›®å¦‚æžœç›´æŽ¥ç”¨ä»¥ä¸Šçš„æ–¹æ³•æ‰“åŒ…, ä¼šå‘çŽ°å®¢æˆ·ç«¯æ— æ³•æ‰“å¼€ , å¯ä»¥ç›´æŽ¥ä½¿ç”¨ java -jar xxx.jar éƒ¨ç½²æŸ¥çœ‹å…·ä½“åŽŸå›  , é€šå¸¸æ˜¯å› ä¸ºé¡¹ç›®é€šè¿‡ maven å¼•å…¥çš„ç±»åŠèµ„æºæœªæ‰“è¿› jar åŒ…é‡Œ . å› æ­¤è¿™é‡Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©æ‰“åŒ…æ’ä»¶ . javafx-maven-plugin å¼•å…¥æ’ä»¶åŒ… , å¹¶ä¿®æ”¹ vendor å’Œ mainClass 123456789&lt;plugin&gt; &lt;groupId&gt;com.zenjava&lt;/groupId&gt; &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt; &lt;version&gt;8.8.3&lt;/version&gt; &lt;configuration&gt; &lt;vendor&gt;YourCompany&lt;/vendor&gt; &lt;mainClass&gt;your.package.with.Launcher&lt;/mainClass&gt; &lt;/configuration&gt;&lt;/plugin&gt; ç„¶åŽæ‰“åŒ… mvn jfx:jar , æ‰“åŒ…å®Œæˆçš„ç›®å½•åœ¨ target/jfx/app]]></content>
      <categories>
        <category>JavaFX</category>
      </categories>
      <tags>
        <tag>JavaFX</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½¬-CenterOS7å®‰è£…ss]]></title>
    <url>%2Fcenteros-install-ss%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡è½¬è‡ªå¾’å¼Ÿçš„æœ‰é“ç¬”è®° Ubuntuå®‰è£…Shadowsocks 1234567891011121314151617# 1. ä¸‹è½½åŒ…ï¼šwget https://storage.googleapis.com/golang/go1.9.1.linux-amd64.tar.gz# 2. è§£åŽ‹åˆ°/usr/local/gotar -C /usr/local -xzf go1.9.1.linux-amd64.tar.gz# 3. å¯¼å…¥åˆ°ç³»ç»ŸçŽ¯å¢ƒå˜é‡ (ä¸´æ—¶å¯¼å…¥,å¯ç”¨å…¶ä»–æ–¹å¼)export PATH=$PATH:/usr/local/go/bin# ä¸‹è½½ sswget --no-check-certificate https://raw.githubusercontent.com/iMeiji/shadowsocks_install/master/shadowsocks-go.sh# ç»™äºˆæƒé™chmod +x shadowsocks-go.sh# è¿è¡Œ./shadowsocks-go.sh 2&gt;&amp;1 | tee shadowsocks-go.log# å¼€å‘ç«¯å£, CenterOS ä¸Ž Ubuntu ç•¥æœ‰ä¸åŒ.iptables -I INPUT -p tcp --dport 8989 -j ACCEPT å¦è½¬ Outlineæ­å»ºVPN ä¹Ÿä¸é”™!]]></content>
      <categories>
        <category>CenterOS</category>
      </categories>
      <tags>
        <tag>CenterOS</tag>
        <tag>ss</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½¬-CenterOS7å®‰è£…å’Œé…ç½®SSH]]></title>
    <url>%2Fcenteros-ssh-configuration%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡è½¬è‡ª CenterOS 7å®‰è£…å’Œé…ç½®SSH 1. å®‰è£… openssh-server1yum install -y openssl openssh-server 2. ä¿®æ”¹é…ç½®æ–‡ä»¶ç”¨ vim æ‰“å¼€é…ç½®æ–‡ä»¶ /etc/ssh/sshd_config å°†ä¸Šå›¾ä¸­çš„ PermitRootLogin , RSAAuthentication , PubkeyAuthentication çš„è®¾ç½®æ‰“å¼€. å¯åŠ¨SSHçš„æœåŠ¡: 1systemctl start sshd.service è®¾ç½®å¼€æœºè‡ªåŠ¨å¯åŠ¨SSHæœåŠ¡ 1systemctl enable sshd.service è®¾ç½®æ–‡ä»¶å¤¹ ~/.sshçš„è®¿é—®æƒé™ 12345678910$ cd ~$ chmod 700 .ssh $ chmod 600 .ssh/* $ ls -la .ssh total 16drwx------. 2 root root 58 May 15 00:23 .dr-xr-x---. 8 root root 4096 May 15 00:26 ..-rw-------. 1 root root 403 May 15 00:22 authorized_keys-rw-------. 1 root root 1766 May 15 00:21 id_rsa-rw-------. 1 root root 403 May 15 00:21 id_rsa.pub authorized_keys æ–‡ä»¶å­˜å‚¨çš„æ˜¯å®¢æˆ·ç«¯çš„å…¬å…±å¯†é’¥ . å°†è‡ªå·±çš„å…¬é’¥æ‹·è´è¿›æ–‡ä»¶å³å¯]]></content>
      <categories>
        <category>CenterOS</category>
      </categories>
      <tags>
        <tag>CenterOS</tag>
        <tag>SSH</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Swiftå‘å¸ƒåº“åˆ°CocoaPod]]></title>
    <url>%2Fswift-publish-cocoapod%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡è½¬è‡ª Swiftå‘å¸ƒåº“åˆ°CocoaPod å»ºç«‹å·¥ç¨‹ , ç¼–å†™ç±»åº“ æ–°å»ºä¸€ä¸ªiOSæˆ–å…¶ä»–platformçš„demoå·¥ç¨‹,é€šå¸¸Single View Appå³å¯ åœ¨demoå·¥ç¨‹æ–°å»ºtarget, file -&gt; new -&gt; target,é€‰æ‹©åˆ›å»ºCocoa Touch Framework,è¯¥targetç”¨äºŽåŒ…å«ä½ æ‰€è¦å¼€æºçš„æ‰€æœ‰åº“,å‡è®¾å–åä¸ºframework åœ¨frameworkçš„targetæ–‡ä»¶å¤¹é‡Œé¢æ·»åŠ è‡ªå·±çš„å¼€æºä»£ç ,æ³¨æ„æƒ³è¦æš´éœ²å‡ºæ¥çš„ç±»ã€æ–¹æ³•ã€å±žæ€§å‡éœ€è¦ä½¿ç”¨publicæˆ–è€…openç­‰ä¿®é¥° çŽ°åœ¨,åœ¨demoä¸­å¯ä»¥é€šè¿‡import frameworkæ¥å¼•ç”¨åº“,æµ‹è¯•å·²å†™å¥½çš„åŠŸèƒ½,æµ‹è¯•å®ŒæˆåŽ,å°±å¯ä»¥å‡†å¤‡å‘å¸ƒåˆ°CocoaPodäº† å‘å¸ƒåˆ° CocoaPod å°†ä»£ç æäº¤åˆ°GitHub,å¹¶æ‰“ä¸Štagå³releaseç‰ˆæœ¬,è¯¥tagå¿…é¡»å’Œpodé…ç½®æ–‡ä»¶çš„tagä¸€è‡´,å¦åˆ™pushåˆ°podä¼šæŠ¥é”™ åˆ›å»ºé…ç½®æ–‡ä»¶xxx.podspec,xxxä¸ºå‘å¸ƒåˆ°podçš„åç§°,å–åæ—¶å…ˆåˆ°podæœç´¢ä¸‹æ˜¯å¦å·²å­˜åœ¨ç›¸åŒçš„åº“å,å› ä¸ºæ˜¯å”¯ä¸€çš„,å¦‚æžœå·²å­˜åœ¨åˆ™éœ€è¦å®šä¹‰å…¶ä»–åç§°,å‘½ä»¤å¦‚ä¸‹ï¼š 1pod spec create xxx ä¿®æ”¹é…ç½®æ–‡ä»¶,å¯ä»¥åœ¨GitHubä¸Šå‚è€ƒå…¶ä»–é¡¹ç›®æ˜¯æ€Žä¹ˆå†™çš„ 123456789101112131415Pod::Spec.new do |s| s.name = &quot;KJTouchIdManager&quot; s.module_name = &quot;TouchIdManager&quot; s.version = &quot;0.0.1&quot; s.summary = &quot;TouchId/FaceId manager on iOS 8 or later.&quot; s.description = &quot;An easy way to use TouchId or FaceId, support iOS 8 or later&quot; s.homepage = &quot;https://github.com/Smiacter/TouchIdManager&quot; s.license = &quot;MIT&quot; s.author = &#123; &quot;Smiacter&quot; =&gt; &quot;Smiacter@gmail.com&quot; &#125; s.platform = :ios s.platform = :ios, &quot;8.0&quot; s.swift_version = &quot;4.1&quot; s.source = &#123; :git =&gt; &quot;https://github.com/Smiacter/TouchIdManager.git&quot;, :tag =&gt; &quot;#&#123;s.version&#125;&quot; &#125; s.source_files = &quot;TouchIdManager/*.swift&quot;end 12345678910111213- name -&gt; podåº“çš„åç§°- mudule_name -&gt; å¼•ç”¨çš„moduleåç§°å³å·¥ç¨‹åˆ›å»ºçš„targetå,å¦‚æžœå’Œä¸Šè¿°çš„nameä¸ä¸€è‡´çš„è¯éœ€è¦æŒ‡å®š,å¦‚æžœä¸€æ ·å¯ä»¥çœç•¥- version -&gt; ç‰ˆæœ¬,å’ŒGitHubä»£ç çš„tagä¸€è‡´- summary -&gt; podåº“çš„ç®€å•ä»‹ç»- description -&gt; podåº“çš„è¯¦ç»†æè¿°,å®ƒçš„é•¿åº¦ä¸€å®šè¦æ¯”summaryé•¿,ä¸è¦ä¼šæœ‰è­¦å‘Š- homepage -&gt; GitHubè®¿é—®è·¯å¾„- license -&gt; éµå¾ªçš„æŽˆæƒç‰ˆæœ¬- author -&gt; ä½œè€…,ä¸€èˆ¬æ˜¯è‡ªåŠ¨ç”Ÿæˆ- platform -&gt; æ“ä½œç³»ç»ŸåŠæœ€ä½Žæ”¯æŒç‰ˆæœ¬,å¯æŒ‡iOS/tvOS/watchOS/tvOS- swift_version -&gt; å¦‚æžœç”¨çš„æ˜¯Swift,æŒ‡å®šä½ ä½¿ç”¨çš„ç‰ˆæœ¬,å› ä¸ºpodåœ¨è¿›è¡Œä»£ç æ£€æŸ¥æ—¶çš„ç‰ˆæœ¬å¯èƒ½ä¸Žä½ çš„ä¸ä¸€è‡´- source -&gt; GitHubä»£ç ä»“åº“åœ°å€,è¯·copyä½¿ç”¨HTTPSçš„é‚£ä¸ªgitåœ°å€,ä½¿ç”¨SSLçš„éœ€è¦ä¾èµ–çŽ¯å¢ƒ,æ ¡éªŒæ— æ³•é€šè¿‡- source_files -&gt; åº“çš„æœ‰ç”¨æ–‡ä»¶,å®ƒä¼šå‘Šè¯‰podéœ€è¦å…‹éš†å“ªäº›æ–‡ä»¶,*ä»£è¡¨ä»»æ„æ–‡ä»¶- å…¶ä»–,ç”Ÿæˆçš„.podspecæ–‡ä»¶åŒ…å«äº†å¾ˆå¤šå…¶ä»–å‚æ•°,å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ‰“å¼€æŸäº›æ³¨é‡Š,æ‰“é€ å±žäºŽä½ è‡ªå·±çš„podspec æ³¨å†Œtrunk,podæ˜¯é€šè¿‡trunkæ¥å‘å¸ƒçš„ 1pod trunk register &quot;email address&quot; &quot;user name&quot; --description = &quot;optional&quot; éªŒè¯åº“ä»£ç å’Œpodspecçš„æœ‰æ•ˆæ€§,æŸ¥çœ‹ä»£ç ã€é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯¯ 1pod spec lint xxx.podspec å¦‚æžœå‡ºçŽ°é”™è¯¯,æ ¹æ®ç›¸å…³æç¤ºè¿›è¡Œä¿®æ”¹åŽå†éªŒè¯,æç¤ºä¸€èˆ¬éƒ½æ¯”è¾ƒæ˜“æ‡‚,å¦‚æžœå®žåœ¨çœ‹ä¸æ‡‚å°±è‡ªè¡Œæœç´¢è¿›è¡Œä¿®æ”¹.å½“å‡ºçŽ°xxx.podspec passed validation.åˆ™è¯´æ˜ŽéªŒè¯é€šè¿‡. çœŸæ­£å‘å¸ƒï¼ˆpushï¼‰åˆ°podä»“åº“, allow-warnings æ˜¯å¯é€‰çš„ 1pod trunk push xxx.podspec --allow-warnings å‘å¸ƒæˆåŠŸ]]></content>
      <categories>
        <category>Swift</category>
      </categories>
      <tags>
        <tag>Swift</tag>
        <tag>Cocoapod</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½¬-Gradleä¸‹è½½çš„ä¾èµ–åŒ…ä½ç½®]]></title>
    <url>%2Fgradle-dependency-dir%2F</url>
    <content type="text"><![CDATA[Macç³»ç»Ÿé»˜è®¤ä¸‹è½½åˆ° : /Users/(ç”¨æˆ·å)/.gradle/caches/modules-2/files-2.1æˆ–~/.gradle/caches/modules-2/files-2.1 æ‰“å¼€Finder, Shift+command+G è¿™3ä¸ªç»„åˆé”®åŽ,è¾“å…¥ä»¥ä¸Šè·¯å¾„ Windowsç³»ç»Ÿé»˜è®¤ä¸‹è½½åˆ° : C:\Users\(ç”¨æˆ·å)\.gradle\caches\modules-2\files-2.1]]></content>
      <categories>
        <category>Gradle</category>
      </categories>
      <tags>
        <tag>Gradle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½¬-H5ç«¯é¡µé¢å¯è§ç›‘å¬]]></title>
    <url>%2Fh5-visibility-listen%2F</url>
    <content type="text"><![CDATA[Android , iOS å‡æœ‰æä¾›é¡µé¢å¯è§/ä¸å¯è§çš„å›žè°ƒæ–¹æ³•,é€šå¸¸åœ¨å…¶ä¸­è®¢é˜…å’Œå–æ¶ˆè®¢é˜…. æœ¬æ–‡å°†è¯´æ˜Žå¦‚ä½•åœ¨H5ä¸­ç›‘å¬é¡µé¢å¯è§çŠ¶æ€. è½¬è½½åŽŸæ–‡ ä¸€ã€ç®€ä»‹èƒŒæ™¯: ä¸€èˆ¬æˆ‘ä»¬åœ¨è¿›è¡Œå‰ç«¯é¡µé¢å¼€å‘æ—¶,å¯¹äºŽç”¨æˆ·æ­£åœ¨ç¦»å¼€é¡µé¢.å¸¸ç”¨çš„æ–¹æ³•æ˜¯ç›‘å¬ä¸‹é¢ä¸‰ä¸ªäº‹ä»¶. pagehide beforeunload unload ä½†æ˜¯ï¼Œè¿™äº›äº‹ä»¶åœ¨æ‰‹æœºä¸Šå¯èƒ½ä¸ä¼šè§¦å‘ï¼Œé¡µé¢å°±ç›´æŽ¥å…³é—­äº†ã€‚å› ä¸ºæ‰‹æœºç³»ç»Ÿå¯ä»¥å°†ä¸€ä¸ªè¿›ç¨‹ç›´æŽ¥è½¬å…¥åŽå°ï¼Œç„¶åŽæ€æ­»ã€‚ ç”¨æˆ·ç‚¹å‡»äº†ä¸€æ¡ç³»ç»Ÿé€šçŸ¥ï¼Œåˆ‡æ¢åˆ°å¦ä¸€ä¸ª Appã€‚ ç”¨æˆ·è¿›å…¥ä»»åŠ¡åˆ‡æ¢çª—å£ï¼Œåˆ‡æ¢åˆ°å¦ä¸€ä¸ª Appã€‚ ç”¨æˆ·ç‚¹å‡»äº† Home æŒ‰é’®ï¼Œåˆ‡æ¢å›žä¸»å±å¹•ã€‚ æ“ä½œç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢åˆ°å¦ä¸€ä¸ª Appï¼ˆæ¯”å¦‚ï¼Œæ”¶åˆ°ä¸€ä¸ªç”µè¯) ä¸Šé¢è¿™äº›æƒ…å†µï¼Œéƒ½ä¼šå¯¼è‡´æ‰‹æœºå°†æµè§ˆå™¨è¿›ç¨‹åˆ‡æ¢åˆ°åŽå°ï¼Œç„¶åŽä¸ºäº†èŠ‚çœèµ„æºï¼Œå¯èƒ½å°±ä¼šæ€æ­»æµè§ˆå™¨è¿›ç¨‹ã€‚ ä»¥å‰ï¼Œé¡µé¢è¢«ç³»ç»Ÿåˆ‡æ¢ï¼Œä»¥åŠç³»ç»Ÿæ¸…é™¤æµè§ˆå™¨è¿›ç¨‹ï¼Œæ˜¯æ— æ³•ç›‘å¬åˆ°çš„ã€‚å¼€å‘è€…æƒ³è¦æŒ‡å®šï¼Œä»»ä½•ä¸€ç§é¡µé¢å¸è½½æƒ…å†µä¸‹éƒ½ä¼šæ‰§è¡Œçš„ä»£ç ï¼Œä¹Ÿæ˜¯æ— æ³•åšåˆ°çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±è¯žç”Ÿäº† Page Visibility APIã€‚ä¸ç®¡æ‰‹æœºæˆ–æ¡Œé¢ç”µè„‘ï¼Œæ‰€æœ‰æƒ…å†µä¸‹ï¼Œè¿™ä¸ª API éƒ½ä¼šç›‘å¬åˆ°é¡µé¢çš„å¯è§æ€§å‘ç”Ÿå˜åŒ–ã€‚ æ„ä¹‰ï¼š è¿™ä¸ªæ–°çš„ API çš„æ„ä¹‰åœ¨äºŽï¼Œé€šè¿‡ç›‘å¬ç½‘é¡µçš„å¯è§æ€§ï¼Œå¯ä»¥é¢„åˆ¤ç½‘é¡µçš„å¸è½½ï¼Œè¿˜å¯ä»¥ç”¨æ¥èŠ‚çœèµ„æºï¼Œå‡ç¼“ç”µèƒ½çš„æ¶ˆè€—ã€‚æ¯”å¦‚ï¼Œä¸€æ—¦ç”¨æˆ·ä¸çœ‹ç½‘é¡µï¼Œä¸‹é¢è¿™äº›ç½‘é¡µè¡Œä¸ºéƒ½æ˜¯å¯ä»¥æš‚åœçš„ã€‚ å¯¹æœåŠ¡å™¨çš„è½®è¯¢ ç½‘é¡µåŠ¨ç”» æ­£åœ¨æ’­æ”¾çš„éŸ³é¢‘æˆ–è§†é¢‘ å®˜æ–¹æœ‰ä¸ªåœ¨çº¿çš„ä¾‹å­å¤§ä¼™å¯ä»¥çœ‹ä¸€ä¸‹ï¼šhttp://daniemon.com/tech/webapps/page-visibility/ äºŒã€document.visibilityStateè¿™ä¸ª API ä¸»è¦åœ¨documentå¯¹è±¡ä¸Šï¼Œæ–°å¢žäº†ä¸€ä¸ªdocument.visibilityStateå±žæ€§ã€‚è¯¥å±žæ€§è¿”å›žä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºé¡µé¢å½“å‰çš„å¯è§æ€§çŠ¶æ€ï¼Œå…±æœ‰ä¸‰ä¸ªå¯èƒ½çš„å€¼ã€‚ hiddenï¼šé¡µé¢å½»åº•ä¸å¯è§ã€‚ visibleï¼šé¡µé¢è‡³å°‘ä¸€éƒ¨åˆ†å¯è§ã€‚ prerenderï¼šé¡µé¢å³å°†æˆ–æ­£åœ¨æ¸²æŸ“ï¼Œå¤„äºŽä¸å¯è§çŠ¶æ€ã€‚ unloaded : é¡µé¢æ­£åœ¨ä»Žå†…å­˜ä¸­å¸è½½ã€‚ æ³¨é‡Šï¼šæµè§ˆå™¨æ”¯æŒæ˜¯å¯é€‰çš„ã€‚ å…¶ä¸­ï¼ŒhiddençŠ¶æ€å’ŒvisibleçŠ¶æ€æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½å¿…é¡»æ”¯æŒçš„ã€‚prerenderçŠ¶æ€åªåœ¨æ”¯æŒâ€é¢„æ¸²æŸ“â€çš„æµè§ˆå™¨ä¸Šæ‰ä¼šå‡ºçŽ°ï¼Œæ¯”å¦‚ Chrome æµè§ˆå™¨å°±æœ‰é¢„æ¸²æŸ“åŠŸèƒ½ï¼Œå¯ä»¥åœ¨ç”¨æˆ·ä¸å¯è§çš„çŠ¶æ€ä¸‹ï¼Œé¢„å…ˆæŠŠé¡µé¢æ¸²æŸ“å‡ºæ¥ï¼Œç­‰åˆ°ç”¨æˆ·è¦æµè§ˆçš„æ—¶å€™ï¼Œç›´æŽ¥å±•ç¤ºæ¸²æŸ“å¥½çš„ç½‘é¡µã€‚ åªè¦é¡µé¢å¯è§ï¼Œå“ªæ€•åªéœ²å‡ºä¸€ä¸ªè§’ï¼Œdocument.visibilityStateå±žæ€§å°±è¿”å›žvisibleã€‚åªæœ‰ä»¥ä¸‹å››ç§æƒ…å†µï¼Œæ‰ä¼šè¿”å›žhiddenã€‚ æµè§ˆå™¨æœ€å°åŒ–ã€‚ æµè§ˆå™¨æ²¡æœ‰æœ€å°åŒ–ï¼Œä½†æ˜¯å½“å‰é¡µé¢åˆ‡æ¢æˆäº†èƒŒæ™¯é¡µã€‚ æµè§ˆå™¨å°†è¦å¸è½½ï¼ˆunloadï¼‰é¡µé¢ã€‚ æ“ä½œç³»ç»Ÿè§¦å‘é”å±å±å¹•ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢å››ç§åœºæ™¯æ¶µç›–äº†é¡µé¢å¯èƒ½è¢«å¸è½½çš„æ‰€æœ‰æƒ…å†µã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé¡µé¢å¸è½½ä¹‹å‰ï¼Œdocument.visibilityStateå±žæ€§ä¸€å®šä¼šå˜æˆhiddenã€‚äº‹å®žä¸Šï¼Œè¿™ä¹Ÿæ˜¯è®¾è®¡è¿™ä¸ª API çš„ä¸»è¦ç›®çš„ã€‚ å¦å¤–ï¼Œæ—©æœŸç‰ˆæœ¬çš„ APIï¼Œè¿™ä¸ªå±žæ€§è¿˜æœ‰ç¬¬å››ä¸ªå€¼unloadedï¼Œè¡¨ç¤ºé¡µé¢å³å°†å¸è½½ï¼ŒçŽ°åœ¨å·²ç»è¢«åºŸå¼ƒäº†ã€‚ æ³¨æ„ï¼Œdocument.visibilityStateå±žæ€§åªé’ˆå¯¹é¡¶å±‚çª—å£ï¼Œå†…åµŒçš„é¡µé¢çš„document.visibilityStateå±žæ€§ç”±é¡¶å±‚çª—å£å†³å®šã€‚ä½¿ç”¨ CSS å±žæ€§éšè—é¡µé¢ï¼ˆæ¯”å¦‚display: none;ï¼‰ï¼Œå¹¶ä¸ä¼šå½±å“å†…åµŒé¡µé¢çš„å¯è§æ€§ã€‚ ä¸‰ã€document.hiddenç”±äºŽåŽ†å²åŽŸå› ï¼Œè¿™ä¸ª API è¿˜å®šä¹‰äº†document.hiddenå±žæ€§ã€‚è¯¥å±žæ€§åªè¯»ï¼Œè¿”å›žä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰é¡µé¢æ˜¯å¦å¯è§ã€‚ å½“document.visibilityStateå±žæ€§è¿”å›žvisibleæ—¶ï¼Œdocument.hiddenå±žæ€§è¿”å›žfalseï¼›å…¶ä»–æƒ…å†µä¸‹ï¼Œéƒ½è¿”å›žtrueã€‚ è¯¥å±žæ€§åªæ˜¯å‡ºäºŽåŽ†å²åŽŸå› è€Œä¿ç•™çš„ï¼Œåªè¦æœ‰å¯èƒ½ï¼Œéƒ½åº”è¯¥ä½¿ç”¨document.visibilityStateå±žæ€§ï¼Œè€Œä¸æ˜¯ä½¿ç”¨è¿™ä¸ªå±žæ€§ã€‚ å››ã€visibilitychange äº‹ä»¶çš„åŸºæœ¬åº”ç”¨åªè¦document.visibilityStateå±žæ€§å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè§¦å‘visibilitychangeäº‹ä»¶ã€‚å› æ­¤ï¼Œå¯ä»¥é€šè¿‡ç›‘å¬è¿™ä¸ªäº‹ä»¶ï¼ˆé€šè¿‡document.addEventListener()æ–¹æ³•æˆ–document.onvisibilitychangeå±žæ€§ï¼‰ï¼Œè·Ÿè¸ªé¡µé¢å¯è§æ€§çš„å˜åŒ–ã€‚ 12345678910document.addEventListener('visibilitychange', function () &#123; // ç”¨æˆ·ç¦»å¼€äº†å½“å‰é¡µé¢ if (document.visibilityState === 'hidden') &#123; document.title = 'é¡µé¢ä¸å¯è§'; &#125; // ç”¨æˆ·æ‰“å¼€æˆ–å›žåˆ°é¡µé¢ if (document.visibilityState === 'visible') &#123; document.title = 'é¡µé¢å¯è§'; &#125;&#125;); ä¸Šé¢ä»£ç æ˜¯ Page Visibility API çš„æœ€åŸºæœ¬ç”¨æ³•ï¼Œå¯ä»¥ç›‘å¬å¯è§æ€§å˜åŒ–ã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼Œä¸€æ—¦é¡µé¢ä¸å¯è§ï¼Œå°±æš‚åœè§†é¢‘æ’­æ”¾ã€‚ 123456789var vidElem = document.getElementById('video-demo');document.addEventListener('visibilitychange', startStopVideo);function startStopVideo() &#123; if (document.visibilityState === 'hidden') &#123; vidElem.pause(); &#125; else if (document.visibilityState === 'visible') &#123; vidElem.play(); &#125;&#125; äº”ã€é¡µé¢å¸è½½ç›‘å¬ä¸‹é¢ä¸“é—¨è®¨è®ºä¸€ä¸‹ï¼Œå¦‚ä½•æ­£ç¡®ç›‘å¬é¡µé¢å¸è½½ã€‚ é¡µé¢å¸è½½å¯ä»¥åˆ†æˆä¸‰ç§æƒ…å†µã€‚ é¡µé¢å¯è§æ—¶ï¼Œç”¨æˆ·å…³é—­ Tab é¡µæˆ–æµè§ˆå™¨çª—å£ã€‚ é¡µé¢å¯è§æ—¶ï¼Œç”¨æˆ·åœ¨å½“å‰çª—å£å‰å¾€å¦ä¸€ä¸ªé¡µé¢ã€‚ é¡µé¢ä¸å¯è§æ—¶ï¼Œç”¨æˆ·æˆ–ç³»ç»Ÿå…³é—­æµè§ˆå™¨çª—å£ã€‚è¿™ä¸‰ç§æƒ…å†µï¼Œéƒ½ä¼šè§¦å‘visibilitychangeäº‹ä»¶ã€‚å‰ä¸¤ç§æƒ…å†µï¼Œè¯¥äº‹ä»¶åœ¨ç”¨æˆ·ç¦»å¼€é¡µé¢æ—¶è§¦å‘ï¼›æœ€åŽä¸€ç§æƒ…å†µï¼Œè¯¥äº‹ä»¶åœ¨é¡µé¢ä»Žå¯è§çŠ¶æ€å˜ä¸ºä¸å¯è§çŠ¶æ€æ—¶è§¦å‘ã€‚ ç”±æ­¤å¯è§ï¼Œvisibilitychangeäº‹ä»¶æ¯”pagehideã€beforeunloadã€unloadäº‹ä»¶æ›´å¯é ï¼Œæ‰€æœ‰æƒ…å†µä¸‹éƒ½ä¼šè§¦å‘ï¼ˆä»Žvisibleå˜ä¸ºhiddenï¼‰ã€‚å› æ­¤ï¼Œå¯ä»¥åªç›‘å¬è¿™ä¸ªäº‹ä»¶ï¼Œè¿è¡Œé¡µé¢å¸è½½æ—¶éœ€è¦è¿è¡Œçš„ä»£ç ï¼Œä¸ç”¨ç›‘å¬åŽé¢é‚£ä¸‰ä¸ªäº‹ä»¶ã€‚ ç”šè‡³å¯ä»¥è¿™æ ·è¯´ï¼Œunloadäº‹ä»¶åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸å¿…ç›‘å¬ï¼Œbeforeunloadäº‹ä»¶åªæœ‰ä¸€ç§é€‚ç”¨åœºæ™¯ï¼Œå°±æ˜¯ç”¨æˆ·ä¿®æ”¹äº†è¡¨å•ï¼Œæ²¡æœ‰æäº¤å°±ç¦»å¼€å½“å‰é¡µé¢ã€‚å¦ä¸€æ–¹é¢ï¼ŒæŒ‡å®šäº†è¿™ä¸¤ä¸ªäº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼Œæµè§ˆå™¨å°±ä¸ä¼šç¼“å­˜å½“å‰é¡µé¢ã€‚]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>H5</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CentOS7ä½¿ç”¨Dockeréƒ¨ç½²Springbooté¡¹ç›®]]></title>
    <url>%2Fcenteros7-docker-springboot%2F</url>
    <content type="text"><![CDATA[Dockerè¦æ±‚64ä½çš„ç³»ç»Ÿä¸”å†…æ ¸ç‰ˆæœ¬è‡³å°‘ä¸º3.10 å®‰è£… Docker1. æ·»åŠ  yum æº123# yum install epel-release â€“y# yum clean all# yum list 2. å®‰è£…å¹¶è¿è¡Œ Docker12# yum install docker-io â€“y# systemctl start docker æ£€æŸ¥å®‰è£…ç»“æžœ 1# docker info Docker åŸºæœ¬ç”¨æ³•12345678910111213141516# è¿è¡ŒDockerå®ˆæŠ¤è¿›ç¨‹systemctl start docker # åœæ­¢Dockerå®ˆæŠ¤è¿›ç¨‹systemctl stop docker# é‡å¯Dockerå®ˆæŠ¤è¿›ç¨‹systemctl restart docker # æŸ¥çœ‹å·²æœ‰Dockeré•œåƒdocker images # è¿›å…¥é•œåƒterminaldocker exec -it [é•œåƒid] bash# é€€å‡ºé•œåƒexit# æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨docker ps# åˆ é™¤é•œåƒdocker rmi -f [é•œåƒid] éƒ¨ç½²å‡†å¤‡éƒ¨ç½²ä¹‹å‰å‡†å¤‡ä¸€äº›å‰ææ¡ä»¶ å¯ä»¥è¿è¡Œ jar åŒ…çš„çŽ¯å¢ƒ æœºå™¨ä¸Šå®‰è£…äº† docker å‡†å¤‡éƒ¨ç½²çš„ springboot çš„jaråŒ… Dockerfile æ–‡ä»¶ å‡†å¤‡å¥½äº†ç„¶åŽåˆ›å»º Dockfile æ–‡ä»¶: 1234FROM java:8 VOLUME /tmp ADD walletdemo_raw.jar /walletdemo.jarENTRYPOINT [&quot;java&quot;,&quot;-Djava.security.egd=file:/dev/./urandom&quot;,&quot;-jar&quot;,&quot;/walletdemo.jar&quot;] è§£é‡Šä¸€ä¸‹éœ€è¦æ³¨æ„çš„åœ°æ–¹ java:8 æ˜¯ä½¿ç”¨jdkçš„ç‰ˆæœ¬ walletdemo_raw.jar æ˜¯ä½¿ç”¨jaråŒ…çš„åç§° ADD ... æ˜¯æ‹·è´jaråŒ…åˆ°å®¹å™¨ ENTRYPOINT æ‰§è¡Œjaræ–‡ä»¶ å°† Dockerfile å’Œ jar æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ , ä½¿ç”¨ä¸‹é¢å‘½ä»¤ç”Ÿæˆé•œåƒ , æ³¨æ„æœ€åŽçš„ . ,è¡¨ç¤ºå½“å‰ç›®å½• 1docker build -t walletdemo . walletdemo æ˜¯ç”Ÿæˆçš„é•œåƒåç§° æ›´å¤šçš„ docker build å‘½ä»¤å¯ä»¥æŸ¥çœ‹ èœé¸Ÿæ•™ç¨‹ å¯ä»¥ç”¨ docker images æŸ¥çœ‹ä¸€ä¸‹ docker é•œåƒ è¿è¡Œ Docker å®¹å™¨1docker run -d -p 8090:8090 walletdemo è§£é‡Šä¸€ä¸‹éœ€è¦æ³¨æ„çš„åœ°æ–¹ -dåŽå°è¿è¡Œ -p 8090:8090 å°† docker å®¹å™¨çš„ 8090 ç«¯å£æ˜ å°„åˆ°æœåŠ¡å™¨çš„ 8090 ç«¯å£ åˆ°è¿™é‡Œå°±é…ç½®å®Œæˆäº† , è®¿é—®æœåŠ¡å™¨ 8090 ç«¯å£å°±èƒ½è®¿é—® springboot é¡¹ç›®äº†. å‚è€ƒé“¾æŽ¥: ECSä¸Šæ­å»ºDocker(CentOS7) https://www.imooc.com/article/44582]]></content>
      <categories>
        <category>CenterOS</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>CenterOS</tag>
        <tag>Springboot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½¬-CentOS7ä½¿ç”¨firewalldæ‰“å¼€å…³é—­é˜²ç«å¢™ä¸Žç«¯å£]]></title>
    <url>%2Fcenteros7-firewall%2F</url>
    <content type="text"><![CDATA[æœ¬ç¯‡è½¬è‡ª: CentOS7ä½¿ç”¨firewalldæ‰“å¼€å…³é—­é˜²ç«å¢™ä¸Žç«¯å£ 1. firewalldçš„åŸºæœ¬ä½¿ç”¨ 12345- å¯åŠ¨ï¼š systemctl start firewalld- å…³é—­ï¼š systemctl stop firewalld- æŸ¥çœ‹çŠ¶æ€ï¼š systemctl status firewalld - å¼€æœºç¦ç”¨ ï¼š systemctl disable firewalld- å¼€æœºå¯ç”¨ ï¼š systemctl enable firewalld 2. systemctlæ˜¯CentOS7çš„æœåŠ¡ç®¡ç†å·¥å…·ä¸­ä¸»è¦çš„å·¥å…·ï¼Œå®ƒèžåˆä¹‹å‰serviceå’Œchkconfigçš„åŠŸèƒ½äºŽä¸€ä½“ã€‚ 123456789- å¯åŠ¨ä¸€ä¸ªæœåŠ¡ï¼šsystemctl start firewalld.service- å…³é—­ä¸€ä¸ªæœåŠ¡ï¼šsystemctl stop firewalld.service- é‡å¯ä¸€ä¸ªæœåŠ¡ï¼šsystemctl restart firewalld.service- æ˜¾ç¤ºä¸€ä¸ªæœåŠ¡çš„çŠ¶æ€ï¼šsystemctl status firewalld.service- åœ¨å¼€æœºæ—¶å¯ç”¨ä¸€ä¸ªæœåŠ¡ï¼šsystemctl enable firewalld.service- åœ¨å¼€æœºæ—¶ç¦ç”¨ä¸€ä¸ªæœåŠ¡ï¼šsystemctl disable firewalld.service- æŸ¥çœ‹æœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨ï¼šsystemctl is-enabled firewalld.service- æŸ¥çœ‹å·²å¯åŠ¨çš„æœåŠ¡åˆ—è¡¨ï¼šsystemctl list-unit-files|grep enabled- æŸ¥çœ‹å¯åŠ¨å¤±è´¥çš„æœåŠ¡åˆ—è¡¨ï¼šsystemctl --failed 3. é…ç½®firewalld-cmd 12345678910- æŸ¥çœ‹ç‰ˆæœ¬ï¼š firewall-cmd --version- æŸ¥çœ‹å¸®åŠ©ï¼š firewall-cmd --help- æ˜¾ç¤ºçŠ¶æ€ï¼š firewall-cmd --state- æŸ¥çœ‹æ‰€æœ‰æ‰“å¼€çš„ç«¯å£ï¼š firewall-cmd --zone=public --list-ports- æ›´æ–°é˜²ç«å¢™è§„åˆ™ï¼š firewall-cmd --reload- æŸ¥çœ‹åŒºåŸŸä¿¡æ¯: firewall-cmd --get-active-zones- æŸ¥çœ‹æŒ‡å®šæŽ¥å£æ‰€å±žåŒºåŸŸï¼š firewall-cmd --get-zone-of-interface=eth0- æ‹’ç»æ‰€æœ‰åŒ…ï¼šfirewall-cmd --panic-on- å–æ¶ˆæ‹’ç»çŠ¶æ€ï¼š firewall-cmd --panic-off- æŸ¥çœ‹æ˜¯å¦æ‹’ç»ï¼š firewall-cmd --query-panic 4. é…ç½®ç«¯å£ 12345678- æ·»åŠ firewall-cmd --zone=public --add-port=80/tcp --permanent ï¼ˆ--permanentæ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åŽå¤±æ•ˆï¼‰- é‡æ–°è½½å…¥firewall-cmd --reload- æŸ¥çœ‹firewall-cmd --zone= public --query-port=80/tcp- åˆ é™¤firewall-cmd --zone= public --remove-port=80/tcp --permanent]]></content>
      <categories>
        <category>CenterOS</category>
      </categories>
      <tags>
        <tag>CenterOS</tag>
        <tag>firewall</tag>
        <tag>port</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½¬-Macç»ˆç«¯è¿žæŽ¥ssä»£ç†]]></title>
    <url>%2Futility-mac-ss-proxy%2F</url>
    <content type="text"><![CDATA[è¿‘æ—¥ä¸Šä¼  library è‡³ jcenterä¸€ç›´ç½‘ç»œè¶…æ—¶ , éœ€è¦ç»ˆç«¯ç§‘å­¦ä¸Šç½‘ . ç”±äºŽæœ¬æœºæ˜¯å…¬å¸é…çš„ mac , å¹¶æœªåšè®¾ç½® , çŽ°å°†è€å‹æä¾›çš„é…ç½®æ–‡ç« è½¬è‡³æœ¬ç«™ ,æ–¹ä¾¿åŽç»­é…ç½® . è½¬è½½è‡ª: è€å‹çš„ä¸ºçŸ¥ç¬”è®° mac ç»ˆç«¯è¿žæŽ¥ssä»£ç† å¦‚æžœå·²ç»å¯ç”¨ ss æœ¬åœ°åœ°å€ä¸º socks5://127.0.0.1:1080 åœ¨ç»ˆç«¯ä¸‹ä½¿ç”¨ export ALL_PROXY=socks5://127.0.0.1:1080 æ¸…é™¤ç§‘å­¦ä¸Šç½‘ unset ALL_PROXY ä¸ºäº†æ–¹ä¾¿å‘¢ , å¯ä»¥åœ¨ .bash_profile ä¸­åŠ ä¸Šè¿™ä¸ª 12345678function setproxy() &#123; # export &#123;HTTP,HTTPS,FTP&#125;_PROXY=&quot;http://127.0.0.1:3128&quot; ä¹Ÿå¯ä»¥è®¾ç½®httpä»£ç† export ALL_PROXY=socks5://127.0.0.1:1080&#125;function unsetproxy() &#123; # unset &#123;HTTP,HTTPS,FTP&#125;_PROXY unset ALL_PROXY&#125; éœ€è¦ä½¿ç”¨ç§‘å­¦ä¸Šç½‘çš„æ—¶å€™$ setproxyï¼Œä¸ç”¨äº†å°±$ unsetproxyå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨shellçŽ¯å¢ƒä¸‹åˆ‡æ¢è®¾ç½®ä»£ç†äº†ã€‚ä¸ºäº†æµ‹è¯•æ˜¯å¦æˆåŠŸå¯ä»¥curl -i http://ip.cn æŸ¥çœ‹ipã€‚]]></content>
      <categories>
        <category>Utility</category>
      </categories>
      <tags>
        <tag>ss</tag>
        <tag>proxy</tag>
        <tag>mac</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŒºå—é“¾-Linuxä¸‹USDTæµ‹è¯•èŠ‚ç‚¹æ­å»º]]></title>
    <url>%2Fblockchain-usdt-node%2F</url>
    <content type="text"><![CDATA[æœ¬ç¯‡å°†è¯´æ˜Žåœ¨ Linux ä¸‹æ­å»ºUSDTæµ‹è¯•èŠ‚ç‚¹. ä¸ºäº†æ›´å¥½çš„é˜…è¯»ä½“éªŒ , è¯·ç‚¹å‡»é˜…è¯»åŽŸæ–‡ Tether Limited å…¬å¸åŸºäºŽ Omni Layer è¿™å±‚åè®®(Omni Layer protocol)å‘è¡ŒtetherUSD . Omni Layer æ˜¯åŸºäºŽæ¯”ç‰¹å¸åŒºå—é“¾çš„é€šä¿¡åè®® , å®ƒå®žçŽ°äº†æ™ºèƒ½åˆçº¦çš„ç‰¹æ€§ , ä¹Ÿå°±æ˜¯è¯´ tetherUSDæ˜¯ Omni Layerçš„ä¸€ä¸ªæ™ºèƒ½åˆçº¦ . è€Œå®žçŽ° Omni Layer protocol çš„å¼€æºè½¯ä»¶é¡¹ç›®æ˜¯ Omni Core . æ­å»ºçŽ¯å¢ƒæœåŠ¡å™¨é…ç½® ç¡¬ç›˜: 500G å†…å­˜: 16G CPU: 4æ ¸ å¸¦å®½: ä¸€èˆ¬ ç³»ç»Ÿ: CenterOS 7 èŠ‚ç‚¹æ­å»º1. è¿›å…¥ Omni Layer Download ä¸‹è½½å¯¹åº”åŒ… 2. ä¸Šä¼ æœåŠ¡å™¨å¹¶è§£åŽ‹ è¿™é‡Œç¬”è€…ä½¿ç”¨çš„è·¯å¾„ç»Ÿä¸€ä¸º /opt/usdt/... 12cd /opt/usdttar -xzvf omnicore-0.3.1-x86_64-linux-gnu.tar 4. bitcoin é…ç½® bitcoinçš„é»˜è®¤é…ç½®æ–‡ä»¶ç›®å½•ä¸º ~/.bitcoin/bitcoin.conf , è‹¥æ²¡æœ‰æŒ‡å®š, é»˜è®¤åˆ™ä¼šåœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºä¸ªæ–°çš„. åŒæ­¥æ•°æ®æ¯”è¾ƒå ç¡¬ç›˜ç©ºé—´,å»ºè®®è‡ªå®šä¹‰å­˜å‚¨è·¯å¾„,é¿å…åŽæœŸç©ºé—´ä¸è¶³çš„å°´å°¬. æ­¤å¤„ç¬”è€…åœ¨ /opt/usdt/data/ ä¸‹æ–°å»ºäº† bitcoin.conf æ–‡ä»¶ bitcoin.conf : 12345678910111213141516171819# æ•°æ®å­˜å‚¨ç›®å½•datadir=/opt/usdt/data# ä½¿ç”¨æµ‹è¯•ç½‘ç»œtestnet=1# å‘ŠçŸ¥ Bitcoin-Qt å’Œ bitcoind æŽ¥å—JSON-RPCå‘½ä»¤server=1# åŽå°æ‰§è¡Œdaemon=1# è®¾ç½® gen=1 ä»¥å°è¯•æ¯”ç‰¹å¸æŒ–çŸ¿gen=1# å¯ç”¨äº¤æ˜“ç´¢å¼•txindex=1# ç›‘å¬ RPC,æ­£å¼é»˜è®¤ç«¯å£8333 æµ‹è¯•é»˜è®¤18333#rpcport=18333#rpcuser=123456#rpcpassword=abcdef#rpcallowip=0.0.0.0/0#rpcconnect=127.0.0.1 è¿™é‡Œå’Œæ¯”ç‰¹å¸èŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶ç±»ä¼¼ , æ›´å¤šçš„é…ç½®è¯·å‚è€ƒ Bitcoin Coreé…ç½®æ–‡ä»¶è§£è¯» å¦‚è‹¥æœºå™¨å·²ç»å¯ç”¨äº†æ¯”ç‰¹å¸èŠ‚ç‚¹ , æ­¤å¤„éœ€è¦ä¿®æ”¹ç«¯å£ç­‰é…ç½® é…ç½®è®¾ç½®å¥½ , å¼€å§‹åŒæ­¥ 12cd /opt/usdt/omnicored-0.3.1nohup ./omnicored --datadir=/opt/usdt/data/ &amp; 1234567891011Initializing Omni Core v0.3.1 [regtest]2018-07-20 05:34:34 Loading trades database: OK2018-07-20 05:34:34 Loading send-to-owners database: OK2018-07-20 05:34:34 Loading tx meta-info database: OK2018-07-20 05:34:34 Loading smart property database: OK2018-07-20 05:34:34 Loading master transactions database: OK2018-07-20 05:34:34 Loading fee cache database: OK2018-07-20 05:34:34 Loading fee history database: OK2018-07-20 05:34:34 Loading persistent state: NONE (no usable previous state found)2018-07-20 05:34:34 Exodus balance: 0.00000000 OMNI2018-07-20 05:34:34 Omni Core initialization completed å¦‚æ— æ„å¤– , åŒæ­¥åˆ™å¼€å§‹ . åŒæ­¥çš„è¿›åº¦å¯ä»¥åœ¨ testnet3 ç›®å½•ä¸‹çš„ debug.log ä¸­çœ‹åŒæ­¥è¿›åº¦. USDT èŠ‚ç‚¹çš„æ•°æ®åŒæ­¥ç›¸å¯¹ Bitcoin çš„ä¼šæ…¢å¾ˆå¤š,ç¬”è€…çš„æœåŠ¡å™¨èŠ±äº†ä¸¤å¤©åŠå·¦å³çš„æ—¶é—´ . ä¸€å®šè¦ç­‰æ•°æ®åŒæ­¥å®Œæˆä¹‹åŽå†è¿›è¡ŒåŽç»­æ“ä½œ , å¦åˆ™ä¸èƒ½æˆåŠŸ . ç›¸å…³å‘½ä»¤ominicoredå¯åŠ¨ ominicore (è‡ªå·±è§†å®žé™…æƒ…å†µä¿®æ”¹) 12cd /opt/usdt/omnicored-0.3.1/binnohup ./omnicored --datadir=/opt/usdt/data/ &amp; å‘½ä»¤ä¸­ç”¨ bitcoin.conf æ–‡ä»¶åŒ…è£¹äº†ä¸€ç³»åˆ—é…ç½®,å¦‚æžœä¸ç”¨æ­¤æ–‡ä»¶åˆ™éœ€è¦æŒ‡æ˜Žå„ä¸ªå‚æ•°.æ¯”å¦‚ ./omnicored -datadir=xxx -rpcuser=xxx ..... å¦‚è‹¥ä¸ç¡®å®š omnicore æ˜¯å¦å·²ç»å¯ç”¨è¿‡ , å¯å…ˆç”¨å‘½ä»¤æŸ¥è¯¢ netstat --ip -lpan | grep omnicore 12# å¸®åŠ©./omnicored -h æ›´å¤š bitcoind å‘½ä»¤ omnicore-cliå…³é—­ omnicore 1./omnicore-cli -conf=/opt/usdt/data/bitcoin.conf stop æ›´å¤š bitcoin-cli å‘½ä»¤ bitcoin-cli RPC å‘½ä»¤æ€»ç»“ bitcoin-api æ›´å¤š omnicore-cli å‘½ä»¤ API å®˜æ–¹æ–‡æ¡£ æ¯”è¾ƒå¥½ç”¨çš„ä¸­æ–‡APIæ–‡æ¡£ äº¤æ˜“æµ‹è¯•åˆ›å»ºè´¦æˆ·åŠåœ°å€1./omnicore-cli -conf=/opt/usdt/data/bitcoin.conf &quot;getnewaddress&quot; pluto pluto æ˜¯è´¦æˆ·å , éœ€è¦å”¯ä¸€. è¿”å›žçš„ n1FuLiRf7fHDVL2wKy9ibVan2iQK3s2UZV æ˜¯åœ°å€ getnewaddress æ˜¯æ¯”ç‰¹å¸çš„å‘½ä»¤ , å¯ä»¥äº†è§£æ›´å¤š æ¯”ç‰¹å¸å‘½ä»¤ èŽ·å–æµ‹è¯•å¸ä¸ºäº†åœ¨ testnet ä¸Šæ”¶åˆ° OMNI å’Œ TOMNI , éœ€è¦ç»™ moneyqMan7uh8FqdCA2BV5yZ8qVrc9ikLP å‘é€ TBTC(æµ‹è¯•ç½‘ç»œæ¯”ç‰¹å¸), ä¸€ä¸ª TBTC å¯ä»¥æ”¶åˆ° 100 ä¸ª OMNI å’Œ 100 ä¸ª TOMNI . é¦–å…ˆåŽ»ç”³è¯·ä¸€äº›æµ‹è¯•æ¯”ç‰¹å¸ åœ¨ä»¥ä¸‹æµ‹è¯•å¸æ°´é¾™å¤´ç½‘é¡µä¸­ç”³è¯·æµ‹è¯•æ¯”ç‰¹å¸ , æ³¨æ„ç§‘å­¦ä¸Šç½‘ . http://bitcoinfaucet.uo1.net/send.php https://coinfaucet.eu/en/btc-testnet/ ç­‰å¾…ç¡®è®¤ , ç„¶åŽæŸ¥è¯¢ä½™é¢ . 1./omnicore-cli -conf=/opt/usdt/data/bitcoin.conf listaddressgroupings 2. ç„¶åŽæ˜¯èŽ·å– Omni å¸ è½¬æµ‹è¯•æ¯”ç‰¹å¸ç»™ moneyqMan7uh8FqdCA2BV5yZ8qVrc9ikLP å¤šè´¦æˆ·çš„æƒ…å†µä¸‹å»ºè®®ä¸è¦ç”¨ sendtoaddress å‘½ä»¤ , ç”¨ sendfrom æŒ‡å®šè´¦æˆ·è½¬è´¦æ¯”è¾ƒå¥½ sendfromå‘½ä»¤è¯´æ˜Ž 1./omnicore-cli -conf=/opt/usdt/data/bitcoin.conf sendfrom &quot;pluto&quot; &quot;moneyqMan7uh8FqdCA2BV5yZ8qVrc9ikLP&quot; 0.0015 è¿”å›žçš„æ˜¯ä¸€ä¸²å­—ç¬¦ä¸² txhash , å¯ä»¥åŽ»æ¯”ç‰¹å¸æµè§ˆå™¨ ä¸ŠæŸ¥æ‰¾ ç­‰å¾…äº¤æ˜“ç¡®è®¤åŽ , å¯ä»¥é€šè¿‡å‘½ä»¤æŸ¥è¯¢ Omni å¸ä½™é¢ è¿™é‡Œæœ‰ä¸ªé—®é¢˜ , å¾—åˆ°çš„ Omni å…¨æ‰“åˆ°é’±åŒ…ä¸‹å¦ä¸€ä¸ªåœ°å€myVftRaBb8Vy3upWaL8TueAhDE2QAsQy1häº†. 1./omnicore-cli -conf=/opt/usdt/data/bitcoin.conf &quot;omni_getbalance&quot; &quot;myVftRaBb8Vy3upWaL8TueAhDE2QAsQy1h&quot; 1 è¿™é‡Œçš„ 1 æ˜¯ propertyid å³ èµ„äº§æ ‡è¯†ID , åœ¨ OMNI é’±åŒ…ä¸­ , ä¸åŒèµ„äº§éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ ID æ¥æ ‡è¯† . å¸¸è§çš„ 1 ä»£è¡¨ OMNI , 2 ä»£è¡¨ TOMNI , 31 ä»£è¡¨ USDT . å…¶ä»–èµ„äº§IDæŸ¥è¯¢ æµ‹è¯•ç½‘ç»œä¸­ , é€šå¸¸ç›´æŽ¥ç”¨ OMNI ä½œä¸º USDT è¿›è¡Œç ”å‘ . åˆ‡æ¢åˆ°ç”Ÿäº§ç½‘ç»œæ—¶æ³¨æ„å˜æ›´ID äº¤æ˜“å†è½¬è´¦. ä»Ž myVftRaBb8Vy3upWaL8TueAhDE2QAsQy1h è½¬ 1 ä¸ª OMNI åˆ° n1FuLiRf7fHDVL2wKy9ibVan2iQK3s2UZV 1./omnicore-cli -conf=/opt/usdt/data/bitcoin.conf &quot;omni_send&quot; &quot;myVftRaBb8Vy3upWaL8TueAhDE2QAsQy1h&quot; &quot;n1FuLiRf7fHDVL2wKy9ibVan2iQK3s2UZV&quot; 1 &quot;1.0&quot; æŸ¥è¯¢ n1FuLiRf7fHDVL2wKy9ibVan2iQK3s2UZV ä½™é¢ é™„Linux å¸¸ç”¨å‘½ä»¤: 1234567891011121314# æŸ¥çœ‹ç£ç›˜ç©ºé—´df -hl# é€’å½’åˆ é™¤rm -rf [ç›®å½•]# æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œç«¯å£netstat -an# æŸ¥çœ‹ç«¯å£å…·ä½“è¢«å“ªä¸ªè¿›ç¨‹å ç”¨lsof -i :[ç«¯å£å·]# æŸ¥çœ‹è¿›ç¨‹è¯¦ç»†ä¿¡æ¯ps -aux | grep [è¿›ç¨‹å·]# æ€æŽ‰è¿›ç¨‹kill -9 [è¿›ç¨‹å·]# æŸ¥çœ‹å…³é”®å­—è¿›ç¨‹netstat --ip -lpan | grep [å…³é”®å­—] å‚è€ƒèµ„æ–™: https://www.cnblogs.com/yanglang/p/9618075.html https://www.jianshu.com/p/417c280b8f9f https://www.jianshu.com/p/4a8054146ef1]]></content>
      <categories>
        <category>Blockchain</category>
      </categories>
      <tags>
        <tag>Blockchain</tag>
        <tag>Linux</tag>
        <tag>USDT</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŒºå—é“¾-Linuxä¸‹Bitcoinæµ‹è¯•èŠ‚ç‚¹æ­å»º]]></title>
    <url>%2Fblockchain-bitcoin-node%2F</url>
    <content type="text"><![CDATA[åœ¨è¿‘æœŸçš„ç ”å‘ä¸­ , éœ€è¦ç”¨åˆ°æ¯”ç‰¹å¸æµ‹è¯•èŠ‚ç‚¹ . æœ¬æ¥æƒ³æ‰¾ä¸ªç±»ä¼¼ä»¥å¤ªåŠ infura è¿™æ ·çš„ä¸‰æ–¹èŠ‚ç‚¹ , æœ€ç»ˆåªæ‰¾åˆ° BLOCKCYPHER . å…¶æä¾›äº† testnet å’Œ mainnet çš„çŽ¯å¢ƒ , ä¸è¿‡ API æ˜¯åŒ…è£…è¿‡ä¸€å±‚çš„ , å‡ºäºŽä¸¥è°¨ , è¿˜æ˜¯å†³å®šè‡ªè¡Œæ­å»ºèŠ‚ç‚¹. æœ¬ç¯‡å°†è¯´æ˜Žåœ¨ Linux ä¸‹æ­å»º Bitcoin æµ‹è¯•èŠ‚ç‚¹. ä¸ºäº†è‰¯å¥½çš„é˜…è¯»ä½“éªŒ , è¯·ç‚¹å‡»é˜…è¯»åŽŸæ–‡ æ­å»ºçŽ¯å¢ƒé€‰åž‹æ¯”ç‰¹å¸èŠ‚ç‚¹æœ‰å¾ˆå¤šå®žçŽ° bitcoin core : å®˜æ–¹èŠ‚ç‚¹ , c/c++ å®žçŽ°, æ­£å¼ç½‘ç»œå¤§å¤šæ•°æ˜¯ç”¨è¿™ä¸ªè¿è¡Œå…¨èŠ‚ç‚¹ btcd : golangçš„å®žçŽ°ç‰ˆæœ¬ , å¦‚æžœç”¨golangæ¥å†™ä¸€äº›åŠŸèƒ½ ,å¯ä»¥å‚è€ƒè¿™ä¸ªä»£ç  libbitcoin : c/c++å®žçŽ° , ç‰¹ç‚¹æ˜¯å®ƒæœ‰è¾ƒå¥½çš„å·¥å…·é“¾ parity-bitcoin : rustå®žçŽ° , æ˜¯ä»¥å¤ªåŠåˆ›å§‹äººä¹‹ä¸€Gavin Woodçš„æ–°å…¬å¸Parity Technologiesä¸‹çš„ä¸€ä¸ªäº§å“ ,å®ƒåŒæ ·ä¹Ÿå®žçŽ°äº†ä»¥å¤ªåŠrustç‰ˆæœ¬ è¿˜æœ‰å¾ˆå¤šå…¶ä»–å®žçŽ° , å¦‚javaç‰ˆæœ¬å’Œjsç‰ˆæœ¬ . è‹¥ç”¨ä½œå•†ä¸šç”¨é€” , é‚£bitcoin coreå¿…ç„¶æ˜¯æœ€ç¨³å¦¥çš„é€‰æ‹©. æœåŠ¡å™¨é…ç½® ç¡¬ç›˜: 500G . å†…å­˜: 16G . ä¸€èˆ¬æ¥è¯´4Gå°±å¤Ÿ , ä½†å¦‚æžœè¦æŸ¥åŽ†å²è®°å½• ,éœ€è¦åŠ è½½å®Œæ•´çš„äº¤æ˜“ç´¢å¼•è¡¨-tindex , è¿™å°±éœ€è¦8G+çš„å†…å­˜ CPU: 4æ ¸ å¸¦å®½: ä¸€èˆ¬ ç³»ç»Ÿ: CenterOS 7 èŠ‚ç‚¹æ­å»º1. è¿›å…¥ bitcoin é€‰æ‹© Choose your wallet 2. é€‰æ‹© Bitcoin Core for Linux ä¸‹è½½ bitcoin-0.17.0.1-x86_64-linux-gnu.tar.gz 3. ä¸Šä¼ æœåŠ¡å™¨,è§£åŽ‹ è¿™é‡Œç¬”è€…ä½¿ç”¨çš„è·¯å¾„ç»Ÿä¸€ä¸º /opt/btc/... è§£åŽ‹ 12cd /opt/btctar -xzvf bitcoin-0.17.0.1-x86_64-linux-gnu.tar.gz 4. bitcoin é…ç½® bitcoinçš„é»˜è®¤é…ç½®æ–‡ä»¶ç›®å½•ä¸º ~/.bitcoin/bitcoin.conf , è‹¥æ²¡æœ‰æŒ‡å®š, é»˜è®¤åˆ™ä¼šåœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºä¸ªæ–°çš„. åŒæ­¥æ•°æ®æ¯”è¾ƒå ç¡¬ç›˜ç©ºé—´,å»ºè®®è‡ªå®šä¹‰å­˜å‚¨è·¯å¾„,é¿å…åŽæœŸç©ºé—´ä¸è¶³çš„å°´å°¬. æ­¤å¤„ç¬”è€…åœ¨ /opt/btc/bitcoin-data/ ä¸‹æ–°å»ºäº† bitcoin.conf æ–‡ä»¶ bitcoin.conf : 12345678910111213141516# æ•°æ®å­˜å‚¨ç›®å½•datadir=/opt/btc/bitcoin-data# ä½¿ç”¨æµ‹è¯•ç½‘ç»œtestnet=1# å‘ŠçŸ¥ Bitcoin-Qt å’Œ bitcoind æŽ¥å—JSON-RPCå‘½ä»¤server=1# è®¾ç½® gen=1 ä»¥å°è¯•æ¯”ç‰¹å¸æŒ–çŸ¿gen=1# åŽå°æ‰§è¡Œdaemon=1# ç›‘å¬ RPC é“¾æŽ¥,æ­£å¼é»˜è®¤ç«¯å£8333 æµ‹è¯•é»˜è®¤18333#rpcport=18333#rpcuser=123456#rpcpassword=abcdef#rpcallowip=0.0.0.0/0#rpcconnect=127.0.0.1 è¿™é‡Œåªåšä¸€äº›ç®€å•çš„é…ç½® , æ›´å¤šçš„é…ç½®è¯·å‚è€ƒ Bitcoin Coreé…ç½®æ–‡ä»¶è§£è¯» é…ç½®è®¾ç½®å¥½ , å¼€å§‹åŒæ­¥ 12cd /opt/btc/bitcoin-0.17.0/bin./bitcoind -conf=/opt/btc/bitcoin-data/bitcoin.conf å¦‚æ— æ„å¤– , åŒæ­¥åˆ™å¼€å§‹ . æµ‹è¯•ç½‘ç»œèŠ‚ç‚¹æ•°æ®å¤§æ¦‚å‡ åG , è€å¿ƒç­‰å¾…å³å¯ . ç¬”è€…å¤§æ¦‚èŠ±äº†1~2ä¸ªå°æ—¶ ä»¥ä¸Šè¿™ä¸ª progress ä»£è¡¨åŒæ­¥è¿›åº¦ , 1.0 åˆ™ä¸º 100% . ç›¸å…³å‘½ä»¤bitcoindå¯åŠ¨ bitcoin (è‡ªå·±è§†å®žé™…æƒ…å†µä¿®æ”¹) 12cd /opt/btc/bitcoin-0.17.0/bin./bitcoind -conf=/opt/btc/bitcoin-data/bitcoin.conf å‘½ä»¤ä¸­ç”¨ bitcoin.conf æ–‡ä»¶åŒ…è£¹äº†ä¸€ç³»åˆ—é…ç½®,å¦‚æžœä¸ç”¨æ­¤æ–‡ä»¶åˆ™éœ€è¦æŒ‡æ˜Žå„ä¸ªå‚æ•°.æ¯”å¦‚ ./bitcoind -datadir=xxx -rpcuser=xxx ..... å¦‚è‹¥ä¸ç¡®å®š bitcoin æ˜¯å¦å·²ç»å¯ç”¨è¿‡ , å¯å…ˆç”¨å‘½ä»¤æŸ¥è¯¢ netstat --ip -lpan | grep bitcoin 12# å¸®åŠ©./bitcoind -h æ›´å¤š bitcoind å‘½ä»¤ bitcoin-cliå…³é—­ bitcoin 1./bitcoin-cli stop å…¶ä»–å‘½ä»¤ 12345678# æŸ¥çœ‹ç½‘ç»œçŠ¶æ€ï¼šbitcoin-cli getnetworkinfo# æŸ¥çœ‹ç½‘ç»œèŠ‚ç‚¹ï¼šbitcoin-cli getpeerinfo# æŸ¥çœ‹åŒºå—é“¾ä¿¡æ¯ï¼šå¦‚åŒæ­¥è¿›åº¦ã€bitcoin-cli getblockchaininfo# æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤bitcoin-cli help æ›´å¤š bitcoin-cli å‘½ä»¤ bitcoin-cli RPC å‘½ä»¤æ€»ç»“ Bitcoin API 12345&gt; ./bitcoin-cli -conf=/opt/btc/bitcoin-data/bitcoin.conf listaccounts&gt; error code: -32&gt; error message:&gt; listaccounts is deprecated and will be removed in V0.18. To use this command, start bitcoind with -deprecatedrpc=accounts.&gt; &gt; æœ‰äº›å‘½ä»¤å³å°†è¿‡æœŸ , ä¼šæŠ¥é”™ . æ­¤æ—¶æœ€å¥½ç”¨ bitcoin-cli help æŸ¥è¯¢ä¸‹æ›¿æ¢çš„å‘½ä»¤ äº¤æ˜“æµ‹è¯•åˆ›å»ºè´¦æˆ·åŠåœ°å€1./bitcoin-cli -conf=/opt/btc/bitcoin-data/bitcoin.conf getnewaddress &quot;halcyon&quot; æ­¤å¤„ â€œhalcyonâ€ ä¸ºè‡ªå®šä¹‰è´¦æˆ·å , é»˜è®¤åˆ›å»ºçš„åœ°å€ç±»åž‹æ˜¯éš”ç¦»è§è¯çš„ , å³åœ¨æµ‹è¯•ç½‘ç»œä¸‹æ˜¯ 2 å¼€å¤´çš„. èŽ·å–æµ‹è¯•å¸åœ¨ä»¥ä¸‹æµ‹è¯•å¸æ°´é¾™å¤´ç½‘é¡µä¸­ç”³è¯·æµ‹è¯•æ¯”ç‰¹å¸ , æ³¨æ„ç§‘å­¦ä¸Šç½‘ . http://bitcoinfaucet.uo1.net/send.php https://coinfaucet.eu/en/btc-testnet/ ç„¶åŽæŸ¥è¯¢ä½™é¢ . 123./bitcoin-cli -conf=/opt/btc/bitcoin-data/bitcoin.conf getbalanceæˆ–è€…./bitcoin-cli -conf=/opt/btc/bitcoin-data/bitcoin.conf listaddressgroupings ç„¶åŽè½¬è´¦ç»™ myVftRaBb8Vy3upWaL8TueAhDE2QAsQy1h 1./bitcoin-cli -conf=/opt/btc/bitcoin-data/bitcoin.conf sendtoaddress &quot;myVftRaBb8Vy3upWaL8TueAhDE2QAsQy1h&quot; 0.001 è¿”å›žçš„æ˜¯ä¸€ä¸²å­—ç¬¦ä¸² txhash , å¯ä»¥åŽ»æ¯”ç‰¹å¸æµè§ˆå™¨ ä¸ŠæŸ¥æ‰¾ é™„Linux å¸¸ç”¨å‘½ä»¤: 1234567891011121314# æŸ¥çœ‹ç£ç›˜ç©ºé—´df -hl# é€’å½’åˆ é™¤rm -rf [ç›®å½•]# æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œç«¯å£netstat -an# æŸ¥çœ‹ç«¯å£å…·ä½“è¢«å“ªä¸ªè¿›ç¨‹å ç”¨lsof -i :[ç«¯å£å·]# æŸ¥çœ‹è¿›ç¨‹è¯¦ç»†ä¿¡æ¯ps -aux | grep [è¿›ç¨‹å·]# æ€æŽ‰è¿›ç¨‹kill -9 [è¿›ç¨‹å·]# æŸ¥çœ‹å…³é”®å­—è¿›ç¨‹netstat --ip -lpan | grep [å…³é”®å­—] å‚è€ƒèµ„æ–™: https://blog.csdn.net/littlesmallless/article/details/83825784 https://www.jianshu.com/p/1891a083e4fe]]></content>
      <categories>
        <category>Blockchain</category>
      </categories>
      <tags>
        <tag>Bitcoin</tag>
        <tag>Blockchain</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå®žæˆ˜-ä»¥å¤ªåŠé’±åŒ…]]></title>
    <url>%2Fblockchain-flutter-app%2F</url>
    <content type="text"><![CDATA[ä¹‹å‰ç”±äºŽå·¥ä½œé‡å¿ƒåç§»åˆ°äº†åŽ»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ Loois çš„å¼€å‘ä¸­,å¯¹ Flutter çš„å­¦ä¹ æš‚åœäº†. çŽ°åœ¨è®¡åˆ’é‡æ–°å¼€å§‹,å‘çŽ°å·²ç»æœ‰è®¸å¤šä¸é”™çš„å­¦ä¹ èµ„æº,æ¯”å¦‚ Flutterä¸­æ–‡ç½‘ , FlutteræŽ˜é‡‘ç¤¾åŒº ç­‰ç­‰.å› æ­¤è‹¥æˆ‘ä»¬ä»æŒ‰ åŽŸä¸“æ è®¡åˆ’ ä»ŽåŸºç¡€ä¸€ç¯‡ç¯‡è®²èµ·,éš¾å…æœ‰äº›é‡å¤.ä¸å¦‚ç›´æŽ¥è¿›å…¥å®žæˆ˜,å¼€å‘ä¸€æ¬¾ Flutterä»¥å¤ªåŠé’±åŒ… .ç¬”è€…ä¼šåœ¨å¼€å‘å­¦ä¹ è¿‡ç¨‹ä¸­,å°†ä¸ŽåŽŸè®¡åˆ’ä¸­çš„å­¦ä¹ å†…å®¹æœ‰äº¤é›†çš„éƒ¨åˆ†è¿›è¡Œæ•™ç¨‹è¯´æ˜Ž. äº§å“åŽŸåž‹æˆ‘ä»¬å°†å‚è€ƒ imToken , Loois é’±åŒ…äº§å“è®¾è®¡.åŽé¢å°†ä¼šè¡¥å…… å¢¨åˆ€ çš„åŽŸåž‹. imTokenä¸‹è½½åœ°å€ , Looisä¸‹è½½åœ°å€ è¿™é‡Œæœ‰äº›åŒºåˆ«çš„æ˜¯, imToken ç›®å‰å¯¹æŽ¥çš„æ˜¯ 0x å’Œ Kyber åè®® , Loois ç›®å‰å¯¹æŽ¥çš„æ˜¯ Loopring åè®® . åŽé¢åœ¨åšå¸‚åœºäº¤æ˜“æ—¶,æˆ‘ä»¬å…·ä½“è¿›è¡Œè¯´æ˜Ž. èµ„æºæ”¯æŒè¿™é‡Œæˆ‘ä»¬å°†ç”¨åˆ° Material Design Icons , FontAwesome Icons , Looisç›¸åº”å›¾ç‰‡,ä»¥åŠåç¼–è¯‘imTokenèŽ·å–çš„å›¾ç‰‡. çŽ¯å¢ƒå‡†å¤‡çŽ¯å¢ƒå®‰è£…ç­‰è¯·å‚è€ƒ FlutteråŸºç¡€-(1)çŽ¯å¢ƒæ­å»ºåŠdemoè¿è¡Œ çŸ¥è¯†å‚¨å¤‡Flutter åŸºæœ¬äº†è§£è¯·å‚è€ƒ FlutteråŸºç¡€-(2)åŸºæœ¬æ¦‚å¿µåŠé¦–ä¸ªåº”ç”¨ æ¶‰åŠåˆ°ä»¥å¤ªåŠé’±åŒ…ç›¸å…³çš„å†…å®¹,å¯ä»¥å‚è€ƒå…¶å®ƒå‡ ç¯‡æ–‡ç« . ä»¥å¤ªåŠåˆ›å»ºé’±åŒ… ä»¥å¤ªåŠè§£é”é’±åŒ… ä»¥å¤ªåŠè½¬è´¦ç¦»çº¿ç­¾å ä»¥ä¸Šå‡ ç¯‡æ–‡ç« æ˜¯ Java ç‰ˆæœ¬,æˆ‘ä»¬å°†å®žçŽ° Dart ç‰ˆæœ¬]]></content>
      <categories>
        <category>Blockchain</category>
        <category>Android</category>
        <category>iOS</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Ethereum</tag>
        <tag>Flutter</tag>
        <tag>Blockchain</tag>
        <tag>Android</tag>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŒºå—é“¾-ä»¥å¤ªåŠè½¬è´¦ç¦»çº¿ç­¾å]]></title>
    <url>%2Fblockchain-eth-transaction-sign%2F</url>
    <content type="text"><![CDATA[å‰ä¸¤ç¯‡æ–‡ç« ä¸­,æˆ‘ä»¬è®²åˆ°å¦‚ä½•åˆ›å»ºå’Œè§£é”ä»¥å¤ªåŠé’±åŒ….æœ¬ç« æˆ‘ä»¬å°†è®²è§£è½¬è´¦ç›¸å…³çš„å†…å®¹. ä¸ºäº†è‰¯å¥½çš„é˜…è¯»ä½“éªŒ, è¯·é˜…è¯»åŽŸæ–‡ æˆ‘ä»¬å…ˆè¯´æ˜Žä¸‹æ•´ä½“çš„æµç¨‹. é¦–å…ˆæ˜¯é’±åŒ…æœ¬åœ°å°†è½¬è´¦ä¿¡æ¯è¿›è¡Œç¦»çº¿ç­¾å,ç„¶åŽé€šè¿‡ä»¥å¤ªåŠJSON-RPCæ–¹æ³•å‘é€åˆ°ä»¥å¤ªåŠèŠ‚ç‚¹,å…¶ä¸­ä»¥å¤ªåŠå’Œå…¶ä»–ERC20ä»£å¸çš„ç­¾åæ˜¯ä¸åŒçš„. è½¬è´¦ETHè½¬è´¦ç­¾å1234567891011121314151617181920212223242526272829303132/** * ETH è½¬è´¦ç¦»çº¿ç­¾å * @param to è½¬å…¥çš„é’±åŒ…åœ°å€ * @param nonce ä»¥å¤ªåŠnonce * @param gasPrice gasPrice * @param gasLimit gasLimit * @param amount è½¬è´¦çš„ethæ•°é‡ * @param wallet é’±åŒ…å¯¹è±¡ * @param password å¯†ç  * @return ç­¾ådata */public String signedEthTransactionData(String to, BigInteger nonce, BigInteger gasPrice, BigInteger gasLimit, BigDecimal amount, HLWallet wallet, String password) throws Exception &#123; // æŠŠåè¿›åˆ¶çš„è½¬æ¢æˆETHçš„Wei, 1ETH = 10^18 Wei BigDecimal amountInWei = Convert.toWei(amount.toString(), Convert.Unit.ETHER); RawTransaction rawTransaction = RawTransaction.createEtherTransaction(nonce, gasPrice, gasLimit, to, amountInWei.toBigInteger()); return signData(rawTransaction,wallet,password);&#125;private String signData(RawTransaction rawTransaction, HLWallet wallet, String password) throws Exception &#123; Credentials credentials = Credentials.create(LWallet.decrypt(password, wallet.walletFile)); byte[] signMessage = TransactionEncoder.signMessage(rawTransaction, ChainId.MAINNET, credentials); return Numeric.toHexString(signMessage);&#125; nonce ä¸ºäº†é˜²æ­¢äº¤æ˜“çš„é‡æ’­æ”»å‡»ï¼Œæ¯ç¬”äº¤æ˜“å¿…é¡»æœ‰ä¸€ä¸ªnonceéšæœºæ•°ï¼Œé’ˆå¯¹æ¯ä¸€ä¸ªè´¦æˆ·nonceéƒ½æ˜¯ä»Ž0å¼€å§‹ï¼Œå½“nonceä¸º0çš„äº¤æ˜“å¤„ç†å®Œä¹‹åŽï¼Œæ‰ä¼šå¤„ç†nonceä¸º1çš„äº¤æ˜“ï¼Œå¹¶ä¾æ¬¡åŠ 1çš„äº¤æ˜“æ‰ä¼šè¢«å¤„ç†.ä»¥ä¸‹æ˜¯nonceä½¿ç”¨çš„å‡ æ¡è§„åˆ™ï¼š å½“nonceå¤ªå°ï¼Œäº¤æ˜“ä¼šè¢«ç›´æŽ¥æ‹’ç»ã€‚ å½“nonceå¤ªå¤§ï¼Œäº¤æ˜“ä¼šä¸€ç›´å¤„äºŽé˜Ÿåˆ—ä¹‹ä¸­ï¼Œè¿™ä¹Ÿå°±æ˜¯å¯¼è‡´æˆ‘ä»¬ä¸Šé¢æè¿°çš„é—®é¢˜çš„åŽŸå› ï¼› å½“å‘é€ä¸€ä¸ªæ¯”è¾ƒå¤§çš„nonceå€¼ï¼Œç„¶åŽè¡¥é½å¼€å§‹nonceåˆ°é‚£ä¸ªå€¼ä¹‹é—´çš„nonceï¼Œé‚£ä¹ˆäº¤æ˜“ä¾æ—§å¯ä»¥è¢«æ‰§è¡Œã€‚ å½“äº¤æ˜“å¤„äºŽqueueä¸­æ—¶åœæ­¢gethå®¢æˆ·ç«¯ï¼Œé‚£ä¹ˆäº¤æ˜“queueä¸­çš„äº¤æ˜“ä¼šè¢«æ¸…é™¤æŽ‰ã€‚ æˆ‘ä»¬å¯é€šè¿‡ä»¥å¤ªåŠJSON-RPCæ–¹æ³•eth_gettransactioncount èŽ·å–nonce ERC-20ä»£å¸è½¬è´¦ç­¾åERC-20ä»£å¸ä¸Žä»¥å¤ªåŠè½¬è´¦æ˜¯ä¸åŒçš„,éœ€è¦èµ°æ™ºèƒ½åˆçº¦. ä»¥ä¸‹æ˜¯æ‰‹åŠ¨æ‹¼æŽ¥çš„æ–¹å¼ 123456789101112131415161718192021222324public String signedContractTransactionData(String contractAddress, String to, BigInteger nonce, BigInteger gasPrice, BigInteger gasLimit, BigDecimal amount, BigDecimal decimal, HLWallet wallet, String password) throws Exception &#123; //å› ä¸ºæ¯ä¸ªä»£å¸å¯ä»¥è§„å®šè‡ªå·±çš„å°æ•°ä½, æ‰€ä»¥å®žé™…çš„è½¬è´¦å€¼=æ•°å€¼ * 10^å°æ•°ä½ BigDecimal realValue = amount.multiply(decimal); //0xa9059cbbä»£è¡¨æŸä¸ªä»£å¸çš„è½¬è´¦æ–¹æ³•hex(transfer) + å¯¹æ–¹çš„è½¬è´¦åœ°å€hex + è½¬è´¦çš„å€¼çš„hex String data = Params.Abi.transfer + // 0xa9059cbb Numeric.toHexStringNoPrefixZeroPadded(Numeric.toBigInt(to), 64) + Numeric.toHexStringNoPrefixZeroPadded(realValue.toBigInteger(), 64); RawTransaction rawTransaction = RawTransaction.createTransaction( nonce, gasPrice, gasLimit, contractAddress, data); return signData(rawTransaction, wallet, password);&#125; æ­¤æ—¶æˆ‘ä»¬éœ€è¦å°†è½¬è´¦çš„æŒ‡ä»¤ä¿¡æ¯é€šè¿‡ç­¾åæ—¶çš„dataå‘é€å‡ºåŽ».ä»£å¸è½¬è´¦çš„dataç»„æˆéƒ¨åˆ†æœ‰ä¸‰ä¸ª. é¦–å…ˆæ˜¯å›ºå®šå¤´0xa9059cbb ç„¶åŽæ˜¯è½¬å…¥é’±åŒ…åœ°å€ å†æ˜¯è½¬è´¦çš„æ•°é‡,ä»¥weiä½œä¸ºå•ä½ è¿™é‡Œæˆ‘ä»¬è¯´æ˜Žä¸‹,ä¸ºä»€ä¹ˆå›ºå®šå¤´æ˜¯0xa9059cbb.æ˜¯å› ä¸ºå®ƒæ˜¯å‡½æ•°åŽŸåž‹transfer(address,uint256)çš„MethodId,ç›¸å½“äºŽä»¥å¤ªåŠç”¨æ¥åˆ†è¾¨æŒ‡ä»¤çš„æ ‡è¯†,å…·ä½“è½¬æ¢æ–¹æ³•ä¸º 1234567// transfer -&gt; 0xa9059cbb String transfer = "transfer(address,uint256)"; byte[] bytes = transfer.getBytes(); byte[] bytes1 = org.web3j.crypto.Hash.sha3(bytes); String hex = Numeric.toHexString(bytes1, 0, 4, true); ShadowLog.i("transfer", hex); ç„¶åŽå¯¹äºŽè½¬å…¥åœ°å€åŠè½¬è´¦æ•°é‡,æˆ‘ä»¬æ˜¯å°†å…¶è½¬åŒ–ä¸º16è¿›åˆ¶,ç„¶åŽå·¦è¾¹è¡¥0è‡³64ä½.ä¸‰ä¸ªå‚æ•°å­—ç¬¦ä¸²æ‹¼æŽ¥åœ¨ä¸€èµ·å³ä¸ºæœ€åŽç­¾åæ—¶ç”¨åˆ°çš„data. é‚£ä¹ˆå¯èƒ½æœ‰äººä¼šé—®,æ˜¯ä¸æ˜¯å…¶ä»–æŒ‡ä»¤å‚æ•°éƒ½æ˜¯è¿™ä¹ˆæ‹¼æŽ¥? å½“ç„¶ä¸æ˜¯,è¿™é‡Œæ¶‰åŠåˆ°ä»¥å¤ªåŠåˆçº¦ABI,æœ‰å…´è¶£çš„ç«¥éž‹å¯ä»¥çœ‹çœ‹.è¿™é‡Œå› ä¸ºè½¬å…¥åœ°å€çš„ç±»åž‹addresså’Œè½¬è´¦æ•°é‡çš„ç±»åž‹uint256éƒ½æ˜¯é™æ€çš„,å› æ­¤æ˜¯ä¸Šè¿°çš„æ‹¼æŽ¥æ–¹å¼,å¦‚æžœæ˜¯åŠ¨æ€çš„åˆ™ä¸ä¸€æ ·äº†,å…·ä½“å¯ä»¥å‚è€ƒABIæ–‡æ¡£. è¿™é‡Œæˆ‘ä»¬æä¾›å¦å¤–ä¸€ç§web3jæ—¢æœ‰çš„å°è£…å®žçŽ°,ä¸ç”¨å…³å¿ƒå†…éƒ¨å‚æ•°æ˜¯å¦‚ä½•æ‹¼æŽ¥çš„.(æŽ¨è) 12345678910111213141516171819202122public String signContractTransaction(String contractAddress, String to, BigInteger nonce, BigInteger gasPrice, BigInteger gasLimit, BigDecimal amount, BigDecimal decimal, HLWallet wallet, String password) throws IOException, CipherException &#123; BigDecimal realValue = amount.multiply(decimal); Function function = new Function("transfer", Arrays.asList(new Address(to), new Uint256(realValue.toBigInteger())), Collections.emptyList()); String data = FunctionEncoder.encode(function); RawTransaction rawTransaction = RawTransaction.createTransaction( nonce, gasPrice, gasLimit, contractAddress, data); return signData(rawTransaction, wallet, password);&#125; å‘é€è¯·æ±‚ç­¾åå®ŒåŽ,é€šè¿‡ä»¥å¤ªåŠçš„JSON-RPCå‘é€å‡ºåŽ».eth_sendrawtransaction ETHè½¬è´¦æœ€ç»ˆåœ¨ä»¥å¤ªåŠæµè§ˆå™¨ä¸Šçš„è½¬è´¦ç»“æžœ link ,å¯åœ¨é¡µé¢æœ€ä¸‹æ–¹æŸ¥çœ‹Input Data 10x3078 ä»£å¸è½¬è´¦æœ€ç»ˆåœ¨ä»¥å¤ªåŠæµè§ˆå™¨ä¸Šçš„è½¬è´¦ç»“æžœ link,Input Dataä¸º 12345Function: transfer(address _to, uint256 _value)MethodID: 0xa9059cbb[0]: 000000000000000000000000b7bb6c45800f4531cc1581637868373a06367b48[1]: 000000000000000000000000000000000000000000000002d1a51c7e00500000 FAQQ: ä¸ºä»€ä¹ˆè°ƒç”¨sendRawTransactionæŽ¥å£åŽ,è½¬è´¦è®°å½•åœ¨ä»¥å¤ªåŠæµè§ˆå™¨æˆ–è€…å…¶ä»–é’±åŒ…æŸ¥è¯¢ä¸åˆ°? A: æŽ¥å£è°ƒç”¨åŽä¼šè¿”å›žä¸€ä¸ªå­—ç¬¦ä¸²hash,æˆ‘ä»¬é€šå¸¸ç§°ä¸ºtxHash.æ­¤æ—¶æ˜¯ä¸çŸ¥é“ç»“æžœçš„,å› ä¸ºæ‹¥å µæˆ–è€…å…¶ä»–åŽŸå› ä»¥å¤ªåŠä¸ä¸€å®šç¡®è®¤,å› æ­¤æŸ¥ä¸åˆ°æ˜¯æ­£å¸¸çš„.åœ¨appä¸­,ä¸€ç§åšæ³•æ˜¯åœ¨å‘é€è¯·æ±‚åŽ,ä¸»åŠ¨é€šçŸ¥è‡ªå·±çš„ä¸­ç»§relay,åœ¨ä¸­ç»§relayä¸­ç»´æŠ¤è¿™ä¸ªtxHashçŠ¶æ€,ä»¥å¤„ç†ä¸­çš„çŠ¶æ€å‘ˆçŽ°ç»™ç”¨æˆ·. Q:sendRawTransactionåŽæŽ¥å£æŠ¥é”™â€™invalid senderâ€™ A: è¿™ä¸ªæŠ¥é”™æ˜¯ä»¥å¤ªåŠçŽ¯å¢ƒé”™è¯¯å¯¼è‡´çš„,ä»£ç ä¸Šè¡¨çŽ°ä¸ºchainIdæ²¡å¯¹åº”. 123456789private String signData(byte chainId, RawTransaction rawTransaction, HDWallet wallet, String password) throws Exception &#123; Credentials credentials; credentials = Credentials.create(Wallet.decrypt(password, wallet.getWalletFile())); byte[] signMessage = TransactionEncoder.signMessage(rawTransaction, chainId, credentials); return Numeric.toHexString(signMessage); &#125; ç­¾åéœ€è¦åˆ¶å®šçŽ¯å¢ƒchainId,è‹¥ä½¿ç”¨ä¸å¸¦chainIdçš„æ–¹æ³•,åˆ™é»˜è®¤æ˜¯ä¸»ç½‘. å‹é“¾: https://www.i7play.com/ å‚è€ƒ: https://blog.csdn.net/wo541075754/article/details/77975335]]></content>
      <categories>
        <category>Blockchain</category>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Ethereum</tag>
        <tag>Blockchain</tag>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŒºå—é“¾-ETHè§£é”é’±åŒ…]]></title>
    <url>%2Fblockchain-eth-unlock-android%2F</url>
    <content type="text"><![CDATA[æœ¬ç¯‡æ–‡ç« æ‰¿æŽ¥åŒºå—é“¾-ETHåˆ›å»ºé’±åŒ… , åŸºæœ¬æ¦‚å¿µåœ¨ä¸Šç¯‡æ–‡ç« ä¸­å·²ç»åšäº†æ¦‚è¦ , çŽ°åœ¨æˆ‘ä»¬å¼€å§‹è¯´æ˜Žåˆ†åˆ«é€šè¿‡åŠ©è®°è¯,ç§é’¥,Keystoreæ¥è§£é”é’±åŒ…. ä¸ºäº†è‰¯å¥½çš„é˜…è¯»ä½“éªŒ, è¯·é˜…è¯»åŽŸæ–‡ çŽ¯å¢ƒä¾èµ–çŽ¯å¢ƒè¿˜æ˜¯BIPå…¨å®¶æ¡¶ 1234implementation 'io.github.novacrypto:BIP44:0.0.3' // implementation 'io.github.novacrypto:BIP32:0.0.9' //å­˜åœ¨å°‘è®¸é—®é¢˜implementation 'com.lhalcyon:bip32:1.0.0' // ä¸Šé¢çš„BIP32æœ‰å°‘è®¸é—®é¢˜,ç¬”è€…åšäº†ä¸€äº›ä¿®æ”¹,å·²ç»ä¸Šä¼ libimplementation 'io.github.novacrypto:BIP39:0.1.9' åŠ©è®°è¯è§£é”é’±åŒ…æ ¡éªŒåŠ©è®°è¯å¯¹ç”¨æˆ·è¾“å…¥çš„åŠ©è®°è¯éœ€è¦è¿›è¡Œæ ¡éªŒ 123456789101112// validate mnemonictry &#123; MnemonicValidator.ofWordList(English.INSTANCE).validate(mnemonics);&#125; catch (InvalidChecksumException e) &#123; e.printStackTrace();&#125; catch (InvalidWordCountException e) &#123; e.printStackTrace();&#125; catch (WordNotFoundException e) &#123; e.printStackTrace();&#125; catch (UnexpectedWhiteSpaceException e) &#123; e.printStackTrace();&#125; è§£é”é’±åŒ…åŠ©è®°è¯è§£é”å…¶å®žä¸Žåˆ›å»ºé’±åŒ…è¿‡ç¨‹ä¸€è‡´,åªæ˜¯å¢žåŠ äº†æ ¡éªŒé‡å¤é’±åŒ…çš„é€»è¾‘ 1234567891011121314151617public Flowable&lt;HLWallet&gt; importMnemonic(Context context, String password, String mnemonics) &#123; Flowable&lt;String&gt; flowable = Flowable.just(mnemonics); return flowable .flatMap(s -&gt; &#123; ECKeyPair keyPair = generateKeyPair(s); WalletFile walletFile = Wallet.createLight(password, keyPair); HLWallet hlWallet = new HLWallet(walletFile); if (WalletManager.shared().isWalletExist(hlWallet.getAddress())) &#123; return Flowable.error(new HLError(ReplyCode.walletExisted, new Throwable("Wallet existed!"))); &#125; WalletManager.shared().saveWallet(context, hlWallet); return Flowable.just(hlWallet); &#125;);&#125; ç§é’¥è§£é”é’±åŒ…ç§é’¥è§£é”/å¯¼å…¥é’±åŒ…çš„è¿‡ç¨‹ä¹Ÿä¸Žåˆ›å»ºæ—¶å¤§ä½“ä¸€è‡´ 12345678910111213141516171819public Flowable&lt;HLWallet&gt; importPrivateKey(Context context, String privateKey, String password) &#123; if (privateKey.startsWith(Constant.PREFIX_16)) &#123; privateKey = privateKey.substring(Constant.PREFIX_16.length()); &#125; Flowable&lt;String&gt; flowable = Flowable.just(privateKey); return flowable.flatMap(s -&gt; &#123; byte[] privateBytes = Hex.decode(s); ECKeyPair ecKeyPair = ECKeyPair.create(privateBytes); WalletFile walletFile = Wallet.createLight(password, ecKeyPair); HLWallet hlWallet = new HLWallet(walletFile); if (WalletManager.shared().isWalletExist(hlWallet.getAddress())) &#123; return Flowable.error(new HLError(ReplyCode.walletExisted, new Throwable("Wallet existed!"))); &#125; WalletManager.shared().saveWallet(context, hlWallet); return Flowable.just(hlWallet); &#125;);&#125; Keystoreè§£é”é’±åŒ…Keystoreè§£é”é’±åŒ…éœ€è¦é‡ç‚¹æ¥è®² ç›´æŽ¥å…ˆä¸Šä»£ç  12345678910111213141516171819202122public Flowable&lt;HLWallet&gt; importKeystoreViaWeb3j(Context context, String keystore, String password) &#123; return Flowable.just(keystore) .flatMap(s -&gt; &#123; ObjectMapper objectMapper = new ObjectMapper(); WalletFile walletFile = objectMapper.readValue(keystore, WalletFile.class); ECKeyPair keyPair = Wallet.decrypt(password, walletFile); HLWallet hlWallet = new HLWallet(walletFile); WalletFile generateWalletFile = Wallet.createLight(password, keyPair); if (!generateWalletFile.getAddress().equalsIgnoreCase(walletFile.getAddress())) &#123; return Flowable.error(new HLError(ReplyCode.failure, new Throwable("address doesn't match private key"))); &#125; if (WalletManager.shared().isWalletExist(hlWallet.getAddress())) &#123; return Flowable.error(new HLError(ReplyCode.walletExisted, new Throwable("Wallet existed!"))); &#125; WalletManager.shared().saveWallet(context, hlWallet); return Flowable.just(hlWallet); &#125;);&#125; å…¶è¿‡ç¨‹ä¸»è¦æ˜¯é€šè¿‡ WalletFile / Keystore + Password å¾—åˆ° EcKeyPair æŽ¥ç€å¾—åˆ°å…¶ä»–ä¿¡æ¯,ä¸»è¦APIä¸º 1ECKeyPair keyPair = Wallet.decrypt(password, walletFile); å¢žåŠ äº†æ ¡éªŒé’±åŒ…æ˜¯å¦å·²å­˜åœ¨,ä»¥åŠKeystoreæ˜¯å¦ä¸Žç§é’¥åŒ¹é…çš„é€»è¾‘ çœ‹ä¼¼è¿‡ç¨‹é‚£ä¹ˆå®Œç¾Ž,å…¶å®žå½“çœŸæ­£è¿ç”¨ä¸­å°±ä¼šå‘çŽ°ç¨‹åºèµ°åˆ°è¿™é‡Œç»å¸¸OOM! æŠ¥é”™ä¿¡æ¯æˆªå–å¦‚ä¸‹: 12345at org.spongycastle.crypto.generators.SCrypt.SMix(SCrypt.java:143)at org.spongycastle.crypto.generators.SCrypt.MFcrypt(SCrypt.java:87)at org.spongycastle.crypto.generators.SCrypt.generate(SCrypt.java:66)at org.web3j.crypto.Wallet.generateDerivedScryptKey(Wallet.java:136)at org.web3j.crypto.Wallet.decrypt(Wallet.java:214) è¿›ä¸€æ­¥è°ƒè¯•å‘çŽ°,æ˜¯å› ä¸ºå½“Nè¿‡å¤§æ—¶, org.spongycastle.crypto.generators.SCrypt.SMix(..)æ–¹æ³•é‡Œçš„ 124 è¡Œå·¦å³ 12345for (int i = 0; i &lt; N; ++i)&#123; V[i] = Arrays.clone(X); ...&#125; è¿™é‡Œä¸åœåœ°clone,å¯¼è‡´äº†å†…å­˜æº¢å‡ºCrash . è¯´åˆ°è¿™é‡Œ,ä¸å¾—ä¸è¯´ä¸€ä¸‹åˆ›å»ºé’±åŒ…æ—¶,æˆ‘ä»¬çš„é€‰æ‹© 1Wallet.createLight(password, keyPair) è¿™é‡Œä½¿ç”¨çš„æ˜¯åˆ›å»ºè½»é‡çº§é’±åŒ…,å…¶åŽŸå§‹è°ƒç”¨ä¸º 1public static WalletFile create(String password, ECKeyPair ecKeyPair, int n, int p) è¿™é‡Œçš„N ,P æ˜¯å¯ä»¥è‡ªå®šä¹‰èµ‹å€¼çš„,å…¶æ„ä¹‰å¯è‡ªè¡Œgoogleä¸‹.ç®€å•åœ°æ¥è¯´,Nè¶Šå¤§,é’±åŒ…åŠ å¯†ç¨‹åº¦è¶Šé«˜. å½“æˆ‘ä»¬åˆ›å»ºé’±åŒ…æ˜¯è°ƒç”¨çš„createLight(...) , è€Œä»Ž imToken åˆ›å»ºçš„é’±åŒ…æ˜¯é‡‡ç”¨çš„è‡ªå®šä¹‰å¤§äºŽæˆ‘ä»¬â€™è½»é‡â€™çš„æ ‡å‡†çš„,å› æ­¤ä»Ž imTokenä¸­åˆ›å»ºçš„é’±åŒ…å¯¼å‡ºKeystore,å†åœ¨æˆ‘ä»¬çš„é’±åŒ…ä¸­å¯¼å…¥,è°ƒç”¨ä¸Šè¿°web3jçš„ Wallet.decrypt(...) åŸºæœ¬ä¼šOOM Crash. å¯ä»¥åœ¨ web3j Issues ä¸­æœåˆ°å¤§é‡ç›¸å…³çš„é—®é¢˜ , è§£ç­”åŸºæœ¬æ˜¯è¯´ä¾èµ–åº“ä¸å…¼å®¹Androidå¯¼è‡´çš„ . è¿™é‡Œå°±å‡å°‘é“å‹ä»¬ç»•åœˆå­çš„æ—¶é—´äº†,ç›´æŽ¥æä¾›ä¸ªå¯è¡Œçš„è§£å†³æ–¹æ¡ˆ. Link: Out Of Memory exception when using web3j in Android å°±æ˜¯æˆ‘ä»¬éœ€è¦ä¿®æ”¹éƒ¨åˆ†æ–¹æ³•. OOMä¼˜åŒ–è¿™é‡Œéœ€è¦ä¾èµ– 1implementation 'com.lambdaworks:scrypt:1.4.0' ç„¶åŽä¿®æ”¹è§£å¯†æ–¹æ³• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public static ECKeyPair decrypt(String password, WalletFile walletFile) throws CipherException &#123; validate(walletFile); WalletFile.Crypto crypto = walletFile.getCrypto(); byte[] mac = Numeric.hexStringToByteArray(crypto.getMac()); byte[] iv = Numeric.hexStringToByteArray(crypto.getCipherparams().getIv()); byte[] cipherText = Numeric.hexStringToByteArray(crypto.getCiphertext()); byte[] derivedKey; if (crypto.getKdfparams() instanceof WalletFile.ScryptKdfParams) &#123; WalletFile.ScryptKdfParams scryptKdfParams = (WalletFile.ScryptKdfParams) crypto.getKdfparams(); int dklen = scryptKdfParams.getDklen(); int n = scryptKdfParams.getN(); int p = scryptKdfParams.getP(); int r = scryptKdfParams.getR(); byte[] salt = Numeric.hexStringToByteArray(scryptKdfParams.getSalt());// derivedKey = generateDerivedScryptKey(password.getBytes(Charset.forName("UTF-8")), salt, n, r, p, dklen); derivedKey = com.lambdaworks.crypto.SCrypt.scryptN(password.getBytes(Charset.forName("UTF-8")), salt, n, r, p, dklen); &#125; else if (crypto.getKdfparams() instanceof WalletFile.Aes128CtrKdfParams) &#123; WalletFile.Aes128CtrKdfParams aes128CtrKdfParams = (WalletFile.Aes128CtrKdfParams) crypto.getKdfparams(); int c = aes128CtrKdfParams.getC(); String prf = aes128CtrKdfParams.getPrf(); byte[] salt = Numeric.hexStringToByteArray(aes128CtrKdfParams.getSalt()); derivedKey = generateAes128CtrDerivedKey( password.getBytes(Charset.forName("UTF-8")), salt, c, prf); &#125; else &#123; throw new CipherException("Unable to deserialize params: " + crypto.getKdf()); &#125; byte[] derivedMac = generateMac(derivedKey, cipherText); if (!Arrays.equals(derivedMac, mac)) &#123; throw new CipherException("Invalid password provided"); &#125; byte[] encryptKey = Arrays.copyOfRange(derivedKey, 0, 16); byte[] privateKey = performCipherOperation(Cipher.DECRYPT_MODE, iv, encryptKey, cipherText); return ECKeyPair.create(privateKey); &#125; æ³¨é‡Šçš„ä»£ç è¡Œä¸º web3j ä¸­çš„å†…å®¹ ,åˆ°äº†è¿™é‡Œæˆ‘ä»¬è¿˜éœ€è¦å¯¼å…¥ç›¸åº”çš„soåº“,æˆ‘ä»¬åœ¨src/mainä¸‹åˆ›å»ºjniLibs,æŽ¥ç€æ”¾å…¥å¯¹åº”å¹³å°so å…¨éƒ¨soç¬”è€…å·²ä¸Šä¼ åˆ° Android scrypt so çŽ°åœ¨è°ƒç”¨çš„æ˜¯ä¿®æ”¹åŽçš„æ–¹æ³• LWallet.decrypt(...) 1234567891011121314151617181920public Flowable&lt;HLWallet&gt; importKeystore(Context context, String keystore, String password) &#123; return Flowable.just(keystore) .flatMap(s -&gt; &#123; ObjectMapper objectMapper = new ObjectMapper(); WalletFile walletFile = objectMapper.readValue(keystore, WalletFile.class); ECKeyPair keyPair = LWallet.decrypt(password, walletFile); HLWallet hlWallet = new HLWallet(walletFile); WalletFile generateWalletFile = Wallet.createLight(password, keyPair); if (!generateWalletFile.getAddress().equalsIgnoreCase(walletFile.getAddress())) &#123; return Flowable.error(new HLError(ReplyCode.failure, new Throwable("address doesn't match private key"))); &#125; if (WalletManager.shared().isWalletExist(hlWallet.getAddress())) &#123; return Flowable.error(new HLError(ReplyCode.walletExisted, new Throwable("Wallet existed!"))); &#125; WalletManager.shared().saveWallet(context, hlWallet); return Flowable.just(hlWallet); &#125;);&#125; Other FAQåœ¨å¼€å‘ä¸­, æ€»æ˜¯ä¼šæœ‰è¿™æ ·é‚£æ ·çš„ç–‘é—®,è¿™é‡Œåšä¸€ä¸ªç®€å•çš„ç­”ç–‘ Q. æ€Žä¹ˆå¯¼å‡ºåŠ©è®°è¯å•Š , imToken æœ‰å¯¼å‡º/å¤‡ä»½åŠ©è®°è¯çš„åŠŸèƒ½ . A. å¾ˆå¥½çš„é—®é¢˜. å…¶å®žå°±æ˜¯åˆ›å»º/ç”¨åŠ©è®°è¯è§£é”é’±åŒ…æ—¶,appæœ¬åœ°ä¿å­˜äº†åŠ©è®°è¯.å¯¼å‡ºåªæ˜¯å°†å­˜å‚¨æ•°æ®è¯»å–å‡ºæ¥è€Œå·².å¯ä»¥å°è¯•åœ¨imTokenä¸Šé€šè¿‡å¯¼å…¥Keystoreæˆ–è€…ç§é’¥è§£é”é’±åŒ…,å°±ä¼šå‘çŽ°æ²¡æœ‰å¤‡ä»½åŠ©è®°è¯çš„å…¥å£. Q. appæœ¬åœ°éœ€è¦ä¿å­˜é’±åŒ…ä»€ä¹ˆä¿¡æ¯ A. ç†è®ºä¸Šè¯´åªéœ€è¦ä¿å­˜é’±åŒ…çš„Keystore.åŠ©è®°è¯,ç§é’¥æœ€å¥½åˆ«å­˜,å› ä¸ºappä¸€æ—¦è¢«ç ´è§£,ç”¨æˆ·çš„é’±åŒ…å°±èƒ½è¢«ç›´æŽ¥èŽ·å–åˆ°.å¦‚è‹¥æœ‰å‡ºäºŽç”¨æˆ·ä½“éªŒç­‰åŽŸå› ä¿å­˜è¿™äº›æ•æ„Ÿä¿¡æ¯,æœ€å¥½ç»“åˆç”¨æˆ·è¾“å…¥çš„å¯†ç åšå¯¹ç§°åŠ å¯†ä¿å­˜. â€¦ ä»¥ä¸Šå³ä¸ºä»¥å¤ªåŠè§£é”é’±åŒ…çš„ä¸»è¦å†…å®¹,è¿‡ç¨‹ä¸­çš„å‘åŸºæœ¬æœ‰æ˜¾å¼æŒ‡æ˜Ž. GitHub ç³»åˆ—æ•™ç¨‹ä»£ç å·²ä¸Šä¼ ,å¦‚æžœå¯¹ä½ æœ‰æ‰€å¸®åŠ©,è¯·ä¸åç‚¹ä¸ªstar :)]]></content>
      <categories>
        <category>Blockchain</category>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Ethereum</tag>
        <tag>Blockchain</tag>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŒºå—é“¾-ETHåˆ›å»ºé’±åŒ…]]></title>
    <url>%2Fblockchain-eth-wallet-android%2F</url>
    <content type="text"><![CDATA[ç¦»ä¸Šç¯‡æ–‡ç« æ›´æ–°å·²ç»æŽ¥è¿‘ä¸¤ä¸ªæœˆäº†,ä¸»è¦ç”±äºŽå·¥ä½œé‡å¿ƒè½¬ç§»åˆ°äº†åŒºå—é“¾DApp.ä»Žæ— åˆ°æœ‰åŽ»å®Œæˆä¸€æ¬¾é’±åŒ…+åŽ»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ DApp ç›®å‰è¿™æ¬¾ app Androidå’ŒiOS å¤„äºŽå…¬æµ‹ä¸­, å¾…ä¸Šçº¿åŽä¼šå°†ä»£ç è¿›è¡Œå¼€æº.ç¬”è€…è®¡åˆ’æ˜¯å¯¹ä»¥å¤ªåŠé’±åŒ…çš„åˆ›å»º,å¯¼å…¥,æ™ºèƒ½åˆçº¦è°ƒç”¨ç­‰è¿›è¡Œç³»åˆ—æ•™ç¨‹,æœ¬æ–‡å…ˆå¯¹åŒºå—é“¾çš„åŸºæœ¬æ¦‚å¿µåŠä»¥å¤ªåŠé’±åŒ…åˆ›å»ºç­‰è¿›è¡Œè¯´æ˜Ž. ä¸ºäº†è‰¯å¥½çš„é˜…è¯»ä½“éªŒ, è¯·ç‚¹å‡»é˜…è¯»åŽŸæ–‡ åŸºæœ¬æ¦‚å¿µæ‰€æœ‰é—®é¢˜å¤§ä½“å¯ä»¥åˆ†ä¸ºä¸‰ç±»:åŒºå—é“¾åŸºæœ¬æ¦‚å¿µ,é’±åŒ…å®‰å…¨çŸ¥è¯†ä»¥åŠé’±åŒ…è½¬è´¦äº¤æ˜“ åŒºå—é“¾çš„åŸºæœ¬ç‰¹æ€§åŽ»ä¸­å¿ƒåŒ– å› ä¸ºæ•´ä¸ªç½‘ç»œæ²¡æœ‰ä¸­å¿ƒç»Ÿæ²»è€…ã€‚ç³»ç»Ÿä¾é çš„æ˜¯ç½‘ç»œä¸Šå¤šä¸ªå‚ä¸Žè€…çš„å…¬å¹³çº¦æŸï¼Œæ‰€ä»¥ä»»æ„æ¯å‡ ä¸ªèŠ‚ç‚¹çš„æƒåˆ©å’Œä¹‰åŠ¡éƒ½æ˜¯å‡ç­‰çš„ï¼Œè€Œä¸”æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¼šå‚¨å­˜è¿™ä¸ªåŒºå—é“¾ä¸Šæ‰€æœ‰æ•°æ®ã€‚å³ä½¿è¯¥èŠ‚ç‚¹è¢«æŸåæˆ–é­å—æ”»å‡»ï¼Œä»ç„¶ä¸ä¼šå¯¹è´¦ç°¿é€ æˆä»»ä½•å¨èƒã€‚ ä¸å¯é€† åŒºå—é“¾ä¸Šçš„ä¿¡æ¯å¿…é¡»ä¸å¯æ’¤é”€ï¼Œä¸èƒ½éšæ„é”€æ¯ã€‚ç³»ç»Ÿæ˜¯å¼€æºçš„ï¼Œæ•´ä¸ªç³»ç»Ÿéƒ½å¿…é¡»æ˜¯å…¬å¼€é€æ˜Žçš„ï¼Œå› æ­¤æŸç¬”äº¤æ˜“è¢«å…¨ç½‘å¹¿æ’­ä»¥åŽï¼Œè¾¾åˆ° 6 ä¸ªç¡®è®¤ä»¥ä¸Šå°±æˆåŠŸè®°å½•åœ¨æ¡ˆäº†ï¼Œä¸”ä¸å¯é€†è½¬ä¸å¯æ’¤é”€ã€‚æ³¨: imToken æ˜¯ 12 ä¸ªåŒºå—ç¡®è®¤ã€‚ ä¸å¯ç¯¡æ”¹ ç¡®ä¿ä¿¡æ¯æˆ–åˆçº¦æ— æ³•ä¼ªé€ ã€‚è´¦ç°¿åœ¨æŸä¸ªäººæˆ–æŸå‡ äººæ‰‹ä¸Šï¼Œé€ å‡çš„å¯èƒ½æ€§å°±éžå¸¸é«˜ï¼Œä½†æ¯ä¸ªäººæ‰‹é‡Œéƒ½æœ‰ä¸€æœ¬è´¦ç°¿ï¼Œé™¤éžæ•´ä¸ªæ¸¸æˆé‡Œè¶…è¿‡51%çš„äººéƒ½æ›´æ”¹æŸä¸€ç¬”è´¦ç›®ï¼Œå¦åˆ™ä»»ä½•çš„ç¯¡æ”¹éƒ½æ˜¯æ— æ•ˆçš„ï¼Œè¿™ä¹Ÿæ˜¯é›†ä½“ç»´æŠ¤å’Œç›‘ç£çš„ä¼˜è¶Šæ€§ã€‚ åŒ¿åæ€§ å„åŒºå—èŠ‚ç‚¹çš„èº«ä»½ä¿¡æ¯ä¸éœ€è¦å…¬å‘Šæˆ–éªŒè¯, ä¿¡æ¯ä¼ é€’å¯ä»¥åŒ¿åè¿›è¡Œã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­, å°±æ˜¯ä½ åœ¨åŒºå—é“¾ä¸Šå‘ä¸€ä¸ªé’±åŒ…åœ°å€å‘èµ·äº¤æ˜“, ä½†æ˜¯å´æ— æ³•çŸ¥é“è¿™ä¸ªåœ°å€èƒŒåŽç¡®åˆ‡å¯¹åº”çš„æ˜¯é‚£ä¸€ä¸ªäºº, æˆ–è€…ä½ çš„ç§é’¥è¢«æŸä¸€ä¸ªé»‘å®¢ç›—çªƒäº†, æ— æ³•ä»Žä¸€ä¸ªé’±åŒ…åœ°å€ä¸­å¾—çŸ¥é»‘å®¢æ˜¯è°ã€‚ ä»¥å¤ªåŠåŸºæœ¬æ¦‚å¿µé’±åŒ…åœ°å€ ä»¥0xå¼€å¤´çš„42ä½çš„å“ˆå¸Œå€¼ (16è¿›åˆ¶) å­—ç¬¦ä¸² keystore æ˜Žæ–‡ç§é’¥é€šè¿‡åŠ å¯†ç®—æ³•åŠ å¯†è¿‡åŽçš„ JSON æ ¼å¼çš„å­—ç¬¦ä¸², ä¸€èˆ¬ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨ åŠ©è®°è¯ 12 (æˆ–è€… 15ã€18ã€21) å•è¯æž„æˆ, ç”¨æˆ·å¯ä»¥é€šè¿‡åŠ©è®°è¯å¯¼å…¥é’±åŒ…, ä½†åè¿‡æ¥è®², å¦‚æžœä»–äººå¾—åˆ°äº†ä½ çš„åŠ©è®°è¯, ä¸éœ€è¦ä»»ä½•å¯†ç å°±å¯ä»¥è½»è€Œæ˜“ä¸¾çš„è½¬ç§»ä½ çš„èµ„äº§, æ‰€ä»¥è¦å¦¥å–„ä¿ç®¡è‡ªå·±çš„åŠ©è®°è¯ æ˜Žæ–‡ç§é’¥ 64ä½çš„16è¿›åˆ¶å“ˆå¸Œå€¼å­—ç¬¦ä¸², ç”¨ä¸€å¥è¯é˜è¿°æ˜Žæ–‡ç§é’¥çš„é‡è¦æ€§ â€œè°æŽŒæ¡äº†ç§é’¥, è°å°±æŽŒæ¡äº†è¯¥é’±åŒ…çš„ä½¿ç”¨æƒ!â€ åŒæ ·, å¦‚æžœä»–äººå¾—åˆ°äº†ä½ çš„æ˜Žæ–‡ç§é’¥, ä¸éœ€è¦ä»»ä½•å¯†ç å°±å¯ä»¥è½»è€Œæ˜“ä¸¾çš„è½¬ç§»ä½ çš„èµ„äº§ é€šä¿—åœ°åŽ»è§£é‡Š,ä»¥é“¶è¡Œè´¦æˆ·ä¸ºç±»æ¯”,è¿™äº›åè¯åˆ†åˆ«å¯¹åº”å†…å®¹å¦‚ä¸‹: é’±åŒ…åœ°å€ = é“¶è¡Œå¡å· å¯†ç  = é“¶è¡Œå¡å¯†ç  ç§é’¥ = é“¶è¡Œå¡å· + é“¶è¡Œå¡å¯†ç  åŠ©è®°è¯ = é“¶è¡Œå¡å· + é“¶è¡Œå¡å¯†ç  Keystore+ å¯†ç  = é“¶è¡Œå¡å· + é“¶è¡Œå¡å¯†ç  Keystore â‰  é“¶è¡Œå¡å· Note: æ­¤å°èŠ‚å¤§éƒ¨åˆ†å†…å®¹æ‘˜è‡ª imToken æµ‹è¯„é€šå…³æ”»ç•¥ BIP32,BIP39,BIP44åœ¨åˆ›å»ºé’±åŒ…å‰,å¾—å…ˆè¯´ä¸‹BIP32,BIP39,BIP44 BIP å…¨åæ˜¯ Bitcoin Improvement Proposalsï¼Œæ˜¯æå‡º Bitcoin çš„æ–°åŠŸèƒ½æˆ–æ”¹è¿›æŽªæ–½çš„æ–‡ä»¶ã€‚å¯ç”±ä»»ä½•äººæå‡ºï¼Œç»è¿‡å®¡æ ¸åŽå…¬å¸ƒåœ¨ bitcoin/bips ä¸Šã€‚BIP å’Œ Bitcoin çš„å…³ç³»ï¼Œå°±åƒæ˜¯ RFC ä¹‹äºŽ Internetã€‚ è€Œå…¶ä¸­çš„ BIP32, BIP39, BIP44 å…±åŒå®šä¹‰äº†ç›®å‰è¢«å¹¿æ³›ä½¿ç”¨çš„ HD Walletï¼ŒåŒ…å«å…¶è®¾è®¡åŠ¨æœºå’Œç†å¿µã€å®žä½œæ–¹å¼ã€å®žä¾‹ç­‰ã€‚ BIP32 å®šä¹‰ Hierarchical Deterministic wallet (ç®€ç§° â€œHD Walletâ€)ï¼Œæ˜¯ä¸€ä¸ªç³»ç»Ÿå¯ä»¥ä»Žå•ä¸€ä¸ª seed äº§ç”Ÿä¸€æ ‘çŠ¶ç»“æž„å‚¨å­˜å¤šç»„ keypairsï¼ˆç§é’¥å’Œå…¬é’¥ï¼‰ã€‚å¥½å¤„æ˜¯å¯ä»¥æ–¹ä¾¿çš„å¤‡ä»½ã€è½¬ç§»åˆ°å…¶ä»–ç›¸å®¹è£…ç½®ï¼ˆå› ä¸ºéƒ½åªéœ€è¦ seedï¼‰ï¼Œä»¥åŠåˆ†å±‚çš„æƒé™æŽ§åˆ¶ç­‰ BIP39 å°† seed ç”¨æ–¹ä¾¿è®°å¿†å’Œä¹¦å†™çš„å•å­—è¡¨ç¤ºã€‚ä¸€èˆ¬ç”± 12 ä¸ªå•å­—ç»„æˆï¼Œç§°ä¸º mnemonic code(phrase)ï¼Œä¸­æ–‡ç§°ä¸ºåŠ©è®°è¯æˆ–åŠ©è®°ç ã€‚ä¾‹å¦‚ 1rose rocket invest real refuse margin festival danger anger border idle brown BIP44 åŸºäºŽ BIP32 çš„ç³»ç»Ÿï¼Œèµ‹äºˆæ ‘çŠ¶ç»“æž„ä¸­çš„å„å±‚ç‰¹æ®Šçš„æ„ä¹‰ã€‚è®©åŒä¸€ä¸ª seed å¯ä»¥æ”¯æ´å¤šå¸ç§ã€å¤šå¸æˆ·ç­‰ã€‚å„å±‚å®šä¹‰å¦‚ä¸‹: 1m / purpose&apos; / coin_type&apos; / account&apos; / change / address_index å…¶ä¸­çš„ purporse&#39; å›ºå®šæ˜¯ 44&#39;ï¼Œä»£è¡¨ä½¿ç”¨ BIP44ã€‚è€Œ coin_type&#39; ç”¨æ¥è¡¨ç¤ºä¸åŒå¸ç§ï¼Œä¾‹å¦‚ Bitcoin å°±æ˜¯ 0&#39;ï¼ŒEthereum æ˜¯ 60&#39; Ethereum HD Wallet Ethereum çš„é’±åŒ…ç›®å‰å‡é‡‡ç”¨ä»¥ä¸Š Bitcoin HD Wallet çš„æž¶æž„ï¼Œå¹¶è®¢ coin_type&#39; ä¸º 60&#39;ï¼Œå¯ä»¥åœ¨ ethereum/EIPs/issues ä¸­çœ‹åˆ°ç›¸å…³çš„è®¨è®ºã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨ä¸€ä¸ª Ethereum HD Wallet ä¸­ï¼Œç¬¬ä¸€ä¸ªå¸æˆ·ï¼ˆè¿™é‡Œçš„å¸æˆ·æŒ‡ BIP44 ä¸­å®šä¹‰çš„ account&#39;ï¼‰çš„ç¬¬ä¸€ç»„ keypairï¼Œå…¶è·¯å¾„ä¼šæ˜¯ m/44&#39;/60&#39;/0&#39;/0/0 åˆ›å»ºé’±åŒ…åœ¨äº†è§£BIP åŽ,æˆ‘ä»¬å¼€å§‹ä»¥å¤ªåŠé’±åŒ…å¼€å‘,åˆ›å»ºçš„é’±åŒ…çš„æµç¨‹ä¸º: éšæœºç”Ÿæˆä¸€ç»„åŠ©è®°è¯ ç”Ÿæˆ seed ç”Ÿæˆ master key ç”Ÿæˆ child key æˆ‘ä»¬å–ç¬¬ä¸€ç»„child keyå³m/44&#39;/60&#39;/0&#39;/0/0 å¾—åˆ°ç§é’¥,keystoreåŠåœ°å€ bitcoinjè¿™é‡Œæˆ‘ä»¬éœ€è¦é…ç½®å¼€å‘çŽ¯å¢ƒ,é€šå¸¸Android å¼€å‘ä»¥å¤ªåŠé’±åŒ…,ä¼šä¾èµ–ä¸¤ä¸ªåº“ bitcoinj , web3j bitcoinj ä¸»è¦ç”¨æ¥å®žçŽ°BIP32å’ŒBIP44 , web3j å®žçŽ°BIP39å’Œé’±åŒ…åŠŸèƒ½ . 12implementation 'org.web3j:core:3.3.1-android'implementation 'org.bitcoinj:bitcoinj-core:0.14.7' ä¸è¿‡web3jåœ¨ç”ŸæˆåŠ©è®°è¯ä¸­éœ€è¦ä½¿ç”¨åˆ°MnemonicUtils,ä½†æ˜¯æœ‰å‘,åŠ è½½åŠ©è®°è¯åˆ—è¡¨æ–‡ä»¶çš„æ–¹å¼åœ¨Androidä¸Šä¸è¡Œ,ä¼šå¯¼è‡´Crash 123456789private static List&lt;String&gt; populateWordList() &#123; URL url = Thread.currentThread().getContextClassLoader() .getResource("en-mnemonic-word-list.txt"); try &#123; return readAllLines(url.toURI().getSchemeSpecificPart()); &#125; catch (Exception e) &#123; return Collections.emptyList(); &#125; &#125; è¿™æ˜¯Javaçš„åŠ è½½æ–¹å¼,Androidä¸Šéœ€è¦åšå¹³å°é€‚é…,éœ€è¦å°†en-mnemonic-word-list.txtæ–‡ä»¶æ”¾åˆ°assetsç›®å½•ä¸‹åŠ è½½. ä»¥ä¸‹ç¬”è€…åˆ™ä½¿ç”¨äº†å¦ä¸€ä¸ªBIP39çš„ä¾èµ–åº“ 1implementation 'io.github.novacrypto:BIP39:0.1.9' æœ¬ç¯‡åœ¨ä½¿ç”¨ä¸­è¿˜ç”¨åˆ°äº†RxJava2 1 1234567891011private Flowable&lt;String&gt; mnemonics() &#123; // 1. ç”Ÿæˆä¸€ç»„éšæœºçš„åŠ©è®°è¯ StringBuilder sb = new StringBuilder(); byte[] entropy = new byte[Words.TWELVE.byteLength()]; new SecureRandom().nextBytes(entropy); new MnemonicGenerator(English.INSTANCE) .createMnemonic(entropy, sb::append); String mnemonics = sb.toString(); Logger.w("åŠ©è®°è¯:" + mnemonics); return Flowable.just(mnemonics);&#125; 2~5 123456789101112131415161718192021222324252627282930313233public Flowable&lt;HLWallet&gt; generateWallet(Context context, String walletName, String password) &#123; Flowable&lt;String&gt; flowable = mnemonics(); return flowable .map(mnemonics -&gt; &#123; // 2. ç”±åŠ©è®°è¯å¾—åˆ°ç§å­ byte[] seed = new SeedCalculator().calculateSeed(mnemonics, ""); NetworkParameters params = MainNetParams.get(); // 3. ç”Ÿæˆæ ¹ç§é’¥ root private key DeterministicKey rootPrivateKey = HDKeyDerivation.createMasterPrivateKey(seed); // 4. æ ¹ç§é’¥è¿›è¡Œ priB58ç¼–ç ,å¾—åˆ°æµ‹è¯•ç½‘ç«™ä¸Šæ˜¾ç¤ºçš„æ•°æ® String priv = rootPrivateKey.serializePrivB58(params); Logger.i("BIP32 Extended Private Key:" + priv); // 5. ç”Ÿæˆ HD é’±åŒ… , ç”±æ ¹ç§é’¥ DeterministicHierarchy dh = new DeterministicHierarchy(rootPrivateKey); // 6. å®šä¹‰çˆ¶è·¯å¾„ List&lt;ChildNumber&gt; parentPath = HDUtil.parsePath(); // 7. ç”±çˆ¶è·¯å¾„,æ´¾ç”Ÿå‡ºç¬¬ä¸€ä¸ªå­ç§é’¥ "new ChildNumber(0)" è¡¨ç¤ºç¬¬ä¸€ä¸ª DeterministicKey child = dh.deriveChild(parentPath, true, true, new ChildNumber(0)); Logger.w(" BIP32 Extended private Key:" + child.serializePrivB58(params)); String childPrivateKey = child.getPrivateKeyAsHex(); String childPublicKey = child.getPublicKeyAsHex(); ECKeyPair childEcKeyPair = ECKeyPair.create(child.getPrivKeyBytes()); String childAddress = Keys.getAddress(childEcKeyPair); String fullAddress = Constant.PREFIX_16 + childAddress; Logger.w("child privateKey:" + childPrivateKey + "\n" + "child publicKey:" + childPublicKey + "\n" + "address:" + fullAddress); WalletFile walletFile = org.web3j.crypto.Wallet.createLight(password, childEcKeyPair); String keystore = Singleton.get().gson.toJson(walletFile); Logger.w("keystore:\n" + keystore); WalletManager.shared().saveWallet(context, walletName, walletFile, mnemonics); return new HLWallet(mnemonics, walletName, childAddress); &#125;);&#125; Note: è¿™é‡Œæœ‰ä¸ªæ³¨æ„ç‚¹,byte[] seed = new SeedCalculator().calculateSeed(mnemonics, &quot;&quot;)è¿™é‡Œçš„â€â€æ˜¯BIP39çš„å¯†ç .å°‘æ•°å¹³å°ç”Ÿæˆé’±åŒ…ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„å¯†ç ä½œä¸ºå…¶å¯†ç ,è¿™å°†ä½¿å¾—é’±åŒ…ä¸èƒ½é€šç”¨.ç›®å‰å¤§å¤šå¹³å°ç”Ÿæˆé’±åŒ…æ—¶å¯¹å…¶è®¾ç½®å‡ä¸ºç©ºå­—ç¬¦ä¸². å…³äºŽbitcoinjçš„ä½¿ç”¨æ¯”è¾ƒä¸åšèµ˜è¿°äº†.ä»¥ä¸Šå·²ç»è´´äº†ä¸»è¦çš„ä»£ç ,ä¸‹é¢æˆ‘ä»¬ä¸»è¦è®²è§£ä¸€ä¸‹å…¶ä»–å®žçŽ° novacryptoè¿™é‡Œä½¿ç”¨novacryptoä½œè€…çš„BIPå…¨å®¶æ¡¶,æˆ‘ä»¬é‡ç‚¹è®²è§£ä¸‹è¿™ç§å®žçŽ° 1234implementation 'io.github.novacrypto:BIP39:0.1.9'implementation 'io.github.novacrypto:BIP44:0.0.3'//implementation 'io.github.novacrypto:BIP32:0.0.9' // æœ‰å°‘è®¸é—®é¢˜implementation 'com.lhalcyon:bip32:1.0.0' // ä¸Šé¢çš„BIP32æœ‰å°‘è®¸é—®é¢˜,ç¬”è€…åšäº†ä¸€äº›ä¿®æ”¹,å·²ç»ä¸Šä¼ lib å…¶ä¸­ä½œè€…çš„BIP32åº“è¿˜æœ‰äº›è®¸é—®é¢˜, å¤§å®¶å¯ä»¥ä½¿ç”¨æ–‡æœ« demo ä¸­çš„ BIP32 lib,ç¬”è€…å¯¹å…¶åšäº†éƒ¨åˆ†ä¿®æ”¹. 1 . éšæœºç”Ÿæˆä¸€ç»„åŠ©è®°è¯,è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯12ä¸ªè‹±æ–‡å•è¯ 12345678public String generateMnemonics() &#123; StringBuilder sb = new StringBuilder(); byte[] entropy = new byte[Words.TWELVE.byteLength()]; new SecureRandom().nextBytes(entropy); new MnemonicGenerator(English.INSTANCE) .createMnemonic(entropy, sb::append); return sb.toString();&#125; 2 . ä½¿ç”¨åŠ©è®°è¯è®¡ç®—å‡ºSeed,å¾—åˆ°master key ,æ ¹æ®BIP44æ´¾ç”Ÿåœ°å€,èŽ·å–KeyPair 1234567891011121314151617181920212223242526272829303132333435public ECKeyPair generateKeyPair(String mnemonics)&#123; // 1. we just need eth wallet for now AddressIndex addressIndex = BIP44 .m() .purpose44() .coinType(60) .account(0) .external() .address(0); // 2. calculate seed from mnemonics , then get master/root key ; Note that the bip39 passphrase we set "" for common ExtendedPrivateKey rootKey = ExtendedPrivateKey.fromSeed(new SeedCalculator().calculateSeed(mnemonics, ""), Bitcoin.MAIN_NET); Logger.i("mnemonics:" + mnemonics); String extendedBase58 = rootKey.extendedBase58(); Logger.i("extendedBase58:" + extendedBase58); // 3. get child private key deriving from master/root key ExtendedPrivateKey childPrivateKey = rootKey.derive(addressIndex, AddressIndex.DERIVATION); String childExtendedBase58 = childPrivateKey.extendedBase58(); Logger.i("childExtendedBase58:" + childExtendedBase58); // 4. get key pair byte[] privateKeyBytes = childPrivateKey.getKey(); ECKeyPair keyPair = ECKeyPair.create(privateKeyBytes); // we 've gotten what we need String privateKey = childPrivateKey.getPrivateKey(); String publicKey = childPrivateKey.neuter().getPublicKey(); String address = Keys.getAddress(keyPair); Logger.i("privateKey:"+privateKey); Logger.i("publicKey:"+publicKey); Logger.i("address:"+ Constant.PREFIX_16+address); return keyPair;&#125; è¿™é‡Œå¯ä»¥æ¸…æ™°çœ‹å‡º,æˆ‘ä»¬å·²ç»å¯ä»¥å¾—åˆ°ç§é’¥,å…¬é’¥,åœ°å€. å½“å‰çš„é’±åŒ…appåŸºæœ¬ä¸Šéƒ½ç”¨æ‰€æœ‰å¸ç§å…¬ç”¨ä¸€å¥—åŠ©è®°è¯, ç„¶åŽå¯ä»¥åˆ†åˆ«ç”Ÿæˆä¸åŒçš„é’±åŒ…åœ°å€, å¦‚æžœéœ€è¦æµ‹è¯•åŠ©è®°è¯, å’Œæ ¡éªŒåŠ©è®°è¯ç”Ÿæˆçš„åœ°å€, é‚£ä¹ˆå¯ä»¥è®¿é—®è¿™ä¸ªç½‘ç«™ : https://iancoleman.io/bip39/ æˆ‘ä»¬éœ€è¦æ ¡éªŒçš„å€¼ä¸»è¦ä¸ºä»¥ä¸Šä»£ç å®žä¾‹ä¸­æ‰“å°æ—¥å¿—çš„å€¼. 3 . é€šè¿‡keypairåˆ›å»ºé’±åŒ… 1234567891011121314public Flowable&lt;HLWallet&gt; generateWallet(Context context, String password, String mnemonics) &#123; Flowable&lt;String&gt; flowable = Flowable.just(mnemonics); return flowable .map(s -&gt; &#123; ECKeyPair keyPair = generateKeyPair(s); WalletFile walletFile = Wallet.createLight(password, keyPair); HLWallet hlWallet = new HLWallet(walletFile); WalletManager.shared().saveWallet(context,hlWallet); return hlWallet; &#125;);&#125; å®Œæ•´è°ƒç”¨ 123456789101112131415Flowable .just(password) // ç”¨æˆ·è¾“å…¥çš„å¯†ç  .filter(o -&gt; validateInput(password,repassword)) // æ ¡éªŒå¯†ç  .map(s -&gt; InitWalletManager.shared().generateMnemonics())// ç”ŸæˆéšæœºåŠ©è®°è¯ .flatMap(s -&gt; InitWalletManager.shared().generateWallet(mContext,password,s))//åˆ›å»ºé’±åŒ… .compose(ScheduleCompat.apply()) // çº¿ç¨‹åˆ‡æ¢ .subscribe(new HLSubscriber&lt;HLWallet&gt;(mContext,true) &#123; @Override protected void success(HLWallet data) &#123; &#125; @Override protected void failure(HLError error) &#123; &#125; &#125;); ä»¥ä¸Šå³ä¸ºä»¥å¤ªåŠåˆ›å»ºé’±åŒ…çš„ä¸»è¦å†…å®¹.ä¸»è¦å…ˆç†è§£æ¦‚å¿µ,ç„¶åŽç€æ‰‹coding,äº‹åŠåŠŸå€. GitHub ç³»åˆ—æ•™ç¨‹ä»£ç å·²ä¸Šä¼ ,å¦‚æžœå¯¹ä½ æœ‰æ‰€å¸®åŠ©,è¯·ä¸åç‚¹ä¸ªstar!]]></content>
      <categories>
        <category>Blockchain</category>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Ethereum</tag>
        <tag>Blockchain</tag>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FlutteråŸºç¡€-(5)å¸ƒå±€ä¹‹å•å­widget]]></title>
    <url>%2Fflutter-layout-single%2F</url>
    <content type="text"><![CDATA[Flutter æœ‰ç€ä¸°å¯Œçš„å¸ƒå±€æŽ§ä»¶åº“ . Flutter ä¸­çš„å¸ƒå±€æ•´ä½“åˆ†ä¸º Single-child layout widget (å•å­å¸ƒå±€éƒ¨ä»¶) Multi-child layout widget (å¤šå­å¸ƒå±€éƒ¨ä»¶) æœ¬ç¯‡æˆ‘ä»¬å°†å¼€å§‹å­¦ä¹ å•å­å¸ƒå±€éƒ¨ä»¶ . ç±»ä¼¼äºŽ Android å­¦ä¹ ä¸­æœ‰äº”å¤§å¸ƒå±€, å¯æ˜¯åˆ°å®žé™…å¼€å‘ä¸­ , ç”¨åˆ°çš„æœ€å¤šçš„åªæœ‰çº¿æ€§å¸ƒå±€ã€ç›¸å¯¹å¸ƒå±€ã€å¸§å¸ƒå±€. Flutter å¸ƒå±€å•å­éƒ¨ä»¶å®˜ç½‘å­¦ä¹ æ–‡æ¡£åˆ—å°±æœ‰ 18 ç§ , åœ¨å®žé™…å¼€å‘ä¸­æœªå¿…èƒ½å…¨ç”¨åˆ° . ä¸ºäº†èŠ‚çœå­¦ä¹ æˆæœ¬ , å„ä½ç«¥éž‹å¯å…ˆé‡ç‚¹æŽŒæ¡ä¸€äºŒ , å…¶ä½™æµ…å°è¾„æ­¢å³å¯ . å…ˆæœ‰ä¸ªç®€å•çš„äº†è§£è®¤è¯† , å¾…åŽæœŸæœ‰é€‚åˆçš„åº”ç”¨åœºæ™¯æ—¶å†æ·±å…¥æŒ–æŽ˜ ðŸ˜ ä¸ºäº†æ›´å¥½çš„é˜…è¯»ä½“éªŒ , è¯·ç‚¹å‡» é˜…è¯»åŽŸæ–‡ :) Container(é‡ç‚¹)Container Widget å³å®¹å™¨ , æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„éƒ¨ä»¶ . å®˜æ–¹å¯¹å…¶å®šä¹‰å¦‚ä¸‹ : ä¸€ä¸ªæ–¹ä¾¿çš„å°éƒ¨ä»¶ , å®ƒç»“åˆäº†å¸¸è§çš„å¯¹å°éƒ¨ä»¶çš„ç»˜åˆ¶ã€å®šä½å’Œç¡®å®šå¤§å° ä¸€ä¸ª Container é¦–å…ˆæœ‰paddingå›´ç»•ç€å­éƒ¨ä»¶ (å›¾ä¸­æ·±ç»¿è‰²éƒ¨åˆ†) , å°†å®½é«˜ä½œä¸ºçº¦æŸ . ç„¶åŽ container è¢«é¢å¤–çš„ç©ºç™½æŽ§ä»¶å›´ç»•, å«åš margin. å…¶ç»˜åˆ¶é¡ºåºå¤§è‡´ä¸º: å…ˆåº”ç”¨ç»™å®šçš„å˜æ¢ transform ç„¶åŽç»˜åˆ¶ decoration å†ç»˜åˆ¶å­éƒ¨ä»¶ child æœ€åŽç»˜åˆ¶ foregroundDecoration transform æ˜¯æŒ‡å¯¹widgetåœ¨åŽŸæœ‰åŸºç¡€ä¸Šåšä¸€äº›ç±»ä¼¼æ—‹è½¬ã€å¹³ç§»ä¹‹ç±»çš„å˜æ¢ . decoration ä»¥åŠ foregroundDecoration æ˜¯éƒ¨ä»¶çš„ èƒŒæ™¯/å‰æ™¯ â€˜è£…é¥°â€™ , æ¯”å¦‚ç»˜åˆ¶éƒ¨ä»¶çš„è¾¹æ¡†,èƒŒæ™¯å›¾ç‰‡ç­‰éƒ½æ˜¯ decoration å’Œ foregroundDecorationä¸­è®¾ç½®çš„ .ä¸‹é¢æˆ‘ä»¬ç”¨ä¸€æ®µä»£ç æ¥è¯´æ˜Ž: 123456789101112131415161718192021222324252627282930class DemoContainer extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; var imgUrl = "https://ws1.sinaimg.cn/large/006tNc79gy1fpa5bvsqskj3044048mx5.jpg"; return new Container( padding: const EdgeInsets.all(16.0), // å†…è¾¹è· color: new Color(0xFFF2F2F2), // èƒŒæ™¯è‰² alignment: Alignment.center, //å­éƒ¨ä»¶å¯¹é½æ–¹å¼ child: new Container( // å­éƒ¨ä»¶ width: 400.0, //å®½ height: 400.0, //é«˜ // color ä¸Ž decoration äº’æ–¥ .å¦‚éœ€è®¾ç½®decoration å’Œ color , å¯åœ¨decorationä¸­è®¾ç½®color // color: Colors.blueGrey, padding: const EdgeInsets.all(16.0), alignment: Alignment.center, decoration: new BoxDecoration( color: Colors.blueGrey, border: new Border.all( color: Colors.blue, width: 8.0, ), image: new DecorationImage(image: new NetworkImage(imgUrl)) ), child: new Text('Halcyon',style: const TextStyle(color: Colors.blue,fontSize: 24.0),), ) ); &#125;&#125; æ•ˆæžœå›¾ : é¦–å…ˆå¯¼èˆªæ ä¸‹é¢æ•´ä¸ªæ˜¯ä¸€ä¸ªå†…è¾¹è·padding 16 çš„ç°è‰²(#F2F2F2)èƒŒæ™¯çš„Container , å…¶å”¯ä¸€å­éƒ¨ä»¶æ˜¯å±…ä¸­å¯¹é½çš„ . ç„¶åŽæˆ‘ä»¬ä¸»è¦è¯´æ˜Žçš„å°±æ˜¯è¿™ä¸ªå­éƒ¨ä»¶ , åŒæ ·æ˜¯ä¸ªContainer . è¿™ä¸ªå­ Container å®½é«˜å‡ä¸º400 , ä¹Ÿè®¾ç½®äº†å†…è¾¹è· padding 16 (ä¸è¿‡å›¾ä¸­æ²¡æœ‰è¡¨çŽ°å‡ºæ¥) .å…¶ decoration è®¾ç½®ä¸ºæ‹¥æœ‰å››å‘¨å®½åº¦ä¸º8çš„è“è‰²è¾¹æ¡† . å¹¶ä¸”æœ‰ä¸€ä¸ªè¡¨æƒ…åŒ…å›¾ç‰‡ä½œä¸ºå®¹å™¨èƒŒæ™¯ , ç”±äºŽæ²¡æŒ‡å®šå›¾ç‰‡æ‹‰ä¼¸æ–¹å¼ , æ­¤æ—¶å›¾ç‰‡ä»¥åŽŸå§‹å¤§å°å±…ä¸­æ˜¾ç¤º . åŒæ—¶è¿™ä¸ªå®¹å™¨æ‹¥æœ‰ä¸€ä¸ªå†…å®¹ä¸º â€˜Halcyonâ€™ çš„æ–‡æœ¬å­æŽ§ä»¶å±…ä¸­ . ç”±äºŽä»¥ä¸ŠæåŠçš„ Container ç»˜åˆ¶é¡ºåº , Containeræ˜¯å…ˆç»˜åˆ¶ decoration , å†child ,å†ç»˜åˆ¶ foregroundDecoration , å¦‚è‹¥æˆ‘ä»¬å°†ä»£ç ä¸­çš„ decoration æ¢æˆ foregroundDecoration , â€˜Halcyonâ€™ Textæ–‡æœ¬å°±ä¼šè¢« â€˜å‰æ™¯è£…é¥°â€™ ä¸­è®¾ç½®çš„å›¾ç‰‡è¦†ç›–äº†, ä¸å¯è§. å¸ƒå±€è¡Œä¸º å¸ƒå±€è¡Œä¸ºè¿™ä¸ªç±»ä¼¼ Android é‡ŒViewçš„ MeasureSpec é—®é¢˜ . å¯ä»¥å…ˆç®€å•è¿‡ä¸€é , ç­‰çœŸæ­£ä½¿ç”¨æ—¶, ç»“åˆå®žé™…ä¾‹å­è¿›è¡Œç†è§£. Container å¸ƒå±€è¡Œä¸ºé¡ºåº: éµä»Ž aligment æ ¹æ® å­éƒ¨ä»¶ child ç¡®è®¤è‡ªèº«å¤§å° éµä»Ž width , height , constraints æ‰©å±•ä»¥å¡«å……çˆ¶éƒ¨ä»¶ å°½å¯èƒ½çš„å° æ²¡æœ‰å­éƒ¨ä»¶çš„ Container ä¼šå°½å¯èƒ½çš„å¤§ , é™¤éžä¼ å…¥çš„çº¦æŸæ˜¯æ— ç•Œçš„ , è¿™ç§æƒ…å†µå®ƒä¼šå°½å¯èƒ½çš„å° . æœ‰å­éƒ¨ä»¶çš„ Container æ ¹æ®å­éƒ¨ä»¶æ¥ç¡®å®šå¤§å° , é€šè¿‡æž„é€ å‡½æ•°ä¼ å…¥çš„ width , height è¿˜æœ‰çº¦æŸä¼šå°†å…¶è¦†ç›– . å½“ç„¶è¿™æ®µè¯ç†è§£èµ·æ¥æœ‰ç‚¹æ¨¡ç³Š . æˆ‘ä»¬æ¥è¯´çš„å…·ä½“ç‚¹ . ä»¥ä¸‹ä¸º Container å„ç§æƒ…å†µä¸‹çš„å¤§å° 1. è‹¥å…¶æ— å­éƒ¨ä»¶ , æ— å®½é«˜ , æ²¡æœ‰çº¦æŸ . çˆ¶éƒ¨ä»¶æä¾›äº†æ— ç•Œçš„çº¦æŸ . Containerå°†å°½å¯èƒ½çš„å° . eg: 12345678@overrideWidget build(BuildContext context) &#123; return new UnconstrainedBox( child: new Container( color: Colors.blue, ) );&#125; æ­¤æ—¶ Containerå°†å°åˆ°ä¸å¯è§ 2. è‹¥å…¶æ— å­éƒ¨ä»¶ , æ— æŽ’åˆ— , ä½†æ˜¯æœ‰å®½é«˜æˆ–è€…çº¦æŸ , Container å°†ä¼šåœ¨ç»™å®šçº¦æŸåŠçˆ¶éƒ¨ä»¶çš„çº¦æŸç»“åˆä¸‹å°½å¯èƒ½çš„å°. eg: 1234567891011@overrideWidget build(BuildContext context) &#123; return new ConstrainedBox( constraints: new BoxConstraints(maxHeight: 50.0,minWidth: 200.0), child: new Container( width: 100.0, height: 100.0, color: Colors.blue, ) );&#125; æ­¤æ—¶ Containerå®½50é«˜200 3. è‹¥å…¶æ— å­éƒ¨ä»¶ , æ— å®½é«˜ , æ²¡æœ‰çº¦æŸ , æ²¡æœ‰æŽ’åˆ— , ä½†æ˜¯çˆ¶éƒ¨ä»¶æä¾›äº†æœ‰ç•Œçº¦æŸ . Containerå°†ä¼šæ‰©å±•è‡³é€‚åº”çˆ¶éƒ¨ä»¶æä¾›çš„çº¦æŸ. eg: 123456789@overrideWidget build(BuildContext context) &#123; return new ConstrainedBox( constraints: new BoxConstraints(maxHeight: 50.0,maxWidth: 50.0), child: new Container( color: Colors.blue, ) );&#125; æ­¤æ—¶ Containerå®½é«˜50 4. è‹¥å…¶æœ‰ alignment , è¿˜æœ‰çˆ¶éƒ¨ä»¶æä¾›çš„æ— ç•Œçº¦æŸ . Containerä¼šç¡®è®¤è‡ªèº«å¤§å°ä¸Žå­éƒ¨ä»¶æŽ¥è¿‘ eg: 12345678910111213@overrideWidget build(BuildContext context) &#123; return new UnconstrainedBox( child: new Container( color: Colors.blue, alignment: Alignment.center, child: new Container( width: 50.0, height: 50.0, ) ) );&#125; æ­¤æ—¶ Container ä¸Žå­ContaineråŒå¤§å°. 5. è‹¥å…¶æœ‰ alignment , è¿˜æœ‰çˆ¶éƒ¨ä»¶æä¾›çš„æœ‰ç•Œçº¦æŸ . Containerä¼šå°è¯•åŽ»æ‰©å±•ä»¥é€‚åº”çˆ¶éƒ¨ä»¶ , ç„¶åŽæŒ‰ç…§å¯¹é½æ–¹å¼æ”¾ç½®å­éƒ¨ä»¶. 6. è‹¥å…¶æœ‰å­éƒ¨ä»¶ , ä½†æ˜¯æ— å®½é«˜ ,çº¦æŸ ä»¥åŠå¯¹é½æ–¹å¼ , é‚£ä¹ˆ Container å°†çº¦æŸä»Žçˆ¶éƒ¨ä»¶ä¼ é€’ç»™å­éƒ¨ä»¶,å¹¶å°†è‡ªèº«å¤§å°ä¸Žå­éƒ¨ä»¶åŒ¹é… Paddingå¯ç»™å­éƒ¨ä»¶å†…åµŒè¾¹è·paddingçš„éƒ¨ä»¶ ä¸Ž Container å®¹å™¨è®¾ç½® padding å±žæ€§æ— å¤ªå¤§å·®åˆ«. eg: 123456789101112@overrideWidget build(BuildContext context) &#123; return new Container( color: Colors.blueGrey, child: new Padding( padding: new EdgeInsets.all(16.0), child: const Card(color: Colors.white, child: const Text('halcyon'), ), ), );&#125; Centerç½®å­éƒ¨ä»¶å±…ä¸­çš„éƒ¨ä»¶ eg: 123456789101112131415161718@overrideWidget build(BuildContext context) &#123; return new Container( width: 300.0, height: 300.0, color: Colors.grey, child: new Center( widthFactor: 1.0, // è®¾ç½®Center Widget çš„å®½ä¸ºchild widgetçš„å®½åº¦å€æ•° . eg: 1.0 ä»£è¡¨åŒå­æŽ§ä»¶å¤§å° heightFactor: 1.0, // åŒä¸Š , ä½œç”¨äºŽé«˜ child: new Container( child: const Text('Center Words'), color: Colors.lightBlue, ), ), );&#125; Alignåœ¨å†…éƒ¨å¯¹é½å­éƒ¨ä»¶çš„éƒ¨ä»¶, æ ¹æ®å­éƒ¨ä»¶å¤§å°å†³å®šè‡ªèº«å¤§å° 123456789@overrideWidget build(BuildContext context) &#123; return new Center( child: new Align( alignment: Alignment.centerRight, child: const Text('Halcyon',style: const TextStyle(color: Colors.blue ,fontSize: 24.0),), ), );&#125; â€˜Halcyonâ€™æ–‡æœ¬ä½äºŽçˆ¶éƒ¨ä»¶ä¸­å³æ–¹ FittedBoxæ ¹æ® BoxFit å¯¹å­éƒ¨ä»¶æ‹‰ä¼¸åŠå®šä½ BoxFit.none å¯¹é½ç›®æ ‡ç›’å­ä¸­çš„å…ƒç´  (é»˜è®¤å±…ä¸­) , ç„¶åŽä¸¢å¼ƒç›’å¤–çš„å…ƒç´ . å›¾ç‰‡å…ƒç´ ä¸ä¼šè¢«æ‹‰ä¼¸. BoxFit.contain å°½å¯èƒ½åœ°å¤§,åŒæ—¶åŒ…å«å®Œæ•´çš„ç›®æ ‡ç›’å­ BoxFit.cover å°½å¯èƒ½åœ°å°,ä½†ä»è¦†ç›–ç›®æ ‡ç›’å­ BoxFit.fill æ¯”ä¾‹æ‹‰ä¼¸ä»¥å¡«å……ç›®æ ‡ç›’å­ BoxFit.fitHeight ç¡®ä¿æ˜¾ç¤ºç›®æ ‡çš„å…¨éƒ¨é«˜åº¦,å¿½è§†æ¨ªå‘æ˜¯å¦æ˜¾ç¤ºå®Œæ•´ BoxFit.fitWidth ç¡®ä¿æ˜¾ç¤ºç›®æ ‡çš„å…¨éƒ¨å®½åº¦,å¿½è§†çºµå‘æ˜¯å¦æ˜¾ç¤ºå®Œæ•´ scaleDown å¯¹å…¶ç›®æ ‡(é»˜è®¤å±…ä¸­),å¦‚æžœéœ€è¦,åˆ™ä¼šç¼©æ”¾ç›®æ ‡ä½¿å…¶åœ¨ç›’å­å†… AspectRatio(é‡ç‚¹) å°è¯•ç»™å­éƒ¨ä»¶æŒ‡å®šæ¯”ä¾‹ç¡®è®¤å¤§å°. eg: 123456789101112@overrideWidget build(BuildContext context) &#123; return new Container( color: Colors.blueGrey, alignment: Alignment.center, child: new AspectRatio( aspectRatio: 3.0 / 1.0, // ratio = å®½ / é«˜ , child: new Container( color: Colors.purple, ),) );&#125; ä»£ç ä¸­æ‰€ç¤ºä¸º Container1 &gt; AspectRatio &gt; Container2 çš„å¸ƒå±€å±‚æ¬¡ , AspectRatioå¸ƒå±€æŒ‡å®šäº†å­å¸ƒå±€å®½é«˜æ¯”å±žæ€§ aspectRatio ä¸º 3.0 / 1.0 , åˆå› ä¸ºæœªæŒ‡å®šéƒ¨ä»¶å¤§å° , éƒ¨ä»¶é»˜è®¤å¡«å……çˆ¶éƒ¨ä»¶ , å› æ­¤ Container2 å®½ä¸ºå±å¹•å®½åº¦ , é«˜ä¸ºå®½çš„ 1/3 . ConstraintedBox(é‡ç‚¹)ç”¨ä»¥ç»™å­éƒ¨ä»¶æ·»åŠ é¢å¤–çº¦æŸ. æ¯”å¦‚å¯ä»¥ç»™å­éƒ¨ä»¶æ·»åŠ ä¸€ä¸ªæœ€ä½Žé«˜åº¦50åƒç´  eg: 123456789101112@overrideWidget build(BuildContext context) &#123; return new Container( color: Colors.blueGrey, alignment: Alignment.center, child: new ConstrainedBox( constraints: new BoxConstraints(minHeight: 100.0,maxHeight: 300.0,minWidth: 100.0,maxWidth: 300.0), child: const Card(child: const Text('Halcyon Days', style: const TextStyle(color: Colors.teal, fontSize: 24.0)),), ), );&#125; ä»£ç ç¤ºä¾‹ä¸­ , æˆ‘ä»¬ç»™äºˆ Cardéƒ¨ä»¶æ·»åŠ äº†ä¸€ä¸ªæœ€å°å®½/é«˜åº¦100.0 , æœ€å¤§å®½/é«˜åº¦300.0 . å½“ â€˜ Halcyon Days â€˜ æ–‡æœ¬å˜åŒ–æ—¶,å…¶å®½é«˜å§‹ç»ˆåœ¨ [100,300] çš„ä¸­å˜åŒ– . Baseline é¡¾åæ€ä¹‰ , å°±æ˜¯æ ¹æ®å­éƒ¨ä»¶åŸºçº¿è¿›è¡Œå®šä½. FractionallySizedBox(é‡ç‚¹)ç™¾åˆ†æ¯”å¸ƒå±€ eg: 1234567891011121314@override Widget build(BuildContext context) &#123; return new Container( color: Colors.blueGrey, alignment: Alignment.center, child: new FractionallySizedBox( widthFactor: 0.5, heightFactor: 0.5, child: new Container( color: Colors.teal, ), ), ); &#125; ä»£ç ç¤ºä¾‹ä¸­ Container1 &gt; FractionallySizedBox &gt; Container2 . Container2 å®½é«˜å‡ä¸º Container1 çš„ä¸€åŠ IntrinsicHeightå½“é«˜åº¦ä¸å—é™åˆ¶æ—¶, æˆ‘ä»¬å¸Œæœ›å­éƒ¨ä»¶ä¿æŒä¸€ä¸ªåˆç†çš„é«˜åº¦è€Œä¸æ˜¯åŽ»å°è¯•æ— é™æ‰©å¼  , è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ç”¨ IntrinsicHeight ,ä¸è¿‡è¿™ä¸ªç±»æ¶ˆè€—è¾ƒå¤š , ä¸å»ºè®®ä½¿ç”¨ IntrinsicWidthå½“å®½åº¦ä¸å—é™åˆ¶æ—¶, æˆ‘ä»¬å¸Œæœ›å­éƒ¨ä»¶ä¿æŒä¸€ä¸ªåˆç†çš„å®½åº¦è€Œä¸æ˜¯åŽ»å°è¯•æ— é™æ‰©å¼  , è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ç”¨ IntrinsicWidth ,ä¸è¿‡è¿™ä¸ªç±»æ¶ˆè€—è¾ƒå¤š , ä¸å»ºè®®ä½¿ç”¨ LimitedBoxå½“ä¸å—çº¦æŸæ—¶é™åˆ¶å¤§å° Offstageåœ¨å…¶ä¸­çš„å­éƒ¨ä»¶ä¸ä¼šè¢«ç»˜åˆ¶,ä¹Ÿä¸ä¼šå ç”¨ç©ºé—´.å½“offstage å±žæ€§ä¸ºfalseæ—¶å°†ä¼šæ¸²æŸ“å­éƒ¨ä»¶ eg: 12345678910111213141516171819202122@overrideWidget build(BuildContext context) &#123; return new Column( children: &lt;Widget&gt;[ new Container( height: 200.0, color: Colors.grey, ), new Offstage( offstage: true, // é»˜è®¤ä¸ºtrue , child: new Container( height: 100.0, color: Colors.pink, ), ), new Container( height: 100.0, color: Colors.teal, ) ], );&#125; ä»¥ä¸Šç¤ºä¾‹ , å½“ offstage ä¸º trueæ—¶(é»˜è®¤), Offstageéƒ¨ä»¶åŠå…¶å­éƒ¨ä»¶å°†ä¸ä¼šç»˜åˆ¶, ç±»ä¼¼Android ä¸­ç»™Viewè®¾ç½®Visibilityä¸ºView.GONEä¸€æ ·; è€Œ offstage ä¸º falseæ—¶, å°†ä¼šç»˜åˆ¶ OverflowBoxOverflowBoxä¼šç»™å­éƒ¨ä»¶æ–½åŠ ä¸€ä¸ªä¸Žå…¶è‡ªèº«ä»Žçˆ¶éƒ¨ä»¶ç›´æŽ¥èŽ·å–çš„ä¸åŒçš„çº¦æŸ,å¯èƒ½ä¼šä½¿å¾—å…¶æº¢å‡ºçˆ¶éƒ¨ä»¶ SizedBoxæœ‰ç€æ˜Žç¡®å°ºå¯¸çš„ç›’æ¨¡åž‹ SizedOverflowBoxæœ‰ç€æ˜Žç¡®å°ºå¯¸çš„ç›’æ¨¡åž‹,ä½†æ˜¯ä¼šä¼ é€’åŽŸå§‹çº¦æŸç»™å­éƒ¨ä»¶,å¯èƒ½ä¼šæº¢å‡º Transform(é‡ç‚¹)Transformåœ¨ç»˜åˆ¶å­éƒ¨ä»¶ä¹‹å‰å°†åº”ç”¨å˜æ¢æ•ˆæžœ eg: 123456789101112131415161718@overrideWidget build(BuildContext context) &#123; return new Container( color: Colors.grey, alignment: Alignment.center, child: new Transform( alignment: Alignment.topRight, transform: new Matrix4.rotationZ(50.0), child: new Container( padding: const EdgeInsets.all(8.0), height: 200.0, width: 200.0, color: Colors.teal, child: const Text('halcyon'), ), ), );&#125; CustomSingleChildLayout(é‡ç‚¹)]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸“æ :Flutteræ•™ç¨‹]]></title>
    <url>%2Fflutter-toc%2F</url>
    <content type="text"><![CDATA[Flutter æ˜¯ä¸€æ¬¾è°·æ­Œç”¨ä»¥åŒæ—¶åœ¨ iOS å’Œ Android ä¸Šåˆ¶ä½œé«˜è´¨é‡åŽŸç”Ÿç•Œé¢çš„ç§»åŠ¨åº”ç”¨UIæ¡†æž¶.ç›®å‰è°·æ­Œæ˜¯å·²å‘å¸ƒäº† Flutter Beta ç‰ˆ . ç±»ä¼¼äºŽ Fackbook çš„ React Native , æˆ‘ä»¬å¯ç”¨ Flutter å¼€å‘ä¸€å¥—ä»£ç ,åº”ç”¨äºŽ Android ä»¥åŠ iOS å¹³å°ä¸Š.ä¸ä»…å¦‚æ­¤, Flutter è¿˜å¯åº”ç”¨äºŽè°·æ­Œå°†æŽ¨å‡ºçš„æ–°ç³»ç»Ÿ Fuchsia . å¯ä»¥çœ‹å‡º , Flutter ç¡®æœ‰ç»Ÿä¸€ç§»åŠ¨ç«¯çš„èƒ½åŠ› , èº«ä¸ºç§»åŠ¨å¼€å‘è€… , å½“ç„¶è¦æœ‰æ‰€äº†è§£ . æœ¬æ ç›¸å…³æ–‡ç« å†…å®¹ä¸»è¦æ˜¯å‚è€ƒ Flutter çš„ å®˜æ–¹æ–‡æ¡£ . å®˜ç½‘çš„æ–‡ç« å­¦ä¹ è‡ªç”±åº¦å¾ˆé«˜ , è¿™é‡Œæ¢³ç†äº†ä¸‹æˆ‘ä»¬å°†è¦å­¦ä¹ çš„å†…å®¹ , ç›®å½•å¦‚ä¸‹, æœŸé—´å¯èƒ½è¿›è¡Œè°ƒæ•´ . å¦‚æœ‰åŒå­¦æƒ³äº†è§£æœ¬æ ç›®æœªæ¶µç›–çš„å†…å®¹ , å¯ä»¥é‚®ä»¶lh_halcyondays@163.com, æˆ–è€…ç›´æŽ¥æ Issue , ä½œè€…å°†ç­›é€‰åŽè¿›è¡Œæ›´æ–°. åŸºç¡€ FlutteråŸºç¡€-(1)çŽ¯å¢ƒæ­å»ºåŠdemoè¿è¡Œ FlutteråŸºç¡€-(2)åŸºæœ¬æ¦‚å¿µåŠé¦–ä¸ªåº”ç”¨ FlutteråŸºç¡€-(3)widget-æ–‡æœ¬Text FlutteråŸºç¡€-(4)widget-å›¾ç‰‡Image FlutteråŸºç¡€-(5)å¸ƒå±€ä¹‹å•å­widget FlutteråŸºç¡€-(6)å¸ƒå±€ä¹‹å¤šå­widget FlutteråŸºç¡€-(7)æ‰‹åŠ¿ FlutteråŸºç¡€-(8)åŠ¨ç”» FlutteråŸºç¡€-(9)èµ„æºå’Œå›¾ç‰‡ FlutteråŸºç¡€-(10)æ–‡æœ¬è¾“å…¥ è¿›é˜¶ Flutterè¿›é˜¶-(1)è·¯ç”±å’Œå¯¼èˆª Flutterè¿›é˜¶-(2)ç½‘ç»œè¯·æ±‚ Flutterè¿›é˜¶-(3)JSONå’Œåºåˆ—åŒ– Flutterè¿›é˜¶-(4)ç‰¹å®šå¹³å°å¤„ç† Flutterè¿›é˜¶-(5)è¯»å†™æ–‡ä»¶ Flutterè¿›é˜¶-(6)ä¸»é¢˜åˆ‡æ¢ Flutterè¿›é˜¶-(7)è‡ªå®šä¹‰å­—ä½“ Flutterè¿›é˜¶-(8)å›½é™…åŒ– åº”ç”¨ Flutterå®žæˆ˜-ä»¥å¤ªåŠé’±åŒ… Flutterå®žæˆ˜-BottomNavigationBar â€¦ Flutterå®žæˆ˜-(n)å‘å¸ƒAndroid Flutterå®žæˆ˜-(n+1)å‘å¸ƒiOS ä¸ªäººç²¾åŠ›æœ‰é™ , æ›´æ–°å‘¨æœŸå¯èƒ½ç¨é•¿ä¸€äº› , ä½†æ˜¯ä¼šå°½é‡å°†å­¦ä¹ è¿‡ç¨‹å†™çš„è¯¦ç»† , ä»¥åŠå°†å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„å‘æ˜Žç¤ºå‡ºæ¥ . ä¸ºåŽé¢è¿›å…¥ Flutter çš„å°å‹ä»¬åž«ä¸‹åŸºçŸ³ :)]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FlutteråŸºç¡€-(4)widget-å›¾ç‰‡Image]]></title>
    <url>%2Fflutter-widget-image%2F</url>
    <content type="text"><![CDATA[æœ¬ç¯‡å°†è®²è§£å›¾ç‰‡åŠ è½½åŠç‰¹å®šå¹³å°å›¾ç‰‡å¤„ç†. ä¸ºäº†æ›´å¥½çš„é˜…è¯»ä½“éªŒ , è¯·ç‚¹å‡» é˜…è¯»åŽŸæ–‡ æ¦‚è§ˆImage æ˜¯ç”¨æ¥å±•ç¤ºå›¾ç‰‡çš„ widget. ç³»ç»Ÿæä¾›ç€ä¸åŒæ–¹å¼åŽ»æž„é€  Image : new Image, ä»Ž ImageProvider èŽ·å–å›¾ç‰‡ new Image.asset , ä»Ž AssetBundle èŽ·å–å›¾ç‰‡ new Image.network , ä»Žç½‘ç»œèŽ·å–å›¾ç‰‡ new Image.file , ä»ŽFileèŽ·å–å›¾ç‰‡ new Image.memory , ä»Ž Uint8List èŽ·å–å›¾ç‰‡ Image æ”¯æŒä»¥ä¸‹å›¾ç‰‡æ ¼å¼ : JPEG , PNG ,GIF , åŠ¨æ€ GIF , WebP , åŠ¨æ€WebP , BMP WBMP . ç›´æŽ¥ä¸Šç¤ºä¾‹ å›¾ä¸­ä¸‰ä¸ªç¤ºä¾‹åˆ†åˆ«è¡¨ç¤º ä»ŽAssetsåŠ è½½å›¾ç‰‡ ä»Žç½‘ç»œåŠ è½½å›¾ç‰‡å¹¶ç¼“å­˜åœ¨å†…å­˜ä¸­ ä»Žç½‘ç»œåŠ è½½å›¾ç‰‡å¹¶ç¼“å­˜åœ¨å†…å­˜ä¸­ä¸”ä»¥æ¸çŽ°åŠ¨ç”»çš„å½¢å¼å±•ç¤º . 1 ç±»ä¼¼ Android ä»Ž mipmapæˆ–drawable ä¸‹èŽ·å–å›¾ç‰‡; iOS ä»ŽAssets.xcassets ä¸­è¯»å–å›¾ç‰‡ 2 å¸¸è§„çš„ä»Žç½‘ç»œåŠ è½½å›¾ç‰‡,å¯é€‰ç¼“å­˜åœ¨æ–‡ä»¶æˆ–è€…å†…å­˜ä¸­. 3 ç§»åŠ¨åº”ç”¨ä¸­å¸¸ç”¨çš„å›¾ç‰‡å±•ç¤ºæ•ˆæžœ. AssetsåŠ è½½å›¾ç‰‡Flutter ä½¿ç”¨ pubspec.yamlæ–‡ä»¶å®šä½é¡¹ç›®æ ¹ç›®å½•,è¯†åˆ«appæ‰€éœ€è¦çš„èµ„äº§ ç¤ºä¾‹: 123flutter: assets: - assets/images/ic_link.png æ³¨æ„æ­¤å¤„èµ„äº§è·¯å¾„æ˜¯æ ¹ç›®å½•ä¸‹çš„è·¯å¾„.ç¤ºä¾‹ä¸­assetså’Œæºç libæ˜¯åŒçº§ç›®å½• åŠ è½½ä»£ç : 1234567891011Widget build(BuildContext context) &#123; // ... var imageAssets = 'assets/images/ic_link.png'; return new Image.asset( imageAssets, width: 150.0, height: 150.0, ) ); // ...&#125; æˆ– 1234567891011Widget build(BuildContext context) &#123; // ... var imageAssets = 'assets/images/ic_link.png'; return new Image( image: new AssetImage(imageAssets), width: 150.0, height: 150.0, ) ); // ...&#125; ä»¥ä¸Šä¸ºåŠ è½½å½“å‰é¡¹ç›®ä¸­çš„èµ„äº§å›¾ç‰‡.å½“ä»Žä¾èµ–åŒ…ä¸­åŠ è½½å›¾ç‰‡æ—¶,éœ€è¦åŠ ä¸Šä¾èµ–åŒ…å ä¾‹å¦‚æˆ‘ä»¬çš„åº”ç”¨ä¾èµ–ä¸‰æ–¹åŒ… flutter_gallery_assets ,å®ƒæœ‰ç€ä»¥ä¸‹ç›®å½•ç»“æž„ â€¦/pubspec.yaml â€¦/lib/ali_connors.png æˆ‘ä»¬å°±éœ€è¦ç”¨ä»¥ä¸‹ä»£ç æ¥åŠ è½½å›¾ç‰‡ 1new AssetImage('ali_connors.png', package: 'flutter_gallery_assets') åŒæ—¶è¿˜éœ€è¦åŽ» pubspec.yaml æ–‡ä»¶ä¸­ç”³æ˜Ž 123assets: - assets/images/ic_link.png - packages/flutter_gallery_assets/ali_connors.png æ³¨æ„: ali_connors.png æ–‡ä»¶è·¯å¾„å…¶å®žä¸º flutter_gallery_assets-ç‰ˆæœ¬å·/lib/ali_connors.png å…¶ä¸­libä½œä¸ºä¸‰æ–¹åŒ…æ—¶æ˜¯éšå¼åŒ…å«äº†, ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±æ·»åŠ  FileåŠ è½½å›¾ç‰‡ç›´æŽ¥ä¸Šä»£ç  123456789101112Widget build(BuildContext context) &#123; // ... var imagePath = '/Users/xx/Downloads/cow.png'; return new Image( image: new FileImage(new File(imagePath)), repeat: ImageRepeat.noRepeat, width: 150.0, height: 150.0, ) ); // ...&#125; æ³¨æ„: è¿™é‡ŒimagePathä½œä¸ºç»å¯¹è·¯å¾„è¯»çš„æ˜¯è®¡ç®—æœºä¸Šçš„å›¾ç‰‡åœ°å€ , æ‰¾ä¸åˆ°æœ¬æœºå›¾ç‰‡æ—¶ä¸ä¼šæ˜¾ç¤º . å› ä¸ºå¹³å°å…³ç³» , ç›¸å¯¹è·¯å¾„ä¸€èˆ¬è®¿é—®ä¸åˆ° , éœ€è¦é€šè¿‡ä¸‰æ–¹åŒ… path_provider æ¥æä¾›ä¸Žå¹³å°æ— å…³çš„è®¿é—®è®¾å¤‡æ–‡ä»¶çš„æ–¹æ³•.å±Šæ—¶è¿˜éœ€è¦å°†å›¾ç‰‡å¯¼å…¥åˆ°è®¾å¤‡ä¸­ ,æ­¤å¤„å°±ä¸ä½œå±•å¼€ ç½‘ç»œåŠ è½½å›¾ç‰‡åº”ç”¨ä¸­ç½‘ç»œåŠ è½½å›¾ç‰‡çš„åœºæ™¯è®¸å¤š , å…ˆç»™å‡ºä¸€ä¸ªç®€å•çš„ç¤ºä¾‹: 1234567891011Widget build(BuildContext context) &#123; // ... var imgUrl = 'https://ws1.sinaimg.cn/large/006tNc79gy1fpa5bvsqskj3044048mx5.jpg'; return new Image.network( imgUrl, width: 150.0, height: 150.0, ) ); // ...&#125; æˆ– 1234567891011Widget build(BuildContext context) &#123; // ... var imgUrl = 'https://ws1.sinaimg.cn/large/006tNc79gy1fpa5bvsqskj3044048mx5.jpg'; return new Image( image: new NetworkImage(imgUrl), width: 150.0, height: 150.0, ) ); // ...&#125; è¿™ç§åªæ˜¯ç®€å•çš„åŠ è½½ç½‘ç»œå›¾ç‰‡,è‹¥å›¾ç‰‡è¾ƒå¤§,æˆ–è€…ç½‘ç»œå¡é¡¿.å›¾ç‰‡æ˜¾ç¤ºçš„æ•ˆæžœå°±æ˜¾å¾—å¾ˆçªå…€(å¯å‚è€ƒä¸Šé¢gif ) , æ­¤æ—¶æˆ‘ä»¬éœ€è¦ç»™å›¾ç‰‡å‘ˆçŽ°åŠ ä¸€æ®µæ¸çŽ°çš„FadingåŠ¨ç”». FadeInImage FadeInImageæ›´ç¬¦åˆåº”ç”¨ä¸­çš„åœºæ™¯ , æ¸çŽ°å‘ˆçŽ°ç½‘ç»œå›¾ç‰‡,å¹¶ä¸”ç¼“å­˜åˆ°å†…å­˜ 12345678910111213141516import 'package:transparent_image/transparent_image.dart';Widget build(BuildContext context) &#123; // ... var imgUrl = 'https://ws1.sinaimg.cn/large/006tNc79gy1fpa5bvsqskj3044048mx5.jpg'; return new FadeInImage.memoryNetwork( placeholder: kTransparentImage, image: imgUrl, width: 150.0, height: 150.0, fadeInDuration: const Duration(milliseconds: 1200), fadeOutDuration: const Duration(milliseconds: 1200), ) ); // ...&#125; ç¤ºä¾‹æ•ˆæžœè¯·å‚è€ƒä¸Šé¢çš„gifæ•ˆæžœå›¾ , å…¶ä¸­ç”¨åˆ°äº†ä¸‰æ–¹åº“ transparent_image ä¸»è¦ä½œç”¨æ˜¯ä½¿ç”¨å…¶é€æ˜Žå›¾ç‰‡ä½œä¸ºå ä½å›¾ å¯ä½¿ç”¨ FadeInImage.assetNetwork å®žçŽ°æ–‡ä»¶ç¼“å­˜. è‹¥æƒ³å®žçŽ° Android ä¸­ Glide ,Picasso , iOS ä¸­ Kingfisher è¿™æ ·çš„å›¾ç‰‡ä¸‰çº§ç¼“å­˜æ¡†æž¶ , å°±éœ€è¦è‡ªè¡Œå°è£…å®žçŽ°äº†. è¿™é‡Œæˆ‘ä»¬å¯ä»¥å‘çŽ° , æˆ‘ä»¬æœªä¸»åŠ¨åœ°åœ¨Androidåº”ç”¨æ¸…å•æ–‡ä»¶ä¸­ç”³æ˜Žç½‘ç»œæƒé™,Flutteré»˜è®¤å·²ç»æŽˆäºˆäº†ç½‘ç»œæƒé™ç”¨ä»¥æä¾›çƒ­éƒ¨ç½²ç­‰ç­‰. åˆ†è¾¨çŽ‡å¤„ç†æ‰‹æœºæœ‰ä¸åŒçš„åƒç´ æ¯”çŽ‡ , è¿™æ—¶å°±éœ€è¦æ ¹æ®æ‰‹æœºçš„åƒç´ æ¯”çŽ‡æ¥åŠ è½½ä¸åŒå›¾ç‰‡ . åšæ³•å¾ˆç®€å•,åªéœ€è¦åœ¨å›¾ç‰‡åŒçº§ç›®å½•ä¸‹åˆ›å»º 2.0x/abc.png å’Œ 3.0x/abc.png çš„ç›®å½•å³å¯ åœ¨ pubspec.yaml ä¸­å®šä¹‰çš„assetsè·¯å¾„ä¸éœ€è¦å¢žåŠ  2.0x 3.0x ä¾‹å¦‚ä»¥å‰å›¾ç‰‡æ˜¯ 123flutter: assets: - assets/images/ic_link.png åŠ å…¥åˆ†è¾¨çŽ‡ç›®å½•åŽä¸å˜ , ä¾ç„¶æ˜¯è¯¥è·¯å¾„ ç‰¹å®šå¹³å°å›¾ç‰‡å¯¹äºŽ Android , iOS ç‰¹å®šå¹³å°çš„èµ„äº§å›¾ç‰‡éœ€è¦æˆ‘ä»¬åŽ»å¯¹åº”çš„å¹³å°æ–‡ä»¶å¤¹ä¸‹åŽ»è®¾ç½® . ä»¥ä¸‹ä¸ºä¸¤ä¸ªå¸¸è§çš„åœºæ™¯ , æˆ‘ä»¬å°†åœ¨Flutteræ¡†æž¶è¿è¡Œå‰ä½¿ç”¨åˆ°å›¾ç‰‡èµ„äº§ æ›´æ–°åº”ç”¨å›¾æ ‡æ›´æ–°åº”ç”¨å›¾æ ‡çš„æ–¹å¼ä¸Žåœ¨å¼€å‘åŽŸç”ŸAndroid,iOSåº”ç”¨æ—¶ä¸€æ ·. Android åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ .../android/app/src/main/resé‡Œ,é»˜è®¤åº”ç”¨å›¾æ ‡ä¸ºic_launcher.png ,å¯åˆ†åˆ«æ›¿æ¢å¯¹åº”åˆ†è¾¨çŽ‡ä¸‹çš„å›¾ç‰‡ä»Žè€Œæ›´æ–°åº”ç”¨å›¾æ ‡ iOS åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ .../ios/Runner/Assets.xcassets/AppIcon.appiconset , æ›¿æ¢ç›¸åº”å›¾ç‰‡ä»Žè€Œæ›´æ–°åº”ç”¨å›¾æ ‡ æ›´æ–°å¯åŠ¨é¡µAndroid Flutter é»˜è®¤è®¾ç½®äº†ä¸ªå¯åŠ¨é¡µ .../android/app/src/main/res/drawable/launch_background.xml . å¯é€šè¿‡ä¿®æ”¹è¯¥æ–‡ä»¶æ¥å®šåˆ¶ä¸ªæ€§åŒ–çš„å…ƒç´  iOS åœ¨ .../ios/Runner/Assets.xcassets/LaunchImage.imageset , æ”¾ç½®LaunchImage.png ,LaunchImage@2x.png , LaunchImage@3x.png. è‹¥ç”¨åˆ°ä¸åŒçš„æ–‡ä»¶åç§° , éœ€è¦åœ¨åŒç›®å½•ä¸‹æ›´æ–° Contents.jsonä¸­çš„æ–‡ä»¶åç§° è¿˜å¯ä»¥é€šè¿‡æ‰“å¼€â€¦/ios/Runner.xcworkspace , æ¥å®Œå…¨å®šåˆ¶å¯åŠ¨å±å¹•storyboard . å¥½äº†, å…³äºŽ Image çš„éƒ¨åˆ†å°±è®²åˆ°è¿™é‡Œäº†. ç›¸å…³ä»£ç å·²ç»ä¸Šä¼  GitHub ,å¦‚æœ‰å¸®åˆ°ä½ , è¯·ä¸åç‚¹ä¸ªStarðŸ¤—]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FlutteråŸºç¡€-(3)Widget-æ–‡æœ¬Text]]></title>
    <url>%2Fflutter-widget-text%2F</url>
    <content type="text"><![CDATA[æœ¬æ¥æ‰“ç®—ç¬¬ä¸‰ç¯‡æ–‡ç« æ¥è®²è§£ Flutter å•å­å¸ƒå±€widget , å¥ˆä½• 18ç§å•å­å¸ƒå±€widget å†…å®¹é¢‡å¤š,åŠ ä¹‹å¹´åŽæœ‰äº†æ–°é¡¹ç›®è¦å¼€å‘ , ä½¿å¾—æ–‡ç« äº§å‡ºå‘¨æœŸè¢«æ‹‰é•¿ :( . è¿™é‡Œå…ˆæ¥ç¯‡ç®€å•çš„å…³äºŽTextçš„æ–‡ç«  , ä¸‹æ¬¡æ›´æ–°å°†ä¼šå‘å‡º Flutterç³»åˆ—çš„ç›®å½•åŠå¸ƒå±€widgetçš„æ–‡ç« . TextText æ–‡æœ¬æ˜¯appé‡Œå¸¸è§çš„æŽ§ä»¶ , ç”¨ä»¥æ˜¾ç¤ºä¸€ä¸²å•ä¸€æ ·å¼çš„æ–‡æœ¬ . è¯¥å­—ç¬¦ä¸²å¯è·¨è¶Šå¤šè¡Œ , æˆ–æ ¹æ®å¸ƒå±€çº¦æŸæ˜¾ç¤ºåœ¨åŒä¸€è¡Œä¸­ æœ€ç®€å•çš„å¯ä»¥ç›´æŽ¥ç”¨è¿™æ ·çš„ä»£ç æ¥å±•ç¤ºæ–‡æœ¬ , ç±»ä¼¼ Android é‡Œçš„ TextView , iOS é‡Œçš„ UILabel . 1new Text('ç®€å•çš„æ–‡æœ¬') ä»£ç æœªæŒ‡å®šæ ·å¼ , æ­¤æ—¶å°†ä½¿ç”¨æœ€è¿‘çš„ DefaultTextStyle æ ·å¼ . è‹¥ç»™å®šæ ·å¼ä¸­ TextStyle.inherit å±žæ€§ä¸ºtrue , ç»™å®šæ ·å¼åˆ™å°†ä¸Žæœ€è¿‘çš„ DefaultTextStyle æ ·å¼åˆå¹¶ . ç±»ä¼¼ Android é‡Œ , style.xml ä¸»é¢˜æ ·å¼ AppTheme ä¸­å®šä¹‰äº†æ–‡æœ¬æ ·å¼ , å¹¶ä¸”å°†å…¶è®¾ç½®ä¸º Application çš„ä¸»é¢˜æ ·å¼ , é‚£ä¹ˆæ–°å»ºä¸€ä¸ª TextView å°±ä¼šé»˜è®¤ä½¿ç”¨ AppThemeä¸­å®šä¹‰çš„æ–‡æœ¬æ ·å¼ , è€Œå½“ç»™è¿™ä¸ª TextView è®¾ç½®æ ·å¼æ—¶,æ­¤æ ·å¼å°±ä¼šå’Œä¸»é¢˜æ ·å¼è¿›è¡Œåˆå¹¶ å½“ TextStyle.inherit å±žæ€§è®¾ç½®ä¸º false æ—¶ , æ–‡æœ¬æ ·å¼ä¼šæ¢å¤åˆ°é»˜è®¤çŠ¶æ€: ç™½è‰², 10åƒç´  , sans-serif å­—ä½“ 12345final TextStyle _inheritBigFont = new TextStyle(inherit: true, fontSize: 24.0);final TextStyle _notInheritBigFont = new TextStyle(inherit: false, fontSize: 24.0);...new Text('inherit true', style: widget._inheritBigFont)new Text('inherit false', style: widget._notInheritBigFont) æ–‡æœ¬æ ·å¼é¸Ÿçž° RichTextè¦æ˜¾ç¤ºå¤šæ ·å¼çš„æ–‡æœ¬ , éœ€è¦ä½¿ç”¨å¯Œæ–‡æœ¬ RichText åœ¨å¼€å‘ä¸­ , æœ‰ä¸€äº›å¸¸è§çš„åº”ç”¨åœºæ™¯éœ€è¦ç”¨åˆ°å¯Œæ–‡æœ¬ . æ¯”å¦‚åœ¨å¾ˆå¤š app æ³¨å†Œ ,å¼€æˆ·ç•Œé¢ä¼šæœ‰ä¸€ä¸ªåŒæ„åè®®çš„æ¨¡å— , æˆ‘å·²é˜…è¯»å¹¶åŒæ„ã€Šxxxåè®®ã€‹ , åè®®åç§°é€šå¸¸é«˜äº®æ˜¾ç¤ºå¹¶ä¸”å¯ä»¥ç‚¹å‡»æ‰“å¼€åè®®é¡µé¢ . 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970import 'package:flutter/gestures.dart';import 'package:flutter/material.dart';class DemoText extends StatefulWidget &#123; final TextStyle _protocolFont = new TextStyle(fontSize: 16.0); final TextStyle _inheritBigFont = new TextStyle(inherit: true, fontSize: 24.0); final TextStyle _notInheritBigFont = new TextStyle(inherit: false, fontSize: 24.0); @override DemoTextState createState() &#123; return new DemoTextState(); &#125;&#125;class DemoTextState extends State&lt;DemoText&gt; &#123; @override Widget build(BuildContext context) &#123; return new Scaffold( appBar: new AppBar( title: const Text('Text Demo'), ), body: new Builder(builder: builderBody)); &#125; Widget builderBody(BuildContext context) &#123; final TapGestureRecognizer recognizer = new TapGestureRecognizer(); recognizer.onTap = () &#123; Scaffold.of(context).showSnackBar(new SnackBar( content: new Text('åè®®è¢«ç‚¹å‡»!'), )); &#125;; final Divider divider = new Divider(color: Colors.white, height: 2.0); return new Container( color: Colors.grey, alignment: Alignment.center, child: new Column( children: &lt;Widget&gt;[ new Text('inherit true', style: widget._inheritBigFont), new Text('inherit false', style: widget._notInheritBigFont), divider, new Text( 'é¾™éª‘å£«å›§é›ªè¯ºJohnSnow', style: new TextStyle( color: Colors.blue, fontSize: 24.0, fontStyle: FontStyle.italic, letterSpacing: 2.0, decoration: TextDecoration.underline), ), divider, new RichText( text: new TextSpan( text: 'æˆ‘å·²é˜…è¯»', style: widget._protocolFont, children: &lt;TextSpan&gt;[ new TextSpan( text: 'ã€Šä»Žflutterå…¥é—¨åˆ°æ”¾å¼ƒã€‹', style: new TextStyle(color: Colors.redAccent), recognizer: recognizer), ], ), ), ], )); &#125;&#125; TapGestureRecognizer æ˜¯æ‰‹åŠ¿è¯†åˆ«è€… , åŽé¢è®²åˆ°æ‰‹åŠ¿æ—¶å†å…·ä½“è¯´æ˜Ž . è¿™é‡Œæˆ‘ä»¬å…ˆçŸ¥é“å®ƒå¯ä»¥ç”¨æ¥ç»™å¯Œæ–‡æœ¬æŸä¸€æ®µæ·»åŠ ç‚¹å‡»äº‹ä»¶ . è¿™é‡Œæˆ‘ä»¬ç‚¹å‡»åè®®åŽ , ä¼šå¼¹å‡ºä¸€ä¸ªSnackBaræç¤ºåè®®è¢«ç‚¹å‡»äº† .]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FlutteråŸºç¡€-(2)åŸºæœ¬æ¦‚å¿µåŠé¦–ä¸ªåº”ç”¨]]></title>
    <url>%2Fflutter-basic-concept%2F</url>
    <content type="text"><![CDATA[åœ¨ ä¸Šä¸€ç¯‡æ–‡ç«  ä¸­,æˆ‘ä»¬è®²è§£äº† Flutter å¼€å‘çŽ¯å¢ƒæ­å»º , ä»¥åŠè¿è¡Œäº†å®˜æ–¹demoç®€å•ä½“éªŒäº†ä¸‹ Flutter app . æ­¤ç¯‡æˆ‘ä»¬å°†å¼€å§‹å¯¹ä¸€äº› Flutter app ä¸­çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µè¿›è¡Œè®²è§£ , ä¸€äº›åŸºæœ¬çš„æ“ä½œåšä¸€äº›ç¤ºä¾‹ , ä¸»è¦æ˜¯å‚è€ƒå®˜ç½‘çš„æ•™ç¨‹ Write Your First Flutter App è‹¥ä½ å¯¹é¢å‘å¯¹è±¡ç¼–ç¨‹ç†Ÿæ‚‰,ä»¥åŠå¯¹åŸºæœ¬ç¼–ç¨‹æ¦‚å¿µå¦‚å˜é‡ã€å¾ªçŽ¯ã€æ¡ä»¶äº†è§£ , åˆ™é€‚åˆé˜…è¯»æœ¬ç¯‡æ–‡ç«  . ä¸å¿…éœ€è¦æ‹¥æœ‰ Dart æˆ–ç§»åŠ¨ç¼–ç¨‹ç»éªŒ. ä¸ºäº†æ›´å¥½çš„é˜…è¯»ä½“éªŒ , è¯·ç‚¹å‡» é˜…è¯»åŽŸæ–‡ :) æ­¥éª¤ 1 : åˆ›å»ºåŠå¯åŠ¨ Flutter app æ­¥éª¤ 2 : ä½¿ç”¨ä¸€ä¸ªå¤–éƒ¨çš„ç¨‹åºåŒ… æ­¥éª¤ 3 : å¢žåŠ ä¸€ä¸ª Stateful Widget æ­¥éª¤ 4 : åˆ›å»ºä¸€ä¸ªæ— é™æ»šåŠ¨çš„ ListView æ­¥éª¤ 5 : å¢žåŠ äº¤äº’ æ­¥éª¤ 6 : è·³è½¬åˆ°æ–°é¡µé¢ æ­¥éª¤ 7 : é€šè¿‡ä¸»é¢˜æ”¹å˜UI å®Œæˆ! æˆ‘ä»¬å°†åˆ›å»ºä»€ä¹ˆæˆ‘ä»¬å°†å®žçŽ°ä¸€ä¸ªç®€å•çš„ç§»åŠ¨åº”ç”¨ , å®ƒä¼šç”Ÿæˆåˆ›ä¸šå…¬å¸çš„åç§° . ç”¨æˆ·å¯ä»¥é€‰æ‹©å’Œåé€‰åç§° , ä¿å­˜å–œå¥½çš„é‚£äº› . ä»£ç ä¸€æ¬¡ç”Ÿæˆ 10 ä¸ªåç§° . å½“ç”¨æˆ·æ»‘åŠ¨æ—¶ , æ–°ä¸€æ‰¹çš„åç§°å°±ä¼šç”Ÿæˆ . ç”¨æˆ·å¯ä»¥ç‚¹å‡»å¯¼èˆªæ å³ä¸Šçš„æŒ‰é’®è¿›å…¥ä¸€ä¸ªåªå±•ç¤ºå–œå¥½çš„åç§°çš„åˆ—è¡¨æ–°é¡µé¢. æˆ‘ä»¬å°†å­¦åˆ°: Flutter app çš„åŸºæœ¬ç»“æž„ ä½¿ç”¨é¢å¤–çš„åŒ…åŽ»æ‹“å±•åŠŸèƒ½ ä½¿ç”¨çƒ­éƒ¨ç½²æ¥å¿«é€Ÿå¼€å‘ å¦‚ä½•åŽ»å®žçŽ°ä¸€ä¸ªstateful å°éƒ¨ä»¶ å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ— çº¿æ»‘åŠ¨,æ‡’åŠ è½½çš„åˆ—è¡¨ å¦‚ä½•è·³è½¬åŽ»ä¸‹ä¸€ä¸ªç•Œé¢ å¦‚æžœé€šè¿‡ä¸»é¢˜åŽ»ä¿®æ”¹appå¤–è§‚ æ­¥éª¤ 1 : åˆ›å»ºåŠå¯åŠ¨ Flutter appè¿™é‡Œåˆ›å»ºä¸€ä¸ªç®€å•çš„ flutter app 123flutter create flutter_first_appcd flutter_first_appflutter run å¦‚æœ‰ç–‘é—® , å¯å‚è€ƒ å‰ä¸€ç¯‡æ–‡ç«  æŒ‡å¼• ç®€å•åœ° , æˆ‘ä»¬å…ˆå°† lib/main.dartä¸­çš„ä»£ç å…¨éƒ¨åˆ é™¤ , æ›¿æ¢ä¸ºä»¥ä¸‹ä»£ç  , å…¶ä¸»è¦å°±æ˜¯åœ¨å±å¹•ä¸­é—´å±•ç¤º â€˜Hello Worldâ€™ . 1234567891011121314151617181920import 'package:flutter/material.dart';void main() =&gt; runApp(new MyApp());class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return new MaterialApp( title: 'Welcome to Flutter', home: new Scaffold( appBar: new AppBar( title: new Text('Welcome to Flutter'), ), body: new Center( child: new Text('Hello World'), ), ), ); &#125;&#125; é‡æ–°è¿è¡Œå¾—åˆ°ç»“æžœ å‘çŽ° è¿™ä¸ªä¾‹å­åˆ›å»ºäº†ä¸€ä¸ª Material Design é£Žæ ¼çš„app . Material æ˜¯ä¸€ç§åœ¨ç§»åŠ¨ç«¯åŠwebä¸Šæ ‡å‡†çš„è§†è§‰è®¾è®¡è¯­è¨€ . Flutter æä¾›äº†ä¸°å¯Œçš„ Material é£Žæ ¼å°éƒ¨ä»¶ main æ–¹æ³•ä½¿ç”¨äº†ä¸€ä¸ªå¤§ç®­å¤´=&gt;å†™æ³• , å®ƒæ˜¯ä¸€è¡Œä»£ç åŠŸèƒ½æˆ–æ–¹æ³•çš„ç¼©å†™ . åŒè®¸å¤šè¯­è¨€å¼€å‘ä¸€æ ·, main() æ–¹æ³•ä¸ºç¨‹åºå…¥å£ . app ç»§æ‰¿ StatefulWidget ä½¿å¾—å…¶è‡ªèº«ä¹Ÿæ˜¯ä¸ªwidget . åœ¨ Flutter é‡Œ , å¤§å¤šæ•°å…ƒç´ éƒ½æ˜¯ widget , åŒ…æ‹¬å¯¹é½æ–¹å¼(alignment)ã€ å†…è¾¹è·(padding)ã€å¸ƒå±€(layout) . Material åº“ ä¸­çš„è„šæ‰‹æž¶å°éƒ¨ä»¶ (Scaffold widget) , æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„å¯¼èˆªæ ã€ æ ‡é¢˜ã€ å†…å®¹å±žæ€§åœ¨å±å¹•ä¸­ç»´æŒäº†éƒ¨ä»¶æ ‘ðŸŒ².éƒ¨ä»¶å­æ ‘å¯ä»¥å¾ˆå¤æ‚. ä¸€ä¸ªå°éƒ¨ä»¶çš„ä¸»è¦å·¥ä½œå°±æ˜¯æä¾› build()æ–¹æ³• , å®ƒæ˜¯ç”¨æ¥è¡¨æ˜Žå¦‚ä½•å±•ç¤ºå…¶ä»–ä½Žå±‚çº§çš„widget. è¿™ä¸ªç¤ºä¾‹çš„éƒ¨ä»¶æ ‘ç”± åŒ…å«ä¸€ä¸ª Text å­éƒ¨ä»¶ çš„Center Widget ç»„æˆ . è¿™ä¸ª Center Widget å°†å…¶å­éƒ¨ä»¶æ ‘æŽ’åˆ—åœ¨å±å¹•ä¸­é—´ . æ­¥éª¤ 2 : ä½¿ç”¨ä¸€ä¸ªå¤–éƒ¨çš„ç¨‹åºåŒ…åœ¨è¿™ä¸ªæ­¥éª¤é‡Œ , æˆ‘ä»¬å°†å¼€å§‹ä½¿ç”¨ä¸€ä¸ªå¼€æºç¨‹åºåŒ… english_words , å®ƒåŒ…å«äº†è¾ƒå¤šçš„å¸¸ç”¨çš„è‹±æ–‡å•è¯è¿˜æœ‰ä¸€äº›å·¥å…·æ–¹æ³• . æˆ‘ä»¬å¯ä»¥åœ¨ pub.dartlang.org æ‰¾åˆ° english_words åŠ å…¶ä»–å¼€æºç¨‹åºåŒ… 1. pubspec æ–‡ä»¶è´Ÿè´£ç®¡ç† Flutter åº”ç”¨çš„èµ„æº. åœ¨ pubspec.yaml æ–‡ä»¶ä¸­,æ·»åŠ  english_words(3.1.0æˆ–æ›´é«˜ç‰ˆæœ¬)åˆ°ä¾èµ–é‡Œ. 123456dependencies: flutter: sdk: flutter cupertino_icons: ^0.1.0 english_words: ^3.1.0 2. å½“æˆ‘ä»¬åœ¨IDEA è§†å›¾ä¸­ , ä¿®æ”¹yamlæ–‡ä»¶åŽ , å¯ç‚¹å‡»å³ä¸Šæ–¹çš„ Packages get ä½¿ä¹‹ç”Ÿæ•ˆ.å®ƒä¼šæ‹‰å–æˆ‘ä»¬æ‰æ·»åŠ çš„ä¾èµ–åŒ…, æŽ§åˆ¶å°ä¸­æ‰“å° 123flutter packages getRunning "flutter packages get" in flutter_first_app...Process finished with exit code 0 3. åœ¨ lib/main.dartæ–‡ä»¶ä¸­,æ·»åŠ  import è¯­å¥ , å¯¼å…¥ä¾èµ–ç›¸å…³ç±» 1import 'package:english_words/english_words.dart'; 4. ç”¨å¼€æºåº“ç”Ÿæˆæ–‡æœ¬ä»£æ›¿åŽŸæ¥çš„ â€˜Hello Worldâ€™ 1234567891011121314151617181920212223import 'package:flutter/material.dart';import 'package:english_words/english_words.dart';void main() =&gt; runApp(new MyApp());class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; final wordPair = new WordPair.random(); return new MaterialApp( title: 'Welcome to Flutter', home: new Scaffold( appBar: new AppBar( title: new Text('Welcome to Flutter'), ), body: new Center( //child: new Text('Hello World'), // Replace the highlighted text... child: new Text(wordPair.asPascalCase), // With this highlighted text. ), ), ); &#125;&#125; 5. è‹¥appæ­£åœ¨è¿è¡Œ, å¯ä»¥é€šè¿‡ç‚¹å‡»âš¡ï¸æŒ‰é’®è¿›è¡Œçƒ­éƒ¨ç½². æ¯æ¬¡ç‚¹å‡»æˆ–è€…ä¿å­˜æ—¶ , ä¼šç”Ÿæˆæ–°çš„ä¸€ä¸ªéšæœºå•è¯. è¿™æ˜¯å› ä¸ºå•è¯æ˜¯åœ¨ build(...) æ–¹æ³•ä¸­ç”Ÿæˆ, å®ƒä¼šåœ¨æ¯æ¬¡ MaterialApp éœ€è¦æ¸²æŸ“æˆ–è§¦å‘å¹³å°æ£€è§†æ—¶æ‰§è¡Œ. æ­¥éª¤ 3 : å¢žåŠ ä¸€ä¸ª Stateful WidgetStateless widgets æ˜¯ä¸å¯å˜çš„ , æ„å‘³ç€å…¶å±žæ€§æ˜¯ä¸å¯æ”¹å˜çš„ - æ‰€æœ‰å€¼å‡ä¸ºfinal . Stateful widgets ç»´æŒç€ç”Ÿå‘½å‘¨æœŸä¸­å¯å˜çš„çŠ¶æ€ . å®žçŽ°ä¸€ä¸ª stateful widget éœ€è¦è‡³å°‘ä¸¤ä¸ªç±»: ä¸€ä¸ª State ç±» å’Œ ä¸€ä¸ªåˆ›å»ºStateç¤ºä¾‹çš„ StatefulWidget . StatefulWidgetæœ¬èº«æ˜¯ä¸å¯å˜çš„ , ä½†æ˜¯ State ç±»åœ¨widgetç”Ÿæˆå‘¨æœŸä¸­ä¸€ç›´å­˜ç•™ . åœ¨è¿™ä¸ªæ­¥éª¤é‡Œ , æˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ª stateful widget - RandomWords , å®ƒåˆ›å»ºè‡ªå·±çš„ State ç±» - RandomWordsState . state ç±»å°†ä¸ºwidgetæœ€ç»ˆç»´æŒå»ºè®®çš„å’Œå–œå¥½çš„å•è¯. 1. æ·»åŠ  stateful RandomWords åˆ° main.dart 1234class RandomWords extends StatefulWidget &#123; @override createState() =&gt; new RandomWordsState();&#125; 2. æ·»åŠ  RandomWordsState . å¤§éƒ¨åˆ†appçš„ä»£ç ä¼šåœ¨è¿™ä¸ªç±»ä¸­ , å°†ç»´æŒç€ RandomWords éƒ¨ä»¶çš„çŠ¶æ€ . è¿™ä¸ªç±»å°†ä¼šä¿å­˜ç”Ÿæˆçš„è¯å¯¹ , å®ƒä»¬éšç€ç”¨æˆ·æ»‘åŠ¨é¡µé¢æ— çº¿å¢žåŠ  . ç„¶åŽå–œå¥½çš„è¯å¯¹ , ç”¨æˆ·é€šè¿‡ç‚¹å‡»åˆ—è¡¨çš„å¿ƒå½¢æŒ‰é’®è¿›è¡Œæ·»åŠ æˆ–ç§»é™¤ . æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥åˆ›å»ºè¿™ä¸ªç±» 12class RandomWordsState extends State&lt;RandomWords&gt; &#123;&#125; 3. åœ¨æ·»åŠ  state ç±»åŽ , IDEä¼šæç¤ºé”™è¯¯, éœ€è¦æˆ‘ä»¬å–å®žçŽ°æœªå®žçŽ°çš„æ–¹æ³• . 1234567class RandomWordsState extends State&lt;RandomWords&gt; &#123; @override Widget build(BuildContext context) &#123; final wordPair = new WordPair.random(); return new Text(wordPair.asPascalCase); &#125;&#125; 4. ç§»é™¤å•è¯ç”Ÿæˆä»£ç  , 1234567891011121314151617class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return new MaterialApp( title: 'Welcome to Flutter', home: new Scaffold( appBar: new AppBar( title: new Text('Welcome to Flutter'), ), body: new Center( child: new RandomWords(), ), ), ); &#125;&#125; æ­¥éª¤ 4 : åˆ›å»ºä¸€ä¸ªæ— é™æ»šåŠ¨çš„ ListViewè¿™ä¸ªæ­¥éª¤é‡Œ, æˆ‘ä»¬å°†æ‰©å…… RandomWordsState ç±» æ¥ç”Ÿæˆå’Œå±•ç¤ºå•è¯å¯¹çš„åˆ—è¡¨. å½“ç”¨æˆ·æ»‘åŠ¨é¡µé¢, ListView widget å±•ç¤ºçš„åˆ—è¡¨å°†ä¼šæ— é™å¢žåŠ . ListView çš„ builder å·¥åŽ‚æž„é€ å™¨å…è®¸æˆ‘ä»¬è§†éœ€æ‡’åŠ è½½åˆ›å»ºåˆ—è¡¨è§†å›¾ 1. åœ¨ RandomWordsState ç±»ä¸­æ·»åŠ æˆå‘˜å˜é‡ _suggestions åˆ—è¡¨ç”¨æ¥ä¿å­˜æŽ¨èçš„å•è¯å¯¹.åœ¨ Dart è¯­è¨€ä¸­ , ä»¥ _ä¸‹åˆ’çº¿å¼€å¤´çš„å˜é‡/æ–¹æ³•ä¸ºç§æœ‰è®¿é—®æƒé™. åŒæ ·çš„ , æ·»åŠ  biggerFont å˜é‡ç”¨æ¥ä½¿å­—ä½“å¤§å°æ›´å¤§ 123456class RandomWordsState extends State&lt;RandomWords&gt; &#123; final _suggestions = &lt;WordPair&gt;[]; final _biggerFont = const TextStyle(fontSize: 18.0); ...&#125; 2 ~ 3. æ·»åŠ  _buildSuggestions()æ–¹æ³•åˆ° RandomWordsState ç±»ä¸­. æ­¤æ–¹æ³•è´Ÿè´£æž„å»ºåˆ—è¡¨ ListView å’Œå±•ç¤ºå»ºè®®çš„å•è¯å¯¹. ListView ç±»æä¾›äº†ä¸€ä¸ª builder å±žæ€§ , itemBuilder ä¸€ä¸ªå·¥åŽ‚æž„å»ºè€…å’ŒæŒ‡å®šåŒ¿åå‡½æ•°çš„å›žè°ƒåŠŸèƒ½.ä¸¤ä¸ªå‚æ•°è¢«ä¼ é€’ç»™å‡½æ•°- BuildContext è¿˜æœ‰è¡Œè¿­ä»£å™¨ i . è¿­ä»£å™¨ä»Ž 0 å¼€å§‹ä¸”æ¯æ¬¡æ–¹æ³•è°ƒç”¨é€’å¢ž. æ·»åŠ  _buildRow æ–¹æ³• 123456789101112131415161718192021Widget _buildSuggestions() &#123; return new ListView.builder( // padding 16 padding: const EdgeInsets.all(16.0), // æ¯ä¸€å¯¹å•è¯å¯¹è°ƒç”¨ä¸€æ¬¡itemBuilder å›žè°ƒ ,ç„¶åŽæ”¾ç½®ä¸€ä¸ªæŽ¨èçš„å•è¯å¯¹åœ¨è¡Œå†… // å¶æ•°è¡Œ , å‡½æ•°å¢žåŠ ä¸ªå†…å®¹è¡Œæ˜¾ç¤ºå•è¯å¯¹, // å¥‡æ•°è¡Œ , å‡½æ•°æ·»åŠ ä¸€æ¡åˆ†å‰²çº¿å°éƒ¨ä»¶ (Divider Widget)åŽ»æ˜¾ç¤ºåˆ†å‰²æ¡ç›® itemBuilder: (context, i) &#123; if (i.isOdd) return new Divider(); // index ä¸º i/2 çš„ä½™æ•´æ•° final index = i ~/ 2; if (index &gt;= _suggestions.length) &#123; // ...ç”Ÿæˆ10ä¸ªè¯å¯¹,æ·»åŠ åˆ°list _suggestions.addAll(generateWordPairs().take(10)); &#125; return _buildRow(_suggestions[index]); &#125; ); &#125; 4. æ›´æ–° RandomWordsState çš„ build æ–¹æ³• , ä½¿ç”¨ _buildSuggestions ,ä¸å†ç›´æŽ¥ä½¿ç”¨è°ƒç”¨å•è¯ç”Ÿäº§åº“. 12345678910111213class RandomWordsState extends State&lt;RandomWords&gt; &#123; ... @override Widget build(BuildContext context) &#123; return new Scaffold ( appBar: new AppBar( title: new Text('Startup Name Generator'), ), body: _buildSuggestions(), ); &#125; ...&#125; 5. æ›´æ–° MyApp çš„ build æ–¹æ³• . ä»Ž MyApp ä¸­ç§»é™¤ Scaffold å’Œ AppBar å®žä¾‹. è¿™äº›å°†ä¼šè¢« RandomWordsState ç®¡ç† ,è¿™æ ·å°†æ›´å®¹æ˜“åœ°åœ¨ä¸‹ä¸ªæ­¥éª¤é¡µé¢è·³è½¬æ—¶åŽ»æ”¹å˜å¯¼èˆªæ ä¸Šçš„åç§°. 123456789class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return new MaterialApp( title: 'Startup Name Generator', home: new RandomWords(), ); &#125;&#125; æ­¥éª¤ 5 : å¢žåŠ äº¤äº’è¿™ä¸ªæ­¥éª¤ä¸­ , æˆ‘ä»¬å°†å¢žåŠ å¯ç‚¹å‡»çš„å¿ƒå½¢å›¾æ ‡åˆ°æ¯ä¸€è¡Œ . å½“ç”¨æˆ·ç‚¹å‡»åˆ—è¡¨æ¡ç›®æ—¶ , è§¦å‘å…¶ â€œfavoriteâ€ çŠ¶æ€ ,çŠ¶æ€æ”¹å˜ä¼šå°†å¯¹åº”å•è¯å¯¹æ·»åŠ åˆ°ä¿å­˜çš„é›†åˆæˆ–ä»Žä¸­ç§»é™¤ 1. æ·»åŠ  _saved é›†åˆåˆ° RandomWordsState é‡Œ . é›†åˆå­˜å‚¨ç”¨æˆ·å–œå¥½çš„å•è¯å¯¹ , æ›´å€¾å‘äºŽç”¨ Set æ˜¯å› ä¸º Set ä¸­ä¸å…è®¸æœ‰é‡å¤çš„æ¡ç›® 12345678class RandomWordsState extends State&lt;RandomWords&gt; &#123; final _suggestions = &lt;WordPair&gt;[]; final _saved = new Set&lt;WordPair&gt;(); final _biggerFont = const TextStyle(fontSize: 18.0); ...&#125; 2. åœ¨ _buildRow å‡½æ•°é‡Œ , æ·»åŠ  alreadySaved å˜é‡æ¥æ£€æŸ¥ç¡®ä¿å•è¯å¯¹è¿˜æœªè¢«æ·»åŠ åˆ°å–œå¥½çš„é›†åˆä¸­. 1234Widget _buildRow(WordPair pair) &#123; final alreadySaved = _saved.contains(pair); ...&#125; 3 ~ 4. è¿˜æ˜¯åœ¨_buildRow é‡Œ , æ·»åŠ å¿ƒå½¢å›¾æ ‡ . é‡å¯åº”ç”¨ , æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¿ƒå½¢å·²è¢«æ·»åŠ  , åªæ˜¯æš‚æ—¶æ²¡æœ‰äº¤äº’äº‹ä»¶ 12345678910111213Widget _buildRow(WordPair pair) &#123; final alreadySaved = _saved.contains(pair); return new ListTile( title: new Text( pair.asPascalCase, style: _biggerFont, ), trailing: new Icon( alreadySaved ? Icons.favorite : Icons.favorite_border, color: alreadySaved ? Colors.red : null, ), );&#125; 5. åœ¨_buildRow ä¸­è®¾ç½®å¿ƒå½¢å¯ç‚¹å‡». å¦‚æžœä¸€ä¸ªå•è¯æ¡ç›®è¢«æ·»åŠ åˆ°å–œæ¬¢çš„é›†åˆæ—¶, å†æ¬¡å•å‡»å®ƒå°±èƒ½ä»Žå–œæ¬¢çš„é›†åˆä¸­ç§»é™¤ . å½“å¿ƒå½¢è¢«ç‚¹å‡» , å‡½æ•°ä¼šè°ƒç”¨ setState()åŽ»é€šçŸ¥æ¡†æž¶çŠ¶æ€è¢«æ”¹å˜äº†. 12345678910111213141516171819202122Widget _buildRow(WordPair pair) &#123; final alreadySaved = _saved.contains(pair); return new ListTile( title: new Text( pair.asPascalCase, style: _biggerFont, ), trailing: new Icon( alreadySaved ? Icons.favorite : Icons.favorite_border, color: alreadySaved ? Colors.red : null, ), onTap: () &#123; setState(() &#123; if (alreadySaved) &#123; _saved.remove(pair); &#125; else &#123; _saved.add(pair); &#125; &#125;); &#125;, );&#125; åœ¨ Flutter reactå¼çš„æ¡†æž¶ä¸­ , è°ƒç”¨ setState() ä¼šä¸º State å¯¹è±¡è§¦å‘ build() æ–¹æ³• , æœ€åŽæ›´æ–°åˆ°UIä¸Š. æ­¥éª¤ 6 : è·³è½¬åˆ°æ–°é¡µé¢åœ¨è¿™ä¸ªæ­¥éª¤é‡Œ , æˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªé¡µé¢ (åœ¨Flutteré‡Œå« route ) å±•ç¤ºå–œå¥½çš„æŽ¨èè¯å¯¹ . æˆ‘ä»¬å°†å­¦åˆ°å¦‚ä½•ä»Žä¸»é¡µé¢å¯¼èˆªåˆ°æ–°é¡µé¢ . åœ¨ Flutter ä¸­ , Navigator ç®¡ç†ç€ä¸€ä¸ªåŒ…å«appé¡µé¢çš„æ ˆ . æŽ¨é€ä¸€ä¸ªé¡µé¢è¿›å…¥ Navigator çš„æ ˆä¸­, åˆ™ä¼šæ›´æ–°æ˜¾ç¤ºè¿™ä¸ªé¡µé¢ . ä»Ž Navigatoræ ˆä¸­æŽ¨å‡ºä¸€ä¸ªé¡µé¢ , åˆ™ä¼šæ˜¾ç¤ºä¸Šä¸€ä¸ªé¡µé¢ . 1 ~ 3. åœ¨ RandomWordsState çš„ build æ–¹æ³•ä¸­ç»™ AppBar æ·»åŠ ä¸€ä¸ªåˆ—è¡¨å›¾æ ‡ . å½“ç”¨æˆ·ç‚¹å‡»å›¾æ ‡ , ä¸€ä¸ªåŒ…å«å–œå¥½åˆ—è¡¨çš„é¡µé¢ä¼šè¢«æŽ¨é€å‘ˆçŽ° . 12345678910111213141516class RandomWordsState extends State&lt;RandomWords&gt; &#123; ... @override Widget build(BuildContext context) &#123; return new Scaffold( appBar: new AppBar( title: new Text('Startup Name Generator'), actions: &lt;Widget&gt;[ new IconButton(icon: new Icon(Icons.list), onPressed: _pushSaved), ], ), body: _buildSuggestions(), ); &#125; ...&#125; ç„¶åŽåœ¨ RandomWordsState ä¸­æ·»åŠ  _pushSavedæ–¹æ³• 12345class RandomWordsState extends State&lt;RandomWords&gt; &#123; ... void _pushSaved() &#123; &#125;&#125; 4 ~ 6. æ·»åŠ  MaterialPageRoute åŠå®ƒçš„ builder . æ·»åŠ ä»£ç ç”Ÿæˆ ListTile è¡Œ . ListTile çš„divideTiles() æ–¹æ³•åœ¨æ¯ä¸€æ¡æ¡ç›®é—´å¢žåŠ æ°´å¹³è·ç¦» . divided å˜é‡ä¿å­˜ç€æœ€ç»ˆçš„è¡Œ , é€šè¿‡å‡½æ•° toList() è½¬æ¢ä¸ºåˆ—è¡¨ builder å±žæ€§è¿”å›žä¸€ä¸ª Scaffold , åŒ…å«äº†æ–°é¡µé¢çš„å¯¼èˆªæ  ,åä¸º â€œSaved Suggestionâ€ .æ–°é¡µé¢çš„å†…å®¹éƒ¨åˆ†ç”± ListViewåŒ…å« ListTiles è¡Œç»„æˆ , æ¯ä¸€è¡Œç”±ä¸€ä¸ª divider åˆ†éš” . 123456789101112131415161718192021222324void _pushSaved() &#123; Navigator.of(context).push( new MaterialPageRoute( builder: (context) &#123; final tiles = _saved.map( (pair) &#123; return new ListTile( title: new Text( pair.asPascalCase, style: _biggerFont, ), ); &#125;, ); final divided = ListTile .divideTiles( context: context, tiles: tiles, ) .toList(); &#125;, ), );&#125; æ­¥éª¤ 7 : é€šè¿‡ä¸»é¢˜æ”¹å˜UIåœ¨è¿™ä¸ªæœ€ç»ˆæ­¥éª¤ä¸­, æˆ‘ä»¬å°†æ”¹å˜appçš„ä¸»é¢˜ . 1. æˆ‘ä»¬å¯ä»¥ç®€å•åœ°é€šè¿‡é…ç½® ThemeData ç±» æ”¹å˜appçš„ä¸»é¢˜ . å½“å‰appæ˜¯é»˜è®¤ä¸»é¢˜, æˆ‘ä»¬å°†æ”¹å˜ä¸»è‰²ä¸ºç´«è‰² 123456789101112class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return new MaterialApp( title: 'Startup Name Generator', home: new RandomWords(), theme: new ThemeData( primaryColor: Colors.purple ), ); &#125;&#125; æœ€åŽè´´ä¸€ä¸‹ main.dart å®Œæ•´ä»£ç  , æ–¹ä¾¿å°å‹ä»¬æŸ¥çœ‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123import 'package:flutter/material.dart';import 'package:english_words/english_words.dart';void main() =&gt; runApp(new MyApp());class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return new MaterialApp( title: 'Startup Name Generator', home: new RandomWords(), theme: new ThemeData(primaryColor: Colors.purple), ); &#125;&#125;class RandomWords extends StatefulWidget &#123; @override createState() =&gt; new RandomWordsState();&#125;class RandomWordsState extends State&lt;RandomWords&gt; &#123; final _suggestions = &lt;WordPair&gt;[]; final _saved = new Set&lt;WordPair&gt;(); final _biggerFont = const TextStyle(fontSize: 18.0); Widget _buildSuggestions() &#123; return new ListView.builder( // padding 16 padding: const EdgeInsets.all(16.0), // æ¯ä¸€å¯¹å•è¯å¯¹è°ƒç”¨ä¸€æ¬¡itemBuilder å›žè°ƒ ,ç„¶åŽæ”¾ç½®ä¸€ä¸ªæŽ¨èçš„å•è¯å¯¹åœ¨è¡Œå†… // å¶æ•°è¡Œ , å‡½æ•°å¢žåŠ ä¸ªå†…å®¹è¡Œæ˜¾ç¤ºå•è¯å¯¹, // å¥‡æ•°è¡Œ , å‡½æ•°æ·»åŠ ä¸€æ¡åˆ†å‰²çº¿å°éƒ¨ä»¶ (Divider Widget)åŽ»æ˜¾ç¤ºåˆ†å‰²æ¡ç›® itemBuilder: (context, i) &#123; if (i.isOdd) return new Divider(); // index ä¸º i/2 çš„ä½™æ•´æ•° final index = i ~/ 2; if (index &gt;= _suggestions.length) &#123; // ...ç”Ÿæˆ10ä¸ªè¯å¯¹,æ·»åŠ åˆ°list _suggestions.addAll(generateWordPairs().take(10)); &#125; return _buildRow(_suggestions[index]); &#125;); &#125; Widget _buildRow(WordPair pair) &#123; final alreadySaved = _saved.contains(pair); return new ListTile( title: new Text( pair.asPascalCase, style: _biggerFont, ), trailing: new Icon( alreadySaved ? Icons.favorite : Icons.favorite_border, color: alreadySaved ? Colors.red : null, ), onTap: () &#123; setState(() &#123; if (alreadySaved) &#123; _saved.remove(pair); &#125; else &#123; _saved.add(pair); &#125; &#125;); &#125;, ); &#125; @override Widget build(BuildContext context) &#123; return new Scaffold( appBar: new AppBar( title: new Text('Startup Name Generator'), actions: &lt;Widget&gt;[// new IconButton(icon: new Icon(Icons.colorize),onPressed: _changeTheme), new IconButton(icon: new Icon(Icons.list), onPressed: _pushSaved) ], ), body: _buildSuggestions(), ); &#125; void _changeTheme()&#123; &#125; void _pushSaved() &#123; Navigator.of(context).push( new MaterialPageRoute( builder: (context) &#123; final tiles = _saved.map( (pair) &#123; return new ListTile( title: new Text( pair.asPascalCase, style: _biggerFont, ), ); &#125;, ); final divided = ListTile .divideTiles( context: context, tiles: tiles, ) .toList(); return new Scaffold( appBar: new AppBar( title: new Text('Saved Suggestions'), ), body: new ListView(children: divided), ); &#125;, ), ); &#125;&#125; å®Œæˆ!è‡³æ­¤ , æˆ‘ä»¬ç¬¬ä¸€ä¸ª app å·²ç»å®Œæˆ . GitHub åœ°å€ åŠŸèƒ½ç›¸å¯¹æ¥è¯´è¾ƒç®€å• , ä½†æ˜¯å¤§ä½“ä¸Šè®©æˆ‘ä»¬å¯¹å¼€å‘ Flutter app æœ‰äº†ä¸€å®šäº†è§£. ä¹‹åŽæˆ‘ä»¬å°†å»¶ç»­é˜…è¯»å®˜ç½‘çš„æ•™ç¨‹ , å¼€å§‹è¾ƒå…¨é¢åœ°äº†è§£æž„å»ºUIç›¸å…³çš„éƒ¨åˆ†.]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FlutteråŸºç¡€-(1)çŽ¯å¢ƒæ­å»ºåŠdemoè¿è¡Œ]]></title>
    <url>%2Fflutter-basic-env%2F</url>
    <content type="text"><![CDATA[Flutter æ˜¯ä¸€æ¬¾è°·æ­Œç”¨ä»¥åŒæ—¶åœ¨ iOS å’Œ Android ä¸Šåˆ¶ä½œé«˜è´¨é‡åŽŸç”Ÿç•Œé¢çš„ç§»åŠ¨åº”ç”¨UIæ¡†æž¶.ç›®å‰è°·æ­Œæ˜¯å·²å‘å¸ƒäº† Flutter Beta ç‰ˆ,åŒæ—¶ä¹Ÿæä¾›äº†å¤šä¸ª Sample Project ä¾›å­¦ä¹ . Flutter ä¸»è¦æœ‰ç€å¿«é€Ÿå¼€å‘ã€æœ‰è¡¨çŽ°åŠ›åŠçµæ´»çš„UIã€åŽŸç”Ÿè¡¨çŽ°ç­‰ç‰¹ç‚¹. å¿«é€Ÿå¼€å‘ æžé€Ÿçƒ­éƒ¨ç½²å°±èƒ½ä½¿appæž„å»ºç”Ÿæ•ˆ,ä½¿ç”¨å¤§é‡å¯æ·±åº¦è‡ªå®šä¹‰åŒ–çš„å°éƒ¨ä»¶ (Widgets) ä¾›å¿«é€Ÿå¼€å‘åŽŸç”Ÿç•Œé¢. æœ‰è¡¨çŽ°åŠ›åŠçµæ´»çš„UI å¿«é€Ÿåœ°å°†ç‰¹æ€§é›†ä¸­åœ¨å®¢æˆ·ç«¯ç”¨æˆ·ä½“éªŒä¸Š.åˆ†å±‚ä½“ç³»ç»“æž„å…è®¸æ·±åº¦å®šåˆ¶,æœ€ç»ˆå‘ˆçŽ°å¿«é€Ÿæ¸²æŸ“ä»¥åŠæœ‰è¡¨çŽ°åŠ›å’Œçµæ´»çš„è®¾è®¡ åŽŸç”Ÿè¡¨çŽ° Flutterçš„å°éƒ¨ä»¶åŒ…å«äº†æ‰€æœ‰å…³é”®çš„å¹³å°å·®å¼‚,å¦‚æ»šåŠ¨ã€å¯¼èˆªã€å›¾æ ‡å’Œå­—ä½“,ä»¥åœ¨iOSå’ŒAndroidä¸Šæä¾›å®Œæ•´çš„åŽŸç”Ÿè¡¨çŽ° ç±»ä¼¼äºŽ Fackbook çš„ React Native , æˆ‘ä»¬å¯ç”¨ Flutter å¼€å‘ä¸€å¥—ä»£ç ,åº”ç”¨äºŽ Android ä»¥åŠ iOS å¹³å°ä¸Š.ä¸ä»…å¦‚æ­¤, Flutter è¿˜å¯åº”ç”¨äºŽè°·æ­Œå°†æŽ¨å‡ºçš„æ–°ç³»ç»Ÿ Fuchsia . å¯ä»¥çœ‹å‡º , Flutter ç¡®æœ‰ç»Ÿä¸€ç§»åŠ¨ç«¯çš„èƒ½åŠ› , èº«ä¸ºç§»åŠ¨å¼€å‘è€… , å½“ç„¶è¦æœ‰æ‰€äº†è§£. so , æŽ¥ä¸‹æ¥æˆ‘ä»¬å°†å¼€å§‹ æ­å»ºå¼€å‘çŽ¯å¢ƒ , å¹¶ä¸”è¿è¡Œå®˜æ–¹çš„ demo ä¸ºäº†æ›´å¥½çš„é˜…è¯»ä½“éªŒ, è¯·ç‚¹å‡»é˜…è¯»åŽŸæ–‡ :) å®‰è£…é¦–å…ˆè¿›å…¥ Flutter Install é€‰æ‹©ç›¸åº”æ“ä½œç³»ç»Ÿä¸‹çš„å®‰è£…åŒ…è¿›è¡Œå®‰è£… é¦–å…ˆæ­¤å¤„æœ‰ä¸ªæ¸©é¦¨å°ç‚¹ , è°·æ­Œä¸ºä¸­å›½å¼€å‘è€…å‡†å¤‡äº†å›½å†…é•œåƒ,ä¸ºå›¾ä¸­çš„é“¾æŽ¥ this wiki article . ä¸»è¦æ˜¯é…ç½®ä¸¤ä¸ªçŽ¯å¢ƒå˜é‡ PUB_HOSTED_URL å’Œ FLUTTER_STORAGE_BASE_URL , å®‰è£…æ—¶å½“æ£€æµ‹åˆ°æœ‰è¿™ä¿©çŽ¯å¢ƒå˜é‡,å°±ä¼šä¼˜å…ˆè¯»å–å˜é‡å­˜å‚¨çš„åœ°å€åŽ»å®‰è£…. åˆ›å»ºæˆ–è€…æ‰“å¼€ $HOME/.bash_profile , åœ¨ä¸‹æ–¹æ·»åŠ ä¸¤è¡Œå˜é‡ 12export PUB_HOSTED_URL=https://pub.flutter-io.cnexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn ç„¶åŽ source $HOME/.bash_profile ä½¿ä¹‹åœ¨å½“å‰ terminal ç”Ÿæ•ˆ. æœ€åŽå¯ç”¨ echo $PUB_HOSTED_URL å’Œ echo $FLUTTER_STORAGE_BASE_URL æ£€æµ‹æ˜¯å¦æ·»åŠ æˆåŠŸ æœ€å¥½é…ç½®ä¸‹è¿™ä¸ªåœ°å€.ç¬”è€…å°è¯•æ•°æ¬¡,ç§‘å­¦ä¸Šç½‘æœŸé—´ä½†æ²¡é…ç½®è¿™å€†åœ°å€æ—¶,ä¸‹è½½ç»„ä»¶æ—¶æ€»ä¼šå´©æºƒä¸­æ–­ ðŸ˜§. æ­¤å¤„æˆ‘ä»¬é€‰æ‹© macOS ,å…¶ä»–ç³»ç»Ÿä¸‹çš„å®‰è£…å¯è‡ªè¡Œå‚è€ƒè°·æ­Œæ–‡æ¡£. ç³»ç»Ÿè¦æ±‚æƒ³è¦å®‰è£…å¹¶è¿è¡Œ Flutter , å¼€å‘çŽ¯å¢ƒå¿…é¡»æ»¡è¶³æœ€ä½Žè¦æ±‚: æ“ä½œç³»ç»Ÿ : macOS (64ä½) ç£ç›˜ç©ºé—´ : 700 MB (ä¸åŒ…å« Xcode æˆ– Android Studioçš„ç©ºé—´) å·¥å…· : Flutter ä¾èµ–äºŽè¿™äº›ç³»ç»ŸçŽ¯å¢ƒé‡Œçš„å‘½ä»¤è¡Œå·¥å…· bash , mkdir , rm , git , curl , unzip , which èŽ·å– Flutter SDKä½¿ç”¨ git å‘½ä»¤å…‹éš†åº“å¹¶ä¸”æ·»åŠ  flutter å·¥å…·åˆ°çŽ¯å¢ƒå˜é‡ä¸­. è¿è¡Œ flutter doctor ä¼šæ˜¾ç¤ºå‰©ä½™éœ€è¦åŽ»å®‰è£…çš„ä¾èµ–. å…‹éš†ä»“åº“å½“å‰æˆ‘ä»¬éœ€è¦å…‹éš†ä»“åº“betaåˆ†æ”¯ , ç„¶åŽæ·»åŠ çŽ¯å¢ƒå˜é‡ 12git clone -b beta https://github.com/flutter/flutter.gitexport PATH=`pwd`/flutter/bin:$PATH ä»¥ä¸Šå‘½ä»¤åªæ˜¯è®¾ç½®ä¸´æ—¶å˜é‡,å»ºè®®å°†å…¶æ°¸ä¹…æ·»åŠ åˆ°çŽ¯å¢ƒå˜é‡ä¸­. åˆ›å»ºæˆ–æ‰“å¼€ $HOME/.bash_profile æ–‡ä»¶. æ·»åŠ ä»¥ä¸‹è¡Œ,å¹¶ä¸”æ›¿æ¢ [PATH_TO_FLUTTER_GIT_DIRECTORY] ä¸ºä½ çš„ Flutter gitç›®å½• 1export PATH=[PATH_TO_FLUTTER_GIT_DIRECTORY]/flutter/bin:$PATH ç„¶åŽè¿è¡Œ source $HOME/.bash_profile ä½¿ä¹‹åœ¨å½“å‰ terminal ç”Ÿæ•ˆ. å¯ç”¨ echo $PATH æ£€æµ‹æ˜¯å¦æ·»åŠ æˆåŠŸ æ£€æµ‹ä¾èµ–è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æµ‹å¿…è¦ä¾èµ–æ˜¯å¦å·²ç»å®Œæˆå®‰è£… 1flutter doctor è¿™ä¸ªå‘½ä»¤æ£€æµ‹çŽ¯å¢ƒç„¶åŽå°†ç»“æžœæ˜¾ç¤ºåœ¨å‘½ä»¤è¡Œçª—å£. Dart SDK ä¸Ž Flutter ç»‘å®šåœ¨ä¸€èµ· , æ²¡å¿…è¦å•ç‹¬å®‰è£… Dart. ä»”ç»†æ£€æŸ¥ç»“æžœ,å¯èƒ½éœ€è¦å®‰è£…ä¾èµ–æˆ–è€…æ‰§è¡Œä»»åŠ¡ (ç²—ä½“æ˜¾ç¤º) eg. 12345[-] Android toolchain - develop for Android devices â€¢ Android SDK at /Users/obiwan/Library/Android/sdk âœ— Android SDK is missing command line tools; download from https://goo.gl/XxQghQ â€¢ Try re-installing or updating your Android SDK, visit https://flutter.io/setup/#android-setup for detailed instructions. ç¬¬ä¸€æ¬¡è¿è¡Œ flutter å‘½ä»¤ å¦‚( flutter doctor ), ä¼šè‡ªè¡Œå¼€å§‹ä¸‹è½½ä¾èµ–åº“å¹¶ç¼–è¯‘. åŽç»­çš„è¿è¡Œå°±ä¼šå˜çš„å¿«çš„å¤š. Flutter ä½¿ç”¨ Google Analytics æ¥åŒ¿åæŠ¥å‘ŠåŠŸèƒ½ä½¿ç”¨ç»Ÿè®¡ä»¥åŠå´©æºƒæ—¥å¿—, å¯é€šè¿‡ flutter config --no-analytics æ¥ç¦ç”¨æŠ¥å‘Š. è¿™é‡Œè¯´å¥é¢˜å¤–è¯ , å‡ å¹´å‰è°£ä¼ è°·æ­Œè¦é‡‡ç”¨æ–°çš„ Android å¼€å‘è¯­è¨€ Sky ä»£æ›¿ Java . åŽé¢æ²‰æººäº†ä¸€æ®µæ—¶é—´ , æœ€ç»ˆå®ƒè¿˜æ˜¯è¢«è°·æ­Œå‘å¸ƒå‡ºæ¥äº†,åªä¸è¿‡çŽ°åœ¨å« Flutter . ä½†ä¸éš¾å‘çŽ° , Flutterä¸­å¤šå°‘è¿˜æ˜¯æœ‰æ˜“å®¹å‰çš„çš„å½±å­,æ¯”å¦‚ä¸Šå›¾ä¸­ç¬¬äºŒä¸ªåŠ è½½çš„åŒ…å°±å« sky_engine .. ç¼–è¾‘å™¨è®¾ç½®çŽ¯å¢ƒæ­å»ºå¥½äº† , å¼€å§‹é€‰æ‹©ç¼–è¾‘å™¨äº†. å»ºè®®çš„ç¼–è¾‘å™¨æœ‰ Android Studio , IntelliJ IDEA , VS Codeç­‰. Android Studio éœ€è¦ 3.0 æˆ–ä»¥ä¸Šçš„ç‰ˆæœ¬ IntelliJ IDEA éœ€è¦ 2017.1 æˆ–ä¹‹åŽçš„ç‰ˆæœ¬ VS Code éœ€è¦ 1.20 æˆ–ä»¥ä¸Šçš„ç‰ˆæœ¬ è¿™é‡Œæˆ‘ä»¬é€‰æ‹© IntelliJ IDEA æ¥ä½œä¸ºç¼–è¾‘å™¨å¹¶ä¸”å®‰è£… Flutter , Dart ä¸¤æ¬¾æ’ä»¶ , å®‰è£…æ­¥éª¤ä¸»è¦ä¸º å¼€å¯ IntelliJ IDEA æ‰“å¼€æ’ä»¶åå¥½è®¾ç½® (macOSä¸Šä¸ºPreferences&gt;Plugins , WindowsåŠLinuxä¸Šä¸ºFile&gt;Settings&gt;Plugins) é€‰æ‹© Browse repositoriesâ€¦ , è¾“å…¥ Flutter ç„¶åŽç‚¹å‡» install å®‰è£… ç‚¹å‡» Yes å½“æç¤ºåŽ»å®‰è£… Dart Plugin å®‰è£…å®ŒæˆåŽé‡å¯ IDEA Android Studio å®‰è£…æ’ä»¶ä¸Ž IntelliJ IDEAä¸€è‡´ , VS Code çš„è¯·å‚è€ƒå®˜ç½‘ Editor å¹³å°è®¾ç½®macOS æ”¯æŒå¼€å‘ Android åŠ iOS Flutter apps .å®Œæˆå…¶ä¸­ä¸€ä¸ªå¹³å°çš„è®¾ç½®å³å¯ç¼–è¯‘å’Œè¿è¡Œ Flutter app . iOS è®¾ç½®å®‰è£… Xcodeæˆ‘ä»¬éœ€è¦å®‰è£… Xcode 7.2 æˆ–ä»¥ä¸Šç‰ˆæœ¬ , æ•´ä½“æ­¥éª¤ä¸º: å®‰è£… Xcode 7.2 æˆ–ä»¥ä¸Šçš„ç‰ˆæœ¬ (é€šè¿‡ web æˆ–è€… Mac AppStore) å‘½ä»¤è¡Œè¿è¡Œ sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer é…ç½® Xcodeå‘½ä»¤è¡Œå·¥å…·ä»¥ä½¿ç”¨æ–°å®‰è£…çš„ Xcode ç‰ˆæœ¬ ç¡®è®¤ Xcode license åè®®è¢«ç­¾ç½²è¿‡. å¯é€šè¿‡æ‰“å¼€ä¸€æ¬¡ Xcode æˆ–å‘½ä»¤è¡Œè¿è¡Œ sudo xcodebuild -license ä½¿ç”¨ Xcode æˆ‘ä»¬å°±èƒ½åœ¨ iOS è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œ Flutter apps è®¾ç½®iOSæ¨¡æ‹Ÿå™¨ é¦–å…ˆæ‰“å¼€æ¨¡æ‹Ÿå™¨ é€šè¿‡å‘½ä»¤ open -a Simulator æˆ–è€… Spotlight é€šè¿‡æ£€æŸ¥æ¨¡æ‹Ÿå™¨çš„ Hardware &gt; Device èœå•ä¸­å¾—è®¾ç½® , ä»¥ç¡®ä¿æ¨¡æ‹Ÿå™¨æ­£åœ¨ä½¿ç”¨64ä½è®¾å¤‡ (iPhone 5sæˆ–æ›´é«˜ç‰ˆæœ¬) å–å†³äºŽå¼€å‘è®¾å¤‡å±å¹•å°ºå¯¸ , é«˜å±å¹•å¯†åº¦çš„iOSæ¨¡æ‹Ÿè®¾å¤‡å¯èƒ½ä¼šåœ¨å±å¹•ä¸Šæº¢å‡º , åœ¨æ¨¡æ‹Ÿå™¨çš„Window &gt; Scaleèœå•ä¸‹è®¾ç½®è®¾å¤‡æ¯”ä¾‹ é€šè¿‡è¿è¡Œ flutter run æ¥å¯åŠ¨åº”ç”¨ éƒ¨ç½²åˆ°iOSè®¾å¤‡è¦éƒ¨ç½² Flutter app åˆ° iOSè®¾å¤‡ , æˆ‘ä»¬éœ€è¦ä¸€äº›é¢å¤–çš„å·¥å…·å’Œ Apple è´¦å· . è¿˜éœ€è¦åœ¨è®¾å¤‡ä¸Šè¿›è¡Œè®¾ç½® å®‰è£… homebrew æ‰“å¼€å‘½ä»¤ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å®‰è£…å·¥å…· 1234brew updatebrew install --HEAD libimobiledevicebrew install ideviceinstaller ios-deploy cocoapodspod setup å¦‚è‹¥è¿™äº›å‘½ä»¤å‡ºçŽ°å¼‚å¸¸å¤±è´¥äº†, è¿è¡Œ brew doctor æŒ‰ç…§è¯´æ˜Žè§£å†³é—®é¢˜ ç„¶åŽä¾ç…§ Xcode ç­¾åæµç¨‹æ¥é…ç½®é¡¹ç›® ä»ŽFlutteré¡¹ç›®ç›®å½•ä¸­çš„ç»ˆç«¯çª—å£ä¸­è¿è¡Œios/Runner.xcworkspaceæ¥æ‰“å¼€Xcodeå·¥ä½œç©ºé—´ , ä¹Ÿå¯ç›´æŽ¥åŒå‡»æ–‡ä»¶æ‰“å¼€ åœ¨Xcodeä¸­,ä»Žå·¦ä¾§å¯¼èˆªé¢æ¿ä¸­é€‰æ‹© Runner é¡¹ç›® Runner targetè®¾ç½®é¡µé¢ , ç¡®ä¿åœ¨General &gt; Signing &gt; Teamä¸‹çš„å¼€å‘å›¢é˜Ÿæ˜¯è¢«é€‰ä¸­çš„. å½“é€‰æ‹©ä¸€ä¸ªå›¢é˜Ÿ , Xcodeä¼šåˆ›å»ºå¹¶ä¸‹è½½å¼€å‘è¯ä¹¦ , å¹¶è´¦å·ä¸­æ³¨å†Œæ­¤è®¾å¤‡ , ç„¶åŽåˆ›å»ºå¹¶ä¸‹è½½ä¸€ä¸ªæè¿°æ–‡ä»¶. å¦‚æžœæ˜¯ç¬¬ä¸€ä¸ªiOSå¼€å‘é¡¹ç›®,åˆ™å¯èƒ½éœ€è¦ä½¿ç”¨åˆ° Apple ID ç™»å½•Xcode å½“ç¬¬ä¸€æ¬¡ä½¿ç”¨è®¾å¤‡è¿›è¡ŒiOSå¼€å‘æ—¶, éœ€è¦åœ¨è®¾å¤‡ä¸Šä¿¡ä»»Macå’Œå¼€å‘è¯ä¹¦.é¦–æ¬¡å°†iOSè®¾å¤‡è¿žæŽ¥åˆ°Macæ—¶,ä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†,åœ¨å¯¹è¯æ¡†ä¸­ç‚¹å‡»ä¿¡ä»»å³å¯. ç„¶åŽåŽ» iOS è®¾å¤‡ä¸Šè®¾ç½®åº”ç”¨ç¨‹åº , General &gt; Device Managementä¸‹é€‰æ‹©ä¿¡ä»»ä½ çš„è¯ä¹¦ è‹¥ Xcodeä¸­çš„è‡ªåŠ¨ç­¾åå¤±è´¥ , è¯·éªŒè¯é¡¹ç›®ä¸­çš„General&gt; Identity&gt; Bundle Identifierä¸‹çš„å€¼æ˜¯å¦å”¯ä¸€ ç„¶åŽå¯é€šè¿‡ flutter run è¿è¡Œapp Android è®¾ç½®å®‰è£… Android Studioæˆ‘ä»¬éœ€è¦å®‰è£…å¹¶é…ç½® Android Studio , æ•´ä½“æ­¥éª¤ä¸º: ä¸‹è½½å¹¶å®‰è£… Android Studio æ‰“å¼€ Android Studio , èµ°å®Œ â€˜Android Studio å®‰è£…æŒ‡å—â€™ . è¿™å°†å®‰è£…æœ€æ–°çš„ Android SDK, Android SDK Platform-Tools, and Android SDK Build-Tools , è¿™æ˜¯ Flutter å¼€å‘ Android å¿…è¦çš„. è®¾ç½®Androidæ¨¡æ‹Ÿå™¨è¿è¡Œæ¨¡æ‹Ÿå™¨æ¯”è¾ƒåƒèµ„æº , è¿™é‡Œå»ºè®®è¿˜æ˜¯ä½¿ç”¨AndroidçœŸæœº. å¦‚è‹¥éœ€è¦é…ç½®æ¨¡æ‹Ÿå™¨è¯·å‚è€ƒå®˜ç½‘ è®¾ç½®Androidè®¾å¤‡è¦è¿è¡Œå¹¶ä¸”æµ‹è¯•æˆ‘ä»¬çš„åº”ç”¨åœ¨ Android è®¾å¤‡ä¸Š , æˆ‘ä»¬éœ€è¦ç³»ç»Ÿç‰ˆæœ¬ä¸º Android 4.1 åŠä»¥ä¸Šçš„ Android è®¾å¤‡ æ‰“å¼€ å¼€å‘è€…é€‰é¡¹ è¿˜æœ‰ USBè°ƒè¯• . ä½¿ç”¨USBå°†æ‰‹æœºè¿žæŽ¥ç”µè„‘ . è‹¥æ‰‹æœºå‡ºçŽ°æç¤º,æŽˆæƒç”µè„‘è®¿é—®æ‰‹æœº åœ¨å‘½ä»¤æ‰§è¡Œ flutter devices ç¡®è®¤è¿žæŽ¥ç”µè„‘çš„è®¾å¤‡ ç„¶åŽå¯é€šè¿‡æ‰§è¡Œ flutter run è¿è¡Œæˆ‘ä»¬çš„app è¿™é‡Œçš„ flutter devices å‘½ä»¤ç±»ä¼¼ adb çš„ adb devices . å¦‚è‹¥æç¤ºä¸å¯ç”¨ , è¯·å°† adb æ‰€åœ¨ç›®å½•æ·»åŠ åˆ°çŽ¯å¢ƒå˜é‡ . è¿è¡Œappå‘½ä»¤ç»ˆç«¯é¦–å…ˆç”¨ flutter create å‘½ä»¤åˆ›å»ºæ–°é¡¹ç›® 12flutter create myappcd myapp ä»¥ä¸Šå‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ª åä¸º myapp çš„ Flutter é¡¹ç›® , å…¶ä¸ºä¸€ä¸ªåŒ…å« Material Components çš„ç®€å•demo . é¡¹ç›®ç›®å½•é‡Œ , appçš„ä»£ç åœ¨ lib/main.dart ä¸­. ç„¶åŽè¿è¡Œapp ç¡®ä¿æœ‰è®¾å¤‡å·²ç»è¿žæŽ¥ , è‹¥æ— è®¾å¤‡è¿žæŽ¥,è¯·å‚è€ƒæ–‡ä¸­ å¹³å°è®¾ç½® 1flutter devices é€šè¿‡ flutter run å‘½ä»¤è¿è¡Œapp 1flutter run è‹¥ä¸å‡ºæ„å¤–,åˆ™è¿è¡ŒæˆåŠŸ å°è¯•çƒ­éƒ¨ç½² . Flutter æä¾›äº†çƒ­éƒ¨ç½²ä»¥ä¾›å¿«é€Ÿå¼€å‘. æ‰“å¼€ lib/main.dart ä¿®æ”¹ç•Œé¢æ–‡æ¡ˆ,ä¿å­˜ åœ¨å‘½ä»¤ç»ˆç«¯æŒ‰ä¸‹ â€˜râ€™ ç•Œé¢æ–‡æ¡ˆå³åˆ»æ›´æ–°ç”Ÿæ•ˆ Android StudioIntelliJ IDEA å’Œ Android Studio å¯¹çƒ­æ›´æ–°æ“ä½œæ›´ä¾¿æ·. åŒæ ·æ˜¯åœ¨è¿è¡ŒåŽ,ä¿®æ”¹æ–‡æ¡ˆä¿å­˜,ç„¶åŽç‚¹å‡»é—ªç”µâš¡ï¸Reloadå³å¯ è¿™é‡Œåæ§½ä¸‹, é¦–æ¬¡è¿è¡Œ iOS æ¯” Android è¦å¿«ä¸è¦å¤ªå¤š. ä¸»è¦æ˜¯ Gradleæž„å»ºçš„é—®é¢˜ . on Android : on iOS : è¿è¡Œå®˜æ–¹Demoåˆ›å»ºçš„é»˜è®¤é¡¹ç›®åŠŸèƒ½è¾ƒç®€å•,ä¸èƒ½å¤Ÿç»™æˆ‘ä»¬å¸¦æ¥è¾ƒæ·±åˆ»çš„ä½“éªŒ. æˆ‘ä»¬å¯ä»¥å‚è€ƒ Flutter Demo . è¿™é‡Œæˆ‘ä»¬æ‹¿å…¶ä¸­è¾ƒä¸é”™çš„ flutter_gallery æ¥è¿è¡Œ. é¦–å…ˆä¸‹è½½ä¸‹æ¥,è¿›å…¥å…¶ç›®å½•. è¿™é‡Œå› ä¸ºdemoè¿è¡Œéœ€è¦å®‰è£…é¢å¤–ä¾èµ–,æ‰€ä»¥éœ€è¦å¯¹ç»ˆç«¯/IDEA è¿›è¡Œç§‘å­¦ä¸Šç½‘é…ç½®.ä¸æ¸…æ¥šçš„è¯·æ ¹æ®è‡ªèº«ç§‘å­¦ä¸Šç½‘å§¿åŠ¿é…ç½® :) ç„¶åŽè¿è¡Œ flutter doctor ,å¦‚æžœæ˜¯IDEAæ‰“å¼€åˆ™ç›´æŽ¥è‡ªåŠ¨è¿è¡Œ , å¯èƒ½å¾—åˆ°è¿™ç»“æžœ. æ­¤æ—¶æ‰“å¼€é¡¹ç›®ç›®å½•ä¸­çš„ pubspec.yaml æ‰¾åˆ° test: 0.12.30+4 æ”¹ä¸º test: 0.12.30+3 å³å¯ Flutteræ˜¯ä¸€ä¸ªåˆæœŸçš„å¼€æºé¡¹ç›®ï¼Œå®ƒå¸®åŠ©å¼€å‘è€…ä»Žä¸€ä¸ªä»£ç åº“æž„å»ºå‡ºé«˜æ€§èƒ½ã€é«˜ä¿çœŸåº¦çš„ç§»åŠ¨åº”ç”¨ . è¿™ä¸ªGalleryæ˜¯Flutterçš„è®¸å¤šå°éƒ¨ä»¶ã€è¡Œä¸ºã€åŠ¨ç”»ã€å¸ƒå±€ç­‰çš„é¢„è§ˆ . æ­£å¦‚ Flutter Gallery å®˜æ–¹ä»‹ç»æ‰€è¯´ , å®ƒä¸»è¦å‘ˆçŽ°çš„æ˜¯ä¸€äº›å°éƒ¨ä»¶çš„é¢„è§ˆ , ä¸»é¢˜çš®è‚¤åˆ‡æ¢ , æŽ§ä»¶é£Žæ ¼åˆ‡æ¢ç­‰ç¤ºä¾‹ . åŽæœŸçš„å­¦ä¹ ä¸­å¯å‚è€ƒå…¶è¿›è¡Œ.]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[IntelliJ+Gradleè‡ªå®šä¹‰waråŒ…åç§°]]></title>
    <url>%2Fidea-gradle_war%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨å¸®æœ‹å‹å¼€å‘å°ç¨‹åºçš„ Java åŽç«¯,é¡¹ç›®é‡‡ç”¨ Gradle æž„å»º,ä½¿ç”¨IntelliJå¼€å‘. å¼€å‘ä¸­ç»å¸¸éœ€è¦å‘åŒ…åˆ°å¤–ç½‘ä¸Š,æ–¹ä¾¿å‰ç«¯è”è°ƒ,è€ŒIntelliJé»˜è®¤æž„å»ºçš„ war åŒ…åç§°ä¸ºé¡¹ç›®å-ç‰ˆæœ¬å·,ä½¿å¾—æ¯æ¬¡ä¸Šä¼ waråŒ…è‡³æœåŠ¡å™¨tomcatæ—¶è¿˜å¾—æ‰‹åŠ¨é‡å‘½å,å‘å¸ƒæ¬¡æ•°å¤šäº†,å°±æ˜¾å¾—å¾ˆç¹ç.è¿™é‡Œå°±æ°´ä¸€ç¯‡,ç®€çŸ­è¯´æ˜Žä¸‹ IntelliJä¸­Gradleæž„å»ºå¦‚ä½•è‡ªå®šä¹‰waråŒ…åç§°. é¦–å…ˆæ‰“å¼€ Project Settings é€‰æ‹© Artifacts å‰ä¸¤ä¸ª Gradle:xxx æ˜¯åˆ›å»ºGradleé¡¹ç›®å¹¶æ·»åŠ tomcatåŽ,è‡ªåŠ¨ç”Ÿæˆçš„.æˆ‘ä»¬è¿™é‡Œç‚¹å‡» + æ–°å¢ž é€‰æ‹© Web Application: Archive -&gt; Empty ä¿®æ”¹waråŒ…åç§°åŠè¾“å‡ºè·¯å¾„ æ·»åŠ waråŒ…å†…å®¹,åŒæ ·é€‰æ‹© Artifact é€‰æ‹© Gradle: xxx (exploded) ä¹‹åŽæ‰“åŒ…åªèƒ½é€‰æ‹© Build -&gt; Build Artifacts ç„¶åŽé€‰æ‹©è‡ªå®šä¹‰çš„build, ç„¶åŽåœ¨è¾“å‡ºç›®å½•ä¸‹å³å¯æ‰¾åˆ°waråŒ…]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>IntelliJ</tag>
        <tag>war</tag>
        <tag>Gradle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoç»‘å®šè‡ªå®šä¹‰HttpsåŸŸå]]></title>
    <url>%2Fhexo_ssl_netlify%2F</url>
    <content type="text"><![CDATA[é€šå¸¸æˆ‘ä»¬å°†Hexoåšå®¢éƒ¨ç½²åˆ° GitHub Pages ä¸Š,ç„¶åŽç»‘å®šè‡ªå®šä¹‰åŸŸå.ä¾‹å¦‚ä½œè€…çš„ GitHub Page lhalcyon.github.ioç»‘å®šåˆ°äº†lhalcyon.comä¸Š.ä½†æ˜¯ GitHub Pages æ— æ³•ç»™è‡ªå®šä¹‰åŸŸåé…ç½®SSL GitHub Pagesé»˜è®¤æ˜¯æ”¯æŒhttpsçš„,å³æˆ‘ä»¬å¯é€šå¸¸https://lhalcyon.github.ioæ¥è®¿é—®åšå®¢,ä½†æ˜¯ç»‘å®šè‡ªå®šä¹‰åŸŸååŽ,åªèƒ½é€šè¿‡http://lhalcyon.comæ­£å¸¸è®¿é—®,å¦‚ç›´æŽ¥è®¿é—®https://lhalcyon.comå°±ä¼šçˆ†çº¢ ç”±äºŽåšå®¢å·²æ”¹é€ å®Œæˆ,å°±åº¦å¨˜äº†å¼ ç¤ºä¾‹å›¾ ä¸ºäº†å®žçŽ°è‡ªå®šä¹‰åŸŸåSSLè®¤è¯,é€šå¸¸çš„åšæ³•æ˜¯åœ¨Cloudflareé…ç½®ä¸€ä¸ªåå‘ä»£ç†åˆ°GitHub Pages,ä½†æ˜¯å…¶è®¿é—®é€Ÿåº¦åŠç¨³å®šæ€§ä¸å¤ªå¥½,å†å°±æ˜¯åšå®¢æ›´æ–°åŽç”Ÿæ•ˆä¹Ÿä¼šæœ‰å»¶è¿Ÿ,äºŽæ˜¯æˆ‘ä»¬å¾—å¯»ç´¢ä¸€ä¸ªè§£å†³åŠžæ³•. ä¸ºäº†æ›´å¥½çš„é˜…è¯»ä½“éªŒ,è¯·ç‚¹å‡» é˜…è¯»åŽŸæ–‡ðŸ˜‰. èµ·åˆæ˜¯è€ƒè™‘å°†Hexoè¿ç§»åˆ° Coding Pages ä¸Š,åŽæ¥å‘çŽ°å…¶å…è´¹æ‰˜ç®¡ä¸‹å¿…é¡»åœ¨é¦–é¡µå¯¹å…¶åšä¸€ä¸ªå¹¿å‘Š,å¦åˆ™è®¿é—®ä¼šå…ˆè·³è½¬åˆ°ä¸€ä¸ªä¸­è½¬å¹¿å‘Šé¡µå†è¿›è¡Œè·³è½¬ ,æƒ³å…å¹¿å‘Šåªèƒ½å‡çº§é»„é‡‘ä¼šå‘˜åŠä»¥ä¸Š,è¿™ç‚¹å¤ªä¸å‹å¥½. é—®é¢˜ä¼ é€é—¨ è·³è½¬é¡µ: or ä¸»åŠ¨æ·»åŠ å¹¿å‘Šé“¾æŽ¥,å®¡æ ¸è¿‡åŽä¼šå…åŽ»è·³è½¬é¡µ æŸåšå®¢é¡µè„šæ·»åŠ çš„å¹¿å‘Š: æ— ç–‘è¿™æ ·å¤§å¤§å½±å“æˆ‘ä»¬çš„åšå®¢ç¾Žè§‚,ä¸èƒ½æŽ¥å—,ä½†åˆä¸æƒ³è¿å›žGitHub Pages,æ€Žä¹ˆåŠž?ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸€äº›å…è´¹åŠå¥½ç”¨çš„é™æ€ç½‘ç«™æ‰˜ç®¡å¹³å° å…è´¹é™æ€ç½‘ç«™æ‰˜ç®¡å¹³å°GitHub Pagesä¼˜ç‚¹ è‡ªå¸¦åŸŸåå¯httpsè®¿é—® å¯é…ç½®è‡ªå®šä¹‰åŸŸå ç¼ºç‚¹ æ— æ³•ç»™è‡ªå®šä¹‰åŸŸåé…ç½®SSL Bitbucket Cloudè·Ÿ GitHub Pages åŠŸèƒ½ä¸€æ ·,ä½†æ˜¯: æ— æ³•è‡ªå®šä¹‰åŸŸå èƒ½ä¸”åªèƒ½é€šè¿‡ https åè®®è®¿é—®ï¼ˆhttp åè®®ä¼šè¢«è·³è½¬åˆ° https åè®®) æ‰€æœ‰é¡¹ç›®çš„é™æ€ç½‘ç«™ä»£ç éƒ½åªèƒ½æ”¾åœ¨ä¸“é—¨çš„ç«™ç‚¹ä»“åº“é‡Œï¼ˆaccountName.bitbucket.io) ,ä¸èƒ½åƒ GitHub é‚£æ ·å¯ä»¥åœ¨æ¯ä¸ªé¡¹ç›®é‡Œç”¨ gh-pages åˆ†æ”¯ä¿å­˜æ–‡ä»¶ aerobaticBitbucket æ——ä¸‹çš„é™æ€ç½‘ç«™æ‰˜ç®¡æœåŠ¡. å¯ä»¥ä½¿ç”¨ CLI ä¸Šä¼ ä»£ç  æ”¯æŒè‡ªåŠ¨æž„å»º (Continuous Deployment) å¯ä»¥è‡ªå®šä¹‰åŸŸåä½†æ˜¯æ”¶è´¹åŠŸèƒ½,è‡ªå®šä¹‰åŸŸåæ”¯æŒ https ä¸”ä¸éœ€è¦æä¾›è¯ä¹¦,å®ƒä¼šå¸®ä½ ç”Ÿæˆä¸€ä¸ª GitLab PagesåŒæ ·å’Œ GitHub Pages çš„åŠŸèƒ½ä¸€æ ·,ä½†æ˜¯: è‡ªå®šä¹‰åŸŸåå¯é…ç½®https,ä¸è¿‡éœ€è¦ä¸Šä¼ è¯ä¹¦ surge.sh åªèƒ½ä½¿ç”¨ CLI ä¸Šä¼ ä»£ç  æ”¯æŒè‡ªå®šä¹‰åŸŸå,ä½†å¼€å¯ SSL æ˜¯æ”¶è´¹åŠŸèƒ½ä¸”éœ€è¦è‡ªè¡Œä¸Šä¼ è¯ä¹¦ æ”¯æŒ200.html â€”â€” é€‚ç”¨äºŽä½¿ç”¨ History API çš„ SPA Firebase Hosting åªèƒ½ä½¿ç”¨ CLI ä¸Šä¼ ä»£ç  æ”¯æŒè‡ªå®šä¹‰åŸŸåå¹¶æ”¯æŒä¸€é”®å¼€å¯ https æ”¯æŒé‡å®šå‘ï¼ˆRedirectsï¼‰å’Œé‡å†™ï¼ˆRewritesï¼‰åŠŸèƒ½ï¼ˆå½“ç½‘ç«™ä½¿ç”¨ History API æ—¶ç‰¹åˆ«æœ‰ç”¨) but æœ‰è¢«å¢™çš„é£Žé™©â€¦â€¦ Netlify (æŽ¨è) å¯ä»¥ä½¿ç”¨ CLI ä¸Šä¼ ä»£ç  æ”¯æŒè‡ªå®šä¹‰åŸŸåä¸”è‡ªå®šä¹‰åŸŸåæ”¯æŒä¸€é”®å¼€å¯ httpsï¼ˆè¯ä¹¦æ¥è‡ª Letâ€™s Encrypeï¼‰ æ”¯æŒå¼ºåˆ¶è®©ç”¨æˆ·é€šè¿‡ https è®¿é—®ç½‘ç«™ï¼ˆå¼€å¯åŽæ­¤åŠŸèƒ½åŽï¼Œhttp çš„è®¿é—®ä¸€å¾‹ä¼š 301 è·³è½¬åˆ° https æ”¯æŒè‡ªåŠ¨æž„å»º æ”¯æŒé‡å®šå‘ï¼ˆRedirectsï¼‰å’Œé‡å†™ï¼ˆRewritesï¼‰åŠŸèƒ½ æ•°æ®é€šè¿‡ HTTP2 åè®®ä¼ è¾“ æä¾› webhooks ä¸Ž API now å¯ä»¥ä½¿ç”¨ CLI ä¸Šä¼ ä»£ç ï¼Œæˆ–è€…é“¾æŽ¥ä¸€ä¸ª Git ä»“åº“ ä¸ä»…æä¾›é™æ€ç½‘ç«™æ‰˜ç®¡ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒæ‰˜ç®¡ Node.js æœåŠ¡ æ”¯æŒè‡ªå®šä¹‰åŸŸåä¸”è‡ªå®šä¹‰åŸŸåæ”¯æŒä¸€é”®å¼€å¯ httpsï¼ˆè¯ä¹¦æ¥è‡ª Letâ€™s Encrypeï¼‰ æ•°æ®é€šè¿‡ HTTP2 åè®®ä¼ è¾“ æä¾› API Coding Pagesä¸Šé¢æˆ‘ä»¬è¯´è¿‡,æ”¶è´¹æœºåˆ¶ç”šä¸å‹å¥½ é‰´äºŽå„å¹³å°ç‰¹ç‚¹,æˆ‘ä»¬é€‰æ‹©Netlify Netlifyéƒ¨ç½²ç½‘ç«™é¦–å…ˆåŽ» Netlify æ³¨å†Œè´¦å·ç™»å½• æŽ¥ç€ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„ New site from Git è¿™é‡Œé€‰æ‹©çš„ GitHub ,åˆ«å¿˜è®°å‹¾é€‰è®¿é—®å…¬å…±ä»“åº“é€‰é¡¹.ä¹‹åŽæŽˆæƒç»™ Netlify æŒ‡å®šRepository,ç„¶åŽ Deploy è®¾ç½®è‡ªå®šä¹‰åŸŸåç‚¹å‡» Domain settings ç„¶åŽç‚¹å‡» Add custom domain. ç„¶åŽåˆ°åŸŸåè§£æžå¤„,ä¿®æ”¹åŸŸåCNAMEè®°å½•,è®°å½•å€¼å°±æ˜¯è®¾ç½®å®ŒåŸŸåé¡µé¢æ˜¾ç¤ºçš„é…ç½®å€¼ æ·»åŠ SSLè¯ä¹¦è®¾ç½®å®ŒæˆåŸŸåç»‘å®šåŽ,è®¾ç½®ä¸­å¿ƒé€‰é¡¹æœ‰æ‰€å˜åŒ–,å¢žåŠ äº†ä¸€ä¸ª Enable HTTPSçš„é€‰é¡¹ , ç‚¹å‡» ç‚¹å‡» Letâ€™s Encrypt Certificate, ç³»ç»Ÿä¼šè‡ªåŠ¨ç­¾å‘è¯ä¹¦ç»™ç«™ç‚¹,è‹¥åŸŸåè§£æžæ²¡é—®é¢˜å°±èƒ½ç­¾å‘æˆåŠŸ è‹¥æƒ³ä¸€ç›´ä½¿ç”¨Httpsè®¿é—®çš„è¯,å°±å‹¾é€‰ Force TLS connections å¼ºåˆ¶æ‰€æœ‰è®¿é—®è½¬æ¢ä¸ºHttps è‡³æ­¤,é…ç½®å…¨éƒ¨å®Œæˆ åŽç»­Netlify è¿˜æœ‰å¾ˆå¤šæŠ€å·§,æ¯”å¦‚å¯ä»¥è®¾ç½®å˜é‡åŠå‘½ä»¤.å…è´¹ç”¨æˆ·å¯ä»¥ä¸ºç½‘ç«™è®¾ç½®å˜é‡ã€webhookç­‰.ä»˜è´¹ç”¨æˆ·åˆ™å¯ä»¥ä¸ºç½‘ç«™è®¾ç½®æ›´åŠ è¯¦ç»†çš„SEOä¼˜åŒ–.å„ä½å¯ä»¥è‡ªè¡ŒåŽ»æŒ–æŽ˜~ ðŸ§ å‚è€ƒ: https://github.com/lmk123/blog/issues/55]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>SSL</tag>
        <tag>GitHub Pages</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMVC+WebSocket+Gradleå®žçŽ°æ¶ˆæ¯å®žæ—¶æŽ¨é€]]></title>
    <url>%2Fspringmvc-websocket_im%2F</url>
    <content type="text"><![CDATA[WebSocketæ˜¯HTML5å¼€å§‹æä¾›çš„ä¸€ç§æµè§ˆå™¨ä¸ŽæœåŠ¡å™¨é—´è¿›è¡Œå…¨åŒå·¥é€šè®¯çš„ç½‘ç»œæŠ€æœ¯ã€‚ WebSocketé€šä¿¡åè®®äºŽ2011å¹´è¢«IETFå®šä¸ºæ ‡å‡†RFC 6455ï¼ŒWebSocketAPIè¢«W3Cå®šä¸ºæ ‡å‡†ã€‚ åœ¨WebSocket APIä¸­ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦è¦åšä¸€ä¸ªæ¡æ‰‹çš„åŠ¨ä½œï¼Œç„¶åŽï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´å°±å½¢æˆäº†ä¸€æ¡å¿«é€Ÿé€šé“ã€‚ä¸¤è€…ä¹‹é—´å°±ç›´æŽ¥å¯ä»¥æ•°æ®äº’ç›¸ä¼ é€ã€‚ ä»¥ä¸Šæ‘˜è‡ªWikipedia. æœ¬æ–‡å°†è¯´æ˜Žåœ¨Intellij IDEAä¸‹ä½¿ç”¨Gradleæž„å»ºSpringMVC+WebSocketå®žçŽ°æ¶ˆæ¯æŽ¨é€.ä¸ºäº†æ›´å¥½çš„é˜…è¯»ä½“éªŒ,è¯·ç‚¹å‡»é˜…è¯»åŽŸæ–‡ðŸ˜‰. åˆ›å»ºé¡¹ç›®åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­æœ‰è¯¦ç»†çš„è¯´æ˜Ž,æ­¤ç¯‡ä¸åšèµ˜è¿°.å¯å‚è€ƒIDEA+Gradleåˆ›å»ºMyBatis+SpringMVCé¡¹ç›® å¯¼å…¥ä¾èµ–åœ¨build.gradleä¸­å¯¼å…¥denpendies 12345678910111213// ------------------------ Spring SpringMVC start -------------------------compile group: 'org.springframework', name: 'spring-webmvc', version: '4.2.4.RELEASE'compile group: 'org.springframework', name: 'spring-context-support', version: '4.2.4.RELEASE'// ------------------------ Spring SpringMVC end -------------------------// ------------------------ WebSocket start -------------------------compile group: 'org.springframework', name: 'spring-websocket', version: '4.2.4.RELEASE'compile group: 'org.springframework', name: 'spring-messaging', version: '4.2.4.RELEASE'compile group: 'javax.servlet', name: 'javax.servlet-api', version: '3.1.0'// ------------------------ WebSocket end -------------------------compile group: 'log4j', name: 'log4j', version: '1.2.17'compile group: 'com.google.code.gson', name: 'gson', version: '2.8.2' æ­¤å¤„éœ€è¦æ³¨æ„çš„æ˜¯Springä»Ž4.0+ç‰ˆæœ¬å¼€å§‹æ”¯æŒWebSocket,è€Œservlet-apiéœ€è¦ä¸º3.0+ç‰ˆæœ¬ é…ç½®æ–‡ä»¶web.xml 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0"&gt; &lt;!-- åˆå§‹åŒ–spring å®¹å™¨ --&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:config/spring/applicationContext-*.xml&lt;/param-value&gt; &lt;/context-param&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt; &lt;!-- é…ç½®å‰ç«¯æŽ§åˆ¶å™¨ --&gt; &lt;servlet&gt; &lt;servlet-name&gt;index-dispather&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath*:config/spring/spring-mvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;async-supported&gt;true&lt;/async-supported&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;index-dispather&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;!-- è§£å†³postä¹±ç é—®é¢˜ --&gt; &lt;filter&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;utf-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt; &lt;/web-app&gt; æ­¤å¤„éœ€è¦ç»™servletåŠfilteræ·»åŠ å¼‚æ­¥&lt;async-supported&gt;true&lt;/async-supported&gt;. spring-mvc.xml 123456789101112131415161718192021222324252627&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xmlns:mvc="http://www.springframework.org/schema/mvc" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd"&gt; &lt;!-- è‡ªåŠ¨æ‰«ææŽ§åˆ¶å™¨,webSocket --&gt; &lt;context:component-scan base-package="com.lhalcyon.king.controller,com.lhalcyon.king.socket"/&gt; &lt;!-- è§†å›¾æ¸²æŸ“ --&gt; &lt;bean id="internalResourceViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt; &lt;property name="prefix" value="/WEB-INF/views/"/&gt; &lt;property name="suffix" value=".jsp"/&gt; &lt;/bean&gt; &lt;!-- æŽ§åˆ¶å™¨æ˜ å°„å™¨å’ŒæŽ§åˆ¶å™¨é€‚é…å™¨ --&gt; &lt;mvc:annotation-driven&gt; &lt;/mvc:annotation-driven&gt; &lt;!-- é™æ€èµ„æºæ˜ å°„å™¨ --&gt; &lt;mvc:resources mapping="/statics/**" location="/WEB-INF/statics/" /&gt;&lt;/beans&gt; æ­¤å¤„éœ€é…ç½®æ‰«æcontrollerå’Œwebsocketæ‰€åœ¨åŒ… è¿˜æœ‰ä¸€ä¸ªapplicationContext-websocket.xmlé…ç½®æ–‡ä»¶æˆ‘ä»¬åœ¨ä»£ç å®žçŽ°ä¸­è¯´æ˜Ž ä»£ç å®žçŽ°æ¡æ‰‹æ‹¦æˆªå™¨HandshakeInterceptor æ‹¦æˆªå™¨è¯´æ˜Ž An interceptor to copy information from the HTTP session to the â€œhandshakeattributesâ€ map to made available via WebSocketSession.getAttributes()Copies a subset or all HTTP session attributes and/or the HTTP session id æ‹¦æˆªå™¨ä¸»è¦ç”¨äºŽç”¨æˆ·ç™»å½•æ ‡è¯†çš„è®°å½•,ä¾¿äºŽåŽé¢èŽ·å–æŒ‡å®šç”¨æˆ·çš„ä¼šè¯æ ‡è¯†å¹¶å‘æŒ‡å®šç”¨æˆ·å‘é€æ¶ˆæ¯, è¿™é‡Œæˆ‘ä»¬ç»§æ‰¿HttpSessionHandshakeInterceptor 123456789101112131415161718192021222324public class HandshakeInterceptor extends HttpSessionHandshakeInterceptor &#123; private Logger logger = Logger.getLogger(HandshakeInterceptor.class); // æ¡æ‰‹å‰ @Override public boolean beforeHandshake(ServerHttpRequest request, ServerHttpResponse response, WebSocketHandler wsHandler, Map&lt;String, Object&gt; attributes) throws Exception &#123; logger.info("++ HandshakeInterceptor: beforeHandshake ++"+attributes); return super.beforeHandshake(request, response, wsHandler, attributes); &#125; // æ¡æ‰‹åŽ @Override public void afterHandshake(ServerHttpRequest request, ServerHttpResponse response, WebSocketHandler wsHandler, Exception ex) &#123; logger.info("++ HandshakeInterceptor: afterHandshake ++"); super.afterHandshake(request, response, wsHandler, ex); &#125;&#125; beforeHandshake(..) Invoked before the handshake is processed. afterHandshake(..) Invoked after the handshake is done. The response status and headers indicate the results of the handshake, i.e. whether it was successful or not. ä¸¤ä¸ªæ–¹æ³•è°ƒç”¨æ—¶æœºå‡ä¸ºå­—é¢æ‰€è¿°,æ¡æ‰‹å‰åŽåˆ†åˆ«è°ƒç”¨.ä¸»è¦æ˜¯åœ¨æ¡æ‰‹å‰åŽåŽ»åšä¸€äº›äº‹,æ¯”å¦‚å°†éœ€è¦çš„æ•°æ®è®¾ç½®åˆ°attributesé‡Œ,ä¹‹åŽåœ¨WebSocketHandlerçš„sessionä¸­èŽ·å–è¿™äº›æ•°æ®. å¤„ç†ç±»WebSocketHandler 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556public class MyWebSocketHandler implements WebSocketHandler &#123; private static final Logger log = Logger.getLogger(MyWebSocketHandler.class); // ä¿å­˜æ‰€æœ‰çš„ç”¨æˆ·session private static final ArrayList&lt;WebSocketSession&gt; users = new ArrayList&lt;WebSocketSession&gt;(); @Override public void afterConnectionEstablished(WebSocketSession session) throws Exception &#123; log.info("connect websocket success......."); users.add(session); &#125; @Override public void handleMessage(WebSocketSession session, WebSocketMessage&lt;?&gt; message) throws Exception &#123; Gson gson = new Gson(); // å°†æ¶ˆæ¯JSONæ ¼å¼é€šè¿‡Gsonè½¬æ¢æˆMap // message.getPayload().toString() èŽ·å–æ¶ˆæ¯å…·ä½“å†…å®¹ Map&lt;String, Object&gt; msg = gson.fromJson(message.getPayload().toString(), new TypeToken&lt;Map&lt;String, Object&gt;&gt;() &#123;&#125;.getType()); log.info("handleMessage......."+message.getPayload()+"..........."+msg); String content = message.getPayload().toString(); // å¤„ç†æ¶ˆæ¯ msgContentæ¶ˆæ¯å†…å®¹ TextMessage textMessage = new TextMessage(content, true); // è°ƒç”¨æ–¹æ³•ï¼ˆå‘é€æ¶ˆæ¯ç»™æ‰€æœ‰äººï¼‰ sendMsgToAllUsers(textMessage); &#125; @Override public void handleTransportError(WebSocketSession session, Throwable exception) throws Exception &#123; log.warn("handleTransportError"); users.remove(session); &#125; @Override public void afterConnectionClosed(WebSocketSession session, CloseStatus closeStatus) throws Exception &#123; log.info("connect websocket closed......."); users.remove(session); &#125; // ç»™æ‰€æœ‰ç”¨æˆ·å‘é€ ä¿¡æ¯ public void sendMsgToAllUsers(WebSocketMessage&lt;?&gt; message) throws Exception&#123; for (WebSocketSession user : users) &#123; user.sendMessage(message); &#125; &#125; @Override public boolean supportsPartialMessages() &#123; return false; &#125;&#125; ä»¥ä¸‹å¯¹ä¸»è¦æ–¹æ³•è¿›è¡Œè¯´æ˜Ž: afterConnectionEstablished(..) è¿žæŽ¥å»ºç«‹åŽè°ƒç”¨,å¸¸ç”¨äºŽè®°å½•ç”¨æˆ·çš„è¿žæŽ¥æ ‡è¯†,ä¾¿äºŽåŽé¢ä¿¡æ¯å‘é€. handleTextMessage(..) å¯¹æ¶ˆæ¯è¿›è¡Œå¤„ç†. handleTransportError(..) è¿žæŽ¥å¼‚å¸¸å¤„ç†.éœ€è¦å…³é—­å‡ºé”™ä¼šè¯è¿žæŽ¥ afterConnectionClosed(..) è¿žæŽ¥å…³é—­å¤„ç† æ­¤å¤„æˆ‘ä»¬å¯¹æ¶ˆæ¯çš„å¤„ç†å¾ˆç®€å•,å³åœ¨æŽ¥å—æ¶ˆæ¯åŽå‘é€ç»™æ‰€æœ‰è¿žæŽ¥çš„ç”¨æˆ·,ç±»ä¼¼ä¸€ä¸ªåŒ¿åç¾¤èŠå®¤. æ³¨å†Œå®Œæˆäº†WebSocketå¤„ç†ç±»,è¿˜éœ€è¦å¯¹å…¶è¿›è¡Œæ³¨å†Œç”Ÿæ•ˆ.è¿™é‡Œæœ‰ä¸¤ç§æ–¹å¼,æ‹©å…¶ä¸€å³å¯. åˆ›å»ºé…ç½®ç±»,å¹¶é€šè¿‡æ³¨è§£æ³¨å†Œ123456789101112131415161718192021@Configuration@EnableWebMvc@EnableWebSocketpublic class MyWebSocketConfig extends WebMvcConfigurerAdapter implements WebSocketConfigurer &#123; @Override public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) &#123; //å‰å° å¯ä»¥ä½¿ç”¨websocketçŽ¯å¢ƒ registry.addHandler(myWebSocketHandler(),"/websocket").addInterceptors(new HandshakeInterceptor()).setAllowedOrigins("*"); //å‰å° ä¸å¯ä»¥ä½¿ç”¨websocketçŽ¯å¢ƒï¼Œåˆ™ä½¿ç”¨sockjsè¿›è¡Œæ¨¡æ‹Ÿè¿žæŽ¥ registry.addHandler(myWebSocketHandler(), "/sockjs/websocket").addInterceptors(new HandshakeInterceptor()) .withSockJS(); &#125; // websocket å¤„ç†ç±» @Bean public WebSocketHandler myWebSocketHandler()&#123; return new MyWebSocketHandler(); &#125;&#125; åŒæ—¶è¿˜éœ€è¦é…ç½®ä¸Šæ–‡æåˆ°è¿‡çš„Springæ‰«æé…ç½®ç±». 12&lt;!-- è‡ªåŠ¨æ‰«ææŽ§åˆ¶å™¨,webSocket --&gt;&lt;context:component-scan base-package="com.lhalcyon.king.controller,com.lhalcyon.king.socket"/&gt; é€šè¿‡xmlé…ç½®æ³¨å†ŒapplicationContext-websocket.xml 1234567891011121314151617181920212223242526272829303132333435&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:websocket="http://www.springframework.org/schema/websocket" xsi:schemaLocation=" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd http://www.springframework.org/schema/websocket http://www.springframework.org/schema/websocket/spring-websocket-4.0.xsd"&gt; &lt;!-- websocketå¤„ç†ç±» --&gt; &lt;bean id="myHandler" class="com.lhalcyon.king.socket.MyWebSocketHandler"/&gt; &lt;!-- æ¡æ‰‹æŽ¥å£/æ‹¦æˆªå™¨ --&gt; &lt;bean id="myInterceptor" class="com.lhalcyon.king.socket.HandshakeInterceptor"/&gt; &lt;websocket:handlers&gt; &lt;websocket:mapping path="/websocket" handler="myHandler"/&gt; &lt;websocket:handshake-interceptors&gt; &lt;ref bean="myInterceptor"/&gt; &lt;/websocket:handshake-interceptors&gt; &lt;/websocket:handlers&gt; &lt;!-- æ³¨å†Œ sockJS --&gt; &lt;websocket:handlers&gt; &lt;websocket:mapping path="/websocket" handler="myHandler"/&gt; &lt;websocket:handshake-interceptors&gt; &lt;ref bean="myInterceptor"/&gt; &lt;/websocket:handshake-interceptors&gt; &lt;websocket:sockjs /&gt; &lt;/websocket:handlers&gt;&lt;/beans&gt; ä»¥ä¸ŠæœåŠ¡ç«¯ä»£ç å®žçŽ°åŸºæœ¬å®Œæˆ,æŽ¥ä¸‹æ¥å¯¹å®¢æˆ·ç«¯æµ‹è¯•é¡µé¢åšä¸€ä¸ªç®€å•çš„å®žçŽ°. å®¢æˆ·ç«¯é¡µé¢index.jsp 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;!DOCTYPE HTML&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;é¦–é¡µ&lt;/title&gt; &lt;meta charset="utf-8"&gt; &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt; &lt;meta name="renderer" content="webkit"&gt; &lt;!-- å¼•å…¥ JQuery --&gt; &lt;script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"&gt;&lt;/script&gt; &lt;!-- å¼•å…¥ sockJS --&gt; &lt;script type="text/javascript" src="https://cdn.bootcss.com/sockjs-client/1.1.4/sockjs.min.js" &gt;&lt;/script&gt; &lt;script type="text/javascript"&gt; $(function() &#123; var websocket; // é¦–å…ˆåˆ¤æ–­æ˜¯å¦ æ”¯æŒ WebSocket var url = 'ws://' + window.location.host + '/word-king/websocket'; if('WebSocket' in window) &#123; websocket = new WebSocket(url); &#125; else if('MozWebSocket' in window) &#123; websocket = new MozWebSocket(url); &#125; else &#123; url = "http://"+ window.location.host +"/word-king/sockjs/websocket"; websocket = new SockJS(url); &#125; // æ‰“å¼€æ—¶ websocket.onopen = function(evnt) &#123; console.log(" websocket.onopen "); &#125;; // å¤„ç†æ¶ˆæ¯æ—¶ websocket.onmessage = function(evnt) &#123; $("#msg").append("&lt;p&gt;(&lt;font color='red'&gt;" + evnt.data + "&lt;/font&gt;)&lt;/p&gt;"); console.log(" websocket.onmessage "); &#125;; websocket.onerror = function(evnt) &#123; alert("onerror"); console.log(" websocket.onerror "); &#125;; websocket.onclose = function(evnt) &#123; console.log(" websocket.onclose "); alert("onclose"); &#125;; // ç‚¹å‡»äº†å‘é€æ¶ˆæ¯æŒ‰é’®çš„å“åº”äº‹ä»¶ $("#TXBTN").click(function()&#123; // èŽ·å–æ¶ˆæ¯å†…å®¹ var text = $("#tx").val(); // åˆ¤æ–­ if(text == null || text == "")&#123; alert(" content can not empty!!"); return false; &#125; var msg = &#123; msgContent: text, postsId: 1 &#125;; // å‘é€æ¶ˆæ¯ websocket.send(JSON.stringify(msg)); &#125;); &#125;); &lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;!-- æœ€å¤–è¾¹æ¡† --&gt;&lt;div style="margin: 20px auto; border: 1px solid blue; width: 300px; height: 500px;"&gt; &lt;!-- æ¶ˆæ¯å±•ç¤ºæ¡† --&gt; &lt;div id="msg" style="width: 100%; height: 70%; border: 1px solid yellow;overflow: auto;"&gt;&lt;/div&gt; &lt;!-- æ¶ˆæ¯ç¼–è¾‘æ¡† --&gt; &lt;textarea id="tx" style="width: 100%; height: 20%;"&gt;&lt;/textarea&gt; &lt;!-- æ¶ˆæ¯å‘é€æŒ‰é’® --&gt; &lt;button id="TXBTN" style="width: 100%; height: 8%;"&gt;å‘é€æ•°æ®&lt;/button&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; éœ€è¦æ³¨æ„çš„æ˜¯æ­¤å¤„å¼•å…¥JQueryæ—¶,å¦‚æžœæ˜¯æœ¬åœ°çš„æ–‡ä»¶,å¯èƒ½å­˜åœ¨æ— æ•ˆçš„æƒ…å†µ,éœ€è¦åŽ»è®¾ç½®é™æ€èµ„æºæ˜ å°„è·¯å¾„,å¯è‡ªè¡ŒðŸ”è§£å†³. æœ¬æ–‡é‡‡ç”¨çš„æ˜¯å¼•å…¥åœ¨çº¿åœ°å€ 12&lt;!-- å¼•å…¥ JQuery --&gt; &lt;script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.5/jquery.min.js"&gt;&lt;/script&gt; åœ°å€å†™å…¥åŽéœ€Downloadä¸‹æ¥ ä»£ç ä¸é«˜äº®è­¦å‘ŠåŽå³èƒ½ç”Ÿæ•ˆ. æœ€åŽæˆ‘ä»¬æ¥çœ‹çœ‹æ•ˆæžœ å‚è€ƒ: http://blog.csdn.net/mybook201314/article/details/70173674]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringMVC</tag>
        <tag>WebSocket</tag>
        <tag>IM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®žçŽ°apkä¸Šä¼ è’²å…¬è‹±åŽè‡ªåŠ¨å‘é€é’‰é’‰é€šçŸ¥]]></title>
    <url>%2Fwebhook_dingding-pgyer%2F</url>
    <content type="text"><![CDATA[Webhookæ˜¯ä¸€ä¸ªAPIæ¦‚å¿µï¼Œå¹¶ä¸”å˜å¾—è¶Šæ¥è¶Šæµè¡Œã€‚æˆ‘ä»¬èƒ½ç”¨äº‹ä»¶æè¿°çš„äº‹ç‰©è¶Šå¤šï¼Œwebhookçš„ä½œç”¨èŒƒå›´ä¹Ÿå°±è¶Šå¤§ã€‚Webhookä½œä¸ºä¸€ä¸ªè½»é‡çš„äº‹ä»¶å¤„ç†åº”ç”¨ï¼Œæ­£å˜å¾—è¶Šæ¥è¶Šæœ‰ç”¨ã€‚ å‡†ç¡®çš„è¯´webhookæ˜¯ä¸€ç§webå›žè°ƒæˆ–è€…httpçš„push APIï¼Œæ˜¯å‘APPæˆ–è€…å…¶ä»–åº”ç”¨æä¾›å®žæ—¶ä¿¡æ¯çš„ä¸€ç§æ–¹å¼ã€‚Webhookåœ¨æ•°æ®äº§ç”Ÿæ—¶ç«‹å³å‘é€æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä½ èƒ½å®žæ—¶æ”¶åˆ°æ•°æ®ã€‚è¿™ä¸€ç§ä¸åŒäºŽå…¸åž‹çš„APIï¼Œéœ€è¦ç”¨äº†å®žæ—¶æ€§éœ€è¦è¶³å¤Ÿå¿«çš„è½®è¯¢ã€‚è¿™æ— è®ºæ˜¯å¯¹ç”Ÿäº§è¿˜æ˜¯å¯¹æ¶ˆè´¹è€…éƒ½æ˜¯é«˜æ•ˆçš„ï¼Œå”¯ä¸€çš„ç¼ºç‚¹æ˜¯åˆå§‹å»ºç«‹å›°éš¾ã€‚ Webhookæœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºåå‘APIï¼Œå› ä¸ºä»–æä¾›äº†APIè§„åˆ™ï¼Œä½ éœ€è¦è®¾è®¡è¦ä½¿ç”¨çš„APIã€‚Webhookå°†å‘ä½ çš„åº”ç”¨å‘èµ·httpè¯·æ±‚ï¼Œå…¸åž‹çš„æ˜¯postè¯·æ±‚ï¼Œåº”ç”¨ç¨‹åºç”±è¯·æ±‚é©±åŠ¨ã€‚ åœ¨Androidå¼€å‘ä¸­ä¼šç»å¸¸æäº¤apkç»™æµ‹è¯•äººå‘˜è¿›è¡Œæµ‹è¯•,é€šå¸¸çš„åšæ³•æ˜¯å°†æž„å»ºå®Œæˆçš„åŒ…ä¸Šä¼ è‡³è’²å…¬è‹±,æµ‹è¯•äººå‘˜ç›´æŽ¥æ‰«ç ä¸‹è½½å¹¶å®‰è£…apkåŒ…ä»Žè€Œè¿›è¡Œæµ‹è¯•.ä¸€èˆ¬æˆ‘ä»¬ä¼šå°†æž„å»ºåŠå‘å¸ƒè¿‡ç¨‹è‡ªåŠ¨åŒ–,å¯å‚è€ƒ: Linux+Jenkins+Gradleæž„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(ä¸€) Linux+Jenkins+Gradleæž„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(äºŒ) æ–‡ç« ä¸­å®žçŽ°äº†apkä¸Šä¼ è’²å…¬è‹±åŽé‚®ä»¶é€šçŸ¥,å¯æ˜¯å®žé™…ä¸­,å¤§å®¶å¯¹é‚®ä»¶çš„å…³æ³¨è¿œè¿œæ²¡æœ‰å¯¹IMæ¶ˆæ¯çš„å…³æ³¨åº¦é«˜,æ‰€ä»¥æŽ¥ä¸‹æ¥æœ¬æ–‡å°†è¯´æ˜Ž,å®žçŽ°ä¸Šä¼ apkåŽè‡ªåŠ¨å‘é€é’‰é’‰æ¶ˆæ¯,å°†æ›´æ–°å†…å®¹,apkç‰ˆæœ¬å·ç­‰ä¿¡æ¯é€šçŸ¥åˆ°æµ‹è¯•äººå‘˜ çŽ¯å¢ƒå‡†å¤‡é¦–å…ˆçŽ¯å¢ƒæ­å»ºæ˜¯IntelliJ+SpringMVC+Gradleæž„å»ºçš„,å¦‚æœ‰ç–‘é—®çš„åŒå­¦å¯å‚è€ƒIDEA+Gradleåˆ›å»ºMyBatis+SpringMVCé¡¹ç›®,é¡¹ç›®ä¸­ä¸»è¦æ˜¯å¯¹æŽ¥å£æ•°æ®çš„è°ƒæ•´åŠè½¬å‘,å®žé™…ä¸Šæœªç”¨åˆ°MyBatis,å¯è‡ªè¡Œè¿›è¡ŒåŽ»é™¤ðŸ™„. æ¨¡åž‹å»ºç«‹å¯¹ç…§è’²å…¬è‹±docã€é’‰é’‰docåˆ†åˆ«å»ºç«‹Java Bean. PgyerMessage 123456789101112131415&#123; "action": "åº”ç”¨æ›´æ–°", "title": "OooPlay", "link": "https://www.pgyer.com/oooplay_test", "message": "æ‚¨çš„åº”ç”¨OooPlayæœ‰äº†æ–°çš„ç‰ˆæœ¬(2.4)æ›´æ–°ã€‚", "type": "updateVersion", "os_version": "2.4", "build_version": "139", "created": "2015-10-09 11:25:16", "updated": "2015-10-09 11:25:16", "timestamp": 1444361118, "appsize": "2238036", "device_type": 'iOS', "notes": "ä¿®å¤äº†ä¸€äº›å°å¼±æ™ºçš„å°bug"&#125; 1234567891011121314151617181920212223242526272829303132333435public class PgyerMessage &#123; public String action; public String title; public String link; public String message; public String type; public String os_version; public String build_version; public String created; public String updated; public int timestamp; public String appsize; public String device_type; public String notes; @Override public String toString() &#123; return "PgyerMessage&#123;" + "action='" + action + '\'' + ", title='" + title + '\'' + ", link='" + link + '\'' + ", message='" + message + '\'' + ", type='" + type + '\'' + ", os_version='" + os_version + '\'' + ", build_version='" + build_version + '\'' + ", created='" + created + '\'' + ", updated='" + updated + '\'' + ", timestamp=" + timestamp + ", appsize='" + appsize + '\'' + ", device_type='" + device_type + '\'' + ", notes='" + notes + '\'' + '&#125;'; &#125;&#125; æ­¤å¤„æœ‰ä¸ªå°æŠ€å·§,IDEA IntelliJæœ‰ä¸ªå¥½ç”¨çš„æ’ä»¶GsonFormatå¯ä¸€é”®å°†Jsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºJava Model é’‰é’‰æ¶ˆæ¯åˆ™åˆ†ä¸ºå‡ ç§ç±»åž‹,å…·ä½“ä¸¾ä¾‹å¯å‚è€ƒé’‰é’‰doc 123456789public static final String TYPE_LINK = "link";public static final String TYPE_MARKDOWN = "markdown";public static final String TYPE_TEXT = "text";public static final String TYPE_ACTIONCARD = "actionCard";public static final String TYPE_FEEDCARD = "feedCard"; æ­¤å¤„æˆ‘ä»¬é€‰æ‹©markdownç±»åž‹.ä¸ºäº†ä¾¿äºŽæ‹“å±•,æ­¤å¤„å°†æ¶ˆæ¯æŠ½å–äº†ä¸ªåŸºç±»BaseDingMessage. 123456789101112131415161718192021public class BaseDingMessage &#123; public static final String TYPE_LINK = "link"; public static final String TYPE_MARKDOWN = "markdown"; public static final String TYPE_TEXT = "text"; public static final String TYPE_ACTIONCARD = "actionCard"; public static final String TYPE_FEEDCARD = "feedCard"; public String msgtype; public AtBean at; public static class AtBean &#123; public boolean isAtAll; public List&lt;String&gt; atMobiles; &#125;&#125; 12345678910public class MarkdownMessage extends BaseDingMessage &#123; public MarkdownBean markdown; public static class MarkdownBean &#123; public String title; public String text; &#125;&#125; ä»£ç å®žçŽ°é¦–å…ˆåœ¨build.gradleä¸­å¯¼å…¥ä¾èµ– 12compile group: 'com.alibaba', name: 'fastjson', version: '1.2.45'compile group: 'com.squareup.okhttp3', name: 'okhttp', version: '3.9.0' fastjsonæ˜¯ç”¨åŠ›å•Šè½¬åŒ–json,okhttpç”¨æ¥ç½‘ç»œè¯·æ±‚ spring-mvc.xmlåŠ å…¥jsoné…ç½® 12345678910111213141516171819202122232425262728293031323334353637&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xmlns:mvc="http://www.springframework.org/schema/mvc" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd"&gt; &lt;!-- è‡ªåŠ¨æ‰«ææŽ§åˆ¶å™¨ --&gt; &lt;context:component-scan base-package="com.lhalcyon.webhook.controller"/&gt; &lt;!-- è§†å›¾æ¸²æŸ“ --&gt; &lt;bean id="internalResourceViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt; &lt;property name="prefix" value="/WEB-INF/views/"/&gt; &lt;property name="suffix" value=".jsp"/&gt; &lt;/bean&gt; &lt;!-- æŽ§åˆ¶å™¨æ˜ å°„å™¨å’ŒæŽ§åˆ¶å™¨é€‚é…å™¨ --&gt; &lt;mvc:annotation-driven&gt; &lt;mvc:message-converters register-defaults="true"&gt; &lt;bean class="com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter"&gt; &lt;property name="supportedMediaTypes"&gt; &lt;list&gt; &lt;value&gt;text/html;charset=UTF-8&lt;/value&gt; &lt;value&gt;application/json&lt;/value&gt; &lt;value&gt;application/xml;charset=UTF-8&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;/mvc:message-converters&gt; &lt;/mvc:annotation-driven&gt; &lt;!-- é™æ€èµ„æºæ˜ å°„å™¨ --&gt; &lt;mvc:resources mapping="/statics/**" location="/WEB-INF/statics/" /&gt;&lt;/beans&gt; æ¶ˆæ¯å‘é€æœåŠ¡DingServiceImpl.java 123456789101112131415161718192021Servicepublic class DingServiceImpl implements DingService &#123; private static final Logger logger = Logger.getLogger(DingServiceImpl.class); @Override public void send(BaseDingMessage message,String url) &#123; MediaType jsonType = MediaType.parse("application/json; charset=utf-8"); okhttp3.RequestBody body = okhttp3.RequestBody.create(jsonType, JSON.toJSONString(message)); final Request request = new Request.Builder() .url(url) .post(body) .build(); OkHttpClient client = OkhttpProvider.get(); try &#123; client.newCall(request).execute(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; è’²å…¬è‹±è¯·æ±‚æŽ§åˆ¶å™¨PgyerController.java 123456789101112131415161718@RestController@RequestMapping("/pgyer")public class PgyerController &#123; @Autowired DingService dingService; private static final Logger logger = Logger.getLogger(PgyerController.class); @ResponseBody @RequestMapping(value = "/update",method = RequestMethod.POST) public BaseDingMessage apkUpdate(@RequestBody PgyerMessage pgyerMessage)&#123; BaseDingMessage dingMessage = WebhookConverter.pgyer2Ding(pgyerMessage); dingService.send(dingMessage, Urls.DING_TEST); logger.info(dingMessage); return dingMessage; &#125;&#125; å…¶ä¸­Urls.DING_TESTä¸ºé’‰é’‰æœºå™¨äººçš„ä¼šè¯tokenåœ°å€,åŽé¢ä¼šè¯´æ˜Žå¦‚ä½•åˆ›å»º/èŽ·å– æ¶ˆæ¯è½¬æ¢å™¨WebhookConverter.java 123456789101112131415161718192021222324public class WebhookConverter &#123; private static final Logger logger = Logger.getLogger(WebhookConverter.class); public static MarkdownMessage pgyer2Ding(PgyerMessage pgyerMessage)&#123; MarkdownMessage message = new MarkdownMessage(); message.msgtype = BaseDingMessage.TYPE_MARKDOWN; message.markdown = new MarkdownMessage.MarkdownBean(); message.markdown.title = pgyerMessage.device_type + "è’²å…¬è‹±æ›´æ–°"; StringBuilder builder = new StringBuilder(); builder.append("#### ").append(pgyerMessage.device_type).append("æµ‹è¯•åŒ…å·²æ›´æ–°! \n\n") .append("###### version: ").append(pgyerMessage.os_version).append(" | build ").append(pgyerMessage.build_version).append("\n\n") .append("æ›´æ–°å†…å®¹:\n").append("&gt; ").append(pgyerMessage.notes).append("\n\n") .append("![qr_code_test](å›¾ç‰‡åœ°å€)\n\n") .append("[ä¸‹è½½åœ°å€](https://www.pgyer.com/ä½ çš„apkåœ°å€) å¯†ç :ä½ çš„å¯†ç \n").append(" @18810100000 @18810100001 @18818100002 "); message.markdown.text = builder.toString(); message.at = new BaseDingMessage.AtBean(); message.at.isAtAll = false; message.at.atMobiles = Arrays.asList("18818100000","18818100001","18818100002"); return message; &#125;&#125; ä»¥ä¸Šéœ€è‡ªè¡Œä¿®æ”¹å†…å®¹. ç„¶åŽåˆ›å»ºé’‰é’‰æœºå™¨äºº.åˆ›å»ºå››è¿ž 1 2 3 4 ç‚¹æ­¤å¤åˆ¶é’‰é’‰æœºå™¨äººä¼šè¯token,å»ºç«‹Urls.java. 1234567public interface Urls &#123; /** * ææµ‹ç¾¤æœºå™¨äººtoken */ String DING_TEST = "é’‰é’‰token";&#125; æ­¤å¤„çš„Ding_Testå³ä¸ºä¸Šé¢å¤åˆ¶çš„åœ°å€ è‡³æ­¤,ä»£ç ä¸»è¦å®žçŽ°ç±»å·²ç»å®Œæˆ,æŽ¥ä¸‹æ¥éœ€è¦åŽ»é…ç½®è’²å…¬è‹±webhook é…ç½®webhookæ‰“å¼€ è’²å…¬è‹± åº”ç”¨è®¾ç½® åˆ›å»ºwebhook,å†™å…¥PgyerControllerçš„æ›´æ–°è¯·æ±‚åœ°å€,å¦‚æžœé…ç½®ä¸Žæœ¬æ–‡çš„ç›¸åŒ,åœ°å€åˆ™ä¸º 1http://ä½ çš„åœ°å€:ç«¯å£/webhook-1.0-SNAPSHOT/pgyer/update å…¶ä¸­webhook-1.0-SNAPSHOTä¸ºwaråŒ…åœ¨tomcatè§£åŽ‹åŽçš„åç§° done! ä¹‹åŽåªè¦ä¸Šä¼ æˆåŠŸåŽ,å³æœ‰é’‰é’‰æ¶ˆæ¯é€šçŸ¥å¹¶@æµ‹è¯•äººå‘˜äº†! è®©æˆ‘ä»¬å†çœ‹ä¸‹æ‰“åŒ…åŽçš„æ¶ˆæ¯é€šçŸ¥! .jpg) ç±»ä¼¼çš„,ä»£ç push,mergeä¹Ÿå¯ä»¥åšæˆwebhookæ¶ˆæ¯. Githubã€Gitlabæ—¢æœ‰æˆç†Ÿçš„å¯¹æŽ¥æœºå™¨äºº.è€Œç¬”è€…ä½¿ç”¨çš„Codingæ˜¯æ²¡æœ‰ä¸Žé’‰é’‰åšå¯¹æŽ¥çš„,æ­¤æ—¶å¯è‡ªå®šä¹‰æœºå™¨äººå®žçŽ°,æœ‰å…´è¶£çš„åŒå­¦å¯å‚è€ƒä¸Šé¢çš„æ•™ç¨‹è‡ªè¡Œå®žçŽ°.]]></content>
      <categories>
        <category>Webhook</category>
      </categories>
      <tags>
        <tag>Dingding</tag>
        <tag>Webhook</tag>
        <tag>Pgyer</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linuxå‡çº§Glibc2.14ä¸­æ–‡ä¹±ç ]]></title>
    <url>%2Fupdate_glibc_issue%2F</url>
    <content type="text"><![CDATA[CenterOSä¸Šé»˜è®¤çš„Glibcç‰ˆæœ¬ä¸º2.12.1,ç”±äºŽæˆ‘ä»¬çš„Androidé¡¹ç›®ä½¿ç”¨åˆ°äº†JNI,å°†é¡¹ç›®æž„å»ºéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šæ—¶ä¼šé‡åˆ°é—®é¢˜&#39;GLIBC_2.14&#39; not found,é‚£ä¹ˆå°±éœ€è¦å‡çº§Glibcè‡³2.14.å‡çº§çš„æ•™ç¨‹ç½‘ä¸Šå¾ˆå¤š,å¯æ˜¯å´æ¼æŽ‰äº†ä¸€ä¸ªæ­¥éª¤,å¯¼è‡´åŽé¢ä¸­æ–‡ä¹±ç çš„é—®é¢˜.æœ¬ç¯‡ä¼šåšä¸€ä¸ªå…¨é¢çš„è§£è¯´ 1. Glibcä¸‹è½½é¦–å…ˆä»ŽGlibc Downloadä¸‹è½½åŒ…,è¿™é‡Œé€‰æ‹©æ˜¯Glibc 2.14 2. å®‰è£…ä¸Šä¼ è‡³æœåŠ¡å™¨,è¿›å…¥ç›®å½•è§£åŽ‹ 1tar zxvf glibc-2.14.tar.gz è¿›å…¥è§£åŽ‹åŽçš„ç›®å½• 1cd glibc-2.14 æŽ¥ç€ 12345mkdir /opt/buildcd build../configure --prefix=/opt/glibc-2.14make -j4make install è‹¥é¡ºåˆ©çš„è¯,è‡³æ­¤åˆ™å®‰è£…æˆåŠŸäº†. issue1. åœ¨make installè¿‡ç¨‹ä¸­å‡ºçŽ°é”™è¯¯: 1Can&apos;t open configuration file /opt/glibc-2.14/etc/ld.so.conf: No such file or directory ç¼ºå°‘äº†æŠ¥é”™çš„ç¼–è¯‘æ–‡ä»¶ld.so.conf.é€šè¿‡findå‘½ä»¤æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶é…ç½® ç„¶åŽæ‹·è´æ–‡ä»¶è‡³å¯¹åº”æ–‡ä»¶ç›®å½•,ç»§ç»­ç¼–è¯‘ 12cp /etc/ld.so.conf /opt/glibc-2.14/etc/ make install ç¼–è¯‘æˆåŠŸ,æŽ¥ç€å®šä¹‰ä¸‹çŽ¯å¢ƒå˜é‡å³å¯ 3. è¡¥å……é€šå¸¸çš„æ•™ç¨‹è‡³æ­¤å°±ç»“æŸäº†.æœ€åˆç¬”è€…å‚è€ƒç½‘ä¸Šçš„æ•™ç¨‹ä¹Ÿæ˜¯åšåˆ°è¿™é‡Œ.å½“æ—¶è·‘ç¨‹åºä¹Ÿæ²¡é—®é¢˜,ç›´åˆ°å‰æ®µæ—¶é—´å¤§æ¥¼åœç”µ,æœåŠ¡å™¨é‡å¯åŽ,é€šè¿‡æœåŠ¡å™¨ä¸ŠJenkinsæ‰“åŒ…ä¸Šä¼ åˆ°è’²å…¬è‹±çš„ä¸­æ–‡ä¿¡æ¯å…¨æ˜¯ä¹±ç ! ç›¸å½“äºŽæœåŠ¡å™¨çš„ç¼–ç æ–‡ä»¶ä¸¢å¤±äº†,æ‰€æœ‰ä¸­æ–‡éƒ½ä¼šä¹±ç . æ˜¯å› ä¸ºé—æ¼äº†localedataæœªç¼–è¯‘,åœ¨æœåŠ¡å™¨é‡å¯åŽ,Glibc2.14æ‰¾ä¸åˆ°å¯¹åº”ç‰ˆæœ¬2.14çš„glibc localeæ–‡ä»¶. æ­£ç¡®æ“ä½œæ˜¯,åœ¨make&amp;make installå®ŒæˆåŽç»§ç»­ç¼–è¯‘localåŒ… 1make localedata/install-locales ç¼–è¯‘éœ€è¦ä¸€äº›æ—¶é—´,å®ŒæˆåŽé‡å¯æœåŠ¡å™¨å³å¯ç”Ÿæ•ˆ 1shutdown -r now å‚è€ƒ: http://blog.csdn.net/clirus/article/details/62425498 å‚è€ƒ: http://blog.csdn.net/fzuzhanghao1993/article/details/77650500]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[IDEA+Gradleåˆ›å»ºMyBatis+SpringMVCé¡¹ç›®]]></title>
    <url>%2Fssm_build%2F</url>
    <content type="text"><![CDATA[Gradleæ˜¯ä¸€ä¸ªåŸºäºŽApache Antå’ŒApache Mavenæ¦‚å¿µçš„é¡¹ç›®è‡ªåŠ¨åŒ–æž„å»ºå·¥å…·.å®ƒä½¿ç”¨ä¸€ç§åŸºäºŽGroovyçš„ç‰¹å®šé¢†åŸŸè¯­è¨€(DSL)æ¥å£°æ˜Žé¡¹ç›®è®¾ç½®,æŠ›å¼ƒäº†åŸºäºŽXMLçš„å„ç§ç¹çé…ç½®. IDEA å…¨ç§°IntelliJ IDEA,æ˜¯javaè¯­è¨€å¼€å‘çš„é›†æˆçŽ¯å¢ƒ,IntelliJåœ¨ä¸šç•Œè¢«å…¬è®¤ä¸ºæœ€å¥½çš„javaå¼€å‘å·¥å…·ä¹‹ä¸€,å°¤å…¶åœ¨æ™ºèƒ½ä»£ç åŠ©æ‰‹ã€ä»£ç è‡ªåŠ¨æç¤ºã€é‡æž„ã€J2EEæ”¯æŒã€Antã€JUnitã€CVSæ•´åˆã€ä»£ç å®¡æŸ¥ã€ åˆ›æ–°çš„GUIè®¾è®¡ç­‰æ–¹é¢çš„åŠŸèƒ½å¯ä»¥è¯´æ˜¯è¶…å¸¸çš„. ä»¥ä¸Šä¸ºç™¾åº¦çš„ç®€ä»‹.ä»Žäº‹Androidçš„ç«¥éž‹åº”è¯¥ä¸éš¾å‘çŽ°Gradleä»¥åŠAndroid Studioçš„å¼º(hen)å¤§(ka).ðŸ¤«è€ŒASæ˜¯åŸºäºŽIntelliJ IDEAå¼€å‘çš„.ä¹ æƒ¯äº†Gradleçš„ä¾¿æ·,äºŽæ˜¯å¼€å§‹åŸºäºŽGradle+IDEAæž„å»ºJavaé¡¹ç›®. çŽ¯å¢ƒå‡†å¤‡1. æ•°æ®åº“MySqlåœ¨MySql Downloadsä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬å¹¶å®‰è£… æ­¤å¤„ç¬”è€…åœ¨macOSä¸Šå®‰è£…5.7.21åŽæ‰“å¼€ç³»ç»Ÿåå¥½è®¾ç½®,é‡åˆ°æ— æ³•åŠ è½½MySqlé¢æ¿çš„é—®é¢˜.ä¸€ç•ªæœç´¢ðŸ”åŽå‘çŽ°æ˜¯macOSç‰ˆæœ¬ä¸ŽMySqlä¸å…¼å®¹,é€‰æ‹©ä½Žç‰ˆæœ¬çš„MySqlå¦‚5.6.39å³å¯. 2. IntelliJ IDEAè¯·è‡ªè¡Œå®‰(po)è£…(jie). 3. Tomcatè¯·è‡ªè¡Œä¸‹è½½è§£åŽ‹.å¦‚è‹¥æ˜¯macOSæˆ–æ˜¯Linuxä¸Šè§£åŽ‹åŽéœ€è¿›å…¥binç›®å½•æ‰§è¡Œä¸‹å‘½ä»¤chmod u+x *.shä¿®æ”¹æƒé™ åˆ›å»ºé¡¹ç›®ç‚¹å‡» Create New Project é€‰æ‹©åŸºäºŽGradleçš„Java Webé¡¹ç›® å¡«å†™GroupIdå’ŒArtifactId é€‰æ‹©gradle.å¯ä½¿ç”¨é»˜è®¤çš„,å¯ä½¿ç”¨æœ¬åœ°çš„ æŽ¥ç€é€‰æ‹©é¡¹ç›®ç›®å½•,åŸºæœ¬é¡¹ç›®åˆ›å»ºå¥½äº†,æŽ¥ä¸‹æ¥è¿›å…¥æ–‡ä»¶é…ç½® æ–‡ä»¶é…ç½®é¦–å…ˆåˆ›å»ºjavaå’Œresourcesç›®å½•,å¹¶ä¸”åˆ›å»ºåŒ…ä»¥åŠweb.xml. log4j.properties12345678910111213141516171819#è®¾ç½®æ—¥å¿—çš„çº§åˆ«ï¼Œå®šä¹‰æ—¥å¿—ä¿¡æ¯çš„è¾“å‡ºç›®çš„log4j.rootLogger=DEBUG, A1 ,R#å®šä¹‰A1çš„è¾“å‡ºç›®çš„åœ°ä¸ºæŽ§åˆ¶å°log4j.appender.A1=org.apache.log4j.ConsoleAppender#å¸ƒå±€ä¸º PatternLayout å¯ä»¥çµæ´»åœ°æŒ‡å®šå¸ƒå±€æ¨¡å¼ã€‚log4j.appender.A1.layout=org.apache.log4j.PatternLayout#è®¾ç½®è¾“å‡ºæ ¼å¼log4j.appender.A1.layout.ConversionPattern=%-d&#123;yyyy-MM-dd HH\:mm\:ss&#125; [%c]-[%p] %m%n#å®šä¹‰Rçš„è¾“å‡ºç›®çš„åœ°ä¸ºæ–‡ä»¶ï¼Œå¹¶ä¸”æ–‡ä»¶å¤§å°åˆ°è¾¾æŒ‡å®šå°ºå¯¸çš„æ—¶å€™äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶log4j.appender.R=org.apache.log4j.RollingFileAppender#è®¾ç½®è¾“å‡ºçš„æ–‡ä»¶åœ°å€log4j.appender.R.File=/Users/xx/Documents/ServerLog#è®¾ç½®æ–‡ä»¶å¤§å°ä¼Ÿ100 kb æ–‡ä»¶åˆ°è¾¾100æ—¶ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œ#MaxBackupIndex æœ€å¤§è®°å½•çš„æ–‡ä»¶æ•°ä¸º1 æŸ¥è¿‡ä¸€ä¸ªæ–‡ä»¶åˆ é™¤æ–‡ä»¶è¾ƒæ—©çš„ã€‚log4j.appender.R.MaxFileSize=100KB log4j.appender.R.MaxBackupIndex=1#ä»¥ä¸‹å’Œä¸Šé¢ä¸€æ ·log4j.appender.R.layout=org.apache.log4j.PatternLayoutlog4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n ä»¥ä¸Šè¾“å‡ºæ–‡ä»¶åœ°å€è‡ªè¡Œæ›´æ”¹ generatorConfig.xml1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE generatorConfiguration PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN" "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;&lt;generatorConfiguration&gt; &lt;classPathEntry location="$&#123;jarDirection&#125;"/&gt; &lt;context id="mysql" targetRuntime="MyBatis3"&gt; &lt;jdbcConnection driverClass="$&#123;driverClass&#125;" connectionURL="$&#123;connectionURL&#125;" userId="$&#123;userId&#125;" password="$&#123;password&#125;"&gt; &lt;/jdbcConnection&gt; &lt;javaTypeResolver &gt; &lt;property name="forceBigDecimals" value="false" /&gt; &lt;/javaTypeResolver&gt; &lt;javaModelGenerator targetPackage="$&#123;modelPackage&#125;" targetProject="$&#123;src_main_java&#125;"&gt; &lt;property name="enableSubPackages" value="true" /&gt; &lt;property name="trimStrings" value="true" /&gt; &lt;/javaModelGenerator&gt; &lt;sqlMapGenerator targetPackage="$&#123;sqlMapperPackage&#125;" targetProject="$&#123;src_main_java&#125;"&gt; &lt;property name="enableSubPackages" value="true" /&gt; &lt;/sqlMapGenerator&gt; &lt;javaClientGenerator type="XMLMAPPER" targetPackage="$&#123;mapperPackage&#125;" targetProject="$&#123;src_main_java&#125;"&gt; &lt;property name="enableSubPackages" value="true" /&gt; &lt;/javaClientGenerator&gt; &lt;!-- æ¯ä¸€ä¸ªæ•°æ®åº“è¡¨éƒ½å¯¹åº”ä¸€ä¸ªå¯¹åº”çš„tableå±žæ€§ --&gt; &lt;table tableName="book" domainObjectName="Book"&gt; &lt;/table&gt; &lt;/context&gt;&lt;/generatorConfiguration&gt; gradle.properties123456# ç”Ÿæˆçš„modelç±»æ‰€åœ¨åŒ…modelPackage=com.lhalcyon.webhook.domain# ç”Ÿæˆçš„mapperæŽ¥å£ç±»æ‰€åœ¨åŒ…mapperPackage=com.lhalcyon.webhook.mapper# ç”Ÿæˆçš„mapper xmlæ–‡ä»¶æ‰€åœ¨åŒ…sqlMapperPackage=com.lhalcyon.webhook.mapper ä¸ºäº†æ–¹ä¾¿æ‰«æ,å°†mapper xmlä»¥åŠæŽ¥å£ç±»æ”¾åœ¨äº†åŒä¸€åŒ…ä¸‹äº† ðŸ˜• jdbc-mysql.properties12345678910# å°†jdbc.jarDirectionåŽçš„å†…å®¹æ›´æ”¹ä¸ºgradleä¸‹è½½çš„# mysql-connector-java-5.1.x.jaræ‰€åœ¨çš„è·¯å¾„ï¼Œgradleè‡ªåŠ¨ä¸‹è½½çš„è·¯å¾„å¦‚ä¸‹æ‰€ç¤ºjdbc.jarDirection=/Users/ceyx/.gradle/caches/modules-2/files-2.1/mysql/mysql-connector-java/5.1.38/dbbd7cd309ce167ec8367de4e41c63c2c8593cc5/mysql-connector-java-5.1.38.jarjdbc.driverClassName=com.mysql.jdbc.Driverjdbc.url=jdbc:mysql://localhost:3306/halcyonjdbc.user=rootjdbc.pass=root è‡ªè¡Œå¡«å†™jdbc.jarDirectionè·¯å¾„ build.gradle123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596group 'com.lhalcyon'version '1.0-SNAPSHOT'apply plugin: 'java'apply plugin: 'war'sourceCompatibility = 1.8repositories &#123; mavenCentral()&#125;configurations &#123; mybatisGenerator&#125;// è¯»å–configæ–‡ä»¶å¤¹ä¸­å¯¹åº”çš„é…ç½®æ–‡ä»¶ext&#123; def prop = new Properties(); file("src/main/resources/config/mybatis/jdbc-mysql.properties") .withInputStream &#123; prop.load(it) &#125; file("src/main/resources/config/mybatis/gradle.properties") .withInputStream &#123; prop.load(it) &#125; prop.each &#123; project.extensions.add("$it.key",it.value); &#125;&#125;dependencies &#123; testCompile group: 'junit', name: 'junit', version: '4.12' compile 'org.codehaus.groovy:groovy-all:2.3.11' compile 'jstl:jstl:1.2' compile 'org.springframework:spring-aop:4.2.4.RELEASE' compile 'org.springframework:spring-context:4.2.4.RELEASE' compile 'org.springframework:spring-beans:4.2.4.RELEASE' compile 'org.springframework:spring-web:4.2.4.RELEASE' compile 'org.springframework:spring-webmvc:4.2.4.RELEASE' compile 'org.springframework:spring-tx:4.2.4.RELEASE' compile 'org.springframework:spring-jdbc:4.2.4.RELEASE' compile 'org.springframework:spring-test:4.2.4.RELEASE' compile 'mysql:mysql-connector-java:5.1.38' compile 'org.mybatis.generator:mybatis-generator-core:1.3.2' compile 'org.mybatis:mybatis-spring:1.2.3' compile 'org.mybatis:mybatis:3.3.0' compile 'junit:junit:4.12' compile group: 'commons-dbcp', name: 'commons-dbcp', version: '1.4' compile group: 'org.aspectj', name: 'aspectjweaver', version: '1.8.13' compile group: 'log4j', name: 'log4j', version: '1.2.17' mybatisGenerator 'org.mybatis.generator:mybatis-generator-core:1.3.2' mybatisGenerator 'mysql:mysql-connector-java:5.1.38'&#125;// åˆ©ç”¨antåˆ›å»ºä¸€ä¸ªè‡ªåŠ¨ç”ŸæˆMyBatisç›®å½•æ–‡ä»¶çš„tasktask mybatisGenerate &lt;&lt; &#123; ant.properties['targetProject'] = projectDir.path ant.properties['jarDirection'] = project['jdbc.jarDirection'] ant.properties['driverClass'] = project['jdbc.driverClassName'] ant.properties['connectionURL'] = project['jdbc.url'] ant.properties['userId'] = project['jdbc.user'] ant.properties['password'] = project['jdbc.pass'] ant.properties['src_main_java'] = sourceSets.main.java.srcDirs[0].path ant.properties['src_main_resources'] = sourceSets.main.resources.srcDirs[0].path ant.properties['modelPackage'] = project['modelPackage'] ant.properties['mapperPackage'] = project['mapperPackage'] ant.properties['sqlMapperPackage'] = project['sqlMapperPackage'] ant.taskdef( name: 'mbgenerator', classname: 'org.mybatis.generator.ant.GeneratorAntTask', classpath: configurations.mybatisGenerator.asPath ) ant.mbgenerator(overwrite: true, configfile: 'src/main/resources/config/mybatis/generatorConfig.xml', verbose: true) &#123; propertyset &#123; propertyref(name: 'targetProject') propertyref(name: 'jarDirection') propertyref(name: 'userId') propertyref(name: 'driverClass') propertyref(name: 'connectionURL') propertyref(name: 'password') propertyref(name: 'src_main_java') propertyref(name: 'src_main_resources') propertyref(name: 'modelPackage') propertyref(name: 'mapperPackage') propertyref(name: 'sqlMapperPackage') &#125; &#125;&#125; æŽ¥ç€Syncæˆ–è€…ç‚¹å‡»Import Changes IDEAå°±ä¼šä¸‹è½½ä¾èµ–åŒ…äº†.ä¾èµ–ç‰ˆæœ¬å·å‡æºäºŽMaven Repository spring-mvc.xml å¯¼å…¥ä¾èµ–åŽ,åˆ™å¯ç›´æŽ¥åˆ›å»ºspringç›¸å…³xml 123456789101112131415161718192021222324&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xmlns:mvc="http://www.springframework.org/schema/mvc" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd"&gt; &lt;!-- è‡ªåŠ¨æ‰«ææŽ§åˆ¶å™¨ --&gt; &lt;context:component-scan base-package="com.lhalcyon.webhook.controller"/&gt; &lt;!-- è§†å›¾æ¸²æŸ“ --&gt; &lt;bean id="internalResourceViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt; &lt;property name="prefix" value="/WEB-INF/views/"/&gt; &lt;property name="suffix" value=".jsp"/&gt; &lt;/bean&gt; &lt;!-- æŽ§åˆ¶å™¨æ˜ å°„å™¨å’ŒæŽ§åˆ¶å™¨é€‚é…å™¨ --&gt; &lt;mvc:annotation-driven/&gt; &lt;!-- é™æ€èµ„æºæ˜ å°„å™¨ --&gt; &lt;mvc:resources mapping="/statics/**" location="/WEB-INF/statics/" /&gt;&lt;/beans&gt; applicationContext-dao.xml123456789101112131415161718192021222324252627282930313233343536&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"&gt; &lt;!-- åŠ è½½é…ç½®æ–‡ä»¶ --&gt; &lt;context:property-placeholder location="classpath:config/mybatis/jdbc-mysql.properties" /&gt; &lt;!-- æ•°æ®åº“è¿žæŽ¥æ±  --&gt; &lt;bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"&gt; &lt;property name="driverClassName" value="$&#123;jdbc.driverClassName&#125;" /&gt; &lt;property name="url" value="$&#123;jdbc.url&#125;" /&gt; &lt;property name="username" value="$&#123;jdbc.user&#125;" /&gt; &lt;property name="password" value="$&#123;jdbc.pass&#125;" /&gt; &lt;property name="maxActive" value="10" /&gt; &lt;property name="maxIdle" value="5" /&gt; &lt;/bean&gt; &lt;!-- mapperé…ç½® --&gt; &lt;!-- è®©springç®¡ç†sqlsessionfactory ä½¿ç”¨mybatiså’Œspringæ•´åˆåŒ…ä¸­çš„ --&gt; &lt;bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"&gt; &lt;!-- æ•°æ®åº“è¿žæŽ¥æ±  --&gt; &lt;property name="dataSource" ref="dataSource" /&gt; &lt;!-- è‡ªåŠ¨æ‰«æmapping.xmlæ–‡ä»¶ --&gt; &lt;!--&lt;property name="mapperLocations" value="classpath*:com/lhalcyon/mapper/*.xml"/&gt;--&gt; &lt;/bean&gt; &lt;!-- é…ç½®Mapperæ‰«æå™¨ --&gt; &lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt; &lt;property name="basePackage" value="com.lhalcyon.webhook.mapper"/&gt; &lt;/bean&gt;&lt;/beans&gt; applicationContext-service.xml1234567891011121314&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"&gt; &lt;!-- é…ç½®åŒ…æ‰«æå™¨ --&gt; &lt;context:component-scan base-package="com.lhalcyon.webhook.service"/&gt;&lt;/beans&gt; applicationContext-trans.xml1234567891011121314151617181920212223242526272829303132&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"&gt; &lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt; &lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; &lt;!-- æ•°æ®æº --&gt; &lt;property name="dataSource" ref="dataSource" /&gt; &lt;/bean&gt; &lt;!-- é€šçŸ¥ --&gt; &lt;tx:advice id="txAdvice" transaction-manager="transactionManager"&gt; &lt;tx:attributes&gt; &lt;!-- ä¼ æ’­è¡Œä¸º --&gt; &lt;tx:method name="insert*" propagation="REQUIRED" /&gt; &lt;tx:method name="delete*" propagation="REQUIRED" /&gt; &lt;tx:method name="update*" propagation="REQUIRED" /&gt; &lt;tx:method name="query*" propagation="SUPPORTS" read-only="true" /&gt; &lt;tx:method name="get*" propagation="SUPPORTS" read-only="true" /&gt; &lt;/tx:attributes&gt; &lt;/tx:advice&gt; &lt;!-- åˆ‡é¢ --&gt; &lt;aop:config&gt; &lt;aop:advisor advice-ref="txAdvice" pointcut="execution(* com.lhalcyon.webhook.service.*.*(..))" /&gt; &lt;/aop:config&gt;&lt;/beans&gt; web.xml12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0"&gt; &lt;!-- åˆå§‹åŒ–spring å®¹å™¨ --&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:config/spring/applicationContext-*.xml&lt;/param-value&gt; &lt;/context-param&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt; &lt;!-- é…ç½®å‰ç«¯æŽ§åˆ¶å™¨ --&gt; &lt;servlet&gt; &lt;servlet-name&gt;index-dispather&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath*:config/spring/spring-mvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;index-dispather&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;!-- è§£å†³postä¹±ç é—®é¢˜ --&gt; &lt;filter&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;utf-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt;&lt;/web-app&gt; Tomcatéƒ¨ç½²Run-&gt;Edit Configurations æœ‰fixé¡¹ç‚¹å‡»é…ç½®å³å¯,ç„¶åŽè¿è¡Œ. MyBatisé…ç½®æ•°æ®åº“ç®¡ç†å·¥å…·ç¬”è€…ä½¿ç”¨çš„æ˜¯ é¦–å…ˆåˆ›å»ºæ•°æ®åº“halcyon,æŽ¥ç€åˆ›å»ºbookè¡¨,ç”¨äºŽåŽé¢çš„mybatis generator 12345CREATE TABLE book ( book_id INT PRIMARY KEY AUTO_INCREMENT, book_name VARCHAR(30) NOT NULL, author VARCHAR(20) default 'ä½šå') ç„¶åŽåœ¨gradleåˆ›å»ºmybatis generator task è¿è¡Œtask è¿è¡ŒæˆåŠŸåŽ,ä¼šç”Ÿæˆä¸Žæ•°æ®åº“è¡¨å¯¹åº”çš„java beanä¸Ždaoæ–‡ä»¶,å³é¡¹ç›®é‡Œçš„Book.javaã€BookExample.javaã€BookMapper.xmlã€BookMapper.java generatorConfig.xmlé…ç½®å‚æ•°å¯è‡ªè¡Œæœç´¢è¡¥å……ä¿®æ”¹ðŸ¤”.æ‰‹åŠ¨è¦†å†™ä¸‹Bookçš„toStringæ–¹æ³•æ–¹ä¾¿æ—¥å¿—è¾“å‡º æµ‹è¯•ä¸ºäº†æ»¡è¶³åŒæ—¶æµ‹è¯•Springã€SpringMVCã€Mybatis,ç¬”è€…å»ºç«‹ä¸€ä¸ªControlleré€šè¿‡Getè¯·æ±‚è¿›è¡ŒCURDæ“ä½œ. Service1234567891011121314151617181920212223242526272829@Servicepublic class BookServiceImpl implements BookService &#123; @Autowired private BookMapper bookMapper; @Override public void insertBook(Book book) &#123; bookMapper.insert(book); &#125; @Override public void updateBook(Book book) &#123; bookMapper.updateByPrimaryKey(book); &#125; @Override public List&lt;Book&gt; getAllBooks() &#123; BookExample example = new BookExample(); return bookMapper.selectByExample(example); &#125; @Override public void deleteBookById(int bookId) &#123; BookExample example = new BookExample(); example.createCriteria().andBookIdEqualTo(bookId); bookMapper.deleteByExample(example); &#125;&#125; Controller1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950@RestControllerpublic class BookController &#123; private static final Logger logger = Logger.getLogger(BookController.class); @Autowired private BookService bookService; @RequestMapping(value = "/insert",method = RequestMethod.GET) public String insert(String bookName,String author)&#123; Book book = new Book(); book.setBookName(bookName); book.setAuthor(author); bookService.insertBook(book); return queryStrings(); &#125; @RequestMapping("/update") public String updateAuthor(int bookId,String bookName,String author)&#123; Book book = new Book(); book.setBookId(bookId); book.setBookName(bookName); book.setAuthor(author); bookService.updateBook(book); return queryStrings(); &#125; @RequestMapping("/delete") public String deleteBook(int bookId)&#123; bookService.deleteBookById(bookId); return queryStrings(); &#125; @RequestMapping("/find_all") public String getAllBooks()&#123; List&lt;Book&gt; books = bookService.getAllBooks(); logger.info(books); return books.toString(); &#125; private String queryStrings()&#123; List&lt;Book&gt; allBooks = bookService.getAllBooks(); return allBooks.toString(); &#125;&#125; ç›´æŽ¥é€šè¿‡è¯·æ±‚åœ°å€,èŽ·å¾—ç»“æžœ æ’å…¥: 1http://localhost:8080/webhook/insert?bookName=java&amp;author=jack æ‰§è¡ŒåŽç›´æŽ¥å°†æ•°æ®åº“ä¸­æ‰€æœ‰bookè®°å½•è¾“å‡º,æ–¹ä¾¿è§‚å¯Ÿ. å…¶å®ƒæ“ä½œç±»ä¼¼ æ›´æ–°: 1http://localhost:8080/webhook/update?bookId=3&amp;bookName=go&amp;author=joe åˆ é™¤: 1http://localhost:8080/webhook/delete?bookId=4 æŸ¥è¯¢(æ‰€æœ‰): 1http://localhost:8080/webhook/find_all å¦‚è‹¥å‘ç”Ÿ500 Invalid bound statement (not found)ç±»ä¼¼é”™è¯¯,ä¸€èˆ¬æ˜¯æ²¡æœ‰æ‰«æåˆ°Mapper.xml.å…¶ä¸­ä¸€ç§æƒ…å†µä¸‹æ˜¯xmlæ ¹æœ¬æ²¡è¢«æ‰“åŒ…è¿›war.éœ€è¦åœ¨build.gradleä¸­è¿›è¡Œé…ç½®,å¹¶ä¸”é…ç½®åŽSyncæˆ–Import Changes,å†é‡æ–°ç”¨å‘½ä»¤./gradlew buildæ‰å¯ç”Ÿæ•ˆ. 123456//å°†srcæ–‡ä»¶å¤¹ä¸­çš„èµ„æºæ–‡ä»¶åŒæ—¶æ‰“åŒ…processResources &#123; from(&apos;src/main/java&apos;) &#123; include &apos;**/*.xml&apos; &#125;&#125; è‡³æ­¤SpringMVC+MyBatis+Gradleé¡¹ç›®å·²ç»æž„å»ºæµ‹è¯•å®Œæ¯•. ä»£ç å·²ä¸Šä¼ GayHub,æ–‡ç« è‹¥å¯¹å„ä½å¤§ä½¬æœ‰å¸®åŠ©,éº»çƒ¦é¡ºæ‰‹ç‚¹ä¸ªstar~ â¤ï¸ å„ä½å¯èƒ½å‘çŽ°äº†,SSMé…ç½®èµ·æ¥æ¯”è¾ƒç¹ç,ç›¸æ¯”ä¹‹ä¸‹,SpringBootå°±ç²¾ç®€äº†è®¸å¤š.åŽé¢æœ‰æœºä¼š,æˆ‘ä»¬å†æ¥ç»†è¯´ ðŸ¤’ å‚è€ƒ: https://www.cnblogs.com/bojuetech/p/5844413.html å‚è€ƒ: http://blog.csdn.net/kingboyworld/article/details/78251425]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>IntelliJ</tag>
        <tag>Spring</tag>
        <tag>SpringMVC</tag>
        <tag>MyBatis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š]]></title>
    <url>%2Fas_warning%2F</url>
    <content type="text"><![CDATA[Android Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Šæœ€è¿‘åœ¨å¼€å‘ä¸­,ç»„å†…çš„å°ä¼™ä¼´åœ¨å¼€å‘ä¸­ä½¿ç”¨äº†é«˜ç‰ˆæœ¬SDK25çš„Api,ä½†æ˜¯æˆ‘ä»¬çš„é¡¹ç›®æœ€ä½Žå…¼å®¹14,å› æ­¤æµ‹è¯•åœ¨5.1ä¸Šçš„æ‰‹æœºç›´æŽ¥å°±å´©æºƒäº†,é—®å…¶åœ¨å¼€å‘ä¸­æ²¡æœ‰çœ‹åˆ°è­¦å‘Šå—,å›žå¤è¯´ç¡®å®žæ²¡çœ‹åˆ°.åŽæ¥æŸ¥ç©¶ä¸€ä¸‹,ä»–çš„å·¥å…·ä¸Šç¡®å®žæ²¡æœ‰æ˜¾ç¤º.æœ¬æ–‡ç®€è¿°ä¸‹å¦‚ä½•æ‰‹åŠ¨åŽ»è°ƒæ•´å…¼å®¹Apiçš„æç¤ºç­‰çº§,é¿å…åœ¨å¼€å‘ä¸­ç”¨åˆ°é«˜ç‰ˆæœ¬çš„Apiå´ä¸è‡ªå¯Ÿ. é¦–å…ˆwinç”µè„‘æ˜¯æ‰“å¼€Android Studioçš„ Setting ,macæ˜¯æ‰“å¼€Android Studioçš„ Preferences é€‰æ‹©Editorä¸­çš„Inspections å¯¹Calling new methods on older versionsè¿›è¡Œå‹¾é€‰å¹¶ä¸”é…ç½®ä¸ºErrorçº§åˆ« å¦‚æ­¤ç®€å•å³å¯æžå®š.å¦‚é‡åˆ°å…¶ä»–è­¦å‘Š,é”™è¯¯ä»£ç æ²¡æç¤ºä¹Ÿå¯ç±»ä¼¼è¿›è¡Œæ“ä½œé…ç½®.]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android Studio</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Xcodeä»£ç æç¤ºé—®é¢˜å¤„ç†]]></title>
    <url>%2Fxcode-idiot%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨å†™Swift.å¯¹äºŽç¬”è€…è¿™ç§è¢«JetBrainsçš„å‡ å¤§IDEå·¥å…·ç»™æƒ¯åçš„å¼€å‘è€…,Xcodeçš„ä»£ç æç¤ºçœŸæ˜¯æ— åŠ›åæ§½,å…ˆä¸è®ºæ™ºèƒ½æç¤ºåº¦,å°±è¿žåŸºæœ¬çš„æç¤ºä¹Ÿç»å¸¸å‡ºä¸æ¥.è¿™é‡Œå°±ç®€å•æ€»ç»“ä¸‹iOSåŒäº‹ä¼ æŽˆçš„å‡ æ‹›è§£å†³åŠžæ³• 1.Clean Projectæœ€ç›´æŽ¥çš„åŠžæ³•å°±æ˜¯æ¸…ç©ºé¡¹ç›®. å¯è§†åŒ–æŒ‰é’®å…¥å£å†å“ªè¯·è‡ªè¡ŒæŸ¥æ‰¾,ç¬”è€…ä¸€èˆ¬æ˜¯ç”¨Command+Shift+Kè¿›è¡Œæ¸…ç©º,æ­¤æ–¹æ³•ä¸€èˆ¬æœ‰æ•ˆ,ç¼ºç‚¹æ˜¯ä¼šé‡æ–°ç¼–è¯‘é¡¹ç›®,æ¯”è¾ƒæ…¢ 2.æ¸…ç©ºXcodeç¼“å­˜å‰å¾€Xcodeçš„ç¼“å­˜ç›®å½•,æ¸…ç©ºé¡¹ç›®ç¼–è¯‘ç¼“å­˜. å…·ä½“æ“ä½œä¸ºå³é”®Finderå‰å¾€æ–‡ä»¶å¤¹æ–‡ä»¶å¤¹è·¯å¾„ä¸º/ç”¨æˆ·/ceyx/èµ„æºåº“/Developer/Xcode/DerivedData å…¶ä¸­ceyx æ›¿æ¢ä¸ºè‡ªå·±çš„ç”¨æˆ·å,åˆ é™¤ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶,ç„¶åŽé‡æ–°æ‰“å¼€Xcode,ç¼–è¯‘. æ­¤æ–¹æ³•æ¯”1æ›´æ…¢,å¾€å¾€ä¹Ÿæ›´æœ‰æ•ˆ 3.ç»ˆæžå¤§æ‹›å¦‚è‹¥ä¸Šè¿°ä¸¤ç§æ–¹æ³•è¿˜æ— æ•ˆ,åªèƒ½ä½¿ç”¨ç»æ‹›äº†â€¦é‡å¯Xcode,è¿˜ä¸è¡Œå°±é‡å¯ç”µè„‘â€¦ ç¬”è€…é»”é©´æŠ€ç©·äº†,åªèƒ½å……å½“ä¸‹ç½‘å§è€æ¿ä¼ æŽˆä¸‹ç»ˆæžå¤§æ‹›.ðŸ‘» é¢˜å¤–è¯,å¯¹äºŽJetBrainså‡ºå“çš„appcodeè¿˜æœªå°è¯•è¿‡,ä¸çŸ¥å¯¹äºŽXcodeé¡¹ç›®å…¼å®¹åˆ°ä½•ç¨‹åº¦,æ˜¯å¦æ”¯æŒCocoapodç­‰,æœ‰æ—¶é—´ä¼šåŽ»ä½“éªŒä¸‹,å¸Œæœ›è‡³å°‘åœ¨ä»£ç æç¤ºä¸Šèƒ½æ›´å‹å–„äº›ðŸ˜€ ç¬”è€…åŽ»ä½“éªŒäº†ä¸‹Appcode,å…¶ä»£ç æç¤ºå’Œå¿«æ·é”®å¦‚Jetbrainså…¶ä»–äº§å“ä¸€æ ·éžå¸¸æ™ºèƒ½,ä½†æ˜¯ä»£ç ä¸­å¶æœ‰é£˜çº¢,å´å¯ä»¥æˆåŠŸè¿è¡Œ,æ¯”è¾ƒå¹²æ‰°ç¼–ç .å°¤ä¸ºå°´å°¬çš„ä¸€ç‚¹æ˜¯,Appcodeä¸æ”¯æŒstoryboard,å³åœ¨é¡¹ç›®å†…ç‚¹å¼€storyboardæ–‡ä»¶å°±ç›´æŽ¥è·³è½¬xcodeäº†ðŸ˜¥. å¦‚çœŸçš„è¢«Xcodeé€¼ç–¯çš„ç«¥éž‹å¯ä»¥è€ƒè™‘ä¸‹ç”¨AppCodeç¼–ç ,ç”¨Xcodeæ“ä½œstoryboard]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Xcode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux+Jenkins+Gradleæž„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(äºŒ)]]></title>
    <url>%2Flinux-jenkins-gradle_build_android2%2F</url>
    <content type="text"><![CDATA[åœ¨å‰ä¸€ç¯‡æ–‡ç« ä¸­,è¯´æ˜Žäº†åœ¨CenterOSä¸Šè¿›è¡Œä¸€ç³»åˆ—çš„çŽ¯å¢ƒæ­å»º,æœ¬æ–‡å¼€å§‹è¯´æ˜Žå…³äºŽé¡¹ç›®çš„ä¸€ç³»åˆ—é…ç½® Jenkinsé¡¹ç›®é…ç½®é¦–å…ˆåˆ›å»ºä¸€ä¸ªé¡¹ç›®,å°†æž„å»ºä¿æŒçš„å¤©æ•°å’Œä¸ªæ•°è¿›è¡Œé™åˆ¶ æ­¤å¤„æ„Ÿè°¢åŽå°åŒäº‹æç¤º,å› ä¸ºAndroid SDK NDK å°±ç‰¹åˆ«å ç©ºé—´äº†,å¦‚æžœæž„å»ºç¼“å­˜ä¸è¿›è¡Œé™åˆ¶,åˆ™å¾ˆå¿«æœåŠ¡å™¨ç©ºé—´å°±ä¼šä¸è¶³ðŸ¤¥ å‚æ•°æž„å»ºé…ç½®æ‰“åŒ…çŽ¯å¢ƒ åˆ†æ”¯æŒ‡å®š emailè‡ªå®šä¹‰æŽ¥æ”¶è€… æ‰“åŒ…æ—¶é—´æˆ³ å› ä¸ºç¬”è€…çš„å…¬å¸å¯¹æ‰“åŒ…çš„Apkåä»¥åŠæµ‹è¯•ç‰ˆæœ¬å·æ—¶é—´æˆ³æ˜¾ç¤ºçš„è¦æ±‚,å› æ­¤éœ€è¦ä½¿ç”¨åŠ¨æ€å‚æ•° è¿˜æœ‰å…¶ä»–å‚æ•°å‡ä¸Žä»¥ä¸Šç±»ä¼¼,å¯è‡ªè¡Œé…ç½® !!! è®°ä½å°¤ä¸ºé‡è¦çš„æ˜¯è¿™äº›å‚æ•°éƒ½æ˜¯Jenkinsä¸Šé…ç½®çš„Gradleå±žæ€§,å¾—ä¼ é€’åˆ°Appçš„Gradleä¸­ è¿™é‡Œå‹¾é€‰Pass all job parameters as Project properties æºç ç®¡ç†åœ¨æºç ç®¡ç†å¤„é…ç½®Gitè´¦å· è¿™é‡Œçš„*/${BRANCH}å¯¹åº”å‚æ•°é…ç½®æ—¶çš„BRANCH.ä¸ºä»€ä¹ˆè¿™é‡Œåšæˆé€‰æ‹©åž‹å‚æ•°å‘¢,æ˜¯å› ä¸ºåˆ†æ”¯åæ˜¯æœªçŸ¥çš„,åšæˆå¡«å†™çš„è¯,å¯èƒ½åŽ‹æ ¹æ‹‰ä¸åˆ°æŒ‡å®šåˆ†æ”¯çš„ä»£ç ðŸ¤ Gradleæž„å»ºè„šæœ¬å¢žåŠ æž„å»ºåŠ¨ä½œ è¿™é‡Œ${WORKSPACE}æŒ‡çš„æ˜¯Gitæ‹‰ä¸‹çš„æ ¹ç›®å½•.é€”ä¸­é©¬èµ›å…‹ä½ç½®åˆ™ä¸ºé¡¹ç›®æ ¹ç›®å½• è’²å…¬è‹±ä¸Šä¼ å¢žåŠ æž„å»ºåŠ¨ä½œ,å°†Apkä¸Šä¼ è’²å…¬è‹± 1curl -k -F &quot;file=@$&#123;WORKSPACE&#125;/source/é¡¹ç›®æ ¹ç›®å½•/app/apks/$&#123;BUILD_PREFIX&#125;_$&#123;JENKINS_TIME&#125;_$&#123;DAY_VERSION&#125;.apk&quot; -F &quot;uKey=ä½ çš„ukey&quot; -F &quot;_api_key=ä½ çš„apiKey&quot; -F &quot;installType=2&quot; -F &quot;password=ä¸‹è½½å¯†ç &quot; -F &quot;updateDescription=$&#123;DESCRIPTION&#125;&quot; https://www.pgyer.com/apiv1/app/upload ${WORKSPACE}/source/é¡¹ç›®æ ¹ç›®å½•/app/apks/ä¸ºç¬”è€…è‡ªè¡Œä¿®æ”¹çš„Apkè¾“å‡ºç›®å½•,æ­¤å¤„è¯·æ ¹æ®è‡ªå·±çš„é¡¹ç›®è¾“å…¥ç›®å½•è¿›è¡Œä¿®æ”¹ curlå‘½ä»¤å¦‚æžœä½¿ç”¨ä¸äº†å¯è‡ªè¡Œç™¾åº¦è§£å†³ ä»¥ä¸‹ä¸ºè’²å…¬è‹±çš„ä¸Šä¼ Api,å¯ä»¥è‡ªè¡Œè°ƒæ•´å‚æ•° é‚®ä»¶é€šçŸ¥é¦–å…ˆè¿˜æ˜¯è¿›å…¥Jenkins-&gt;ç³»ç»Ÿè®¾ç½® åœ¨Jenkins Locationä¸­è¿›è¡Œé…ç½® Jenkins URL:http://10.50.0.16:8777/jenkins/ ç³»ç»Ÿç®¡ç†å‘˜é‚®ä»¶åœ°å€: Androidå‚æ•°åŒ–æž„å»º&lt;aaa@163.com&gt; æ­¤å¤„Androidå‚æ•°åŒ–æž„å»ºå°±ä¸ºé‚®ä»¶ä¸­çš„å‘é€äººåç§° ç³»ç»Ÿè®¾ç½®ä¸­çš„é»˜è®¤æ”¶ä»¶äººæœ€å¥½ä¸è¦é…ç½®ä¸ºè‡ªå·±,å› ä¸ºå¦‚æžœé…ç½®åŽ,è‡ªå·±å°±æ°¸è¿œåœ¨æ”¶ä»¶äººçš„å‰ç«¯,åŽé¢æƒ³å‘é€ç»™é¢†å¯¼æ—¶,ä¾¿ä¸å¤§å¥½. é‚®ä»¶çš„å†…å®¹å¯è‡ªå®šä¹‰htmlå†…å®¹,äºŒç»´ç ç›´æŽ¥çº¿ä¸‹ç”Ÿæˆè’²å…¬è‹±çš„åœ°å€ç„¶åŽè´´åœ¨é‚®ä»¶å†…å³å¯ Appæœ¬åœ°Gradleé…ç½®é¦–å…ˆåœ¨gradle.propertiesæ–‡ä»¶ä¸­è¿›è¡Œå‚æ•°åŒ–æž„å»ºåœ¨éžJenkinså†™å…¥æƒ…å†µæ—¶çš„ç¼ºçœå€¼é…ç½® åœ¨æœªä½¿ç”¨Jenkinsæž„å»ºçš„æƒ…å†µä¸‹åº”ç”¨ä¼šè¯»æœ¬åœ°çš„è¿™äº›å˜é‡å€¼ ç„¶åŽåœ¨appmoduleä¸‹çš„build.gradleä¸­è¿›è¡Œé…ç½®å†™å…¥çš„å€¼é…ç½® 12345678910111213141516171819202122232425262728293031323334//ä¿®æ”¹ç”Ÿæˆçš„apkåå­—åŠè¾“å‡ºç›®å½•applicationVariants.all &#123; variant -&gt; variant.outputs.each &#123; output -&gt; def newName def oldFile = output.outputFile def outDirectory = oldFile.parent def buildPrefix def showVersion if (variant.buildType.name == &apos;debug&apos;) &#123; buildPrefix = BUILD_PREFIX &#125; else &#123; buildPrefix = BUILD_PREFIX_RELEASE &#125; def jenkinsTime = JENKINS_TIME if (variant.buildType.name == &apos;debug&apos;) &#123; showVersion = buildPrefix + &apos;_&apos; + jenkinsTime + &apos;_&apos; + DAY_VERSION &#125; else &#123; showVersion = APP_VERSION &#125; resValue(&quot;string&quot;, &apos;fund_app_version&apos;, showVersion) def tempFile = file(&quot;build.gradle&quot;) outDirectory = tempFile.parent + &apos;/apks&apos; if (IS_JENKINS) &#123; newName = buildPrefix + &apos;_&apos; + jenkinsTime + &apos;_&apos; + DAY_VERSION + &apos;.apk&apos; &#125; else &#123; newName = &apos;android-v&apos; + APP_VERSION + &apos;-&apos; + variant.productFlavors[0].name + &apos;-&apos; + variant.buildType.name + &apos;.apk&apos; &#125; output.outputFile = new File(outDirectory, newName) &#125;&#125; ç³»ç»Ÿé»˜è®¤çš„è¾“å…¥è·¯å¾„æ˜¯åœ¨buildæ–‡ä»¶å¤¹ä¸­,å±‚çº§æ¯”è¾ƒæ·±.æ­¤å¤„ç¬”è€…å°†apkçš„è¾“å‡ºè·¯å¾„è¿›è¡Œäº†ä¿®æ”¹å¹¶ä¸”å¯¹apkçš„è¾“å‡ºåç§°è¿›è¡Œäº†è°ƒæ•´ è‡³æ­¤,Jenkinså‚æ•°è‡ªåŠ¨åŒ–æž„å»ºå·²ç»å®Œæˆ!ðŸ˜€]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Jenkins</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux+Jenkins+Gradleæž„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(ä¸€)]]></title>
    <url>%2Flinux-jenkins-gradle_build_android1%2F</url>
    <content type="text"><![CDATA[å‰è¨€å…³äºŽJenkinséƒ¨ç½²å®‰å“è‡ªåŠ¨æ‰“åŒ…æœ‰å¾ˆå¤šå¥½å¤„,å¯ä»¥é…ç½®å‚æ•°è¿›è¡Œæž„å»º,é€‰æ‹©æ‰“åŒ…çŽ¯å¢ƒã€è®¾ç½®Appç‰ˆæœ¬ã€è®¾ç½®åŠ å¯†å¼€å…³ç­‰.èµ·åˆ,ç¬”è€…ä¹Ÿæ˜¯å‚è€ƒäº†ä¸€äº›ç½‘ä¸Šçš„æ•™ç¨‹,å°†è‡ªåŠ¨åŒ–æ‰“åŒ…æž„å»ºåœ¨äº†è‡ªå·±çš„windowså¼€å‘æœºå™¨ä¸Š,è€Œå°†Jenkinsè‡ªåŠ¨æž„å»ºAndroidéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šå’Œæœ¬æœºä¸Šåœ¨çŽ¯å¢ƒæž„å»ºæ–¹é¢ç•¥æœ‰ä¸åŒ,å‘ç•¥å¤š. å‚æ•°åŒ–æž„å»ºçš„è¿‡ç¨‹å´æ˜¯å¾ˆä¾¿æ·,ä½†æ˜¯éƒ¨ç½²åœ¨æœ¬æœºä¸Šè‡ªåŠ¨åŒ–æ‰“åŒ…å…¶å®žæ˜¯ä¸ªä¼šå¢žåŠ æ‰“åŒ…æ—¶é•¿çš„å·¥ä½œ,å› ä¸ºè‡ªåŠ¨åŒ–æ‰“åŒ…ä¼šé¦–å…ˆåŽ»ä»£ç ä»“åº“æ‹‰å–ä»£ç åˆ°æœ¬åœ°,ç„¶åŽå†å¼€å§‹æ‰“åŒ…,è¿™ä¸ªè¿‡ç¨‹ä¼šæ¯”ç›´æŽ¥ç”¨ASæ‰“åŒ…æ…¢å¾ˆå¤š.åŽæ¥æå‡ºéœ€æ±‚,è¦å°†è‡ªåŠ¨åŒ–æ‰“åŒ…é…ç½®åˆ°æœåŠ¡å™¨ä¸Š.è¿ç»´å°±æä¾›äº†ä¸€å°LinuxæœåŠ¡å™¨,å¹¶ä¸”ä¸Šé¢å·²é…ç½®åŽå°çš„è‡ªåŠ¨åŒ–æ‰“åŒ…çŽ¯å¢ƒ,ç”¨çš„æ˜¯Jdk1.7å’Œæ¯”è¾ƒæ—§ç‰ˆæœ¬çš„Jenkins,äºŽæ˜¯æˆ‘ä»¬å¾—å¦è¡Œä½¿ç”¨ç‹¬ç«‹çš„å®‰è£…çš„çŽ¯å¢ƒ. æœ€ç»ˆç»“æžœæœ€ç»ˆæˆ‘ä»¬è¦å®žçŽ°çš„æ˜¯å®žçŽ°Jenkinsä¸Šé¢é…ç½®åº”ç”¨ç‰ˆæœ¬å·ã€Gitåˆ†æ”¯ã€åº”ç”¨æ¸ é“ã€è¯·æ±‚åŸºåœ°å€ã€åº”ç”¨çŽ¯å¢ƒç­‰å‚æ•°,è¿›è¡Œä¸€é”®å‚æ•°åŒ–æž„å»ºæ‰“åŒ…ä¸Šä¼ è‡³è’²å…¬è‹±å¹¶å‘é€é‚®ä»¶é€šçŸ¥ç»™è‡ªå®šä¹‰çš„æŽ¥æ”¶è€… æœ€ç»ˆå®žçŽ°å‚æ•°åŒ–é…ç½®å¤§è‡´å¦‚ä¸‹æ‰€ç¤º: å‘é€é‚®ä»¶(é‚®ä»¶å†…å®¹è¾ƒé•¿,è¿›è¡Œäº†ç›¸åº”ç¼©å°) çŽ¯å¢ƒæ­å»ºæ‰€éœ€çŽ¯å¢ƒ æ–°ç‰ˆJenkins(éœ€èƒ½å®‰è£…å‚æ•°åŒ–æž„å»ºæ’ä»¶) Tomcat æ–°ç‰ˆJenkins Android SDK Android NDK aapt Git Gradle å…¶å®ƒ(è§†è‡ªèº«é¡¹ç›®æ‰€éœ€) CenterOS64ä½å·²æœ‰çŽ¯å¢ƒ Jdk1.7 Tomcat æ—§ç‰ˆJenkins 1. Jdkå®‰è£…åŠé…ç½®ç”±äºŽAndroidå¼€å‘ä½¿ç”¨çš„ Jdk1.8,å› æ­¤ä¸èƒ½å¤ç”¨æœåŠ¡å™¨ä¸ŠçŽ°æœ‰çš„Jdk é¦–å…ˆåŽ»Oracle Downloadsä¸‹è½½ Jdk for Linux.ç¬”è€…ä¸‹è½½çš„æ˜¯jdk-8u131-linux-x64.tar.gz ä¸Šä¼ åˆ°æœåŠ¡å™¨,è¿›å…¥ç›¸å…³ç›®å½•è§£åŽ‹ 1tar -zxvf jdk-8u131-linux-x64.tar.gz å¯å°†ç›®å½•ç§»è‡³å…¶ä»–ç›®å½•.å…¶å®žæœ€å¥½åœ¨è§£åŽ‹å‰å°±å°†åŽ‹ç¼©åŒ…ç§»è‡³ç›®æ ‡ç›®å½• JdkçŽ¯å¢ƒå˜é‡é…ç½®(å¯é€‰) ç”±äºŽåŽå°ä½¿ç”¨äº†JAVA_HOMEã€JENKINS_HOMEç­‰ä¸€ç³»åˆ—çŽ¯å¢ƒå˜é‡å,æ‰€ä»¥æœåŠ¡å™¨ä¸Šé»˜è®¤è°ƒç”¨çš„ä¼šæ˜¯ä»–ä»¬çš„çŽ¯å¢ƒå˜é‡,æˆ‘ä»¬å¼€å‘çš„ä¸€å¥—åªèƒ½åœ¨è‡ªå·±çš„Tomcatã€Jenkinsä¸­è¿›è¡ŒæŒ‡å®š,å…·ä½“ä¸‹æ–‡ä¼šè¿›è¡Œè¯´æ˜Ž 2. Tomcatå®‰è£…åŠé…ç½®é¦–å…ˆåŽ»Tomcat Downloadé€‰æ‹©ç‰ˆæœ¬è¿›è¡Œä¸‹è½½.è¿™é‡Œç¬”è€…é€‰æ‹©çš„æ˜¯apache-tomcat-7.0.79.tar.gz ä¸Šä¼ åˆ°æœåŠ¡å™¨,è¿›å…¥ç›¸å…³ç›®å½•è§£åŽ‹ 1tar -zxv -f apache-tomcat-7.0.79.tar.gz a.ç«¯å£ä¿®æ”¹ç”±äºŽå¸¸è§„tomcatç«¯å£è¢«å·²æœ‰tomcatå ç”¨,å› æ­¤æˆ‘ä»¬éœ€è¦ä¿®æ”¹ç«¯å£ è¿›å…¥confç›®å½•ä¸‹çš„server.xmlä¿®æ”¹,æ­¤å¤„ç¬”è€…æ˜¯ç”¨Vimä¿®æ”¹.ä¸ä¼šç”¨çš„åŒå­¦è¯·å‡ºé—¨å·¦è½¬åº¦å¨˜ðŸ¤” ä¸»è¦ä¿®æ”¹çš„æ˜¯,è®¾ç½®ä¸ºè‡ªå®šä¹‰ç«¯å£å· Tomcat admin port å³æ–‡ä»¶æœ€ä¸Šé¢çš„ç«¯å£å· Http/1.1 port è¿žæŽ¥è®¿é—®çš„ç«¯å£å· AJP/1.3 port b.çŽ¯å¢ƒé…ç½®æŒ‡å®šTomcatè¿è¡Œæ—¶çŽ¯å¢ƒ,åœ¨binç›®å½•ä¸‹ä¿®æ”¹setclasspath.sh ä»¥ä¸‹æ˜¯ç¬”è€…çš„çŽ¯å¢ƒ,è¯·è‡ªè¡Œæ›¿æ¢è·¯å¾„ 123export JAVA_HOME=/usr/android/java/jdk1.8.0_131export JRE_HOME=/usr/android/java/jdk1.8.0_131/jreexport JENKINS_HOME=/home/android/jenkins 3. Gradleå®‰è£…åŠé…ç½®é¦–å…ˆåŽ»Gradle Downloadä¸‹è½½å¯¹åº”Gradleç‰ˆæœ¬,ç¬”è€…ä½¿ç”¨åˆ°çš„æ˜¯gradle-3.3-all.zip ä¸Šä¼ åˆ°æŒ‡å®šç›®å½•è§£åŽ‹ 1unzip gradle-3.3-all.zip ç„¶åŽæ·»åŠ çŽ¯å¢ƒå˜é‡vim /etc/profile,åœ¨çŽ¯å¢ƒå˜é‡é…ç½®å¤„å¢žåŠ ä¸€å¥ 1export GRADLE_HOME=/home/gradle-3.3/bin 4. Android Sdk For Linux å®‰è£…åŠæ›´æ–°è¿™é‡Œä¸‹è½½Sdkè§£åŽ‹éƒ½ä¸æ˜¯éš¾ç‚¹.éš¾ç‚¹åœ¨äºŽå®‰è£…ä¹‹åŽæ›´æ–°çš„é—®é¢˜. ç”¨ASæˆ–è€…Eclipseçš„åŒå­¦è‚¯å®šæŽ¥è§¦è¿‡Sdk Manager,æ­¤å¤„é€‰æ‹©æ›´æ–°åŽè¦æ‰‹åŠ¨ç‚¹Accept Licenseæ‰èƒ½å¯åŠ¨æ›´æ–°.ä½†æ˜¯åœ¨Linuxä¸‹æ²¡æœ‰ç•Œé¢åŒ–çš„å‹¾é€‰å¯ç”¨.å› æ­¤éœ€è¦ç”¨è„šæœ¬æ¥æ›´æ–°.ç½‘ä¸Šæœ‰è¯´å¤åˆ¶Licenseçš„æ–¹æ³•ç¬”è€…è¯•äº†æ— æ•ˆ,ä¹Ÿè®¸æ˜¯å§¿åŠ¿ä¸å¯¹å§,æ­¤å¤„ä¹Ÿæ˜¯è¸©äº†å¾ˆä¹…çš„å‘æ‰æœå‡ºæ¥çš„è§£å†³æ–¹æ³•: æ›´æ–°Sdkæ–¹æ³•ä¼ é€é—¨ è¿™é‡Œå…ˆæ„Ÿè°¢ä¸‹è¯¥ä½œè€…ðŸ‘ è¿™é‡Œä¹Ÿä¸ºä¸æ„¿è·³ä¼ é€é—¨çš„åŒå­¦è¯´æ˜Žä¸€ä¸‹,å°±å‡ ä¸ªæ­¥éª¤. a.æŸ¥çœ‹å¯æ›´æ–°åˆ—è¡¨ åœ¨Sdkçš„toolsç›®å½•ä½¿ç”¨./android list sdk --allæŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨æä¾›çš„SdkåŒ…çš„åºå·,è®°å½•æƒ³è¦æ›´æ–°çš„Sdkåºå· b.ç¼–è¾‘è„šæœ¬ 1234567#!/usr/bin/expectset timeout -1spawn /usr/local/android-sdk-linux/tools/android update sdk -u -a -t 1,2,3,24,25,26,27,28,30,95,96,102,103,104,105,106,107expect &#123; &quot;Do you accept the license&quot; &#123; exp_send &quot;y\r&quot; ; exp_continue &#125; eof&#125; æ­¤å¤„1,2,3,...ä¸ºéœ€è¦ä¸‹è½½çš„Sdkåºå· c.è¿è¡Œè„šæœ¬ å¾…è„šæœ¬è·‘å®Œ,sdkå°±æ›´æ–°å®Œæ¯•äº† æ³¨æ„æ­¤å¤„è„šæœ¬ç”¨åˆ°äº†expect,éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…,æ­¤å¤„æä¾›expectå®‰è£…ä¼ é€é—¨ 5. Ndk for Linuxå®‰è£…å®‰è£…è¾ƒç®€å•,åŽç»­éœ€é…ç½®Jenkinsç³»ç»Ÿå˜é‡,ä¸‹æ–‡ä¼šè¿›è¡Œè¯´æ˜Ž é¡¹ç›®å› ç”¨åˆ°äº†Jni,éœ€è¦å®‰è£…Ndk,å¯æ˜¯åŽæœŸå‘çŽ°åœ¨é¡¹ç›®é‡Œæ¯æ¬¡å‡åŽ»ç¼–è¯‘jniå¯¼è‡´é¡¹ç›®çš„compile sdkä¸èƒ½ä½¿ç”¨é«˜äºŽ23çš„,è‡´ä½¿Instant Runç­‰åŠŸèƒ½ä½¿ç”¨,å¾ˆå½±å“å¼€å‘æ•ˆçŽ‡.åŽæœŸæ”¹åœ¨é¡¹ç›®å¤–ç¼–è¯‘å¥½äº†é™æ€åº“ç„¶åŽæ”¾å…¥é¡¹ç›®ä¸­,è¿™æ ·ä¸ä¼šé™åˆ¶é¡¹ç›®è‡ªèº«çš„SDKç‰ˆæœ¬,å› æ­¤è‹¥æœªä½¿ç”¨JNIçš„é¡¹ç›®,åˆ™å¯è·³è¿‡æ­¤æ­¥éª¤ 6. Gitå®‰è£…åŠçŽ¯å¢ƒå˜é‡é…ç½®ä¸‹è½½å®‰è£…å¹¶é…ç½®çŽ¯å¢ƒå˜é‡ 1export GIT_HOME=/usr/android/git-2.12.2/bin 7. Jenkinså®‰è£…åŠé…ç½®a. ä¸‹è½½ä¸‹è½½Jenkinså°†waråŒ…æ”¾å…¥Tomcatçš„webappsç›®å½•ä¸‹,å¯åŠ¨tomcat ç„¶åŽåœ¨åœ°å€æ è¾“å…¥è·¯å¾„http://localhost:/8777 å…¶ä¸­8777ä¸ºç¬¬äºŒæ­¥ä¸­è‡ªå®šä¹‰çš„ç«¯å£å· b. æ’ä»¶å®‰è£…ç„¶åŽå®‰è£…æ’ä»¶(åŸºæœ¬å‚è€ƒç½‘ä¸Šçš„) 12345678910111213141516171819202122231.Branch API Plugin2.build timeout plugin3.build-name-setter4.Credentials Binding Plugin5.description setter plugin6.Dynamic Parameter Plug-in7.Environment Injector Plugin9.Git plugin10.GIT server Plugin11.Gradle Plugin12.Git Parameter Plug-In13.Pipeline: Basic Steps14.Pipeline: Build Step15.Pipeline: Input Step16.Pipeline: Nodes and Processes17.Pipeline: Stage Step18.Scriptler19.Workspace Cleanup Plugin20.Post-Build Script Plug-in21.Email Extension Plugin22.SSH Slaves plugin23.Timestamper(ä¸æ˜Žä¸ºä»€ä¹ˆå°‘8) å› ä¸ºJenkinsç‰ˆæœ¬ä¸åŒ,å®žé™…ä½¿ç”¨ä¸­å‘çŽ°ç¼ºå¤±ä¸å°‘ ä»¥ä¸‹é™„ä¸Šç¬”è€…æ‰€å®‰è£…çš„æ‰€æœ‰æ’ä»¶(è‹¥æ— é—®é¢˜çš„å¯è·³è¿‡) c. çŽ¯å¢ƒå˜é‡é…ç½®çŽ¯å¢ƒå˜é‡ é¦–å…ˆç‚¹å‡»ç³»ç»Ÿç®¡ç†-&gt;ç³»ç»Ÿè®¾ç½®é…ç½®Jdkã€Android Sdkã€Gradleã€Android NdkçŽ¯å¢ƒå˜é‡(æ­¤å¤„ä¹Ÿå¯é…ç½®Gitç›®å½•,ç¬”è€…æ˜¯å°†Gitç›®å½•é…ç½®åœ¨LinuxçŽ¯å¢ƒå˜é‡ä¸­äº†) å…¶å®ƒå¦‚é‚®ä»¶ç›¸å…³é…ç½®çš„åœ¨ä¸‹ç¯‡ä¼šè¯´æ˜Ž è‡³æ­¤çŽ¯å¢ƒå¤§ä½“ä¸Šé…ç½®å·²ç»å®Œæˆ,ä¸‹ç¯‡å³å¯è¿›å…¥é¡¹ç›®ç›¸å…³é…ç½®]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Jenkins</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ··ç¼–:Swiftè°ƒç”¨Objective-C]]></title>
    <url>%2Fhybrid-compile_swift2oc%2F</url>
    <content type="text"><![CDATA[çŽ¯å¢ƒ Xcode 8.3.3 Swift3.+ æ­¥éª¤1.åˆ›å»ºæ··ç¼–æ¡¥æŽ¥å¤´æ–‡ä»¶ åç§°éšä¾¿å–,æœ€å¥½èƒ½å’Œæ™®é€šheaderæ–‡ä»¶åšåŒºåˆ« 2.é¡¹ç›®é…ç½®æ¡¥æŽ¥æ–‡ä»¶ ç‚¹å‡»å·¥ç¨‹,é€‰ä¸­Build Settings,å­é€‰é¡¹å‹¾é€‰All åœ¨ä¸‹é¢é…ç½®ä¸­æ‰¾åˆ°(æˆ–è€…æœç´¢)Swift Compile - General é…ç½®æ··ç¼–æ¡¥æŽ¥å¤´æ–‡ä»¶ ç‚¹å¼€å›¾ä¸­çº¢åœˆåŒºåŸŸè¿›è¡Œé…ç½®,å¦‚æˆ‘æ‰€å»ºçš„æ–‡ä»¶åœ¨å·¥ç¨‹é‡Œè·¯å¾„ä¸ºMyProject/Hybrid-Compile.h åˆ™é…ç½®ä¹Ÿåº”æ˜¯è¿™ä¸ªè·¯å¾„ ä¿å­˜åŽåœ¨è¯¥å¤´æ–‡ä»¶ä¸­å¼•ç”¨ç›¸åº”OCç±»å¤´æ–‡ä»¶å³å¯åœ¨Swiftä¸­è°ƒç”¨ å¼•ç”¨æ³¨æ„å¦‚æžœæ˜¯é¡¹ç›®å†…çš„OCæ–‡ä»¶ç›´æŽ¥å¼•ç”¨å³å¯ å¦‚æžœæ˜¯Podå¼•ç”¨çš„åº“ä¸­çš„OCæ–‡ä»¶åˆ™éœ€è¦å¸¦ä¸Šå…¶Podä¸­çš„è·¯å¾„]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Swift</tag>
        <tag>Xcode</tag>
      </tags>
  </entry>
</search>
