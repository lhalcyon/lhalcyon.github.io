<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[IntelliJ+Gradleè‡ªå®šä¹‰waråŒ…åç§°]]></title>
    <url>%2Fidea-gradle_war%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨å¸®æœ‹å‹å¼€å‘å°ç¨‹åºçš„ Java åŽç«¯,é¡¹ç›®é‡‡ç”¨ Gradle æž„å»º,ä½¿ç”¨IntelliJå¼€å‘. å¼€å‘ä¸­ç»å¸¸éœ€è¦å‘åŒ…åˆ°å¤–ç½‘ä¸Š,æ–¹ä¾¿å‰ç«¯è”è°ƒ,è€ŒIntelliJé»˜è®¤æž„å»ºçš„ war åŒ…åç§°ä¸ºé¡¹ç›®å-ç‰ˆæœ¬å·,ä½¿å¾—æ¯æ¬¡ä¸Šä¼ waråŒ…è‡³æœåŠ¡å™¨tomcatæ—¶è¿˜å¾—æ‰‹åŠ¨é‡å‘½å,å‘å¸ƒæ¬¡æ•°å¤šäº†,å°±æ˜¾å¾—å¾ˆéº»çƒ¦.è¿™é‡Œå…ˆæ°´ä¸€ç¯‡,ç®€çŸ­è¯´æ˜Žä¸‹ IntelliJä¸­Gradleæž„å»ºå¦‚ä½•è‡ªå®šä¹‰waråŒ…åç§°. é¦–å…ˆæ‰“å¼€ Project Settings é€‰æ‹© Artifacts å‰ä¸¤ä¸ª Gradle:xxx æ˜¯åˆ›å»ºGradleé¡¹ç›®å¹¶æ·»åŠ tomcatåŽ,è‡ªåŠ¨ç”Ÿæˆçš„.æˆ‘ä»¬è¿™é‡Œç‚¹å‡» + æ–°å¢ž é€‰æ‹© Web Application: Archive -&gt; Empty ä¿®æ”¹waråŒ…åç§°åŠè¾“å‡ºè·¯å¾„ æ·»åŠ waråŒ…å†…å®¹,åŒæ ·é€‰æ‹© Artifact é€‰æ‹© Gradle: xxx (exploded) ä¹‹åŽæ‰“åŒ…åªèƒ½é€‰æ‹© Build -&gt; Build Artifacts ç„¶åŽé€‰æ‹©è‡ªå®šä¹‰çš„build, ç„¶åŽåœ¨è¾“å‡ºç›®å½•ä¸‹å³å¯æ‰¾åˆ°waråŒ…]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>IntelliJ</tag>
        <tag>war</tag>
        <tag>Gradle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoç»‘å®šè‡ªå®šä¹‰HttpsåŸŸå]]></title>
    <url>%2Fhexo_ssl_netlify%2F</url>
    <content type="text"><![CDATA[é€šå¸¸æˆ‘ä»¬å°†Hexoåšå®¢éƒ¨ç½²åˆ°GitHub Pagesä¸Š,ç„¶åŽç»‘å®šè‡ªå®šä¹‰åŸŸå.ä¾‹å¦‚ä½œè€…çš„ GitHub Page lhalcyon.github.ioç»‘å®šåˆ°äº†lhalcyon.comä¸Š.ä½†æ˜¯ GitHub Pages æ— æ³•ç»™è‡ªå®šä¹‰åŸŸåé…ç½®SSL GitHub Pagesé»˜è®¤æ˜¯æ”¯æŒhttpsçš„,å³æˆ‘ä»¬å¯é€šå¸¸https://lhalcyon.github.ioæ¥è®¿é—®åšå®¢,ä½†æ˜¯ç»‘å®šè‡ªå®šä¹‰åŸŸååŽ,åªèƒ½é€šè¿‡http://lhalcyon.comæ­£å¸¸è®¿é—®,å¦‚ç›´æŽ¥è®¿é—®https://lhalcyon.comå°±ä¼šçˆ†çº¢ ç”±äºŽåšå®¢å·²æ”¹é€ å®Œæˆ,å°±åº¦å¨˜äº†å¼ ç¤ºä¾‹å›¾ ä¸ºäº†å®žçŽ°è‡ªå®šä¹‰åŸŸåSSLè®¤è¯,é€šå¸¸çš„åšæ³•æ˜¯åœ¨Cloudflareé…ç½®ä¸€ä¸ªåå‘ä»£ç†åˆ°GitHub Pages,ä½†æ˜¯å…¶è®¿é—®é€Ÿåº¦åŠç¨³å®šæ€§ä¸å¤ªå¥½,å†å°±æ˜¯åšå®¢æ›´æ–°åŽç”Ÿæ•ˆä¹Ÿä¼šæœ‰å»¶è¿Ÿ,äºŽæ˜¯æˆ‘ä»¬å¾—å¯»ç´¢ä¸€ä¸ªè§£å†³åŠžæ³•. ä¸ºäº†æ›´å¥½çš„é˜…è¯»ä½“éªŒ,è¯·ç‚¹å‡»é˜…è¯»åŽŸæ–‡ðŸ˜‰. èµ·åˆæ˜¯è€ƒè™‘å°†Hexoè¿ç§»åˆ°Coding Pagesä¸Š,åŽæ¥å‘çŽ°å…¶å…è´¹æ‰˜ç®¡ä¸‹å¿…é¡»åœ¨é¦–é¡µå¯¹å…¶åšä¸€ä¸ªå¹¿å‘Š,å¦åˆ™è®¿é—®ä¼šå…ˆè·³è½¬åˆ°ä¸€ä¸ªä¸­è½¬å¹¿å‘Šé¡µå†è¿›è¡Œè·³è½¬ ,æƒ³å…å¹¿å‘Šåªèƒ½å‡çº§é»„é‡‘ä¼šå‘˜åŠä»¥ä¸Š,è¿™ç‚¹å¤ªä¸å‹å¥½. é—®é¢˜ä¼ é€é—¨ è·³è½¬é¡µ: or ä¸»åŠ¨æ·»åŠ å¹¿å‘Šé“¾æŽ¥,å®¡æ ¸è¿‡åŽä¼šå…åŽ»è·³è½¬é¡µ æŸåšå®¢é¡µè„šæ·»åŠ çš„å¹¿å‘Š: æ— ç–‘è¿™æ ·å¤§å¤§å½±å“æˆ‘ä»¬çš„åšå®¢ç¾Žè§‚,ä¸èƒ½æŽ¥å—,ä½†åˆä¸æƒ³è¿å›žGitHub Pages,æ€Žä¹ˆåŠž?ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸€äº›å…è´¹åŠå¥½ç”¨çš„é™æ€ç½‘ç«™æ‰˜ç®¡å¹³å° å…è´¹é™æ€ç½‘ç«™æ‰˜ç®¡å¹³å°GitHub Pagesä¼˜ç‚¹ è‡ªå¸¦åŸŸåå¯httpsè®¿é—® å¯é…ç½®è‡ªå®šä¹‰åŸŸå ç¼ºç‚¹ æ— æ³•ç»™è‡ªå®šä¹‰åŸŸåé…ç½®SSL Bitbucket Cloudè·Ÿ GitHub Pages åŠŸèƒ½ä¸€æ ·,ä½†æ˜¯: æ— æ³•è‡ªå®šä¹‰åŸŸå èƒ½ä¸”åªèƒ½é€šè¿‡ https åè®®è®¿é—®ï¼ˆhttp åè®®ä¼šè¢«è·³è½¬åˆ° https åè®®) æ‰€æœ‰é¡¹ç›®çš„é™æ€ç½‘ç«™ä»£ç éƒ½åªèƒ½æ”¾åœ¨ä¸“é—¨çš„ç«™ç‚¹ä»“åº“é‡Œï¼ˆaccountName.bitbucket.io) ,ä¸èƒ½åƒ GitHub é‚£æ ·å¯ä»¥åœ¨æ¯ä¸ªé¡¹ç›®é‡Œç”¨ gh-pages åˆ†æ”¯ä¿å­˜æ–‡ä»¶ aerobaticBitbucket æ——ä¸‹çš„é™æ€ç½‘ç«™æ‰˜ç®¡æœåŠ¡. å¯ä»¥ä½¿ç”¨ CLI ä¸Šä¼ ä»£ç  æ”¯æŒè‡ªåŠ¨æž„å»º (Continuous Deployment) å¯ä»¥è‡ªå®šä¹‰åŸŸåä½†æ˜¯æ”¶è´¹åŠŸèƒ½,è‡ªå®šä¹‰åŸŸåæ”¯æŒ https ä¸”ä¸éœ€è¦æä¾›è¯ä¹¦,å®ƒä¼šå¸®ä½ ç”Ÿæˆä¸€ä¸ª GitLab PagesåŒæ ·å’Œ GitHub Pages çš„åŠŸèƒ½ä¸€æ ·,ä½†æ˜¯: è‡ªå®šä¹‰åŸŸåå¯é…ç½®https,ä¸è¿‡éœ€è¦ä¸Šä¼ è¯ä¹¦ surge.sh åªèƒ½ä½¿ç”¨ CLI ä¸Šä¼ ä»£ç  æ”¯æŒè‡ªå®šä¹‰åŸŸå,ä½†å¼€å¯ SSL æ˜¯æ”¶è´¹åŠŸèƒ½ä¸”éœ€è¦è‡ªè¡Œä¸Šä¼ è¯ä¹¦ æ”¯æŒ200.html â€”â€” é€‚ç”¨äºŽä½¿ç”¨ History API çš„ SPA Firebase Hosting åªèƒ½ä½¿ç”¨ CLI ä¸Šä¼ ä»£ç  æ”¯æŒè‡ªå®šä¹‰åŸŸåå¹¶æ”¯æŒä¸€é”®å¼€å¯ https æ”¯æŒé‡å®šå‘ï¼ˆRedirectsï¼‰å’Œé‡å†™ï¼ˆRewritesï¼‰åŠŸèƒ½ï¼ˆå½“ç½‘ç«™ä½¿ç”¨ History API æ—¶ç‰¹åˆ«æœ‰ç”¨) but æœ‰è¢«å¢™çš„é£Žé™©â€¦â€¦ Netlify (æŽ¨è) å¯ä»¥ä½¿ç”¨ CLI ä¸Šä¼ ä»£ç  æ”¯æŒè‡ªå®šä¹‰åŸŸåä¸”è‡ªå®šä¹‰åŸŸåæ”¯æŒä¸€é”®å¼€å¯ httpsï¼ˆè¯ä¹¦æ¥è‡ª Letâ€™s Encrypeï¼‰ æ”¯æŒå¼ºåˆ¶è®©ç”¨æˆ·é€šè¿‡ https è®¿é—®ç½‘ç«™ï¼ˆå¼€å¯åŽæ­¤åŠŸèƒ½åŽï¼Œhttp çš„è®¿é—®ä¸€å¾‹ä¼š 301 è·³è½¬åˆ° https æ”¯æŒè‡ªåŠ¨æž„å»º æ”¯æŒé‡å®šå‘ï¼ˆRedirectsï¼‰å’Œé‡å†™ï¼ˆRewritesï¼‰åŠŸèƒ½ æ•°æ®é€šè¿‡ HTTP2 åè®®ä¼ è¾“ æä¾› webhooks ä¸Ž API now å¯ä»¥ä½¿ç”¨ CLI ä¸Šä¼ ä»£ç ï¼Œæˆ–è€…é“¾æŽ¥ä¸€ä¸ª Git ä»“åº“ ä¸ä»…æä¾›é™æ€ç½‘ç«™æ‰˜ç®¡ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒæ‰˜ç®¡ Node.js æœåŠ¡ æ”¯æŒè‡ªå®šä¹‰åŸŸåä¸”è‡ªå®šä¹‰åŸŸåæ”¯æŒä¸€é”®å¼€å¯ httpsï¼ˆè¯ä¹¦æ¥è‡ª Letâ€™s Encrypeï¼‰ æ•°æ®é€šè¿‡ HTTP2 åè®®ä¼ è¾“ æä¾› API Coding Pagesä¸Šé¢æˆ‘ä»¬è¯´è¿‡,æ”¶è´¹æœºåˆ¶ç”šä¸å‹å¥½ é‰´äºŽå„å¹³å°ç‰¹ç‚¹,æˆ‘ä»¬é€‰æ‹©Netlify Netlifyéƒ¨ç½²ç½‘ç«™é¦–å…ˆåŽ» Netlify æ³¨å†Œè´¦å·ç™»å½• æŽ¥ç€ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„ New site from Git è¿™é‡Œé€‰æ‹©çš„ GitHub ,åˆ«å¿˜è®°å‹¾é€‰è®¿é—®å…¬å…±ä»“åº“é€‰é¡¹.ä¹‹åŽæŽˆæƒç»™ Netlify æŒ‡å®šRepository,ç„¶åŽ Deploy è®¾ç½®è‡ªå®šä¹‰åŸŸåç‚¹å‡» Domain settings ç„¶åŽç‚¹å‡» Add custom domain. ç„¶åŽåˆ°åŸŸåè§£æžå¤„,ä¿®æ”¹åŸŸåCNAMEè®°å½•,è®°å½•å€¼å°±æ˜¯è®¾ç½®å®ŒåŸŸåé¡µé¢æ˜¾ç¤ºçš„é…ç½®å€¼ æ·»åŠ SSLè¯ä¹¦è®¾ç½®å®ŒæˆåŸŸåç»‘å®šåŽ,è®¾ç½®ä¸­å¿ƒé€‰é¡¹æœ‰æ‰€å˜åŒ–,å¢žåŠ äº†ä¸€ä¸ª Enable HTTPSçš„é€‰é¡¹ , ç‚¹å‡» ç‚¹å‡» Letâ€™s Encrypt Certificate, ç³»ç»Ÿä¼šè‡ªåŠ¨ç­¾å‘è¯ä¹¦ç»™ç«™ç‚¹,è‹¥åŸŸåè§£æžæ²¡é—®é¢˜å°±èƒ½ç­¾å‘æˆåŠŸ è‹¥æƒ³ä¸€ç›´ä½¿ç”¨Httpsè®¿é—®çš„è¯,å°±å‹¾é€‰ Force TLS connections å¼ºåˆ¶æ‰€æœ‰è®¿é—®è½¬æ¢ä¸ºHttps è‡³æ­¤,é…ç½®å…¨éƒ¨å®Œæˆ åŽç»­Netlify è¿˜æœ‰å¾ˆå¤šæŠ€å·§,æ¯”å¦‚å¯ä»¥è®¾ç½®å˜é‡åŠå‘½ä»¤.å…è´¹ç”¨æˆ·å¯ä»¥ä¸ºç½‘ç«™è®¾ç½®å˜é‡ã€webhookç­‰.ä»˜è´¹ç”¨æˆ·åˆ™å¯ä»¥ä¸ºç½‘ç«™è®¾ç½®æ›´åŠ è¯¦ç»†çš„SEOä¼˜åŒ–.å„ä½å¯ä»¥è‡ªè¡ŒåŽ»æŒ–æŽ˜~ ðŸ§ å‚è€ƒ: https://github.com/lmk123/blog/issues/55]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>SSL</tag>
        <tag>GitHub Pages</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMVC+WebSocket+Gradleå®žçŽ°æ¶ˆæ¯å®žæ—¶æŽ¨é€]]></title>
    <url>%2Fspringmvc-websocket_im%2F</url>
    <content type="text"><![CDATA[WebSocketæ˜¯HTML5å¼€å§‹æä¾›çš„ä¸€ç§æµè§ˆå™¨ä¸ŽæœåŠ¡å™¨é—´è¿›è¡Œå…¨åŒå·¥é€šè®¯çš„ç½‘ç»œæŠ€æœ¯ã€‚ WebSocketé€šä¿¡åè®®äºŽ2011å¹´è¢«IETFå®šä¸ºæ ‡å‡†RFC 6455ï¼ŒWebSocketAPIè¢«W3Cå®šä¸ºæ ‡å‡†ã€‚ åœ¨WebSocket APIä¸­ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦è¦åšä¸€ä¸ªæ¡æ‰‹çš„åŠ¨ä½œï¼Œç„¶åŽï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´å°±å½¢æˆäº†ä¸€æ¡å¿«é€Ÿé€šé“ã€‚ä¸¤è€…ä¹‹é—´å°±ç›´æŽ¥å¯ä»¥æ•°æ®äº’ç›¸ä¼ é€ã€‚ ä»¥ä¸Šæ‘˜è‡ªWikipedia. æœ¬æ–‡å°†è¯´æ˜Žåœ¨Intellij IDEAä¸‹ä½¿ç”¨Gradleæž„å»ºSpringMVC+WebSocketå®žçŽ°æ¶ˆæ¯æŽ¨é€.ä¸ºäº†æ›´å¥½çš„é˜…è¯»ä½“éªŒ,è¯·ç‚¹å‡»é˜…è¯»åŽŸæ–‡ðŸ˜‰. åˆ›å»ºé¡¹ç›®åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­æœ‰è¯¦ç»†çš„è¯´æ˜Ž,æ­¤ç¯‡ä¸åšèµ˜è¿°.å¯å‚è€ƒIDEA+Gradleåˆ›å»ºMyBatis+SpringMVCé¡¹ç›® å¯¼å…¥ä¾èµ–åœ¨build.gradleä¸­å¯¼å…¥denpendies 12345678910111213// ------------------------ Spring SpringMVC start -------------------------compile group: 'org.springframework', name: 'spring-webmvc', version: '4.2.4.RELEASE'compile group: 'org.springframework', name: 'spring-context-support', version: '4.2.4.RELEASE'// ------------------------ Spring SpringMVC end -------------------------// ------------------------ WebSocket start -------------------------compile group: 'org.springframework', name: 'spring-websocket', version: '4.2.4.RELEASE'compile group: 'org.springframework', name: 'spring-messaging', version: '4.2.4.RELEASE'compile group: 'javax.servlet', name: 'javax.servlet-api', version: '3.1.0'// ------------------------ WebSocket end -------------------------compile group: 'log4j', name: 'log4j', version: '1.2.17'compile group: 'com.google.code.gson', name: 'gson', version: '2.8.2' æ­¤å¤„éœ€è¦æ³¨æ„çš„æ˜¯Springä»Ž4.0+ç‰ˆæœ¬å¼€å§‹æ”¯æŒWebSocket,è€Œservlet-apiéœ€è¦ä¸º3.0+ç‰ˆæœ¬ é…ç½®æ–‡ä»¶web.xml 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0"&gt; &lt;!-- åˆå§‹åŒ–spring å®¹å™¨ --&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:config/spring/applicationContext-*.xml&lt;/param-value&gt; &lt;/context-param&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt; &lt;!-- é…ç½®å‰ç«¯æŽ§åˆ¶å™¨ --&gt; &lt;servlet&gt; &lt;servlet-name&gt;index-dispather&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath*:config/spring/spring-mvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;async-supported&gt;true&lt;/async-supported&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;index-dispather&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;!-- è§£å†³postä¹±ç é—®é¢˜ --&gt; &lt;filter&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;utf-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt; &lt;/web-app&gt; æ­¤å¤„éœ€è¦ç»™servletåŠfilteræ·»åŠ å¼‚æ­¥&lt;async-supported&gt;true&lt;/async-supported&gt;. spring-mvc.xml 123456789101112131415161718192021222324252627&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xmlns:mvc="http://www.springframework.org/schema/mvc" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd"&gt; &lt;!-- è‡ªåŠ¨æ‰«ææŽ§åˆ¶å™¨,webSocket --&gt; &lt;context:component-scan base-package="com.lhalcyon.king.controller,com.lhalcyon.king.socket"/&gt; &lt;!-- è§†å›¾æ¸²æŸ“ --&gt; &lt;bean id="internalResourceViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt; &lt;property name="prefix" value="/WEB-INF/views/"/&gt; &lt;property name="suffix" value=".jsp"/&gt; &lt;/bean&gt; &lt;!-- æŽ§åˆ¶å™¨æ˜ å°„å™¨å’ŒæŽ§åˆ¶å™¨é€‚é…å™¨ --&gt; &lt;mvc:annotation-driven&gt; &lt;/mvc:annotation-driven&gt; &lt;!-- é™æ€èµ„æºæ˜ å°„å™¨ --&gt; &lt;mvc:resources mapping="/statics/**" location="/WEB-INF/statics/" /&gt;&lt;/beans&gt; æ­¤å¤„éœ€é…ç½®æ‰«æcontrollerå’Œwebsocketæ‰€åœ¨åŒ… è¿˜æœ‰ä¸€ä¸ªapplicationContext-websocket.xmlé…ç½®æ–‡ä»¶æˆ‘ä»¬åœ¨ä»£ç å®žçŽ°ä¸­è¯´æ˜Ž ä»£ç å®žçŽ°æ¡æ‰‹æ‹¦æˆªå™¨HandshakeInterceptor æ‹¦æˆªå™¨è¯´æ˜Ž An interceptor to copy information from the HTTP session to the â€œhandshakeattributesâ€ map to made available via WebSocketSession.getAttributes()Copies a subset or all HTTP session attributes and/or the HTTP session id æ‹¦æˆªå™¨ä¸»è¦ç”¨äºŽç”¨æˆ·ç™»å½•æ ‡è¯†çš„è®°å½•,ä¾¿äºŽåŽé¢èŽ·å–æŒ‡å®šç”¨æˆ·çš„ä¼šè¯æ ‡è¯†å¹¶å‘æŒ‡å®šç”¨æˆ·å‘é€æ¶ˆæ¯, è¿™é‡Œæˆ‘ä»¬ç»§æ‰¿HttpSessionHandshakeInterceptor 123456789101112131415161718192021222324public class HandshakeInterceptor extends HttpSessionHandshakeInterceptor &#123; private Logger logger = Logger.getLogger(HandshakeInterceptor.class); // æ¡æ‰‹å‰ @Override public boolean beforeHandshake(ServerHttpRequest request, ServerHttpResponse response, WebSocketHandler wsHandler, Map&lt;String, Object&gt; attributes) throws Exception &#123; logger.info("++ HandshakeInterceptor: beforeHandshake ++"+attributes); return super.beforeHandshake(request, response, wsHandler, attributes); &#125; // æ¡æ‰‹åŽ @Override public void afterHandshake(ServerHttpRequest request, ServerHttpResponse response, WebSocketHandler wsHandler, Exception ex) &#123; logger.info("++ HandshakeInterceptor: afterHandshake ++"); super.afterHandshake(request, response, wsHandler, ex); &#125;&#125; beforeHandshake(..) Invoked before the handshake is processed. afterHandshake(..) Invoked after the handshake is done. The response status and headers indicate the results of the handshake, i.e. whether it was successful or not. ä¸¤ä¸ªæ–¹æ³•è°ƒç”¨æ—¶æœºå‡ä¸ºå­—é¢æ‰€è¿°,æ¡æ‰‹å‰åŽåˆ†åˆ«è°ƒç”¨.ä¸»è¦æ˜¯åœ¨æ¡æ‰‹å‰åŽåŽ»åšä¸€äº›äº‹,æ¯”å¦‚å°†éœ€è¦çš„æ•°æ®è®¾ç½®åˆ°attributesé‡Œ,ä¹‹åŽåœ¨WebSocketHandlerçš„sessionä¸­èŽ·å–è¿™äº›æ•°æ®. å¤„ç†ç±»WebSocketHandler 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556public class MyWebSocketHandler implements WebSocketHandler &#123; private static final Logger log = Logger.getLogger(MyWebSocketHandler.class); // ä¿å­˜æ‰€æœ‰çš„ç”¨æˆ·session private static final ArrayList&lt;WebSocketSession&gt; users = new ArrayList&lt;WebSocketSession&gt;(); @Override public void afterConnectionEstablished(WebSocketSession session) throws Exception &#123; log.info("connect websocket success......."); users.add(session); &#125; @Override public void handleMessage(WebSocketSession session, WebSocketMessage&lt;?&gt; message) throws Exception &#123; Gson gson = new Gson(); // å°†æ¶ˆæ¯JSONæ ¼å¼é€šè¿‡Gsonè½¬æ¢æˆMap // message.getPayload().toString() èŽ·å–æ¶ˆæ¯å…·ä½“å†…å®¹ Map&lt;String, Object&gt; msg = gson.fromJson(message.getPayload().toString(), new TypeToken&lt;Map&lt;String, Object&gt;&gt;() &#123;&#125;.getType()); log.info("handleMessage......."+message.getPayload()+"..........."+msg); String content = message.getPayload().toString(); // å¤„ç†æ¶ˆæ¯ msgContentæ¶ˆæ¯å†…å®¹ TextMessage textMessage = new TextMessage(content, true); // è°ƒç”¨æ–¹æ³•ï¼ˆå‘é€æ¶ˆæ¯ç»™æ‰€æœ‰äººï¼‰ sendMsgToAllUsers(textMessage); &#125; @Override public void handleTransportError(WebSocketSession session, Throwable exception) throws Exception &#123; log.warn("handleTransportError"); users.remove(session); &#125; @Override public void afterConnectionClosed(WebSocketSession session, CloseStatus closeStatus) throws Exception &#123; log.info("connect websocket closed......."); users.remove(session); &#125; // ç»™æ‰€æœ‰ç”¨æˆ·å‘é€ ä¿¡æ¯ public void sendMsgToAllUsers(WebSocketMessage&lt;?&gt; message) throws Exception&#123; for (WebSocketSession user : users) &#123; user.sendMessage(message); &#125; &#125; @Override public boolean supportsPartialMessages() &#123; return false; &#125;&#125; ä»¥ä¸‹å¯¹ä¸»è¦æ–¹æ³•è¿›è¡Œè¯´æ˜Ž: afterConnectionEstablished(..) è¿žæŽ¥å»ºç«‹åŽè°ƒç”¨,å¸¸ç”¨äºŽè®°å½•ç”¨æˆ·çš„è¿žæŽ¥æ ‡è¯†,ä¾¿äºŽåŽé¢ä¿¡æ¯å‘é€. handleTextMessage(..) å¯¹æ¶ˆæ¯è¿›è¡Œå¤„ç†. handleTransportError(..) è¿žæŽ¥å¼‚å¸¸å¤„ç†.éœ€è¦å…³é—­å‡ºé”™ä¼šè¯è¿žæŽ¥ afterConnectionClosed(..) è¿žæŽ¥å…³é—­å¤„ç† æ­¤å¤„æˆ‘ä»¬å¯¹æ¶ˆæ¯çš„å¤„ç†å¾ˆç®€å•,å³åœ¨æŽ¥å—æ¶ˆæ¯åŽå‘é€ç»™æ‰€æœ‰è¿žæŽ¥çš„ç”¨æˆ·,ç±»ä¼¼ä¸€ä¸ªåŒ¿åç¾¤èŠå®¤. æ³¨å†Œå®Œæˆäº†WebSocketå¤„ç†ç±»,è¿˜éœ€è¦å¯¹å…¶è¿›è¡Œæ³¨å†Œç”Ÿæ•ˆ.è¿™é‡Œæœ‰ä¸¤ç§æ–¹å¼,æ‹©å…¶ä¸€å³å¯. åˆ›å»ºé…ç½®ç±»,å¹¶é€šè¿‡æ³¨è§£æ³¨å†Œ123456789101112131415161718192021@Configuration@EnableWebMvc@EnableWebSocketpublic class MyWebSocketConfig extends WebMvcConfigurerAdapter implements WebSocketConfigurer &#123; @Override public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) &#123; //å‰å° å¯ä»¥ä½¿ç”¨websocketçŽ¯å¢ƒ registry.addHandler(myWebSocketHandler(),"/websocket").addInterceptors(new HandshakeInterceptor()).setAllowedOrigins("*"); //å‰å° ä¸å¯ä»¥ä½¿ç”¨websocketçŽ¯å¢ƒï¼Œåˆ™ä½¿ç”¨sockjsè¿›è¡Œæ¨¡æ‹Ÿè¿žæŽ¥ registry.addHandler(myWebSocketHandler(), "/sockjs/websocket").addInterceptors(new HandshakeInterceptor()) .withSockJS(); &#125; // websocket å¤„ç†ç±» @Bean public WebSocketHandler myWebSocketHandler()&#123; return new MyWebSocketHandler(); &#125;&#125; åŒæ—¶è¿˜éœ€è¦é…ç½®ä¸Šæ–‡æåˆ°è¿‡çš„Springæ‰«æé…ç½®ç±». 12&lt;!-- è‡ªåŠ¨æ‰«ææŽ§åˆ¶å™¨,webSocket --&gt;&lt;context:component-scan base-package="com.lhalcyon.king.controller,com.lhalcyon.king.socket"/&gt; é€šè¿‡xmlé…ç½®æ³¨å†ŒapplicationContext-websocket.xml 1234567891011121314151617181920212223242526272829303132333435&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:websocket="http://www.springframework.org/schema/websocket" xsi:schemaLocation=" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd http://www.springframework.org/schema/websocket http://www.springframework.org/schema/websocket/spring-websocket-4.0.xsd"&gt; &lt;!-- websocketå¤„ç†ç±» --&gt; &lt;bean id="myHandler" class="com.lhalcyon.king.socket.MyWebSocketHandler"/&gt; &lt;!-- æ¡æ‰‹æŽ¥å£/æ‹¦æˆªå™¨ --&gt; &lt;bean id="myInterceptor" class="com.lhalcyon.king.socket.HandshakeInterceptor"/&gt; &lt;websocket:handlers&gt; &lt;websocket:mapping path="/websocket" handler="myHandler"/&gt; &lt;websocket:handshake-interceptors&gt; &lt;ref bean="myInterceptor"/&gt; &lt;/websocket:handshake-interceptors&gt; &lt;/websocket:handlers&gt; &lt;!-- æ³¨å†Œ sockJS --&gt; &lt;websocket:handlers&gt; &lt;websocket:mapping path="/websocket" handler="myHandler"/&gt; &lt;websocket:handshake-interceptors&gt; &lt;ref bean="myInterceptor"/&gt; &lt;/websocket:handshake-interceptors&gt; &lt;websocket:sockjs /&gt; &lt;/websocket:handlers&gt;&lt;/beans&gt; ä»¥ä¸ŠæœåŠ¡ç«¯ä»£ç å®žçŽ°åŸºæœ¬å®Œæˆ,æŽ¥ä¸‹æ¥å¯¹å®¢æˆ·ç«¯æµ‹è¯•é¡µé¢åšä¸€ä¸ªç®€å•çš„å®žçŽ°. å®¢æˆ·ç«¯é¡µé¢index.jsp 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;!DOCTYPE HTML&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;é¦–é¡µ&lt;/title&gt; &lt;meta charset="utf-8"&gt; &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt; &lt;meta name="renderer" content="webkit"&gt; &lt;!-- å¼•å…¥ JQuery --&gt; &lt;script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"&gt;&lt;/script&gt; &lt;!-- å¼•å…¥ sockJS --&gt; &lt;script type="text/javascript" src="https://cdn.bootcss.com/sockjs-client/1.1.4/sockjs.min.js" &gt;&lt;/script&gt; &lt;script type="text/javascript"&gt; $(function() &#123; var websocket; // é¦–å…ˆåˆ¤æ–­æ˜¯å¦ æ”¯æŒ WebSocket var url = 'ws://' + window.location.host + '/word-king/websocket'; if('WebSocket' in window) &#123; websocket = new WebSocket(url); &#125; else if('MozWebSocket' in window) &#123; websocket = new MozWebSocket(url); &#125; else &#123; url = "http://"+ window.location.host +"/word-king/sockjs/websocket"; websocket = new SockJS(url); &#125; // æ‰“å¼€æ—¶ websocket.onopen = function(evnt) &#123; console.log(" websocket.onopen "); &#125;; // å¤„ç†æ¶ˆæ¯æ—¶ websocket.onmessage = function(evnt) &#123; $("#msg").append("&lt;p&gt;(&lt;font color='red'&gt;" + evnt.data + "&lt;/font&gt;)&lt;/p&gt;"); console.log(" websocket.onmessage "); &#125;; websocket.onerror = function(evnt) &#123; alert("onerror"); console.log(" websocket.onerror "); &#125;; websocket.onclose = function(evnt) &#123; console.log(" websocket.onclose "); alert("onclose"); &#125;; // ç‚¹å‡»äº†å‘é€æ¶ˆæ¯æŒ‰é’®çš„å“åº”äº‹ä»¶ $("#TXBTN").click(function()&#123; // èŽ·å–æ¶ˆæ¯å†…å®¹ var text = $("#tx").val(); // åˆ¤æ–­ if(text == null || text == "")&#123; alert(" content can not empty!!"); return false; &#125; var msg = &#123; msgContent: text, postsId: 1 &#125;; // å‘é€æ¶ˆæ¯ websocket.send(JSON.stringify(msg)); &#125;); &#125;); &lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;!-- æœ€å¤–è¾¹æ¡† --&gt;&lt;div style="margin: 20px auto; border: 1px solid blue; width: 300px; height: 500px;"&gt; &lt;!-- æ¶ˆæ¯å±•ç¤ºæ¡† --&gt; &lt;div id="msg" style="width: 100%; height: 70%; border: 1px solid yellow;overflow: auto;"&gt;&lt;/div&gt; &lt;!-- æ¶ˆæ¯ç¼–è¾‘æ¡† --&gt; &lt;textarea id="tx" style="width: 100%; height: 20%;"&gt;&lt;/textarea&gt; &lt;!-- æ¶ˆæ¯å‘é€æŒ‰é’® --&gt; &lt;button id="TXBTN" style="width: 100%; height: 8%;"&gt;å‘é€æ•°æ®&lt;/button&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; éœ€è¦æ³¨æ„çš„æ˜¯æ­¤å¤„å¼•å…¥JQueryæ—¶,å¦‚æžœæ˜¯æœ¬åœ°çš„æ–‡ä»¶,å¯èƒ½å­˜åœ¨æ— æ•ˆçš„æƒ…å†µ,éœ€è¦åŽ»è®¾ç½®é™æ€èµ„æºæ˜ å°„è·¯å¾„,å¯è‡ªè¡ŒðŸ”è§£å†³. æœ¬æ–‡é‡‡ç”¨çš„æ˜¯å¼•å…¥åœ¨çº¿åœ°å€ 12&lt;!-- å¼•å…¥ JQuery --&gt; &lt;script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.5/jquery.min.js"&gt;&lt;/script&gt; åœ°å€å†™å…¥åŽéœ€Downloadä¸‹æ¥ ä»£ç ä¸é«˜äº®è­¦å‘ŠåŽå³èƒ½ç”Ÿæ•ˆ. æœ€åŽæˆ‘ä»¬æ¥çœ‹çœ‹æ•ˆæžœ å‚è€ƒ: http://blog.csdn.net/mybook201314/article/details/70173674]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringMVC</tag>
        <tag>WebSocket</tag>
        <tag>IM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®žçŽ°apkä¸Šä¼ è’²å…¬è‹±åŽè‡ªåŠ¨å‘é€é’‰é’‰é€šçŸ¥]]></title>
    <url>%2Fwebhook_dingding-pgyer%2F</url>
    <content type="text"><![CDATA[Webhookæ˜¯ä¸€ä¸ªAPIæ¦‚å¿µï¼Œå¹¶ä¸”å˜å¾—è¶Šæ¥è¶Šæµè¡Œã€‚æˆ‘ä»¬èƒ½ç”¨äº‹ä»¶æè¿°çš„äº‹ç‰©è¶Šå¤šï¼Œwebhookçš„ä½œç”¨èŒƒå›´ä¹Ÿå°±è¶Šå¤§ã€‚Webhookä½œä¸ºä¸€ä¸ªè½»é‡çš„äº‹ä»¶å¤„ç†åº”ç”¨ï¼Œæ­£å˜å¾—è¶Šæ¥è¶Šæœ‰ç”¨ã€‚ å‡†ç¡®çš„è¯´webhookæ˜¯ä¸€ç§webå›žè°ƒæˆ–è€…httpçš„push APIï¼Œæ˜¯å‘APPæˆ–è€…å…¶ä»–åº”ç”¨æä¾›å®žæ—¶ä¿¡æ¯çš„ä¸€ç§æ–¹å¼ã€‚Webhookåœ¨æ•°æ®äº§ç”Ÿæ—¶ç«‹å³å‘é€æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä½ èƒ½å®žæ—¶æ”¶åˆ°æ•°æ®ã€‚è¿™ä¸€ç§ä¸åŒäºŽå…¸åž‹çš„APIï¼Œéœ€è¦ç”¨äº†å®žæ—¶æ€§éœ€è¦è¶³å¤Ÿå¿«çš„è½®è¯¢ã€‚è¿™æ— è®ºæ˜¯å¯¹ç”Ÿäº§è¿˜æ˜¯å¯¹æ¶ˆè´¹è€…éƒ½æ˜¯é«˜æ•ˆçš„ï¼Œå”¯ä¸€çš„ç¼ºç‚¹æ˜¯åˆå§‹å»ºç«‹å›°éš¾ã€‚ Webhookæœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºåå‘APIï¼Œå› ä¸ºä»–æä¾›äº†APIè§„åˆ™ï¼Œä½ éœ€è¦è®¾è®¡è¦ä½¿ç”¨çš„APIã€‚Webhookå°†å‘ä½ çš„åº”ç”¨å‘èµ·httpè¯·æ±‚ï¼Œå…¸åž‹çš„æ˜¯postè¯·æ±‚ï¼Œåº”ç”¨ç¨‹åºç”±è¯·æ±‚é©±åŠ¨ã€‚ åœ¨Androidå¼€å‘ä¸­ä¼šç»å¸¸æäº¤apkç»™æµ‹è¯•äººå‘˜è¿›è¡Œæµ‹è¯•,é€šå¸¸çš„åšæ³•æ˜¯å°†æž„å»ºå®Œæˆçš„åŒ…ä¸Šä¼ è‡³è’²å…¬è‹±,æµ‹è¯•äººå‘˜ç›´æŽ¥æ‰«ç ä¸‹è½½å¹¶å®‰è£…apkåŒ…ä»Žè€Œè¿›è¡Œæµ‹è¯•.ä¸€èˆ¬æˆ‘ä»¬ä¼šå°†æž„å»ºåŠå‘å¸ƒè¿‡ç¨‹è‡ªåŠ¨åŒ–,å¯å‚è€ƒ: Linux+Jenkins+Gradleæž„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(ä¸€) Linux+Jenkins+Gradleæž„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(äºŒ) æ–‡ç« ä¸­å®žçŽ°äº†apkä¸Šä¼ è’²å…¬è‹±åŽé‚®ä»¶é€šçŸ¥,å¯æ˜¯å®žé™…ä¸­,å¤§å®¶å¯¹é‚®ä»¶çš„å…³æ³¨è¿œè¿œæ²¡æœ‰å¯¹IMæ¶ˆæ¯çš„å…³æ³¨åº¦é«˜,æ‰€ä»¥æŽ¥ä¸‹æ¥æœ¬æ–‡å°†è¯´æ˜Ž,å®žçŽ°ä¸Šä¼ apkåŽè‡ªåŠ¨å‘é€é’‰é’‰æ¶ˆæ¯,å°†æ›´æ–°å†…å®¹,apkç‰ˆæœ¬å·ç­‰ä¿¡æ¯é€šçŸ¥åˆ°æµ‹è¯•äººå‘˜ çŽ¯å¢ƒå‡†å¤‡é¦–å…ˆçŽ¯å¢ƒæ­å»ºæ˜¯IntelliJ+SpringMVC+Gradleæž„å»ºçš„,å¦‚æœ‰ç–‘é—®çš„åŒå­¦å¯å‚è€ƒIDEA+Gradleåˆ›å»ºMyBatis+SpringMVCé¡¹ç›®,é¡¹ç›®ä¸­ä¸»è¦æ˜¯å¯¹æŽ¥å£æ•°æ®çš„è°ƒæ•´åŠè½¬å‘,å®žé™…ä¸Šæœªç”¨åˆ°MyBatis,å¯è‡ªè¡Œè¿›è¡ŒåŽ»é™¤ðŸ™„. æ¨¡åž‹å»ºç«‹å¯¹ç…§è’²å…¬è‹±docã€é’‰é’‰docåˆ†åˆ«å»ºç«‹Java Bean. PgyerMessage 123456789101112131415&#123; "action": "åº”ç”¨æ›´æ–°", "title": "OooPlay", "link": "https://www.pgyer.com/oooplay_test", "message": "æ‚¨çš„åº”ç”¨OooPlayæœ‰äº†æ–°çš„ç‰ˆæœ¬(2.4)æ›´æ–°ã€‚", "type": "updateVersion", "os_version": "2.4", "build_version": "139", "created": "2015-10-09 11:25:16", "updated": "2015-10-09 11:25:16", "timestamp": 1444361118, "appsize": "2238036", "device_type": 'iOS', "notes": "ä¿®å¤äº†ä¸€äº›å°å¼±æ™ºçš„å°bug"&#125; 1234567891011121314151617181920212223242526272829303132333435public class PgyerMessage &#123; public String action; public String title; public String link; public String message; public String type; public String os_version; public String build_version; public String created; public String updated; public int timestamp; public String appsize; public String device_type; public String notes; @Override public String toString() &#123; return "PgyerMessage&#123;" + "action='" + action + '\'' + ", title='" + title + '\'' + ", link='" + link + '\'' + ", message='" + message + '\'' + ", type='" + type + '\'' + ", os_version='" + os_version + '\'' + ", build_version='" + build_version + '\'' + ", created='" + created + '\'' + ", updated='" + updated + '\'' + ", timestamp=" + timestamp + ", appsize='" + appsize + '\'' + ", device_type='" + device_type + '\'' + ", notes='" + notes + '\'' + '&#125;'; &#125;&#125; æ­¤å¤„æœ‰ä¸ªå°æŠ€å·§,IDEA IntelliJæœ‰ä¸ªå¥½ç”¨çš„æ’ä»¶GsonFormatå¯ä¸€é”®å°†Jsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºJava Model é’‰é’‰æ¶ˆæ¯åˆ™åˆ†ä¸ºå‡ ç§ç±»åž‹,å…·ä½“ä¸¾ä¾‹å¯å‚è€ƒé’‰é’‰doc 123456789public static final String TYPE_LINK = "link";public static final String TYPE_MARKDOWN = "markdown";public static final String TYPE_TEXT = "text";public static final String TYPE_ACTIONCARD = "actionCard";public static final String TYPE_FEEDCARD = "feedCard"; æ­¤å¤„æˆ‘ä»¬é€‰æ‹©markdownç±»åž‹.ä¸ºäº†ä¾¿äºŽæ‹“å±•,æ­¤å¤„å°†æ¶ˆæ¯æŠ½å–äº†ä¸ªåŸºç±»BaseDingMessage. 123456789101112131415161718192021public class BaseDingMessage &#123; public static final String TYPE_LINK = "link"; public static final String TYPE_MARKDOWN = "markdown"; public static final String TYPE_TEXT = "text"; public static final String TYPE_ACTIONCARD = "actionCard"; public static final String TYPE_FEEDCARD = "feedCard"; public String msgtype; public AtBean at; public static class AtBean &#123; public boolean isAtAll; public List&lt;String&gt; atMobiles; &#125;&#125; 12345678910public class MarkdownMessage extends BaseDingMessage &#123; public MarkdownBean markdown; public static class MarkdownBean &#123; public String title; public String text; &#125;&#125; ä»£ç å®žçŽ°é¦–å…ˆåœ¨build.gradleä¸­å¯¼å…¥ä¾èµ– 12compile group: 'com.alibaba', name: 'fastjson', version: '1.2.45'compile group: 'com.squareup.okhttp3', name: 'okhttp', version: '3.9.0' fastjsonæ˜¯ç”¨åŠ›å•Šè½¬åŒ–json,okhttpç”¨æ¥ç½‘ç»œè¯·æ±‚ spring-mvc.xmlåŠ å…¥jsoné…ç½® 12345678910111213141516171819202122232425262728293031323334353637&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xmlns:mvc="http://www.springframework.org/schema/mvc" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd"&gt; &lt;!-- è‡ªåŠ¨æ‰«ææŽ§åˆ¶å™¨ --&gt; &lt;context:component-scan base-package="com.lhalcyon.webhook.controller"/&gt; &lt;!-- è§†å›¾æ¸²æŸ“ --&gt; &lt;bean id="internalResourceViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt; &lt;property name="prefix" value="/WEB-INF/views/"/&gt; &lt;property name="suffix" value=".jsp"/&gt; &lt;/bean&gt; &lt;!-- æŽ§åˆ¶å™¨æ˜ å°„å™¨å’ŒæŽ§åˆ¶å™¨é€‚é…å™¨ --&gt; &lt;mvc:annotation-driven&gt; &lt;mvc:message-converters register-defaults="true"&gt; &lt;bean class="com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter"&gt; &lt;property name="supportedMediaTypes"&gt; &lt;list&gt; &lt;value&gt;text/html;charset=UTF-8&lt;/value&gt; &lt;value&gt;application/json&lt;/value&gt; &lt;value&gt;application/xml;charset=UTF-8&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;/mvc:message-converters&gt; &lt;/mvc:annotation-driven&gt; &lt;!-- é™æ€èµ„æºæ˜ å°„å™¨ --&gt; &lt;mvc:resources mapping="/statics/**" location="/WEB-INF/statics/" /&gt;&lt;/beans&gt; æ¶ˆæ¯å‘é€æœåŠ¡DingServiceImpl.java 123456789101112131415161718192021Servicepublic class DingServiceImpl implements DingService &#123; private static final Logger logger = Logger.getLogger(DingServiceImpl.class); @Override public void send(BaseDingMessage message,String url) &#123; MediaType jsonType = MediaType.parse("application/json; charset=utf-8"); okhttp3.RequestBody body = okhttp3.RequestBody.create(jsonType, JSON.toJSONString(message)); final Request request = new Request.Builder() .url(url) .post(body) .build(); OkHttpClient client = OkhttpProvider.get(); try &#123; client.newCall(request).execute(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; è’²å…¬è‹±è¯·æ±‚æŽ§åˆ¶å™¨PgyerController.java 123456789101112131415161718@RestController@RequestMapping("/pgyer")public class PgyerController &#123; @Autowired DingService dingService; private static final Logger logger = Logger.getLogger(PgyerController.class); @ResponseBody @RequestMapping(value = "/update",method = RequestMethod.POST) public BaseDingMessage apkUpdate(@RequestBody PgyerMessage pgyerMessage)&#123; BaseDingMessage dingMessage = WebhookConverter.pgyer2Ding(pgyerMessage); dingService.send(dingMessage, Urls.DING_TEST); logger.info(dingMessage); return dingMessage; &#125;&#125; å…¶ä¸­Urls.DING_TESTä¸ºé’‰é’‰æœºå™¨äººçš„ä¼šè¯tokenåœ°å€,åŽé¢ä¼šè¯´æ˜Žå¦‚ä½•åˆ›å»º/èŽ·å– æ¶ˆæ¯è½¬æ¢å™¨WebhookConverter.java 123456789101112131415161718192021222324public class WebhookConverter &#123; private static final Logger logger = Logger.getLogger(WebhookConverter.class); public static MarkdownMessage pgyer2Ding(PgyerMessage pgyerMessage)&#123; MarkdownMessage message = new MarkdownMessage(); message.msgtype = BaseDingMessage.TYPE_MARKDOWN; message.markdown = new MarkdownMessage.MarkdownBean(); message.markdown.title = pgyerMessage.device_type + "è’²å…¬è‹±æ›´æ–°"; StringBuilder builder = new StringBuilder(); builder.append("#### ").append(pgyerMessage.device_type).append("æµ‹è¯•åŒ…å·²æ›´æ–°! \n\n") .append("###### version: ").append(pgyerMessage.os_version).append(" | build ").append(pgyerMessage.build_version).append("\n\n") .append("æ›´æ–°å†…å®¹:\n").append("&gt; ").append(pgyerMessage.notes).append("\n\n") .append("![qr_code_test](å›¾ç‰‡åœ°å€)\n\n") .append("[ä¸‹è½½åœ°å€](https://www.pgyer.com/ä½ çš„apkåœ°å€) å¯†ç :ä½ çš„å¯†ç \n").append(" @18810100000 @18810100001 @18818100002 "); message.markdown.text = builder.toString(); message.at = new BaseDingMessage.AtBean(); message.at.isAtAll = false; message.at.atMobiles = Arrays.asList("18818100000","18818100001","18818100002"); return message; &#125;&#125; ä»¥ä¸Šéœ€è‡ªè¡Œä¿®æ”¹å†…å®¹. ç„¶åŽåˆ›å»ºé’‰é’‰æœºå™¨äºº.åˆ›å»ºå››è¿ž 1 2 3 4 ç‚¹æ­¤å¤åˆ¶é’‰é’‰æœºå™¨äººä¼šè¯token,å»ºç«‹Urls.java. 1234567public interface Urls &#123; /** * ææµ‹ç¾¤æœºå™¨äººtoken */ String DING_TEST = "é’‰é’‰token";&#125; æ­¤å¤„çš„Ding_Testå³ä¸ºä¸Šé¢å¤åˆ¶çš„åœ°å€ è‡³æ­¤,ä»£ç ä¸»è¦å®žçŽ°ç±»å·²ç»å®Œæˆ,æŽ¥ä¸‹æ¥éœ€è¦åŽ»é…ç½®è’²å…¬è‹±webhook é…ç½®webhookæ‰“å¼€è’²å…¬è‹±åº”ç”¨è®¾ç½® åˆ›å»ºwebhook,å†™å…¥PgyerControllerçš„æ›´æ–°è¯·æ±‚åœ°å€,å¦‚æžœé…ç½®ä¸Žæœ¬æ–‡çš„ç›¸åŒ,åœ°å€åˆ™ä¸º 1http://ä½ çš„åœ°å€:ç«¯å£/webhook-1.0-SNAPSHOT/pgyer/update å…¶ä¸­webhook-1.0-SNAPSHOTä¸ºwaråŒ…åœ¨tomcatè§£åŽ‹åŽçš„åç§° done! ä¹‹åŽåªè¦ä¸Šä¼ æˆåŠŸåŽ,å³æœ‰é’‰é’‰æ¶ˆæ¯é€šçŸ¥å¹¶@æµ‹è¯•äººå‘˜äº†! è®©æˆ‘ä»¬å†çœ‹ä¸‹æ‰“åŒ…åŽçš„æ¶ˆæ¯é€šçŸ¥! ç±»ä¼¼çš„,ä»£ç push,mergeä¹Ÿå¯ä»¥åšæˆwebhookæ¶ˆæ¯. Githubã€Gitlabæ—¢æœ‰æˆç†Ÿçš„å¯¹æŽ¥æœºå™¨äºº.è€Œç¬”è€…ä½¿ç”¨çš„Codingæ˜¯æ²¡æœ‰ä¸Žé’‰é’‰åšå¯¹æŽ¥çš„,æ­¤æ—¶å¯è‡ªå®šä¹‰æœºå™¨äººå®žçŽ°,æœ‰å…´è¶£çš„åŒå­¦å¯å‚è€ƒä¸Šé¢çš„æ•™ç¨‹è‡ªè¡Œå®žçŽ°.]]></content>
      <categories>
        <category>Webhook</category>
      </categories>
      <tags>
        <tag>Dingding</tag>
        <tag>Webhook</tag>
        <tag>Pgyer</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linuxå‡çº§Glibc2.14ä¸­æ–‡ä¹±ç ]]></title>
    <url>%2Fupdate_glibc_issue%2F</url>
    <content type="text"><![CDATA[CenterOSä¸Šé»˜è®¤çš„Glibcç‰ˆæœ¬ä¸º2.12.1,ç”±äºŽæˆ‘ä»¬çš„Androidé¡¹ç›®ä½¿ç”¨åˆ°äº†JNI,å°†é¡¹ç›®æž„å»ºéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šæ—¶ä¼šé‡åˆ°é—®é¢˜&#39;GLIBC_2.14&#39; not found,é‚£ä¹ˆå°±éœ€è¦å‡çº§Glibcè‡³2.14.å‡çº§çš„æ•™ç¨‹ç½‘ä¸Šå¾ˆå¤š,å¯æ˜¯å´æ¼æŽ‰äº†ä¸€ä¸ªæ­¥éª¤,å¯¼è‡´åŽé¢ä¸­æ–‡ä¹±ç çš„é—®é¢˜.æœ¬ç¯‡ä¼šåšä¸€ä¸ªå…¨é¢çš„è§£è¯´ 1. Glibcä¸‹è½½é¦–å…ˆä»ŽGlibc Downloadä¸‹è½½åŒ…,è¿™é‡Œé€‰æ‹©æ˜¯Glibc 2.14 2. å®‰è£…ä¸Šä¼ è‡³æœåŠ¡å™¨,è¿›å…¥ç›®å½•è§£åŽ‹ 1tar zxvf glibc-2.14.tar.gz è¿›å…¥è§£åŽ‹åŽçš„ç›®å½• 1cd glibc-2.14 æŽ¥ç€ 12345mkdir /opt/buildcd build../configure --prefix=/opt/glibc-2.14make -j4make install è‹¥é¡ºåˆ©çš„è¯,è‡³æ­¤åˆ™å®‰è£…æˆåŠŸäº†. issue1. åœ¨make installè¿‡ç¨‹ä¸­å‡ºçŽ°é”™è¯¯: 1Can&apos;t open configuration file /opt/glibc-2.14/etc/ld.so.conf: No such file or directory ç¼ºå°‘äº†æŠ¥é”™çš„ç¼–è¯‘æ–‡ä»¶ld.so.conf.é€šè¿‡findå‘½ä»¤æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶é…ç½® ç„¶åŽæ‹·è´æ–‡ä»¶è‡³å¯¹åº”æ–‡ä»¶ç›®å½•,ç»§ç»­ç¼–è¯‘ 12cp /etc/ld.so.conf /opt/glibc-2.14/etc/ make install ç¼–è¯‘æˆåŠŸ,æŽ¥ç€å®šä¹‰ä¸‹çŽ¯å¢ƒå˜é‡å³å¯ 3. è¡¥å……é€šå¸¸çš„æ•™ç¨‹è‡³æ­¤å°±ç»“æŸäº†.æœ€åˆç¬”è€…å‚è€ƒç½‘ä¸Šçš„æ•™ç¨‹ä¹Ÿæ˜¯åšåˆ°è¿™é‡Œ.å½“æ—¶è·‘ç¨‹åºä¹Ÿæ²¡é—®é¢˜,ç›´åˆ°å‰æ®µæ—¶é—´å¤§æ¥¼åœç”µ,æœåŠ¡å™¨é‡å¯åŽ,é€šè¿‡æœåŠ¡å™¨ä¸ŠJenkinsæ‰“åŒ…ä¸Šä¼ åˆ°è’²å…¬è‹±çš„ä¸­æ–‡ä¿¡æ¯å…¨æ˜¯ä¹±ç ! ç›¸å½“äºŽæœåŠ¡å™¨çš„ç¼–ç æ–‡ä»¶ä¸¢å¤±äº†,æ‰€æœ‰ä¸­æ–‡éƒ½ä¼šä¹±ç . æ˜¯å› ä¸ºé—æ¼äº†localedataæœªç¼–è¯‘,åœ¨æœåŠ¡å™¨é‡å¯åŽ,Glibc2.14æ‰¾ä¸åˆ°å¯¹åº”ç‰ˆæœ¬2.14çš„glibc localeæ–‡ä»¶. æ­£ç¡®æ“ä½œæ˜¯,åœ¨make&amp;make installå®ŒæˆåŽç»§ç»­ç¼–è¯‘localåŒ… 1make localedata/install-locales ç¼–è¯‘éœ€è¦ä¸€äº›æ—¶é—´,å®ŒæˆåŽé‡å¯æœåŠ¡å™¨å³å¯ç”Ÿæ•ˆ 1shutdown -r now å‚è€ƒ: http://blog.csdn.net/clirus/article/details/62425498 å‚è€ƒ: http://blog.csdn.net/fzuzhanghao1993/article/details/77650500]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[IDEA+Gradleåˆ›å»ºMyBatis+SpringMVCé¡¹ç›®]]></title>
    <url>%2Fssm_build%2F</url>
    <content type="text"><![CDATA[Gradleæ˜¯ä¸€ä¸ªåŸºäºŽApache Antå’ŒApache Mavenæ¦‚å¿µçš„é¡¹ç›®è‡ªåŠ¨åŒ–æž„å»ºå·¥å…·.å®ƒä½¿ç”¨ä¸€ç§åŸºäºŽGroovyçš„ç‰¹å®šé¢†åŸŸè¯­è¨€(DSL)æ¥å£°æ˜Žé¡¹ç›®è®¾ç½®,æŠ›å¼ƒäº†åŸºäºŽXMLçš„å„ç§ç¹çé…ç½®. IDEA å…¨ç§°IntelliJ IDEA,æ˜¯javaè¯­è¨€å¼€å‘çš„é›†æˆçŽ¯å¢ƒ,IntelliJåœ¨ä¸šç•Œè¢«å…¬è®¤ä¸ºæœ€å¥½çš„javaå¼€å‘å·¥å…·ä¹‹ä¸€,å°¤å…¶åœ¨æ™ºèƒ½ä»£ç åŠ©æ‰‹ã€ä»£ç è‡ªåŠ¨æç¤ºã€é‡æž„ã€J2EEæ”¯æŒã€Antã€JUnitã€CVSæ•´åˆã€ä»£ç å®¡æŸ¥ã€ åˆ›æ–°çš„GUIè®¾è®¡ç­‰æ–¹é¢çš„åŠŸèƒ½å¯ä»¥è¯´æ˜¯è¶…å¸¸çš„. ä»¥ä¸Šä¸ºç™¾åº¦çš„ç®€ä»‹.ä»Žäº‹Androidçš„ç«¥éž‹åº”è¯¥ä¸éš¾å‘çŽ°Gradleä»¥åŠAndroid Studioçš„å¼º(hen)å¤§(ka).ðŸ¤«è€ŒASæ˜¯åŸºäºŽIntelliJ IDEAå¼€å‘çš„.ä¹ æƒ¯äº†Gradleçš„ä¾¿æ·,äºŽæ˜¯å¼€å§‹åŸºäºŽGradle+IDEAæž„å»ºJavaé¡¹ç›®. çŽ¯å¢ƒå‡†å¤‡1. æ•°æ®åº“MySqlåœ¨MySql Downloadsä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬å¹¶å®‰è£… æ­¤å¤„ç¬”è€…åœ¨macOSä¸Šå®‰è£…5.7.21åŽæ‰“å¼€ç³»ç»Ÿåå¥½è®¾ç½®,é‡åˆ°æ— æ³•åŠ è½½MySqlé¢æ¿çš„é—®é¢˜.ä¸€ç•ªæœç´¢ðŸ”åŽå‘çŽ°æ˜¯macOSç‰ˆæœ¬ä¸ŽMySqlä¸å…¼å®¹,é€‰æ‹©ä½Žç‰ˆæœ¬çš„MySqlå¦‚5.6.39å³å¯. 2. IntelliJ IDEAè¯·è‡ªè¡Œå®‰(po)è£…(jie). 3. Tomcatè¯·è‡ªè¡Œä¸‹è½½è§£åŽ‹.å¦‚è‹¥æ˜¯macOSæˆ–æ˜¯Linuxä¸Šè§£åŽ‹åŽéœ€è¿›å…¥binç›®å½•æ‰§è¡Œä¸‹å‘½ä»¤chmod u+x *.shä¿®æ”¹æƒé™ åˆ›å»ºé¡¹ç›®ç‚¹å‡» Create New Project é€‰æ‹©åŸºäºŽGradleçš„Java Webé¡¹ç›® å¡«å†™GroupIdå’ŒArtifactId é€‰æ‹©gradle.å¯ä½¿ç”¨é»˜è®¤çš„,å¯ä½¿ç”¨æœ¬åœ°çš„ æŽ¥ç€é€‰æ‹©é¡¹ç›®ç›®å½•,åŸºæœ¬é¡¹ç›®åˆ›å»ºå¥½äº†,æŽ¥ä¸‹æ¥è¿›å…¥æ–‡ä»¶é…ç½® æ–‡ä»¶é…ç½®é¦–å…ˆåˆ›å»ºjavaå’Œresourcesç›®å½•,å¹¶ä¸”åˆ›å»ºåŒ…ä»¥åŠweb.xml. log4j.properties12345678910111213141516171819#è®¾ç½®æ—¥å¿—çš„çº§åˆ«ï¼Œå®šä¹‰æ—¥å¿—ä¿¡æ¯çš„è¾“å‡ºç›®çš„log4j.rootLogger=DEBUG, A1 ,R#å®šä¹‰A1çš„è¾“å‡ºç›®çš„åœ°ä¸ºæŽ§åˆ¶å°log4j.appender.A1=org.apache.log4j.ConsoleAppender#å¸ƒå±€ä¸º PatternLayout å¯ä»¥çµæ´»åœ°æŒ‡å®šå¸ƒå±€æ¨¡å¼ã€‚log4j.appender.A1.layout=org.apache.log4j.PatternLayout#è®¾ç½®è¾“å‡ºæ ¼å¼log4j.appender.A1.layout.ConversionPattern=%-d&#123;yyyy-MM-dd HH\:mm\:ss&#125; [%c]-[%p] %m%n#å®šä¹‰Rçš„è¾“å‡ºç›®çš„åœ°ä¸ºæ–‡ä»¶ï¼Œå¹¶ä¸”æ–‡ä»¶å¤§å°åˆ°è¾¾æŒ‡å®šå°ºå¯¸çš„æ—¶å€™äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶log4j.appender.R=org.apache.log4j.RollingFileAppender#è®¾ç½®è¾“å‡ºçš„æ–‡ä»¶åœ°å€log4j.appender.R.File=/Users/xx/Documents/ServerLog#è®¾ç½®æ–‡ä»¶å¤§å°ä¼Ÿ100 kb æ–‡ä»¶åˆ°è¾¾100æ—¶ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œ#MaxBackupIndex æœ€å¤§è®°å½•çš„æ–‡ä»¶æ•°ä¸º1 æŸ¥è¿‡ä¸€ä¸ªæ–‡ä»¶åˆ é™¤æ–‡ä»¶è¾ƒæ—©çš„ã€‚log4j.appender.R.MaxFileSize=100KB log4j.appender.R.MaxBackupIndex=1#ä»¥ä¸‹å’Œä¸Šé¢ä¸€æ ·log4j.appender.R.layout=org.apache.log4j.PatternLayoutlog4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n ä»¥ä¸Šè¾“å‡ºæ–‡ä»¶åœ°å€è‡ªè¡Œæ›´æ”¹ generatorConfig.xml1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE generatorConfiguration PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN" "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;&lt;generatorConfiguration&gt; &lt;classPathEntry location="$&#123;jarDirection&#125;"/&gt; &lt;context id="mysql" targetRuntime="MyBatis3"&gt; &lt;jdbcConnection driverClass="$&#123;driverClass&#125;" connectionURL="$&#123;connectionURL&#125;" userId="$&#123;userId&#125;" password="$&#123;password&#125;"&gt; &lt;/jdbcConnection&gt; &lt;javaTypeResolver &gt; &lt;property name="forceBigDecimals" value="false" /&gt; &lt;/javaTypeResolver&gt; &lt;javaModelGenerator targetPackage="$&#123;modelPackage&#125;" targetProject="$&#123;src_main_java&#125;"&gt; &lt;property name="enableSubPackages" value="true" /&gt; &lt;property name="trimStrings" value="true" /&gt; &lt;/javaModelGenerator&gt; &lt;sqlMapGenerator targetPackage="$&#123;sqlMapperPackage&#125;" targetProject="$&#123;src_main_java&#125;"&gt; &lt;property name="enableSubPackages" value="true" /&gt; &lt;/sqlMapGenerator&gt; &lt;javaClientGenerator type="XMLMAPPER" targetPackage="$&#123;mapperPackage&#125;" targetProject="$&#123;src_main_java&#125;"&gt; &lt;property name="enableSubPackages" value="true" /&gt; &lt;/javaClientGenerator&gt; &lt;!-- æ¯ä¸€ä¸ªæ•°æ®åº“è¡¨éƒ½å¯¹åº”ä¸€ä¸ªå¯¹åº”çš„tableå±žæ€§ --&gt; &lt;table tableName="book" domainObjectName="Book"&gt; &lt;/table&gt; &lt;/context&gt;&lt;/generatorConfiguration&gt; gradle.properties123456# ç”Ÿæˆçš„modelç±»æ‰€åœ¨åŒ…modelPackage=com.lhalcyon.webhook.domain# ç”Ÿæˆçš„mapperæŽ¥å£ç±»æ‰€åœ¨åŒ…mapperPackage=com.lhalcyon.webhook.mapper# ç”Ÿæˆçš„mapper xmlæ–‡ä»¶æ‰€åœ¨åŒ…sqlMapperPackage=com.lhalcyon.webhook.mapper ä¸ºäº†æ–¹ä¾¿æ‰«æ,å°†mapper xmlä»¥åŠæŽ¥å£ç±»æ”¾åœ¨äº†åŒä¸€åŒ…ä¸‹äº† ðŸ˜• jdbc-mysql.properties12345678910# å°†jdbc.jarDirectionåŽçš„å†…å®¹æ›´æ”¹ä¸ºgradleä¸‹è½½çš„# mysql-connector-java-5.1.x.jaræ‰€åœ¨çš„è·¯å¾„ï¼Œgradleè‡ªåŠ¨ä¸‹è½½çš„è·¯å¾„å¦‚ä¸‹æ‰€ç¤ºjdbc.jarDirection=/Users/ceyx/.gradle/caches/modules-2/files-2.1/mysql/mysql-connector-java/5.1.38/dbbd7cd309ce167ec8367de4e41c63c2c8593cc5/mysql-connector-java-5.1.38.jarjdbc.driverClassName=com.mysql.jdbc.Driverjdbc.url=jdbc:mysql://localhost:3306/halcyonjdbc.user=rootjdbc.pass=root è‡ªè¡Œå¡«å†™jdbc.jarDirectionè·¯å¾„ build.gradle123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596group 'com.lhalcyon'version '1.0-SNAPSHOT'apply plugin: 'java'apply plugin: 'war'sourceCompatibility = 1.8repositories &#123; mavenCentral()&#125;configurations &#123; mybatisGenerator&#125;// è¯»å–configæ–‡ä»¶å¤¹ä¸­å¯¹åº”çš„é…ç½®æ–‡ä»¶ext&#123; def prop = new Properties(); file("src/main/resources/config/mybatis/jdbc-mysql.properties") .withInputStream &#123; prop.load(it) &#125; file("src/main/resources/config/mybatis/gradle.properties") .withInputStream &#123; prop.load(it) &#125; prop.each &#123; project.extensions.add("$it.key",it.value); &#125;&#125;dependencies &#123; testCompile group: 'junit', name: 'junit', version: '4.12' compile 'org.codehaus.groovy:groovy-all:2.3.11' compile 'jstl:jstl:1.2' compile 'org.springframework:spring-aop:4.2.4.RELEASE' compile 'org.springframework:spring-context:4.2.4.RELEASE' compile 'org.springframework:spring-beans:4.2.4.RELEASE' compile 'org.springframework:spring-web:4.2.4.RELEASE' compile 'org.springframework:spring-webmvc:4.2.4.RELEASE' compile 'org.springframework:spring-tx:4.2.4.RELEASE' compile 'org.springframework:spring-jdbc:4.2.4.RELEASE' compile 'org.springframework:spring-test:4.2.4.RELEASE' compile 'mysql:mysql-connector-java:5.1.38' compile 'org.mybatis.generator:mybatis-generator-core:1.3.2' compile 'org.mybatis:mybatis-spring:1.2.3' compile 'org.mybatis:mybatis:3.3.0' compile 'junit:junit:4.12' compile group: 'commons-dbcp', name: 'commons-dbcp', version: '1.4' compile group: 'org.aspectj', name: 'aspectjweaver', version: '1.8.13' compile group: 'log4j', name: 'log4j', version: '1.2.17' mybatisGenerator 'org.mybatis.generator:mybatis-generator-core:1.3.2' mybatisGenerator 'mysql:mysql-connector-java:5.1.38'&#125;// åˆ©ç”¨antåˆ›å»ºä¸€ä¸ªè‡ªåŠ¨ç”ŸæˆMyBatisç›®å½•æ–‡ä»¶çš„tasktask mybatisGenerate &lt;&lt; &#123; ant.properties['targetProject'] = projectDir.path ant.properties['jarDirection'] = project['jdbc.jarDirection'] ant.properties['driverClass'] = project['jdbc.driverClassName'] ant.properties['connectionURL'] = project['jdbc.url'] ant.properties['userId'] = project['jdbc.user'] ant.properties['password'] = project['jdbc.pass'] ant.properties['src_main_java'] = sourceSets.main.java.srcDirs[0].path ant.properties['src_main_resources'] = sourceSets.main.resources.srcDirs[0].path ant.properties['modelPackage'] = project['modelPackage'] ant.properties['mapperPackage'] = project['mapperPackage'] ant.properties['sqlMapperPackage'] = project['sqlMapperPackage'] ant.taskdef( name: 'mbgenerator', classname: 'org.mybatis.generator.ant.GeneratorAntTask', classpath: configurations.mybatisGenerator.asPath ) ant.mbgenerator(overwrite: true, configfile: 'src/main/resources/config/mybatis/generatorConfig.xml', verbose: true) &#123; propertyset &#123; propertyref(name: 'targetProject') propertyref(name: 'jarDirection') propertyref(name: 'userId') propertyref(name: 'driverClass') propertyref(name: 'connectionURL') propertyref(name: 'password') propertyref(name: 'src_main_java') propertyref(name: 'src_main_resources') propertyref(name: 'modelPackage') propertyref(name: 'mapperPackage') propertyref(name: 'sqlMapperPackage') &#125; &#125;&#125; æŽ¥ç€Syncæˆ–è€…ç‚¹å‡»Import Changes IDEAå°±ä¼šä¸‹è½½ä¾èµ–åŒ…äº†.ä¾èµ–ç‰ˆæœ¬å·å‡æºäºŽMaven Repository spring-mvc.xml å¯¼å…¥ä¾èµ–åŽ,åˆ™å¯ç›´æŽ¥åˆ›å»ºspringç›¸å…³xml 123456789101112131415161718192021222324&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xmlns:mvc="http://www.springframework.org/schema/mvc" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd"&gt; &lt;!-- è‡ªåŠ¨æ‰«ææŽ§åˆ¶å™¨ --&gt; &lt;context:component-scan base-package="com.lhalcyon.webhook.controller"/&gt; &lt;!-- è§†å›¾æ¸²æŸ“ --&gt; &lt;bean id="internalResourceViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt; &lt;property name="prefix" value="/WEB-INF/views/"/&gt; &lt;property name="suffix" value=".jsp"/&gt; &lt;/bean&gt; &lt;!-- æŽ§åˆ¶å™¨æ˜ å°„å™¨å’ŒæŽ§åˆ¶å™¨é€‚é…å™¨ --&gt; &lt;mvc:annotation-driven/&gt; &lt;!-- é™æ€èµ„æºæ˜ å°„å™¨ --&gt; &lt;mvc:resources mapping="/statics/**" location="/WEB-INF/statics/" /&gt;&lt;/beans&gt; applicationContext-dao.xml123456789101112131415161718192021222324252627282930313233343536&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"&gt; &lt;!-- åŠ è½½é…ç½®æ–‡ä»¶ --&gt; &lt;context:property-placeholder location="classpath:config/mybatis/jdbc-mysql.properties" /&gt; &lt;!-- æ•°æ®åº“è¿žæŽ¥æ±  --&gt; &lt;bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"&gt; &lt;property name="driverClassName" value="$&#123;jdbc.driverClassName&#125;" /&gt; &lt;property name="url" value="$&#123;jdbc.url&#125;" /&gt; &lt;property name="username" value="$&#123;jdbc.user&#125;" /&gt; &lt;property name="password" value="$&#123;jdbc.pass&#125;" /&gt; &lt;property name="maxActive" value="10" /&gt; &lt;property name="maxIdle" value="5" /&gt; &lt;/bean&gt; &lt;!-- mapperé…ç½® --&gt; &lt;!-- è®©springç®¡ç†sqlsessionfactory ä½¿ç”¨mybatiså’Œspringæ•´åˆåŒ…ä¸­çš„ --&gt; &lt;bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"&gt; &lt;!-- æ•°æ®åº“è¿žæŽ¥æ±  --&gt; &lt;property name="dataSource" ref="dataSource" /&gt; &lt;!-- è‡ªåŠ¨æ‰«æmapping.xmlæ–‡ä»¶ --&gt; &lt;!--&lt;property name="mapperLocations" value="classpath*:com/lhalcyon/mapper/*.xml"/&gt;--&gt; &lt;/bean&gt; &lt;!-- é…ç½®Mapperæ‰«æå™¨ --&gt; &lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt; &lt;property name="basePackage" value="com.lhalcyon.webhook.mapper"/&gt; &lt;/bean&gt;&lt;/beans&gt; applicationContext-service.xml1234567891011121314&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"&gt; &lt;!-- é…ç½®åŒ…æ‰«æå™¨ --&gt; &lt;context:component-scan base-package="com.lhalcyon.webhook.service"/&gt;&lt;/beans&gt; applicationContext-trans.xml1234567891011121314151617181920212223242526272829303132&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"&gt; &lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt; &lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; &lt;!-- æ•°æ®æº --&gt; &lt;property name="dataSource" ref="dataSource" /&gt; &lt;/bean&gt; &lt;!-- é€šçŸ¥ --&gt; &lt;tx:advice id="txAdvice" transaction-manager="transactionManager"&gt; &lt;tx:attributes&gt; &lt;!-- ä¼ æ’­è¡Œä¸º --&gt; &lt;tx:method name="insert*" propagation="REQUIRED" /&gt; &lt;tx:method name="delete*" propagation="REQUIRED" /&gt; &lt;tx:method name="update*" propagation="REQUIRED" /&gt; &lt;tx:method name="query*" propagation="SUPPORTS" read-only="true" /&gt; &lt;tx:method name="get*" propagation="SUPPORTS" read-only="true" /&gt; &lt;/tx:attributes&gt; &lt;/tx:advice&gt; &lt;!-- åˆ‡é¢ --&gt; &lt;aop:config&gt; &lt;aop:advisor advice-ref="txAdvice" pointcut="execution(* com.lhalcyon.webhook.service.*.*(..))" /&gt; &lt;/aop:config&gt;&lt;/beans&gt; web.xml12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0"&gt; &lt;!-- åˆå§‹åŒ–spring å®¹å™¨ --&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:config/spring/applicationContext-*.xml&lt;/param-value&gt; &lt;/context-param&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt; &lt;!-- é…ç½®å‰ç«¯æŽ§åˆ¶å™¨ --&gt; &lt;servlet&gt; &lt;servlet-name&gt;index-dispather&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath*:config/spring/spring-mvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;index-dispather&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;!-- è§£å†³postä¹±ç é—®é¢˜ --&gt; &lt;filter&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;utf-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt;&lt;/web-app&gt; Tomcatéƒ¨ç½²Run-&gt;Edit Configurations æœ‰fixé¡¹ç‚¹å‡»é…ç½®å³å¯,ç„¶åŽè¿è¡Œ. MyBatisé…ç½®æ•°æ®åº“ç®¡ç†å·¥å…·ç¬”è€…ä½¿ç”¨çš„æ˜¯ é¦–å…ˆåˆ›å»ºæ•°æ®åº“halcyon,æŽ¥ç€åˆ›å»ºbookè¡¨,ç”¨äºŽåŽé¢çš„mybatis generator 12345CREATE TABLE book ( book_id INT PRIMARY KEY AUTO_INCREMENT, book_name VARCHAR(30) NOT NULL, author VARCHAR(20) default 'ä½šå') ç„¶åŽåœ¨gradleåˆ›å»ºmybatis generator task è¿è¡Œtask è¿è¡ŒæˆåŠŸåŽ,ä¼šç”Ÿæˆä¸Žæ•°æ®åº“è¡¨å¯¹åº”çš„java beanä¸Ždaoæ–‡ä»¶,å³é¡¹ç›®é‡Œçš„Book.javaã€BookExample.javaã€BookMapper.xmlã€BookMapper.java generatorConfig.xmlé…ç½®å‚æ•°å¯è‡ªè¡Œæœç´¢è¡¥å……ä¿®æ”¹ðŸ¤”.æ‰‹åŠ¨è¦†å†™ä¸‹Bookçš„toStringæ–¹æ³•æ–¹ä¾¿æ—¥å¿—è¾“å‡º æµ‹è¯•ä¸ºäº†æ»¡è¶³åŒæ—¶æµ‹è¯•Springã€SpringMVCã€Mybatis,ç¬”è€…å»ºç«‹ä¸€ä¸ªControlleré€šè¿‡Getè¯·æ±‚è¿›è¡ŒCURDæ“ä½œ. Service1234567891011121314151617181920212223242526272829@Servicepublic class BookServiceImpl implements BookService &#123; @Autowired private BookMapper bookMapper; @Override public void insertBook(Book book) &#123; bookMapper.insert(book); &#125; @Override public void updateBook(Book book) &#123; bookMapper.updateByPrimaryKey(book); &#125; @Override public List&lt;Book&gt; getAllBooks() &#123; BookExample example = new BookExample(); return bookMapper.selectByExample(example); &#125; @Override public void deleteBookById(int bookId) &#123; BookExample example = new BookExample(); example.createCriteria().andBookIdEqualTo(bookId); bookMapper.deleteByExample(example); &#125;&#125; Controller1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950@RestControllerpublic class BookController &#123; private static final Logger logger = Logger.getLogger(BookController.class); @Autowired private BookService bookService; @RequestMapping(value = "/insert",method = RequestMethod.GET) public String insert(String bookName,String author)&#123; Book book = new Book(); book.setBookName(bookName); book.setAuthor(author); bookService.insertBook(book); return queryStrings(); &#125; @RequestMapping("/update") public String updateAuthor(int bookId,String bookName,String author)&#123; Book book = new Book(); book.setBookId(bookId); book.setBookName(bookName); book.setAuthor(author); bookService.updateBook(book); return queryStrings(); &#125; @RequestMapping("/delete") public String deleteBook(int bookId)&#123; bookService.deleteBookById(bookId); return queryStrings(); &#125; @RequestMapping("/find_all") public String getAllBooks()&#123; List&lt;Book&gt; books = bookService.getAllBooks(); logger.info(books); return books.toString(); &#125; private String queryStrings()&#123; List&lt;Book&gt; allBooks = bookService.getAllBooks(); return allBooks.toString(); &#125;&#125; ç›´æŽ¥é€šè¿‡è¯·æ±‚åœ°å€,èŽ·å¾—ç»“æžœ æ’å…¥: 1http://localhost:8080/webhook/insert?bookName=java&amp;author=jack æ‰§è¡ŒåŽç›´æŽ¥å°†æ•°æ®åº“ä¸­æ‰€æœ‰bookè®°å½•è¾“å‡º,æ–¹ä¾¿è§‚å¯Ÿ. å…¶å®ƒæ“ä½œç±»ä¼¼ æ›´æ–°: 1http://localhost:8080/webhook/update?bookId=3&amp;bookName=go&amp;author=joe åˆ é™¤: 1http://localhost:8080/webhook/delete?bookId=4 æŸ¥è¯¢(æ‰€æœ‰): 1http://localhost:8080/webhook/find_all å¦‚è‹¥å‘ç”Ÿ500 Invalid bound statement (not found)ç±»ä¼¼é”™è¯¯,ä¸€èˆ¬æ˜¯æ²¡æœ‰æ‰«æåˆ°Mapper.xml.å…¶ä¸­ä¸€ç§æƒ…å†µä¸‹æ˜¯xmlæ ¹æœ¬æ²¡è¢«æ‰“åŒ…è¿›war.éœ€è¦åœ¨build.gradleä¸­è¿›è¡Œé…ç½®,å¹¶ä¸”é…ç½®åŽSyncæˆ–Import Changes,å†é‡æ–°ç”¨å‘½ä»¤./gradlew buildæ‰å¯ç”Ÿæ•ˆ. 123456//å°†srcæ–‡ä»¶å¤¹ä¸­çš„èµ„æºæ–‡ä»¶åŒæ—¶æ‰“åŒ…processResources &#123; from(&apos;src/main/java&apos;) &#123; include &apos;**/*.xml&apos; &#125;&#125; è‡³æ­¤SpringMVC+MyBatis+Gradleé¡¹ç›®å·²ç»æž„å»ºæµ‹è¯•å®Œæ¯•. ä»£ç å·²ä¸Šä¼ GayHub,æ–‡ç« è‹¥å¯¹å„ä½å¤§ä½¬æœ‰å¸®åŠ©,éº»çƒ¦é¡ºæ‰‹ç‚¹ä¸ªstar~ â¤ï¸ å„ä½å¯èƒ½å‘çŽ°äº†,SSMé…ç½®èµ·æ¥æ¯”è¾ƒç¹ç,ç›¸æ¯”ä¹‹ä¸‹,SpringBootå°±ç²¾ç®€äº†è®¸å¤š.åŽé¢æœ‰æœºä¼š,æˆ‘ä»¬å†æ¥ç»†è¯´ ðŸ¤’ å‚è€ƒ: https://www.cnblogs.com/bojuetech/p/5844413.html å‚è€ƒ: http://blog.csdn.net/kingboyworld/article/details/78251425]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>IntelliJ</tag>
        <tag>Spring</tag>
        <tag>SpringMVC</tag>
        <tag>MyBatis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Š]]></title>
    <url>%2Fas_warning%2F</url>
    <content type="text"><![CDATA[Android Studioç‰ˆæœ¬å…¼å®¹Apiè­¦å‘Šæœ€è¿‘åœ¨å¼€å‘ä¸­,ç»„å†…çš„å°ä¼™ä¼´åœ¨å¼€å‘ä¸­ä½¿ç”¨äº†é«˜ç‰ˆæœ¬SDK25çš„Api,ä½†æ˜¯æˆ‘ä»¬çš„é¡¹ç›®æœ€ä½Žå…¼å®¹14,å› æ­¤æµ‹è¯•åœ¨5.1ä¸Šçš„æ‰‹æœºç›´æŽ¥å°±å´©æºƒäº†,é—®å…¶åœ¨å¼€å‘ä¸­æ²¡æœ‰çœ‹åˆ°è­¦å‘Šå—,å›žå¤è¯´ç¡®å®žæ²¡çœ‹åˆ°.åŽæ¥æŸ¥ç©¶ä¸€ä¸‹,ä»–çš„å·¥å…·ä¸Šç¡®å®žæ²¡æœ‰æ˜¾ç¤º.æœ¬æ–‡ç®€è¿°ä¸‹å¦‚ä½•æ‰‹åŠ¨åŽ»è°ƒæ•´å…¼å®¹Apiçš„æç¤ºç­‰çº§,é¿å…åœ¨å¼€å‘ä¸­ç”¨åˆ°é«˜ç‰ˆæœ¬çš„Apiå´ä¸è‡ªå¯Ÿ. é¦–å…ˆwinç”µè„‘æ˜¯æ‰“å¼€Android Studioçš„ Setting ,macæ˜¯æ‰“å¼€Android Studioçš„ Preferences é€‰æ‹©Editorä¸­çš„Inspections å¯¹Calling new methods on older versionsè¿›è¡Œå‹¾é€‰å¹¶ä¸”é…ç½®ä¸ºErrorçº§åˆ« å¦‚æ­¤ç®€å•å³å¯æžå®š.å¦‚é‡åˆ°å…¶ä»–è­¦å‘Š,é”™è¯¯ä»£ç æ²¡æç¤ºä¹Ÿå¯ç±»ä¼¼è¿›è¡Œæ“ä½œé…ç½®.]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android Studio</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Xcodeä»£ç æç¤ºé—®é¢˜å¤„ç†]]></title>
    <url>%2Fxcode-idiot%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨å†™Swift.å¯¹äºŽç¬”è€…è¿™ç§è¢«JetBrainsçš„å‡ å¤§IDEå·¥å…·ç»™æƒ¯åçš„å¼€å‘è€…,Xcodeçš„ä»£ç æç¤ºçœŸæ˜¯æ— åŠ›åæ§½,å…ˆä¸è®ºæ™ºèƒ½æç¤ºåº¦,å°±è¿žåŸºæœ¬çš„æç¤ºä¹Ÿç»å¸¸å‡ºä¸æ¥.è¿™é‡Œå°±ç®€å•æ€»ç»“ä¸‹iOSåŒäº‹ä¼ æŽˆçš„å‡ æ‹›è§£å†³åŠžæ³• 1.Clean Projectæœ€ç›´æŽ¥çš„åŠžæ³•å°±æ˜¯æ¸…ç©ºé¡¹ç›®. å¯è§†åŒ–æŒ‰é’®å…¥å£å†å“ªè¯·è‡ªè¡ŒæŸ¥æ‰¾,ç¬”è€…ä¸€èˆ¬æ˜¯ç”¨Command+Shift+Kè¿›è¡Œæ¸…ç©º,æ­¤æ–¹æ³•ä¸€èˆ¬æœ‰æ•ˆ,ç¼ºç‚¹æ˜¯ä¼šé‡æ–°ç¼–è¯‘é¡¹ç›®,æ¯”è¾ƒæ…¢ 2.æ¸…ç©ºXcodeç¼“å­˜å‰å¾€Xcodeçš„ç¼“å­˜ç›®å½•,æ¸…ç©ºé¡¹ç›®ç¼–è¯‘ç¼“å­˜. å…·ä½“æ“ä½œä¸ºå³é”®Finderå‰å¾€æ–‡ä»¶å¤¹æ–‡ä»¶å¤¹è·¯å¾„ä¸º/ç”¨æˆ·/ceyx/èµ„æºåº“/Developer/Xcode/DerivedData å…¶ä¸­ceyx æ›¿æ¢ä¸ºè‡ªå·±çš„ç”¨æˆ·å,åˆ é™¤ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶,ç„¶åŽé‡æ–°æ‰“å¼€Xcode,ç¼–è¯‘. æ­¤æ–¹æ³•æ¯”1æ›´æ…¢,å¾€å¾€ä¹Ÿæ›´æœ‰æ•ˆ 3.ç»ˆæžå¤§æ‹›å¦‚è‹¥ä¸Šè¿°ä¸¤ç§æ–¹æ³•è¿˜æ— æ•ˆ,åªèƒ½ä½¿ç”¨ç»æ‹›äº†â€¦é‡å¯Xcode,è¿˜ä¸è¡Œå°±é‡å¯ç”µè„‘â€¦ ç¬”è€…é»”é©´æŠ€ç©·äº†,åªèƒ½å……å½“ä¸‹ç½‘å§è€æ¿ä¼ æŽˆä¸‹ç»ˆæžå¤§æ‹›.ðŸ‘» é¢˜å¤–è¯,å¯¹äºŽJetBrainså‡ºå“çš„appcodeè¿˜æœªå°è¯•è¿‡,ä¸çŸ¥å¯¹äºŽXcodeé¡¹ç›®å…¼å®¹åˆ°ä½•ç¨‹åº¦,æ˜¯å¦æ”¯æŒCocoapodç­‰,æœ‰æ—¶é—´ä¼šåŽ»ä½“éªŒä¸‹,å¸Œæœ›è‡³å°‘åœ¨ä»£ç æç¤ºä¸Šèƒ½æ›´å‹å–„äº›ðŸ˜€ ç¬”è€…åŽ»ä½“éªŒäº†ä¸‹Appcode,å…¶ä»£ç æç¤ºå’Œå¿«æ·é”®å¦‚Jetbrainså…¶ä»–äº§å“ä¸€æ ·éžå¸¸æ™ºèƒ½,ä½†æ˜¯ä»£ç ä¸­å¶æœ‰é£˜çº¢,å´å¯ä»¥æˆåŠŸè¿è¡Œ,æ¯”è¾ƒå¹²æ‰°ç¼–ç .å°¤ä¸ºå°´å°¬çš„ä¸€ç‚¹æ˜¯,Appcodeä¸æ”¯æŒstoryboard,å³åœ¨é¡¹ç›®å†…ç‚¹å¼€storyboardæ–‡ä»¶å°±ç›´æŽ¥è·³è½¬xcodeäº†ðŸ˜¥. å¦‚çœŸçš„è¢«Xcodeé€¼ç–¯çš„ç«¥éž‹å¯ä»¥è€ƒè™‘ä¸‹ç”¨AppCodeç¼–ç ,ç”¨Xcodeæ“ä½œstoryboard]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Xcode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux+Jenkins+Gradleæž„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(äºŒ)]]></title>
    <url>%2Flinux-jenkins-gradle_build_android2%2F</url>
    <content type="text"><![CDATA[åœ¨å‰ä¸€ç¯‡æ–‡ç« ä¸­,è¯´æ˜Žäº†åœ¨CenterOSä¸Šè¿›è¡Œä¸€ç³»åˆ—çš„çŽ¯å¢ƒæ­å»º,æœ¬æ–‡å¼€å§‹è¯´æ˜Žå…³äºŽé¡¹ç›®çš„ä¸€ç³»åˆ—é…ç½® Jenkinsé¡¹ç›®é…ç½®é¦–å…ˆåˆ›å»ºä¸€ä¸ªé¡¹ç›®,å°†æž„å»ºä¿æŒçš„å¤©æ•°å’Œä¸ªæ•°è¿›è¡Œé™åˆ¶ æ­¤å¤„æ„Ÿè°¢åŽå°åŒäº‹æç¤º,å› ä¸ºAndroid SDK NDK å°±ç‰¹åˆ«å ç©ºé—´äº†,å¦‚æžœæž„å»ºç¼“å­˜ä¸è¿›è¡Œé™åˆ¶,åˆ™å¾ˆå¿«æœåŠ¡å™¨ç©ºé—´å°±ä¼šä¸è¶³ðŸ¤¥ å‚æ•°æž„å»ºé…ç½®æ‰“åŒ…çŽ¯å¢ƒ åˆ†æ”¯æŒ‡å®š emailè‡ªå®šä¹‰æŽ¥æ”¶è€… æ‰“åŒ…æ—¶é—´æˆ³ å› ä¸ºç¬”è€…çš„å…¬å¸å¯¹æ‰“åŒ…çš„Apkåä»¥åŠæµ‹è¯•ç‰ˆæœ¬å·æ—¶é—´æˆ³æ˜¾ç¤ºçš„è¦æ±‚,å› æ­¤éœ€è¦ä½¿ç”¨åŠ¨æ€å‚æ•° è¿˜æœ‰å…¶ä»–å‚æ•°å‡ä¸Žä»¥ä¸Šç±»ä¼¼,å¯è‡ªè¡Œé…ç½® !!! è®°ä½å°¤ä¸ºé‡è¦çš„æ˜¯è¿™äº›å‚æ•°éƒ½æ˜¯Jenkinsä¸Šé…ç½®çš„Gradleå±žæ€§,å¾—ä¼ é€’åˆ°Appçš„Gradleä¸­ è¿™é‡Œå‹¾é€‰Pass all job parameters as Project properties æºç ç®¡ç†åœ¨æºç ç®¡ç†å¤„é…ç½®Gitè´¦å· è¿™é‡Œçš„*/${BRANCH}å¯¹åº”å‚æ•°é…ç½®æ—¶çš„BRANCH.ä¸ºä»€ä¹ˆè¿™é‡Œåšæˆé€‰æ‹©åž‹å‚æ•°å‘¢,æ˜¯å› ä¸ºåˆ†æ”¯åæ˜¯æœªçŸ¥çš„,åšæˆå¡«å†™çš„è¯,å¯èƒ½åŽ‹æ ¹æ‹‰ä¸åˆ°æŒ‡å®šåˆ†æ”¯çš„ä»£ç ðŸ¤ Gradleæž„å»ºè„šæœ¬å¢žåŠ æž„å»ºåŠ¨ä½œ è¿™é‡Œ${WORKSPACE}æŒ‡çš„æ˜¯Gitæ‹‰ä¸‹çš„æ ¹ç›®å½•.é€”ä¸­é©¬èµ›å…‹ä½ç½®åˆ™ä¸ºé¡¹ç›®æ ¹ç›®å½• è’²å…¬è‹±ä¸Šä¼ å¢žåŠ æž„å»ºåŠ¨ä½œ,å°†Apkä¸Šä¼ è’²å…¬è‹± 1curl -k -F &quot;file=@$&#123;WORKSPACE&#125;/source/é¡¹ç›®æ ¹ç›®å½•/app/apks/$&#123;BUILD_PREFIX&#125;_$&#123;JENKINS_TIME&#125;_$&#123;DAY_VERSION&#125;.apk&quot; -F &quot;uKey=ä½ çš„ukey&quot; -F &quot;_api_key=ä½ çš„apiKey&quot; -F &quot;installType=2&quot; -F &quot;password=ä¸‹è½½å¯†ç &quot; -F &quot;updateDescription=$&#123;DESCRIPTION&#125;&quot; https://www.pgyer.com/apiv1/app/upload ${WORKSPACE}/source/é¡¹ç›®æ ¹ç›®å½•/app/apks/ä¸ºç¬”è€…è‡ªè¡Œä¿®æ”¹çš„Apkè¾“å‡ºç›®å½•,æ­¤å¤„è¯·æ ¹æ®è‡ªå·±çš„é¡¹ç›®è¾“å…¥ç›®å½•è¿›è¡Œä¿®æ”¹ curlå‘½ä»¤å¦‚æžœä½¿ç”¨ä¸äº†å¯è‡ªè¡Œç™¾åº¦è§£å†³ ä»¥ä¸‹ä¸ºè’²å…¬è‹±çš„ä¸Šä¼ Api,å¯ä»¥è‡ªè¡Œè°ƒæ•´å‚æ•° é‚®ä»¶é€šçŸ¥é¦–å…ˆè¿˜æ˜¯è¿›å…¥Jenkins-&gt;ç³»ç»Ÿè®¾ç½® åœ¨Jenkins Locationä¸­è¿›è¡Œé…ç½® Jenkins URL:http://10.50.0.16:8777/jenkins/ ç³»ç»Ÿç®¡ç†å‘˜é‚®ä»¶åœ°å€: Androidå‚æ•°åŒ–æž„å»º&lt;aaa@163.com&gt; æ­¤å¤„Androidå‚æ•°åŒ–æž„å»ºå°±ä¸ºé‚®ä»¶ä¸­çš„å‘é€äººåç§° ç³»ç»Ÿè®¾ç½®ä¸­çš„é»˜è®¤æ”¶ä»¶äººæœ€å¥½ä¸è¦é…ç½®ä¸ºè‡ªå·±,å› ä¸ºå¦‚æžœé…ç½®åŽ,è‡ªå·±å°±æ°¸è¿œåœ¨æ”¶ä»¶äººçš„å‰ç«¯,åŽé¢æƒ³å‘é€ç»™é¢†å¯¼æ—¶,ä¾¿ä¸å¤§å¥½. é‚®ä»¶çš„å†…å®¹å¯è‡ªå®šä¹‰htmlå†…å®¹,äºŒç»´ç ç›´æŽ¥çº¿ä¸‹ç”Ÿæˆè’²å…¬è‹±çš„åœ°å€ç„¶åŽè´´åœ¨é‚®ä»¶å†…å³å¯ Appæœ¬åœ°Gradleé…ç½®é¦–å…ˆåœ¨gradle.propertiesæ–‡ä»¶ä¸­è¿›è¡Œå‚æ•°åŒ–æž„å»ºåœ¨éžJenkinså†™å…¥æƒ…å†µæ—¶çš„ç¼ºçœå€¼é…ç½® åœ¨æœªä½¿ç”¨Jenkinsæž„å»ºçš„æƒ…å†µä¸‹åº”ç”¨ä¼šè¯»æœ¬åœ°çš„è¿™äº›å˜é‡å€¼ ç„¶åŽåœ¨appmoduleä¸‹çš„build.gradleä¸­è¿›è¡Œé…ç½®å†™å…¥çš„å€¼é…ç½® 12345678910111213141516171819202122232425262728293031323334//ä¿®æ”¹ç”Ÿæˆçš„apkåå­—åŠè¾“å‡ºç›®å½•applicationVariants.all &#123; variant -&gt; variant.outputs.each &#123; output -&gt; def newName def oldFile = output.outputFile def outDirectory = oldFile.parent def buildPrefix def showVersion if (variant.buildType.name == &apos;debug&apos;) &#123; buildPrefix = BUILD_PREFIX &#125; else &#123; buildPrefix = BUILD_PREFIX_RELEASE &#125; def jenkinsTime = JENKINS_TIME if (variant.buildType.name == &apos;debug&apos;) &#123; showVersion = buildPrefix + &apos;_&apos; + jenkinsTime + &apos;_&apos; + DAY_VERSION &#125; else &#123; showVersion = APP_VERSION &#125; resValue(&quot;string&quot;, &apos;fund_app_version&apos;, showVersion) def tempFile = file(&quot;build.gradle&quot;) outDirectory = tempFile.parent + &apos;/apks&apos; if (IS_JENKINS) &#123; newName = buildPrefix + &apos;_&apos; + jenkinsTime + &apos;_&apos; + DAY_VERSION + &apos;.apk&apos; &#125; else &#123; newName = &apos;android-v&apos; + APP_VERSION + &apos;-&apos; + variant.productFlavors[0].name + &apos;-&apos; + variant.buildType.name + &apos;.apk&apos; &#125; output.outputFile = new File(outDirectory, newName) &#125;&#125; ç³»ç»Ÿé»˜è®¤çš„è¾“å…¥è·¯å¾„æ˜¯åœ¨buildæ–‡ä»¶å¤¹ä¸­,å±‚çº§æ¯”è¾ƒæ·±.æ­¤å¤„ç¬”è€…å°†apkçš„è¾“å‡ºè·¯å¾„è¿›è¡Œäº†ä¿®æ”¹å¹¶ä¸”å¯¹apkçš„è¾“å‡ºåç§°è¿›è¡Œäº†è°ƒæ•´ è‡³æ­¤,Jenkinså‚æ•°è‡ªåŠ¨åŒ–æž„å»ºå·²ç»å®Œæˆ!ðŸ˜€]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Jenkins</tag>
        <tag>Android</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux+Jenkins+Gradleæž„å»ºAndroidå‚æ•°åŒ–è‡ªåŠ¨æ‰“åŒ…(ä¸€)]]></title>
    <url>%2Flinux-jenkins-gradle_build_android1%2F</url>
    <content type="text"><![CDATA[å‰è¨€å…³äºŽJenkinséƒ¨ç½²å®‰å“è‡ªåŠ¨æ‰“åŒ…æœ‰å¾ˆå¤šå¥½å¤„,å¯ä»¥é…ç½®å‚æ•°è¿›è¡Œæž„å»º,é€‰æ‹©æ‰“åŒ…çŽ¯å¢ƒã€è®¾ç½®Appç‰ˆæœ¬ã€è®¾ç½®åŠ å¯†å¼€å…³ç­‰.èµ·åˆ,ç¬”è€…ä¹Ÿæ˜¯å‚è€ƒäº†ä¸€äº›ç½‘ä¸Šçš„æ•™ç¨‹,å°†è‡ªåŠ¨åŒ–æ‰“åŒ…æž„å»ºåœ¨äº†è‡ªå·±çš„windowså¼€å‘æœºå™¨ä¸Š,è€Œå°†Jenkinsè‡ªåŠ¨æž„å»ºAndroidéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šå’Œæœ¬æœºä¸Šåœ¨çŽ¯å¢ƒæž„å»ºæ–¹é¢ç•¥æœ‰ä¸åŒ,å‘ç•¥å¤š. å‚æ•°åŒ–æž„å»ºçš„è¿‡ç¨‹å´æ˜¯å¾ˆä¾¿æ·,ä½†æ˜¯éƒ¨ç½²åœ¨æœ¬æœºä¸Šè‡ªåŠ¨åŒ–æ‰“åŒ…å…¶å®žæ˜¯ä¸ªä¼šå¢žåŠ æ‰“åŒ…æ—¶é•¿çš„å·¥ä½œ,å› ä¸ºè‡ªåŠ¨åŒ–æ‰“åŒ…ä¼šé¦–å…ˆåŽ»ä»£ç ä»“åº“æ‹‰å–ä»£ç åˆ°æœ¬åœ°,ç„¶åŽå†å¼€å§‹æ‰“åŒ…,è¿™ä¸ªè¿‡ç¨‹ä¼šæ¯”ç›´æŽ¥ç”¨ASæ‰“åŒ…æ…¢å¾ˆå¤š.åŽæ¥æå‡ºéœ€æ±‚,è¦å°†è‡ªåŠ¨åŒ–æ‰“åŒ…é…ç½®åˆ°æœåŠ¡å™¨ä¸Š.è¿ç»´å°±æä¾›äº†ä¸€å°LinuxæœåŠ¡å™¨,å¹¶ä¸”ä¸Šé¢å·²é…ç½®åŽå°çš„è‡ªåŠ¨åŒ–æ‰“åŒ…çŽ¯å¢ƒ,ç”¨çš„æ˜¯Jdk1.7å’Œæ¯”è¾ƒæ—§ç‰ˆæœ¬çš„Jenkins,äºŽæ˜¯æˆ‘ä»¬å¾—å¦è¡Œä½¿ç”¨ç‹¬ç«‹çš„å®‰è£…çš„çŽ¯å¢ƒ. æœ€ç»ˆç»“æžœæœ€ç»ˆæˆ‘ä»¬è¦å®žçŽ°çš„æ˜¯å®žçŽ°Jenkinsä¸Šé¢é…ç½®åº”ç”¨ç‰ˆæœ¬å·ã€Gitåˆ†æ”¯ã€åº”ç”¨æ¸ é“ã€è¯·æ±‚åŸºåœ°å€ã€åº”ç”¨çŽ¯å¢ƒç­‰å‚æ•°,è¿›è¡Œä¸€é”®å‚æ•°åŒ–æž„å»ºæ‰“åŒ…ä¸Šä¼ è‡³è’²å…¬è‹±å¹¶å‘é€é‚®ä»¶é€šçŸ¥ç»™è‡ªå®šä¹‰çš„æŽ¥æ”¶è€… æœ€ç»ˆå®žçŽ°å‚æ•°åŒ–é…ç½®å¤§è‡´å¦‚ä¸‹æ‰€ç¤º: å‘é€é‚®ä»¶(é‚®ä»¶å†…å®¹è¾ƒé•¿,è¿›è¡Œäº†ç›¸åº”ç¼©å°) çŽ¯å¢ƒæ­å»ºæ‰€éœ€çŽ¯å¢ƒ æ–°ç‰ˆJenkins(éœ€èƒ½å®‰è£…å‚æ•°åŒ–æž„å»ºæ’ä»¶) Tomcat æ–°ç‰ˆJenkins Android SDK Android NDK aapt Git Gradle å…¶å®ƒ(è§†è‡ªèº«é¡¹ç›®æ‰€éœ€) CenterOS64ä½å·²æœ‰çŽ¯å¢ƒ Jdk1.7 Tomcat æ—§ç‰ˆJenkins 1. Jdkå®‰è£…åŠé…ç½®ç”±äºŽAndroidå¼€å‘ä½¿ç”¨çš„ Jdk1.8,å› æ­¤ä¸èƒ½å¤ç”¨æœåŠ¡å™¨ä¸ŠçŽ°æœ‰çš„Jdk é¦–å…ˆåŽ»Oracle Downloadsä¸‹è½½ Jdk for Linux.ç¬”è€…ä¸‹è½½çš„æ˜¯jdk-8u131-linux-x64.tar.gz ä¸Šä¼ åˆ°æœåŠ¡å™¨,è¿›å…¥ç›¸å…³ç›®å½•è§£åŽ‹ 1tar -zxvf jdk-8u131-linux-x64.tar.gz å¯å°†ç›®å½•ç§»è‡³å…¶ä»–ç›®å½•.å…¶å®žæœ€å¥½åœ¨è§£åŽ‹å‰å°±å°†åŽ‹ç¼©åŒ…ç§»è‡³ç›®æ ‡ç›®å½• JdkçŽ¯å¢ƒå˜é‡é…ç½®(å¯é€‰) ç”±äºŽåŽå°ä½¿ç”¨äº†JAVA_HOMEã€JENKINS_HOMEç­‰ä¸€ç³»åˆ—çŽ¯å¢ƒå˜é‡å,æ‰€ä»¥æœåŠ¡å™¨ä¸Šé»˜è®¤è°ƒç”¨çš„ä¼šæ˜¯ä»–ä»¬çš„çŽ¯å¢ƒå˜é‡,æˆ‘ä»¬å¼€å‘çš„ä¸€å¥—åªèƒ½åœ¨è‡ªå·±çš„Tomcatã€Jenkinsä¸­è¿›è¡ŒæŒ‡å®š,å…·ä½“ä¸‹æ–‡ä¼šè¿›è¡Œè¯´æ˜Ž 2. Tomcatå®‰è£…åŠé…ç½®é¦–å…ˆåŽ»Tomcat Downloadé€‰æ‹©ç‰ˆæœ¬è¿›è¡Œä¸‹è½½.è¿™é‡Œç¬”è€…é€‰æ‹©çš„æ˜¯apache-tomcat-7.0.79.tar.gz ä¸Šä¼ åˆ°æœåŠ¡å™¨,è¿›å…¥ç›¸å…³ç›®å½•è§£åŽ‹ 1tar -zxv -f apache-tomcat-7.0.79.tar.gz a.ç«¯å£ä¿®æ”¹ç”±äºŽå¸¸è§„tomcatç«¯å£è¢«å·²æœ‰tomcatå ç”¨,å› æ­¤æˆ‘ä»¬éœ€è¦ä¿®æ”¹ç«¯å£ è¿›å…¥confç›®å½•ä¸‹çš„server.xmlä¿®æ”¹,æ­¤å¤„ç¬”è€…æ˜¯ç”¨Vimä¿®æ”¹.ä¸ä¼šç”¨çš„åŒå­¦è¯·å‡ºé—¨å·¦è½¬åº¦å¨˜ðŸ¤” ä¸»è¦ä¿®æ”¹çš„æ˜¯,è®¾ç½®ä¸ºè‡ªå®šä¹‰ç«¯å£å· Tomcat admin port å³æ–‡ä»¶æœ€ä¸Šé¢çš„ç«¯å£å· Http/1.1 port è¿žæŽ¥è®¿é—®çš„ç«¯å£å· AJP/1.3 port b.çŽ¯å¢ƒé…ç½®æŒ‡å®šTomcatè¿è¡Œæ—¶çŽ¯å¢ƒ,åœ¨binç›®å½•ä¸‹ä¿®æ”¹setclasspath.sh ä»¥ä¸‹æ˜¯ç¬”è€…çš„çŽ¯å¢ƒ,è¯·è‡ªè¡Œæ›¿æ¢è·¯å¾„ 123export JAVA_HOME=/usr/android/java/jdk1.8.0_131export JRE_HOME=/usr/android/java/jdk1.8.0_131/jreexport JENKINS_HOME=/home/android/jenkins 3. Gradleå®‰è£…åŠé…ç½®é¦–å…ˆåŽ»Gradle Downloadä¸‹è½½å¯¹åº”Gradleç‰ˆæœ¬,ç¬”è€…ä½¿ç”¨åˆ°çš„æ˜¯gradle-3.3-all.zip ä¸Šä¼ åˆ°æŒ‡å®šç›®å½•è§£åŽ‹ 1unzip gradle-3.3-all.zip ç„¶åŽæ·»åŠ çŽ¯å¢ƒå˜é‡vim /etc/profile,åœ¨çŽ¯å¢ƒå˜é‡é…ç½®å¤„å¢žåŠ ä¸€å¥ 1export GRADLE_HOME=/home/gradle-3.3/bin 4. Android Sdk For Linux å®‰è£…åŠæ›´æ–°è¿™é‡Œä¸‹è½½Sdkè§£åŽ‹éƒ½ä¸æ˜¯éš¾ç‚¹.éš¾ç‚¹åœ¨äºŽå®‰è£…ä¹‹åŽæ›´æ–°çš„é—®é¢˜. ç”¨ASæˆ–è€…Eclipseçš„åŒå­¦è‚¯å®šæŽ¥è§¦è¿‡Sdk Manager,æ­¤å¤„é€‰æ‹©æ›´æ–°åŽè¦æ‰‹åŠ¨ç‚¹Accept Licenseæ‰èƒ½å¯åŠ¨æ›´æ–°.ä½†æ˜¯åœ¨Linuxä¸‹æ²¡æœ‰ç•Œé¢åŒ–çš„å‹¾é€‰å¯ç”¨.å› æ­¤éœ€è¦ç”¨è„šæœ¬æ¥æ›´æ–°.ç½‘ä¸Šæœ‰è¯´å¤åˆ¶Licenseçš„æ–¹æ³•ç¬”è€…è¯•äº†æ— æ•ˆ,ä¹Ÿè®¸æ˜¯å§¿åŠ¿ä¸å¯¹å§,æ­¤å¤„ä¹Ÿæ˜¯è¸©äº†å¾ˆä¹…çš„å‘æ‰æœå‡ºæ¥çš„è§£å†³æ–¹æ³•: æ›´æ–°Sdkæ–¹æ³•ä¼ é€é—¨ è¿™é‡Œå…ˆæ„Ÿè°¢ä¸‹è¯¥ä½œè€…ðŸ‘ è¿™é‡Œä¹Ÿä¸ºä¸æ„¿è·³ä¼ é€é—¨çš„åŒå­¦è¯´æ˜Žä¸€ä¸‹,å°±å‡ ä¸ªæ­¥éª¤. a.æŸ¥çœ‹å¯æ›´æ–°åˆ—è¡¨ åœ¨Sdkçš„toolsç›®å½•ä½¿ç”¨./android list sdk --allæŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨æä¾›çš„SdkåŒ…çš„åºå·,è®°å½•æƒ³è¦æ›´æ–°çš„Sdkåºå· b.ç¼–è¾‘è„šæœ¬ 1234567#!/usr/bin/expectset timeout -1spawn /usr/local/android-sdk-linux/tools/android update sdk -u -a -t 1,2,3,24,25,26,27,28,30,95,96,102,103,104,105,106,107expect &#123; &quot;Do you accept the license&quot; &#123; exp_send &quot;y\r&quot; ; exp_continue &#125; eof&#125; æ­¤å¤„1,2,3,...ä¸ºéœ€è¦ä¸‹è½½çš„Sdkåºå· c.è¿è¡Œè„šæœ¬ å¾…è„šæœ¬è·‘å®Œ,sdkå°±æ›´æ–°å®Œæ¯•äº† æ³¨æ„æ­¤å¤„è„šæœ¬ç”¨åˆ°äº†expect,éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…,æ­¤å¤„æä¾›expectå®‰è£…ä¼ é€é—¨ 5. Ndk for Linuxå®‰è£…å®‰è£…è¾ƒç®€å•,åŽç»­éœ€é…ç½®Jenkinsç³»ç»Ÿå˜é‡,ä¸‹æ–‡ä¼šè¿›è¡Œè¯´æ˜Ž é¡¹ç›®å› ç”¨åˆ°äº†Jni,éœ€è¦å®‰è£…Ndk,å¯æ˜¯åŽæœŸå‘çŽ°åœ¨é¡¹ç›®é‡Œæ¯æ¬¡å‡åŽ»ç¼–è¯‘jniå¯¼è‡´é¡¹ç›®çš„compile sdkä¸èƒ½ä½¿ç”¨é«˜äºŽ23çš„,è‡´ä½¿Instant Runç­‰åŠŸèƒ½ä½¿ç”¨,å¾ˆå½±å“å¼€å‘æ•ˆçŽ‡.åŽæœŸæ”¹åœ¨é¡¹ç›®å¤–ç¼–è¯‘å¥½äº†é™æ€åº“ç„¶åŽæ”¾å…¥é¡¹ç›®ä¸­,è¿™æ ·ä¸ä¼šé™åˆ¶é¡¹ç›®è‡ªèº«çš„SDKç‰ˆæœ¬,å› æ­¤è‹¥æœªä½¿ç”¨JNIçš„é¡¹ç›®,åˆ™å¯è·³è¿‡æ­¤æ­¥éª¤ 6. Gitå®‰è£…åŠçŽ¯å¢ƒå˜é‡é…ç½®ä¸‹è½½å®‰è£…å¹¶é…ç½®çŽ¯å¢ƒå˜é‡ 1export GIT_HOME=/usr/android/git-2.12.2/bin 7. Jenkinså®‰è£…åŠé…ç½®a. ä¸‹è½½ä¸‹è½½Jenkinså°†waråŒ…æ”¾å…¥Tomcatçš„webappsç›®å½•ä¸‹,å¯åŠ¨tomcat ç„¶åŽåœ¨åœ°å€æ è¾“å…¥è·¯å¾„http://localhost:/8777 å…¶ä¸­8777ä¸ºç¬¬äºŒæ­¥ä¸­è‡ªå®šä¹‰çš„ç«¯å£å· b. æ’ä»¶å®‰è£…ç„¶åŽå®‰è£…æ’ä»¶(åŸºæœ¬å‚è€ƒç½‘ä¸Šçš„) 12345678910111213141516171819202122231.Branch API Plugin2.build timeout plugin3.build-name-setter4.Credentials Binding Plugin5.description setter plugin6.Dynamic Parameter Plug-in7.Environment Injector Plugin9.Git plugin10.GIT server Plugin11.Gradle Plugin12.Git Parameter Plug-In13.Pipeline: Basic Steps14.Pipeline: Build Step15.Pipeline: Input Step16.Pipeline: Nodes and Processes17.Pipeline: Stage Step18.Scriptler19.Workspace Cleanup Plugin20.Post-Build Script Plug-in21.Email Extension Plugin22.SSH Slaves plugin23.Timestamper(ä¸æ˜Žä¸ºä»€ä¹ˆå°‘8) å› ä¸ºJenkinsç‰ˆæœ¬ä¸åŒ,å®žé™…ä½¿ç”¨ä¸­å‘çŽ°ç¼ºå¤±ä¸å°‘ ä»¥ä¸‹é™„ä¸Šç¬”è€…æ‰€å®‰è£…çš„æ‰€æœ‰æ’ä»¶(è‹¥æ— é—®é¢˜çš„å¯è·³è¿‡) c. çŽ¯å¢ƒå˜é‡é…ç½®çŽ¯å¢ƒå˜é‡ é¦–å…ˆç‚¹å‡»ç³»ç»Ÿç®¡ç†-&gt;ç³»ç»Ÿè®¾ç½®é…ç½®Jdkã€Android Sdkã€Gradleã€Android NdkçŽ¯å¢ƒå˜é‡(æ­¤å¤„ä¹Ÿå¯é…ç½®Gitç›®å½•,ç¬”è€…æ˜¯å°†Gitç›®å½•é…ç½®åœ¨LinuxçŽ¯å¢ƒå˜é‡ä¸­äº†) å…¶å®ƒå¦‚é‚®ä»¶ç›¸å…³é…ç½®çš„åœ¨ä¸‹ç¯‡ä¼šè¯´æ˜Ž è‡³æ­¤çŽ¯å¢ƒå¤§ä½“ä¸Šé…ç½®å·²ç»å®Œæˆ,ä¸‹ç¯‡å³å¯è¿›å…¥é¡¹ç›®ç›¸å…³é…ç½®]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Jenkins</tag>
        <tag>Android</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ··ç¼–:Swiftè°ƒç”¨Objective-C]]></title>
    <url>%2Fhybrid-compile_swift2oc%2F</url>
    <content type="text"><![CDATA[çŽ¯å¢ƒ Xcode 8.3.3 Swift3.+ æ­¥éª¤1.åˆ›å»ºæ··ç¼–æ¡¥æŽ¥å¤´æ–‡ä»¶ åç§°éšä¾¿å–,æœ€å¥½èƒ½å’Œæ™®é€šheaderæ–‡ä»¶åšåŒºåˆ« 2.é¡¹ç›®é…ç½®æ¡¥æŽ¥æ–‡ä»¶ ç‚¹å‡»å·¥ç¨‹,é€‰ä¸­Build Settings,å­é€‰é¡¹å‹¾é€‰All åœ¨ä¸‹é¢é…ç½®ä¸­æ‰¾åˆ°(æˆ–è€…æœç´¢)Swift Compile - General é…ç½®æ··ç¼–æ¡¥æŽ¥å¤´æ–‡ä»¶ ç‚¹å¼€å›¾ä¸­çº¢åœˆåŒºåŸŸè¿›è¡Œé…ç½®,å¦‚æˆ‘æ‰€å»ºçš„æ–‡ä»¶åœ¨å·¥ç¨‹é‡Œè·¯å¾„ä¸ºMyProject/Hybrid-Compile.h åˆ™é…ç½®ä¹Ÿåº”æ˜¯è¿™ä¸ªè·¯å¾„ ä¿å­˜åŽåœ¨è¯¥å¤´æ–‡ä»¶ä¸­å¼•ç”¨ç›¸åº”OCç±»å¤´æ–‡ä»¶å³å¯åœ¨Swiftä¸­è°ƒç”¨ å¼•ç”¨æ³¨æ„å¦‚æžœæ˜¯é¡¹ç›®å†…çš„OCæ–‡ä»¶ç›´æŽ¥å¼•ç”¨å³å¯ å¦‚æžœæ˜¯Podå¼•ç”¨çš„åº“ä¸­çš„OCæ–‡ä»¶åˆ™éœ€è¦å¸¦ä¸Šå…¶Podä¸­çš„è·¯å¾„]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Xcode</tag>
        <tag>Swift</tag>
      </tags>
  </entry>
</search>
